var WebMolKit;(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ASCENT_FUDGE:()=>ut,AbbrevContainer:()=>Bn,ActivityType:()=>ei,ArrangeComponent:()=>an,ArrangeComponentAnnot:()=>Ue,ArrangeComponentType:()=>je,ArrangeExperiment:()=>ln,ArrangeMolecule:()=>rn,Aspect:()=>we,AspectList:()=>ve,AssayProvenance:()=>Ae,AssayProvenanceHeader:()=>be,Atom:()=>ue,AxisLabeller:()=>ds,BLineType:()=>Fe,BONDARTIFACT_EXTRA_ARENE:()=>Pt,BONDARTIFACT_EXTRA_RESPATH:()=>It,BONDARTIFACT_EXTRA_RESRING:()=>zt,BayesianModel:()=>Dn,BayesianPrediction:()=>Ne,BayesianPredictionModel:()=>Ee,BayesianPredictionOutcome:()=>Se,BayesianSource:()=>Me,BayesianSourceModel:()=>Te,BinaryData:()=>Oe,BinaryDataField:()=>Re,Bond:()=>fe,BondArtifact:()=>Ft,Box:()=>m,BuildSMILES:()=>Rn,ButtonBank:()=>ii,ButtonView:()=>ni,ButtonViewPosition:()=>ti,Chemistry:()=>Bt,CircularFingerprints:()=>Nn,ClipboardProxy:()=>Ii,ClipboardProxyHandler:()=>_i,ClipboardProxyWeb:()=>zi,CommandBank:()=>Ni,ContextSketch:()=>Di,CoordUtil:()=>Zt,DEGRAD:()=>tt,DOM:()=>w,DataSheet:()=>ye,DataSheetColumn:()=>ke,DataSheetStream:()=>On,Dialog:()=>Zn,DotPath:()=>Cn,DotPathBond:()=>Ge,DotPathCharge:()=>Ve,DraggingTool:()=>Ri,DrawCanvas:()=>Li,DrawCanvasDecoration:()=>Oi,DrawExperiment:()=>un,DrawMolecule:()=>mn,EditAtom:()=>Gi,EditBond:()=>Vi,EditCompound:()=>ls,EditPolymer:()=>Ji,EmbedChemistry:()=>ps,EmbedCollection:()=>hs,EmbedMolecule:()=>cs,EmbedReaction:()=>ms,EmbedReactionFacet:()=>os,Experiment:()=>yn,ExperimentComponent:()=>fn,ExperimentComponentType:()=>We,ExperimentEntry:()=>kn,ExperimentMeta:()=>$e,ExperimentMetaApplic:()=>Be,ExperimentMetaRoleType:()=>_e,ExperimentMetaType:()=>Le,ExperimentMetaValue:()=>qe,ExperimentStep:()=>gn,ExtraFieldsWidget:()=>ji,FontData:()=>en,ForeignMolecule:()=>Jt,ForeignMoleculeTransient:()=>Wt,FormatList:()=>qn,FusionBank:()=>es,FusionPermutation:()=>oi,GeomUtil:()=>l,GeomWidget:()=>Ui,GeomWidgetSelType:()=>qi,GeomWidgetType:()=>Bi,Geometry:()=>Yt,Graph:()=>qt,GreenMetrics:()=>Qe,INV_TWOPI:()=>J,KeyCode:()=>Mt,Line:()=>f,MDLMOLReader:()=>oe,MDLMOLWriter:()=>le,MDLMOL_VALENCE:()=>se,MDLSDFReader:()=>re,MDLSDFWriter:()=>de,Matrix:()=>s,MeasurementData:()=>De,MenuProxy:()=>fs,MenuProxyWeb:()=>gs,MetaMolecule:()=>bn,MetaVector:()=>cn,MetalLigate:()=>si,Mixture:()=>wn,MixtureAttributeType:()=>He,MolUtil:()=>Qt,Molecule:()=>ge,MoleculeActivity:()=>ai,MoleculeStream:()=>me,OntologyTree:()=>zn,OptionList:()=>Pi,OutlineMeasurement:()=>dn,Oval:()=>u,POLYMERBLOCK_EXTRA_POLYMER:()=>jt,POLYMERBLOCK_SPECIAL_UNCAPPED:()=>Ut,PeriodicTableWidget:()=>Wi,Permutation:()=>i,PolymerBlock:()=>$t,PolymerBlockConnectivity:()=>Xt,PolymerBlockUnit:()=>Vt,Popup:()=>us,Pos:()=>h,QuantityCalc:()=>Ze,QuantityCalcComp:()=>Ke,QuantityCalcRole:()=>Ie,QuantityCalcStat:()=>ze,QueryFieldsWidget:()=>Hi,QueryTypeAtom:()=>Ht,QueryTypeBond:()=>Gt,QueryUtil:()=>te,QuickHull:()=>d,RADDEG:()=>et,Random:()=>ks,RenderEffects:()=>sn,RenderMnemonicType:()=>Pe,RenderMnemonics:()=>on,RenderPolicy:()=>nn,ResonanceRemover:()=>_t,RollingBall:()=>p,SARTable:()=>xn,SingularValueDecomposition:()=>o,Size:()=>c,SketchUtil:()=>Kt,Sketcher:()=>as,Stereochemistry:()=>vn,TWOPI:()=>Z,TabBar:()=>Fi,TemplateBank:()=>ts,TemplateFusion:()=>ri,TextAlign:()=>Xe,Theme:()=>Pn,ToolBank:()=>ss,ToolBankItem:()=>ns,Tooltip:()=>Qn,Triangulation2D:()=>a,Vec:()=>n,Widget:()=>Jn,XML:()=>g,addText:()=>A,addTooltip:()=>Gn,addTooltipPromise:()=>Vn,angleDiff:()=>it,angleDiffPos:()=>st,angleNorm:()=>nt,blendRGB:()=>O,clearTooltip:()=>Kn,clone:()=>kt,colourAlpha:()=>N,colourCanvas:()=>R,colourCode:()=>S,coordsRoundedRect:()=>ct,deepClone:()=>yt,dictValues:()=>Ct,dom:()=>k,domLegacy:()=>y,drawLine:()=>mt,empiricalScrollerSize:()=>Ot,escapeHTML:()=>wt,eventCoords:()=>I,findNode:()=>dt,findNodes:()=>pt,fltEqual:()=>$,fontSansSerif:()=>ft,formatDate:()=>L,formatDouble:()=>M,fromUTF8:()=>At,getBoundaryPixelsDOM:()=>P,getOffsetPixelsDOM:()=>F,getViewportSize:()=>j,hasInlineCSS:()=>Un,htmlToRGB:()=>E,initWebMolKit:()=>Fn,installInlineCSS:()=>Xn,invZ:()=>V,isDef:()=>q,jsonPrettyPrint:()=>Tt,maxArray:()=>lt,minArray:()=>at,newElement:()=>b,nodeText:()=>B,norm2_xy:()=>Y,norm2_xyz:()=>W,norm_xy:()=>U,norm_xyz:()=>X,notDef:()=>_,orBlank:()=>xt,pathRoundedRect:()=>ht,pause:()=>Dt,pixelDensity:()=>gt,plural:()=>T,postJSONURL:()=>St,raiseToolTip:()=>$n,randomInt:()=>Q,readTextURL:()=>Et,realEqual:()=>K,registerAspect:()=>Ce,safeFloat:()=>v,safeInt:()=>C,setBoundaryPixels:()=>z,signum:()=>H,sortAngles:()=>ot,sqr:()=>G,stringSimilarityPermutations:()=>Lt,toUTF8:()=>bt,uniqueAngles:()=>rt,yieldDOM:()=>Nt,zip:()=>vt});class n{static isBlank(t){return null==t||0==t.length}static notBlank(t){return null!=t&&t.length>0}static safeArray(t){return null==t?[]:t}static len(t){return null==t?0:t.length}static arrayLength(t){return null==t?0:t.length}static anyTrue(t){if(null==t)return!1;for(let e of t)if(e)return!0;return!1}static allTrue(t){if(null==t)return!0;for(let e of t)if(!e)return!1;return!0}static anyFalse(t){if(null==t)return!1;for(let e of t)if(!e)return!0;return!1}static allFalse(t){if(null==t)return!0;for(let e of t)if(e)return!1;return!0}static iterAnyTrue(t,e){for(let n of t)if(e(n))return!0;return!1}static iterAllTrue(t,e){for(let n of t)if(!e(n))return!1;return!0}static iterAnyFalse(t,e){for(let n of t)if(!e(n))return!0;return!1}static iterAllFalse(t,e){for(let n of t)if(e(n))return!1;return!0}static swap(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}static duplicate(t){return null==t?[]:t.slice(0)}static append(t,e){return null==t||0==t.length?[e]:((t=t.slice(0)).push(e),t)}static prepend(t,e){return null==t||0==t.length?[e]:((t=t.slice(0)).unshift(e),t)}static concat(t,e){return null==t&&null==e?[]:null==t?e.slice(0):null==e?t.slice(0):t.concat(e)}static remove(t,e){return(t=t.slice(0)).splice(e,1),t}static flatten(t){let e=[];for(let n of t)e.push(...n);return e}static transpose(t){let e=t.length,i=t[0].length,s=n.anyArray(null,i);for(let o=0;o<i;o++){s[o]=n.anyArray(null,e);for(let n=0;n<e;n++)s[o][n]=t[n][o]}return s}static equals(t,e){if(null==t&&null==e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}static equivalent(t,e){const n=null==t?0:t.length;if(n!=(null==e?0:e.length))return!1;for(let i=0;i<n;i++)if(t[i]!=e[i])return!1;return!0}static compareTo(t,e){const n=Math.max(t.length,e.length);for(let i=0;i<n;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return 0}static booleanArray(t,e){let n=new Array(e);return n.fill(t),n}static numberArray(t,e){let n=new Array(e);return n.fill(t),n}static stringArray(t,e){let n=new Array(e);return n.fill(t),n}static anyArray(t,e){let n=new Array(e);return n.fill(t),n}static genericArray(t,e){let n=new Array(e);return n.fill(t),n}static genericBlankArrays(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}static numberMatrix(t,e,i){let s=new Array(e);for(let o=0;o<e;o++)s[o]=n.numberArray(t,i);return s}static funcArray(t,e){let n=new Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n}static first(t){return null==t||0==t.length?null:t[0]}static last(t){return null==t||0==t.length?null:t[t.length-1]}static min(t){if(null==t||0==t.length)return Number.MAX_VALUE;let e=t[0];for(let n=1;n<t.length;n++)e=Math.min(e,t[n]);return e}static max(t){if(null==t||0==t.length)return Number.MIN_VALUE;let e=t[0];for(let n=1;n<t.length;n++)e=Math.max(e,t[n]);return e}static idxMin(t){if(null==t||0==t.length)return-1;let e=0;for(let n=1;n<t.length;n++)t[n]<t[e]&&(e=n);return e}static idxMax(t){if(null==t||0==t.length)return-1;let e=0;for(let n=1;n<t.length;n++)t[n]>t[e]&&(e=n);return e}static range(t){if(null==t||0==t.length)return 0;let e=t[0],n=t[0];for(let i=1;i<t.length;i++)t[i]<e&&(e=t[i]),t[i]>n&&(n=t[i]);return n-e}static reverse(t){let e=[];for(let n=t.length-1;n>=0;n--)e.push(t[n]);return e}static identity0(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=n;return e}static identity1(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=n+1;return e}static identityN(t,e){let n=new Array(e);for(let i=0;i<e;i++)n[i]=i+t;return n}static notMask(t){let e=new Array(t.length);for(let n=t.length-1;n>=0;n--)e[n]=!t[n];return e}static idxGet(t,e){let n=[];for(let i=0;i<e.length;i++)n.push(t[e[i]]);return n}static maskCount(t){if(!t)return 0;let e=0;for(let n=t.length-1;n>=0;n--)t[n]&&e++;return e}static maskIdx(t){let e=[];for(let n=0;n<t.length;n++)t[n]&&e.push(n);return e}static idxMask(t,e){let i=n.booleanArray(!1,e);for(let e of t)i[e]=!0;return i}static maskMap(t){let e=[];for(let n=0,i=0;n<t.length;n++)e.push(t[n]?i++:-1);return e}static maskGet(t,e){let n=[];for(let i=0;i<t.length;i++)e[i]&&n.push(t[i]);return n}static maskEqual(t,e){let n=[];if(e.constructor===Array){let i=e;for(let e=0;e<t.length;e++)n.push(t[e]==i[e])}else for(let i=0;i<t.length;i++)n.push(t[i]==e);return n}static sum(t){if(null==t||0==t.length)return 0;let e=t[0];for(let n=1;n<t.length;n++)e+=t[n];return e}static add(t,e){let n=[];if(e.constructor===Array){let i=e;for(let e=0;e<t.length;e++)n.push(t[e]+i[e])}else for(let i=0;i<t.length;i++)n.push(t[i]+e);return n}static sub(t,e){let n=[];if(e.constructor===Array){let i=e;for(let e=0;e<t.length;e++)n.push(t[e]-i[e])}else for(let i=0;i<t.length;i++)n.push(t[i]-e);return n}static mul(t,e){let n=[];if(e.constructor===Array){let i=e;for(let e=0;e<t.length;e++)n.push(t[e]*i[e])}else for(let i=0;i<t.length;i++)n.push(t[i]*e);return n}static neg(t){let e=t.slice(0);for(let t=e.length-1;t>=0;t--)e[t]*=-1;return e}static setTo(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]=e}static addTo(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]+=e}static mulBy(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]*=e}static setToArray(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]=e[n]}static addToArray(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]+=e[n]}static subFromArray(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]-=e[n]}static mulByArray(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]*=e[n]}static divByArray(t,e){for(let n=null==t?-1:t.length-1;n>=0;n--)t[n]/=e[n]}static idxSort(t){let e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=n;return e.sort(((e,n)=>t[e]<t[n]?-1:t[e]>t[n]?1:0)),e}static sort(t){t.sort(((t,e)=>t-e))}static sorted(t){return t=t.slice(0),this.sort(t),t}static sortedUnique(t){if(null==t||0==t.length)return[];let e=n.uniqueUnstable(t);return"number"==typeof t[0]?this.sort(e):e.sort(),e}static uniqueUnstable(t){return Array.from(new Set(t))}static uniqueStable(t){let e=new Set(t),n=[];for(let i of t)e.has(i)&&(n.push(i),e.delete(i));return n}static maskUnique(t){let e=new Set(t),n=this.booleanArray(!1,t.length);for(let i=0;i<t.length;i++)e.has(t[i])&&(n[i]=!0,e.delete(t[i]));return n}static idxUnique(t){let e=new Set(t),n=[];for(let i=0;i<t.length;i++)e.has(t[i])&&(n.push(i),e.delete(t[i]));return n}static exclude(t,e){const i=n.len(t);if(0==i)return[];let s=new Array(i),o=0;for(let n=0;n<t.length;n++)s[n]=e.indexOf(t[n])<0,s[n]&&o++;return o==i?t:n.maskGet(t,s)}}class i{static parityPerms(t){let e=n.booleanArray(!1,t.length),i=0;for(let n=t.length-1;n>=0;n--)if(e[n])i++;else{let i=n;do{i=t[i],e[i]=!0}while(i!=n)}return i}static parityIdentity(t){return 1&this.parityPerms(t)}static parityOrder(t){if(t.length<=1)return 0;if(2==t.length)return t[0]<t[1]?0:1;if(3==t.length){let e=1;return t[0]<t[1]&&e++,t[0]<t[2]&&e++,t[1]<t[2]&&e++,1&e}if(4==t.length){let e=0;return t[0]<t[1]&&e++,t[0]<t[2]&&e++,t[0]<t[3]&&e++,t[1]<t[2]&&e++,t[1]<t[3]&&e++,t[2]<t[3]&&e++,1&e}let e=[],n=t.slice(0);n.sort();for(let i=0;i<t.length;i++)e.push(n.indexOf(t[i]));return this.parityIdentity(e)}static smallPermutation(t){return 1==t?this.PERM1:2==t?this.PERM2:3==t?this.PERM3:4==t?this.PERM4:null}static allPermutations(t){if(t<=this.SMALL_PERMS)return this.smallPermutation(t);for(;this.PERM_CACHE.length<this.MAX_CACHE-this.SMALL_PERMS;)this.PERM_CACHE.push(null);if(t<this.MAX_CACHE&&null!=this.PERM_CACHE[t-this.SMALL_PERMS])return this.PERM_CACHE[t-this.SMALL_PERMS];let e=1;for(let n=2;n<=t;n++)e*=n;let i=[],s=n.identity0(t);i.push(s.slice(0));let o=n.booleanArray(!1,t);for(let r=1;r<e;r++)t:for(;s[0]<t;){s[t-1]++;for(let e=t-1;e>0&&!(s[e]<t);e--)s[e]=0,s[e-1]++;n.setTo(o,!1);for(let t of s){if(o[t])continue t;o[t]=!0}i[r]=s.slice(0);break}return t<this.MAX_CACHE&&(this.PERM_CACHE[t-this.SMALL_PERMS]=i),i}}i.PERM1=[[0]],i.PERM2=[[0,1],[1,0]],i.PERM3=[[0,1,2],[0,2,1],[1,0,2],[1,2,0],[2,0,1],[2,1,0]],i.PERM4=[[0,1,2,3],[0,1,3,2],[0,2,1,3],[0,2,3,1],[0,3,1,2],[0,3,2,1],[1,0,2,3],[1,0,3,2],[1,2,0,3],[1,2,3,0],[1,3,0,2],[1,3,2,0],[2,0,1,3],[2,0,3,1],[2,1,0,3],[2,1,3,0],[2,3,0,1],[2,3,1,0],[3,0,1,2],[3,0,2,1],[3,1,0,2],[3,1,2,0],[3,2,0,1],[3,2,1,0]],i.SMALL_PERMS=4,i.MAX_CACHE=8,i.PERM_CACHE=[];class s{constructor(t,e,i=0){if(this.m=t,this.n=e,0!=t){this.A=new Array(t);for(let s=0;s<t;s++)this.A[s]=n.numberArray(i,e)}}static fromArray(t){let e=new s(0,0);return e.A=t,e.m=t.length,e.n=t[0].length,e}clone(){const{A:t,m:e,n}=this;let i=new s(e,n);for(let s=0;s<e;s++)for(let e=0;e<n;e++)i.A[s][e]=t[s][e];return i}get numRows(){return this.m}get numCols(){return this.n}get(t,e){return this.A[t][e]}set(t,e,n){this.A[t][e]=n}transpose(){const{A:t,m:e,n}=this;let i=new s(n,e);const o=i.A;for(let i=0;i<e;i++)for(let e=0;e<n;e++)o[e][i]=t[i][e];return i}norm1(){const{A:t,m:e,n}=this;let i=0;for(let s=0;s<n;s++){let n=0;for(let i=0;i<e;i++)n+=Math.abs(t[i][s]);i=Math.max(i,n)}return i}normInf(){const{A:t,m:e,n}=this;let i=0;for(let s=0;s<e;s++){let e=0;for(let i=0;i<n;i++)e+=Math.abs(t[s][i]);i=Math.max(i,e)}return i}uminus(){const{A:t,m:e,n}=this;let i=new s(e,n),o=i.A;for(let i=0;i<e;i++)for(let e=0;e<n;e++)o[i][e]=-t[i][e];return i}plus(t){const{A:e,m:n,n:i}=this;let o=new s(n,i),r=o.A;for(let s=0;s<n;s++)for(let n=0;n<i;n++)r[s][n]=e[s][n]+t.A[s][n];return o}plusEquals(t){const{A:e,m:n,n:i}=this;for(let s=0;s<n;s++)for(let n=0;n<i;n++)e[s][n]=e[s][n]+t.A[s][n];return this}minus(t){const{A:e,m:n,n:i}=this;let o=new s(n,i),r=e;for(let s=0;s<n;s++)for(let n=0;n<i;n++)r[s][n]=e[s][n]-t.A[s][n];return o}minusEquals(t){const{A:e,m:n,n:i}=this;for(let s=0;s<n;s++)for(let n=0;n<i;n++)e[s][n]=e[s][n]-t.A[s][n];return this}arrayTimes(t){const{A:e,m:n,n:i}=this;let o=new s(n,i),r=o.A;for(let s=0;s<n;s++)for(let n=0;n<i;n++)r[s][n]=e[s][n]*t.A[s][n];return o}arrayTimesEquals(t){const{A:e,m:n,n:i}=this;for(let s=0;s<n;s++)for(let n=0;n<i;n++)e[s][n]=e[s][n]*t.A[s][n];return this}arrayRightDivide(t){const{A:e,m:n,n:i}=this;let o=new s(n,i),r=o.A;for(let s=0;s<n;s++)for(let n=0;n<i;n++)r[s][n]=e[s][n]/t.A[s][n];return o}arrayRightDivideEquals(t){const{A:e,m:n,n:i}=this;for(let s=0;s<n;s++)for(let n=0;n<i;n++)e[s][n]=e[s][n]/t.A[s][n];return this}arrayLeftDivide(t){const{A:e,m:n,n:i}=this;let o=new s(n,i),r=o.A;for(let s=0;s<n;s++)for(let n=0;n<i;n++)r[s][n]=t.A[s][n]/e[s][n];return o}arrayLeftDivideEquals(t){const{A:e,m:n,n:i}=this;for(let s=0;s<n;s++)for(let n=0;n<i;n++)e[s][n]=t.A[s][n]/e[s][n];return this}scalarTimes(t){const{A:e,m:n,n:i}=this;let o=new s(n,i),r=o.A;for(let s=0;s<n;s++)for(let n=0;n<i;n++)r[s][n]=t*e[s][n];return o}scalarTimesEquals(t){const{A:e,m:n,n:i}=this;for(let s=0;s<n;s++)for(let n=0;n<i;n++)e[s][n]=t*e[s][n];return this}times(t){const{A:e,m:n,n:i}=this;let o=new s(n,t.n),r=o.A,a=new Array(i);for(let s=0;s<t.n;s++){for(let e=0;e<i;e++)a[e]=t.A[e][s];for(let t=0;t<n;t++){let n=e[t],o=0;for(let t=0;t<i;t++)o+=n[t]*a[t];r[t][s]=o}}return o}rank(){return new o(this).rank()}cond(){return new o(this).cond()}trace(){const{A:t,m:e,n}=this;let i=0;for(let s=0;s<Math.min(e,n);s++)i+=t[s][s];return i}static identity(t,e){let n=new s(t,e),i=n.A;for(let n=0;n<t;n++)for(let t=0;t<e;t++)i[n][t]=n==t?1:0;return n}toString(){let t=["["];for(let e of this.A)t.push(JSON.stringify(e));return t.push("]"),t.join("\n")}}class o{constructor(t){let e=t.A,i=this.m=t.m,s=this.n=t.n,r=Math.min(i,s),a=this.s=new Array(Math.min(i+1,s)),l=this.U=new Array(i),d=this.V=new Array(s);for(let t=0;t<i;t++)l[t]=n.numberArray(0,r);for(let t=0;t<s;t++)d[t]=n.numberArray(0,s);let p=new Array(s),h=new Array(i),c=Math.min(i-1,s),m=Math.max(0,Math.min(s-2,i));for(let t=0;t<Math.max(c,m);t++){if(t<c){a[t]=0;for(let n=t;n<i;n++)a[t]=o.hypot(a[t],e[n][t]);if(0!=a[t]){e[t][t]<0&&(a[t]=-a[t]);for(let n=t;n<i;n++)e[n][t]/=a[t];e[t][t]+=1}a[t]=-a[t]}for(let n=t+1;n<s;n++){if(t<c&&0!=a[t]){let s=0;for(let o=t;o<i;o++)s+=e[o][t]*e[o][n];s=-s/e[t][t];for(let o=t;o<i;o++)e[o][n]+=s*e[o][t]}p[n]=e[t][n]}if(t<c)for(let n=t;n<i;n++)l[n][t]=e[n][t];if(t<m){p[t]=0;for(let e=t+1;e<s;e++)p[t]=o.hypot(p[t],p[e]);if(0!=p[t]){p[t+1]<0&&(p[t]=-p[t]);for(let e=t+1;e<s;e++)p[e]/=p[t];p[t+1]+=1}if(p[t]=-p[t],t+1<i&&0!=p[t]){for(let e=t+1;e<i;e++)h[e]=0;for(let n=t+1;n<s;n++)for(let s=t+1;s<i;s++)h[s]+=p[n]*e[s][n];for(let n=t+1;n<s;n++){let s=-p[n]/p[t+1];for(let o=t+1;o<i;o++)e[o][n]+=s*h[o]}}for(let e=t+1;e<s;e++)d[e][t]=p[e]}}let u=Math.min(s,i+1);c<s&&(a[c]=e[c][c]),i<u&&(a[u-1]=0),m+1<u&&(p[m]=e[m][u-1]),p[u-1]=0;for(let t=c;t<r;t++){for(let e=0;e<i;e++)l[e][t]=0;l[t][t]=1}for(let t=c-1;t>=0;t--)if(0!=a[t]){for(let e=t+1;e<r;e++){let n=0;for(let s=t;s<i;s++)n+=l[s][t]*l[s][e];n=-n/l[t][t];for(let s=t;s<i;s++)l[s][e]+=n*l[s][t]}for(let e=t;e<i;e++)l[e][t]=-l[e][t];l[t][t]=1+l[t][t];for(let e=0;e<t-1;e++)l[e][t]=0}else{for(let e=0;e<i;e++)l[e][t]=0;l[t][t]=1}for(let t=s-1;t>=0;t--){if(t<m&&0!=p[t])for(let e=t+1;e<r;e++){let n=0;for(let i=t+1;i<s;i++)n+=d[i][t]*d[i][e];n=-n/d[t+1][t];for(let i=t+1;i<s;i++)d[i][e]+=n*d[i][t]}for(let e=0;e<s;e++)d[e][t]=0;d[t][t]=1}let f=u-1,g=0,k=Math.pow(2,-52),y=Math.pow(2,-966);for(;u>0;){let t,e;for(t=u-2;t>=-1&&-1!=t;t--)if(Math.abs(p[t])<=y+k*(Math.abs(a[t])+Math.abs(a[t+1]))){p[t]=0;break}if(t==u-2)e=4;else{let n;for(n=u-1;n>=t&&n!=t;n--){let e=(n!=u?Math.abs(p[n]):0)+(n!=t+1?Math.abs(p[n-1]):0);if(Math.abs(a[n])<=y+k*e){a[n]=0;break}}n==t?e=3:n==u-1?e=1:(e=2,t=n)}if(t++,1==e){let e=p[u-2];p[u-2]=0;for(let n=u-2;n>=t;n--){let i=o.hypot(a[n],e),r=a[n]/i,l=e/i;a[n]=i,n!=t&&(e=-l*p[n-1],p[n-1]=r*p[n-1]);for(let t=0;t<s;t++)i=r*d[t][n]+l*d[t][u-1],d[t][u-1]=-l*d[t][n]+r*d[t][u-1],d[t][n]=i}}else if(2==e){let e=p[t-1];p[t-1]=0;for(let n=t;n<u;n++){let s=o.hypot(a[n],e),r=a[n]/s,d=e/s;a[n]=s,e=-d*p[n],p[n]=r*p[n];for(let e=0;e<i;e++)s=r*l[e][n]+d*l[e][t-1],l[e][t-1]=-d*l[e][n]+r*l[e][t-1],l[e][n]=s}}else if(3==e){let e=Math.max(Math.max(Math.max(Math.max(Math.abs(a[u-1]),Math.abs(a[u-2])),Math.abs(p[u-2])),Math.abs(a[t])),Math.abs(p[t])),n=a[u-1]/e,r=a[u-2]/e,h=p[u-2]/e,c=a[t]/e,m=p[t]/e,f=((r+n)*(r-n)+h*h)/2,k=n*h*(n*h),y=0;0==f&&0==k||(y=Math.sqrt(f*f+k),f<0&&(y=-y),y=k/(f+y));let w=(c+n)*(c-n)+y,x=c*m;for(let e=t;e<u-1;e++){let n=o.hypot(w,x),r=w/n,h=x/n;e!=t&&(p[e-1]=n),w=r*a[e]+h*p[e],p[e]=r*p[e]-h*a[e],x=h*a[e+1],a[e+1]=r*a[e+1];for(let t=0;t<s;t++)n=r*d[t][e]+h*d[t][e+1],d[t][e+1]=-h*d[t][e]+r*d[t][e+1],d[t][e]=n;if(n=o.hypot(w,x),r=w/n,h=x/n,a[e]=n,w=r*p[e]+h*a[e+1],a[e+1]=-h*p[e]+r*a[e+1],x=h*p[e+1],p[e+1]=r*p[e+1],e<i-1)for(let t=0;t<i;t++)n=r*l[t][e]+h*l[t][e+1],l[t][e+1]=-h*l[t][e]+r*l[t][e+1],l[t][e]=n}p[u-2]=w,g+=1}else if(4==e){if(a[t]<=0){a[t]=a[t]<0?-a[t]:0;for(let e=0;e<=f;e++)d[e][t]=-d[e][t]}for(;t<f&&!(a[t]>=a[t+1]);){let e=a[t];if(a[t]=a[t+1],a[t+1]=e,t<s-1)for(let n=0;n<s;n++)e=d[n][t+1],d[n][t+1]=d[n][t],d[n][t]=e;if(t<i-1)for(let n=0;n<i;n++)e=l[n][t+1],l[n][t+1]=l[n][t],l[n][t]=e;t++}g=0,u--}}}getU(){return s.fromArray(this.U)}getV(){return s.fromArray(this.V)}getSingularValues(){return this.s}getS(){const{n:t}=this;let e=new s(t,t,0),n=e.A;for(let e=0;e<t;e++)n[e][e]=this.s[e];return e}norm2(){return this.s[0]}cond(){const{m:t,n:e,s:n}=this;return n[0]/n[Math.min(t,e)-1]}rank(){const{m:t,n:e,s:n}=this;let i=Math.pow(2,-52),s=Math.max(t,e)*n[0]*i,o=0;for(let t=0;t<n.length;t++)n[t]>s&&o++;return o}static hypot(t,e){let n;return Math.abs(t)>Math.abs(e)?(n=e/t,n=Math.abs(t)*Math.sqrt(1+n*n)):0!=e?(n=t/e,n=Math.abs(e)*Math.sqrt(1+n*n)):n=0,n}}const r=Math.pow(2,-52);class a{constructor(t,e){this.px=t,this.py=e,this.numTriangles=0,this.edgeStack=n.numberArray(0,512),this.hull=null,this.px=t,this.py=e,this.sz=t.length;let i=Math.max(2*this.sz-5,0);this.triangles=new Array(3*i),this.halfedges=new Array(3*i),this.hashSize=Math.ceil(Math.sqrt(this.sz)),this.hullPrev=new Array(this.sz),this.hullNext=new Array(this.sz),this.hullTri=new Array(this.sz),this.hullHash=n.numberArray(-1,this.hashSize),this.ids=new Array(this.sz),this.dists=new Array(this.sz),this.update()}trimConcave(t){const e=G(t),{sz:i,px:s,py:o}=this;let r=this.triangles.slice(0),a=[];for(let t=0,e=0;e<r.length;t++,e+=3)a.push(i*Math.min(r[e+0],r[e+1])+Math.max(r[e+0],r[e+1])),a.push(i*Math.min(r[e+0],r[e+2])+Math.max(r[e+0],r[e+2])),a.push(i*Math.min(r[e+1],r[e+2])+Math.max(r[e+1],r[e+2]));let l=n.uniqueUnstable(a);for(let t=0;t<a.length;t++)a[t]=l.indexOf(a[t]);let d=new Array(a.length);for(;;){const t=r.length/3;d.fill(0);for(let e=0,n=0;e<t;e++,n+=3)d[a[n+0]]++,d[a[n+1]]++,d[a[n+2]]++;let i=n.booleanArray(!0,t);for(let n=0,l=0;n<t;n++,l+=3){const t=d[a[l+0]],p=d[a[l+1]],h=d[a[l+2]],c=r[l],m=r[l+1],u=r[l+2];1==t&&1!=p&&1!=h?i[n]=Y(s[c]-s[m],o[c]-o[m])<e:1!=t&&1==p&&1!=h?i[n]=Y(s[c]-s[u],o[c]-o[u])<e:1!=t&&1!=p&&1==h&&(i[n]=Y(s[m]-s[u],o[m]-o[u])<e)}if(n.allTrue(i))break;let l=new Array(3*n.maskCount(i)),p=new Array(3*n.maskCount(i));for(let e=0,n=0,s=0,o=0;e<t;e++,n+=3)i[e]&&(l[s++]=r[n],l[s++]=r[n+1],l[s++]=r[n+2],p[o++]=a[n],p[o++]=a[n+1],p[o++]=a[n+2]);r=l,a=p}return r}traceOutline(t){const e=t.length/3,{sz:i}=this;let s=new Map;for(let n=0,o=0;n<e;n++,o+=3){const e=i*Math.min(t[o+0],t[o+1])+Math.max(t[o+0],t[o+1]),n=i*Math.min(t[o+0],t[o+2])+Math.max(t[o+0],t[o+2]),r=i*Math.min(t[o+1],t[o+2])+Math.max(t[o+1],t[o+2]);s.set(e,(s.get(e)||0)+1),s.set(n,(s.get(n)||0)+1),s.set(r,(s.get(r)||0)+1)}let o=[];for(let t of s.entries())if(1==t[1]){const e=t[0],n=Math.floor(e/i),s=e%i;o.push(n),o.push(s)}const r=n.uniqueUnstable(o),a=r.length,l=new Map;for(let t=0;t<a;t++)l.set(r[t],t);let d=n.numberArray(-1,a),p=n.numberArray(-1,a);for(let t=0;t<o.length;t+=2){const e=l.get(o[t]),n=l.get(o[t+1]);d[e]<0?d[e]=n:p[e]=n,d[n]<0?d[n]=e:p[n]=e}let h=n.booleanArray(!1,a),c=new Array(a);c[0]=0,h[0]=!0;for(let t=1;t<a;t++){const e=c[t-1];h[d[e]]?c[t]=p[e]:c[t]=d[e],h[c[t]]=!0}return n.idxGet(r,c)}update(){const t=this.sz;let{px:e,py:i,ids:s,dists:o,triangles:a,halfedges:l}=this;const d=n.min(e),p=n.min(i),h=n.max(e),c=n.max(i);for(let e=0;e<t;e++)s[e]=e;this.centreX=.5*(d+h),this.centreY=.5*(p+c);let m=0,u=0,f=0,g=Number.POSITIVE_INFINITY;for(let n=0;n<t;n++){const t=U(this.centreX-e[n],this.centreY-i[n]);t<g&&(m=n,g=t)}const k=e[m],y=i[m];g=Number.POSITIVE_INFINITY;for(let n=0;n<t;n++){if(n==m)continue;const t=U(k-e[n],y-i[n]);t<g&&t>0&&(u=n,g=t)}let w=e[u],x=i[u],C=Number.POSITIVE_INFINITY;for(let n=0;n<t;n++){if(n==m||n==u)continue;let t=this.circumRadius(k,y,w,x,e[n],i[n]);t<C&&(f=n,C=t)}let v=e[f],b=i[f];if(!Number.isFinite(C)){for(let n=0;n<t;n++)o[n]=e[n]-e[0],0==o[n]&&(o[n]=i[n]-i[0]);this.quicksort(0,t-1);let n=new Array(t),r=0,d=Number.NEGATIVE_INFINITY;for(let e=0;e<t;e++){let t=s[e];o[t]>d&&(n[r++]=t,d=o[t])}return this.hull=n.slice(0,r),a=[],void(l=[])}if(this.orient(k,y,w,x,v,b)){let t=u,e=w,n=x;u=f,w=v,x=b,f=t,v=e,b=n}this.pickCircumCentre(k,y,w,x,v,b);for(let n=0;n<t;n++)o[n]=U(e[n]-this.centreX,i[n]-this.centreY);this.quicksort(0,t-1),this.hullStart=m;let A=3;const{hullNext:T,hullPrev:M,hullTri:E,hullHash:S,hashSize:N}=this;T[m]=M[f]=u,T[u]=M[m]=f,T[f]=M[u]=m,E[m]=0,E[u]=1,E[f]=2,S.fill(-1),S[this.hashKey(k,y)]=m,S[this.hashKey(w,x)]=u,S[this.hashKey(v,b)]=f,this.numTriangles=0,this.addTriangle(m,u,f,-1,-1,-1);let D=0,R=0;for(let t=0;t<s.length;t++){let n=s[t],o=e[n],a=i[n];if(t>0&&Math.abs(o-D)<=r&&Math.abs(a-R)<=r)continue;if(D=o,R=a,n==m||n==u||n==f)continue;let l=0;for(let t=0,e=this.hashKey(o,a);t<N&&(l=S[(e+t)%N],!(l>=0&&l!=T[l]));t++);l=M[l];let d=l,p=T[d];for(;!this.orient(o,a,e[d],i[d],e[p],i[p]);){if(d=p,d==l){d=-1;break}p=T[d]}if(d<0)continue;let h=this.addTriangle(d,n,T[d],-1,-1,E[d]);E[n]=this.legalise(h+2),E[d]=h,A++;let c=T[d];for(p=T[c];this.orient(o,a,e[c],i[c],e[p],i[p]);)h=this.addTriangle(c,n,p,E[n],-1,E[c]),E[n]=this.legalise(h+2),T[c]=c,A--,c=p,p=T[c];if(d==l)for(p=M[d];this.orient(o,a,e[p],i[p],e[d],i[d]);)h=this.addTriangle(p,n,d,-1,E[d],E[p]),this.legalise(h+2),E[p]=h,T[d]=d,A--,d=p,p=M[d];this.hullStart=M[n]=d,T[d]=M[c]=n,T[n]=c,S[this.hashKey(o,a)]=n,S[this.hashKey(e[d],i[d])]=d}this.hull=new Array(A);for(let t=0,e=this.hullStart;t<A;t++)this.hull[t]=e,e=T[e];this.triangles=a.slice(0,this.numTriangles),this.halfedges=l.slice(0,this.numTriangles)}hashKey(t,e){return Math.floor(this.pseudoAngle(t-this.centreX,e-this.centreY)*this.hashSize)%this.hashSize}legalise(t){let e=0,n=0;for(;;){let i=this.halfedges[t],s=t-t%3;if(n=s+(t+2)%3,i<0){if(0==e)break;t=this.edgeStack[--e];continue}const o=i-i%3,r=s+(t+1)%3,a=o+(i+2)%3,{px:l,py:d,triangles:p,halfedges:h}=this,c=p[n],m=p[t],u=p[r],f=p[a];if(this.inCircle(l[c],d[c],l[m],d[m],l[u],d[u],l[f],d[f])){this.triangles[t]=f,this.triangles[i]=c;const s=h[a];if(s<0){let e=this.hullStart;do{if(this.hullTri[e]==a){this.hullTri[e]=t;break}e=this.hullPrev[e]}while(e!=this.hullStart)}this.link(t,s),this.link(i,h[n]),this.link(n,a);const r=o+(i+1)%3;e<this.edgeStack.length&&(this.edgeStack[e++]=r)}else{if(0==e)break;t=this.edgeStack[--e]}}return n}link(t,e){this.halfedges[t]=e,e>=0&&(this.halfedges[e]=t)}addTriangle(t,e,n,i,s,o){const r=this.numTriangles;return this.triangles[r]=t,this.triangles[r+1]=e,this.triangles[r+2]=n,this.link(r,i),this.link(r+1,s),this.link(r+2,o),this.numTriangles+=3,r}pseudoAngle(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}orientIfSure(t,e,n,i,s,o){const r=(i-e)*(s-t),a=(n-t)*(o-e);return Math.abs(r-a)>=33306690738754716e-32*Math.abs(r+a)?r-a:0}orient(t,e,n,i,s,o){let r=this.orientIfSure(s,o,t,e,n,i);return 0!=r||(r=this.orientIfSure(t,e,n,i,s,o),0!=r||(r=this.orientIfSure(n,i,s,o,t,e))),r<0}inCircle(t,e,n,i,s,o,r,a){const l=t-r,d=e-a,p=n-r,h=i-a,c=s-r,m=o-a,u=p*p+h*h,f=c*c+m*m;return l*(h*f-u*m)-d*(p*f-u*c)+(l*l+d*d)*(p*m-h*c)<0}circumRadius(t,e,n,i,s,o){const r=n-t,a=i-e,l=s-t,d=o-e,p=r*r+a*a,h=l*l+d*d,c=.5/(r*d-a*l),m=(d*p-a*h)*c,u=(r*h-l*p)*c;return m*m+u*u}pickCircumCentre(t,e,n,i,s,o){const r=n-t,a=i-e,l=s-t,d=o-e,p=r*r+a*a,h=l*l+d*d,c=.5/(r*d-a*l);this.centreX=t+(d*p-a*h)*c,this.centreY=e+(r*h-l*p)*c}quicksort(t,e){const{ids:i,dists:s}=this;if(e-t<=20)for(let n=t+1;n<=e;n++){const e=i[n],o=s[e];let r=n-1;for(;r>=t&&s[i[r]]>o;)i[r+1]=i[r--];i[r+1]=e}else{let o=t+e>>1,r=t+1,a=e;n.swap(i,o,r),s[i[t]]>s[i[e]]&&n.swap(i,t,e),s[i[r]]>s[i[e]]&&n.swap(i,r,e),s[i[t]]>s[i[r]]&&n.swap(i,t,r);let l=i[r];const d=s[l];for(;;){do{r++}while(s[i[r]]<d);do{a--}while(s[i[a]]>d);if(a<r)break;n.swap(i,r,a)}i[t+1]=i[a],i[a]=l,e-r+1>=a-t?(this.quicksort(r,e),this.quicksort(t,a-1)):(this.quicksort(t,a-1),this.quicksort(r,e))}}}class l{static pointInPolygon(t,e,n,i){if(t<at(n)||t>lt(n)||e<at(i)||e>lt(i))return!1;let s=n.length;for(let o=0;o<s;o++)if(n[o]==t&&i[o]==e)return!0;let o=!1;for(let r=0;r<s;r++){let a=n[r],l=i[r],d=n[r+1<s?r+1:0],p=i[r+1<s?r+1:0];e>Math.min(l,p)&&e<=Math.max(l,p)&&t<=Math.max(a,d)&&l!=p&&(a==d||t<=(e-l)*(d-a)/(p-l)+a)&&(o=!o)}return o}static areLinesParallel(t,e,n,i,s,o,r,a){let l=n-t,d=i-e,p=r-s,h=a-o,c=Math.abs(l)>Math.abs(d);if(c!=Math.abs(p)>Math.abs(h))return!1;const m=1e-6;return c?Math.abs(d/l-h/p)<m:Math.abs(l/d-p/h)<m}static lineIntersect(t,e,n,i,s,o,r,a){let l=((r-s)*(e-o)-(a-o)*(t-s))/((a-o)*(n-t)-(r-s)*(i-e));return[t+l*(n-t),e+l*(i-e)]}static isPointOnLineSeg(t,e,n,i,s,o){if(t<Math.min(n,s)||t>Math.max(n,s)||e<Math.min(i,o)||e>Math.max(i,o))return!1;if(t==n&&e==i||t==s&&e==o)return!0;let r=s-n,a=o-i;return Math.abs(r)>Math.abs(a)?K(e,a/r*(t-n)+i):K(t,r/a*(e-i)+n)}static pointLineDistance(t,e,n,i,s,o){let r=s-n,a=o-i;return Math.abs(a*t-r*e+s*i-o*n)/U(r,a)}static pointLineSegDistance(t,e,n,i,s,o){let r=s-n,a=o-i,l=((t-n)*r+(e-i)*a)/Y(r,a);return l=Math.max(0,Math.min(1,l)),U(t-(n+l*r),e-(i+l*a))}static doLineSegsIntersect(t,e,n,i,s,o,r,a){if(Math.max(t,n)<Math.min(s,r)||Math.max(e,i)<Math.min(o,a))return!1;if(Math.min(t,n)>Math.max(s,r)||Math.min(e,i)>Math.max(o,a))return!1;let l=n-t,d=i-e,p=r-s,h=a-o;if($(Y(l,d),0)||$(Y(p,h),0))return!1;if(Math.abs(d)>Math.abs(l)&&Math.abs(h)>Math.abs(p)){if($(l/d-p/h,0))return!1}else if(Math.abs(l)>Math.abs(d)&&Math.abs(p)>Math.abs(h)&&$(d/l-h/p,0))return!1;if(t==s&&e==o||t==r&&e==a||n==s&&i==o||n==r&&i==a)return!0;if(!(t!=n&&s!=r||t!=s&&t!=r&&n!=s&&n!=r))return!0;if(!(e!=i&&o!=a||e!=o&&e!=a&&i!=o&&i!=a))return!0;let c=t-s,m=e-o,u=p*m-h*c,f=l*m-d*c,g=h*l-p*d;return 0!=g&&(g<0&&(g=-g,u=-u,f=-f),u>=0&&u<=g&&f>=0&&f<=g)}static rectsIntersect(t,e,n,i,s,o,r,a){return t<=s&&t+n>=s+r&&e<=o&&e+i>=o+a||s<=t&&s+r>=t+n&&o<=e&&o+a>=e+i||!(t+n<s||s+r<t||e+i<o||o+a<e)}static sortAngles(t){if(null==t||t.length<2)return t;t=t.slice(0);for(let e=0;e<t.length;e++)t[e]=nt(t[e]);if(2==t.length)return st(t[1],t[0])>Math.PI?[t[1],t[0]]:t;for(n.sort(t);;){let e=t[t.length-1],n=t[0],i=t[1];if(it(n,e)<=it(i,n))break;for(let e=t.length-1;e>0;e--)t[e]=t[e-1];t[0]=e}return t}static idxSortAngles(t){const e=n.len(t);if(null==t||e<2)return n.identity0(e);if(2==e)return st(t[1],t[0])>Math.PI?[1,0]:[0,1];t=n.duplicate(t);for(let n=0;n<e;n++)t[n]=nt(t[n]);let i=n.idxSort(t);for(;;){let n=t[i[e-1]],s=t[i[0]],o=t[i[1]];if(it(s,n)<=it(o,s))break;let r=i.pop();i.unshift(r)}return i}static uniqueAngles(t,e){let n=l.sortAngles(t),i=[];i.push(n[0]);for(let t=1;t<n.length;t++)Math.abs(it(n[t],n[t-1]))>e&&i.push(n[t]);return i}static thetaObtuse(t,e){let n=e-t;for(;n<-Math.PI;)n+=2*Math.PI;for(;n>Math.PI;)n-=2*Math.PI;return n>0?t-.5*(2*Math.PI-n):t+.5*(2*Math.PI+n)}static emergentAngle(t){let e=t.length;if(1==e)return t[0];if(2==e)return.5*(t[0]+t[1]);n.sort(t);let i=0,s=st(t[0],t[e-1]);for(let n=1;n<e;n++){let e=st(t[n],t[n-1]);e>s&&(i=n,s=e)}let o=0;for(let n=0;n<e;n++){let e=t[n]-t[i];e<0&&(e+=Z),o+=e}return o/e+t[i]}static dotProduct(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static affineTranslate(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}static affineMirror(t,e){return[[t?-1:1,0,0],[0,e?-1:1,0],[0,0,1]]}static affineScale(t,e){return[[t,0,0],[0,e,0],[0,0,1]]}static affineRotate(t){let e=Math.cos(t),n=Math.sin(t);return[[e,-n,0],[n,e,0],[0,0,1]]}static affineCompose(t,e){let n=[[0,0,0],[0,0,0],[0,0,0]],i=[0,0,0];for(let s=0;s<3;s++){for(let e=0;e<3;e++)i[e]=t[e][s];for(let t=0;t<3;t++){let o=e[t],r=0;for(let t=0;t<3;t++)r+=i[t]*o[t];n[t][s]=r}}return n}static applyAffine(t,e,n){return[t*n[0][0]+e*n[0][1]+n[0][2],t*n[1][0]+e*n[1][1]+n[1][2]]}static applyAffineArray(t,e,n){for(let i=0;i<t.length;i++)[t[i],e[i]]=this.applyAffine(t[i],e[i],n)}static isAffineMirror(t){let e=t[0][0],n=t[0][1],i=t[0][2],s=t[1][0],o=t[1][1],r=t[1][2],a=t[2][0],l=t[2][1],d=t[2][2];return e*o*d+n*r*a+i*s*l-i*o*a-n*s*d-e*r*l<0}static magnitude2(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}static magnitude(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static dist2(t,e){let n=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return n*n+i*i+s*s}static dist(t,e){let n=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(n*n+i*i+s*s)}static normalise(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(0==e)return;const n=1/Math.sqrt(e);t[0]*=n,t[1]*=n,t[2]*=n}static normalised(t){let e=t.slice(0);return this.normalise(e),e}static acuteAngle(t,e){let n=this.magnitude(t),i=this.magnitude(e);if(0==n||0==i)return 0;let s=this.dotProduct(t,e)/(n*i);return s=Math.max(-1,Math.min(1,s)),Math.acos(s)}static arcControlPoints(t,e,n,i,s){let o=-n,r=e,a=s,l=-i,d=.5*(e+i),p=.5*(n+s),h=3/8*(o+a),c=3/8*(r+l),m=h*h+c*c,u=d*h+p*c,f=u*u-m*(d*d+p*p-t*t),g=(Math.sqrt(f)-u)/m;return[e+g*o,n+g*r,i+g*a,s+g*l]}static createBezierEllipse(t,e,n,i,s){let o=24,r=Math.cos(s),a=Math.sin(s),l=Z/o,d=new Array(49),p=new Array(49);for(let s=0;s<o;s++){let o=s*l,h=Math.cos(o),c=Math.sin(o);d[2*s]=n*h*r-i*c*a+t,p[2*s]=n*h*a+i*c*r+e}d[48]=d[0],p[48]=p[0];for(let t=0;t<o;t++){let e=(t-1+o)%o,n=t,i=(t+1)%o,s=(t+2)%o,r=d[2*e],a=d[2*n],l=d[2*i],h=d[2*s],c=p[2*e],m=p[2*n],u=p[2*i],f=p[2*s];d[2*t+1]=.5*(a+l+.3*(a-r+l-h)),p[2*t+1]=.5*(m+u+.3*(m-c+u-f))}let h=new Array(49);for(let t=0;t<49;t++)h[t]=!(1&~t);return{px:d,py:p,ctrl:h}}static fitCircle(t,e){let n=Number.POSITIVE_INFINITY;for(let i=0;i<t.length;i++)n=Math.min(n,Y(t[i],e[i]));return Math.sqrt(n)}static fitEllipse(t,e,i,s,o,r){let a=.5*this.fitCircle(t,e),l=a,d=a*l,p=n.concat(t,[i,o,0,0]),h=n.concat(e,[0,0,s,r]);const c=p.length;let m=t=>{let e=Number.POSITIVE_INFINITY,n=1/(t[0]*t[0]),i=1/(t[1]*t[1]);for(let t=0;t<c;t++)e=Math.min(e,Math.sqrt(p[t]*p[t]*n+h[t]*h[t]*i));e<1&&(t[0]*=e,t[1]*=e),t[2]=t[0]*t[1]},u=1,f=[0,0,0],g=[0,0,0];for(;u>.001;){f[0]=a*(1+u),f[1]=l,m(f),g[0]=a,g[1]=l*(1+u),m(g);let t=!1;f[2]>d&&(a=f[0],l=f[1],d=f[2],t=!0),g[2]>d&&(a=g[0],l=g[1],d=g[2],t=!0),t||(u*=.6)}return[a,l]}static superimpose(t,e,i,r){let a=t.length;if(1==a)return[[1,0,i[0]-t[0]],[0,1,r[0]-e[0]],[0,0,1]];if(2==a){let n=Math.atan2(e[1]-e[0],t[1]-t[0]),s=it(Math.atan2(r[1]-r[0],i[1]-i[0]),n),o=Math.cos(s),a=Math.sin(s),l=o,d=-a,p=a,h=o,c=.5*(t[0]+t[1]),m=.5*(e[0]+e[1]);return[[l,d,.5*(i[0]+i[1])-(l*c+d*m)],[p,h,.5*(r[0]+r[1])-(p*c+h*m)],[0,0,1]]}let l=1/a,d=n.sum(t)*l,p=n.sum(e)*l,h=n.sum(i)*l,c=n.sum(r)*l,m=new s(3,a),u=new s(3,a);for(let n=0;n<a;n++)m.set(0,n,t[n]-d),m.set(1,n,e[n]-p),m.set(2,n,0),u.set(0,n,i[n]-h),u.set(1,n,r[n]-c),u.set(2,n,0);let f=m.times(u.transpose()),g=new o(f),k=g.getV().times(g.getU().transpose()),y=k.get(0,0),w=k.get(0,1),x=k.get(1,0),C=k.get(1,1);return[[y,w,h-(y*d+w*p)],[x,C,c-(x*d+C*p)],[0,0,1]]}static convexHull(t,e,n){let i=new d(t,e,G(.1*n));return[i.hullX,i.hullY]}static outlinePolygon(t,e,i){let s=new a(t,e),o=s.trimConcave(i),r=s.traceOutline(o);return[n.idxGet(t,r),n.idxGet(e,r)]}}class d{constructor(t,e,n){this.x=t,this.y=e,this.threshSq=n,this.hsz=0,this.hullX=[],this.hullY=[];const i=t.length;let s=0,o=0;for(let n=0;n<i;n++)(t[o]>t[n]||t[o]==t[n]&&e[o]>e[n])&&(o=n),(t[s]<t[n]||t[s]==t[n]&&e[s]<e[n])&&(s=n);let r=[],a=[];for(let t=0;t<i;t++)t!=s&&t!=o&&(this.right(o,s,t)>0?r.push(t):a.push(t));this.hullX.push(t[o]),this.hullY.push(e[o]),this.quickHull(o,s,r),this.hullX.push(t[s]),this.hullY.push(e[s]),this.quickHull(s,o,a);for(let t=0;t<this.hullX.length-1;)Y(this.hullX[t]-this.hullY[t+1],this.hullY[t]-this.hullY[t+1])<n?(this.hullX.splice(t+1,1),this.hullY.splice(t+1,1)):t++}quickHull(t,e,n){if(0==n.length)return;let i=this.furthestPoint(t,e,n),s=[],o=[];for(let r=0;r<n.length;r++){let a=n[r];a!=t&&a!=e&&(this.right(t,i,a)>0?s.push(a):this.right(i,e,a)>0&&o.push(a))}this.quickHull(t,i,s),this.hullX.push(this.x[i]),this.hullY.push(this.y[i]),this.quickHull(i,e,o)}right(t,e,n){const i=this.x,s=this.y;return(i[t]-i[e])*(s[n]-s[e])-(i[n]-i[e])*(s[t]-s[e])}distance(t,e,n){const i=this.x,s=this.y;let o=((i[n]-i[t])*(i[e]-i[t])+(s[n]-s[t])*(s[e]-s[t]))/((i[e]-i[t])*(i[e]-i[t])+(s[e]-s[t])*(s[e]-s[t])),r=i[t]+o*(i[e]-i[t]),a=s[t]+o*(s[e]-s[t]);return(r-i[n])*(r-i[n])+(a-s[n])*(a-s[n])}furthestPoint(t,e,n){let i=-1,s=-1;for(let o=0;o<n.length;o++){let r=n[o];if(r==t||r==e)continue;let a=this.distance(t,e,r);a>i&&(i=a,s=r)}return s}}class p{constructor(t,e,i){this.x=t,this.y=e,this.sequence=[];const s=t.length,o=i*i;let r=n.idxMax(t),a=r,l=0,d=n.booleanArray(!1,s);this.sequence.push(r);let p=()=>{let n=-1,i=0,r=0;for(let p=0;p<s;p++)if(p!=a&&!d[p]){let s=t[p]-t[a],d=e[p]-e[a],h=Y(s,d);if(0==h||h>o)continue;let c=Math.atan2(d,s),m=st(c,l);(n<0||m<i)&&(n=p,i=m,r=c)}return n<0?-1:(l=nt(r-.5*Math.PI),d[n]=!0,n)};for(;;){let t=p();if(t<0)return void(this.sequence=null);if(t==r)break;this.sequence.push(t),a=t}}sequencePos(){if(!this.sequence)return null;let t=[];for(let e of this.sequence)t.push(new h(this.x[e],this.y[e]));return t}sequenceXY(){if(!this.sequence)return[null,null];let t=[],e=[];for(let n of this.sequence)t.push(this.x[n]),e.push(this.y[n]);return[t,e]}}class h{static zero(){return new h}static fromArray(t){return new h(t[0],t[1])}constructor(t,e){this.x=null==t?0:t,this.y=null==e?0:e}clone(){return new h(this.x,this.y)}equals(t){return this.x==t.x&&this.y==t.y}scaleBy(t){1!=t&&(this.x*=t,this.y*=t)}offsetBy(t,e){this.x+=t,this.y+=e}withScaleBy(t){return new h(this.x*t,this.y*t)}withOffsetBy(t,e){return new h(this.x+t,this.y+e)}toString(){return"["+this.x+","+this.y+"]"}}class c{static zero(){return new c}static fromArray(t){return new c(t[0],t[1])}constructor(t,e){this.w=null==t?0:t,this.h=null==e?0:e}clone(){return new c(this.w,this.h)}equals(t){return this.w==t.w&&this.h==t.h}isZero(){return 0==this.w&&0==this.h}scaleBy(t){1!=t&&(this.w*=t,this.h*=t)}fitInto(t,e){let n=1;this.w>t&&(n=t/this.w),this.h>e&&(n=Math.min(n,e/this.h)),n<1&&this.scaleBy(n)}withScaleBy(t){return new c(this.w*t,this.h*t)}toString(){return"["+this.w+","+this.h+"]"}}class m{static zero(){return new m}static fromBounds(t,e,n,i){return new m(t,e,n-t,i-e)}static fromSize(t){return new m(0,0,t.w,t.h)}static fromOval(t){return new m(t.cx-t.rw,t.cy-t.rh,2*t.rw,2*t.rh)}static fromArray(t){return new m(t[0],t[1],t[2],t[3])}constructor(t,e,n,i){this.x=null==t?0:t,this.y=null==e?0:e,this.w=null==n?0:n,this.h=null==i?0:i}clone(){return new m(this.x,this.y,this.w,this.h)}equals(t){return this.x==t.x&&this.y==t.y&&this.w==t.w&&this.h==t.h}getPos(){return new h(this.x,this.y)}setPos(t){this.x=t.x,this.y=t.y}getSize(){return new c(this.w,this.h)}setSize(t){this.w=t.w,this.h=t.h}minX(){return this.x}minY(){return this.y}midX(){return this.x+.5*this.w}midY(){return this.y+.5*this.h}maxX(){return this.x+this.w}maxY(){return this.y+this.h}area(){return this.w*this.h}scaleBy(t){1!=t&&(this.x*=t,this.y*=t,this.w*=t,this.h*=t)}offsetBy(t,e){this.x+=t,this.y+=e}grow(t,e){this.x-=t,this.y-=e,this.w+=2*t,this.h+=2*e}withScaleBy(t){return new m(this.x*t,this.y*t,this.w*t,this.h*t)}withOffsetBy(t,e){return new m(this.x+t,this.y+e,this.w,this.h)}withGrow(t,e){return new m(this.x-t,this.y-e,this.w+2*t,this.h+2*e)}intersects(t){return l.rectsIntersect(this.x,this.y,this.w,this.h,t.x,t.y,t.w,t.h)}intersection(t){let e=this.x,n=e+this.w,i=this.y,s=i+this.h,o=t.x,r=o+t.w,a=t.y,l=a+t.h,d=Math.max(e,o),p=Math.max(i,a),h=Math.min(n,r),c=Math.min(s,l);return new m(d,p,h-d,c-p)}contains(t,e){return t>=this.x&&t<this.x+this.w&&e>=this.y&&e<this.y+this.h}union(t){let e=Math.min(this.x,t.x),n=Math.max(this.x+this.w,t.x+t.w),i=Math.min(this.y,t.y),s=Math.max(this.y+this.h,t.y+t.h);return new m(e,i,n-e,s-i)}isZero(){return 0==this.w&&0==this.h}isEmpty(){return 0==this.w&&0==this.h}notEmpty(){return this.w>0||this.h>0}toString(){return"["+this.x+","+this.y+";"+this.w+","+this.h+"]"}}class u{static zero(){return new u}static fromBox(t){return new u(t.x+.5*t.w,t.y+.5*t.h,.5*t.w,.5*t.h)}static fromArray(t){return new u(t[0],t[1],t[2],t[3])}constructor(t,e,n,i){this.cx=null==t?0:t,this.cy=null==e?0:e,this.rw=null==n?0:n,this.rh=null==i?0:i}clone(){return new u(this.cx,this.cy,this.rw,this.rh)}setCentre(t){this.cx=t.x,this.cy=t.y}setRadius(t){this.rw=t.w,this.rh=t.h}minX(){return this.cx-this.rw}minY(){return this.cy-this.rh}maxX(){return this.cx+this.rw}maxY(){return this.cy+this.rh}scaleBy(t){1!=t&&(this.cx*=t,this.cy*=t,this.rw*=t,this.rh*=t)}offsetBy(t,e){this.cx+=t,this.cy+=e}withScaleBy(t){return new u(this.cx*t,this.cy*t,this.rw*t,this.rh*t)}withOffsetBy(t,e){return new u(this.cx+t,this.cy+e,this.rw,this.rh)}contains(t,e){let n=t-this.cx,i=e-this.cy,s=n/this.rw,o=i/this.rh;return s*s+o*o<=1}toString(){return"["+this.cx+","+this.cy+";"+this.rw+","+this.rh+"]"}}class f{static zero(){return new f}static fromPos(t,e){return new f(t.x,t.y,e.x,e.y)}constructor(t,e,n,i){this.x1=null==t?0:t,this.y1=null==e?0:e,this.x2=null==n?0:n,this.y2=null==i?0:i}clone(){return new f(this.x1,this.y1,this.x2,this.y2)}setPos1(t){this.x1=t.x,this.y1=t.y}setPos2(t){this.x2=t.x,this.y2=t.y}minX(){return Math.min(this.x1,this.x2)}minY(){return Math.min(this.y1,this.y2)}maxX(){return Math.max(this.x1,this.x2)}maxY(){return Math.max(this.y1,this.y2)}scaleBy(t){1!=t&&(this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t)}offsetBy(t,e){this.x1+=t,this.y1+=e,this.x2+=t,this.y2+=e}toString(){return"["+this.x1+","+this.y1+";"+this.x2+","+this.y2+"]"}}class g{static parseXML(t){let e;return e=this.customParser?(new this.customParser).parseFromString(t,"application/xml"):(new DOMParser).parseFromString(t,"application/xml"),null==e?null:e}static toString(t){return this.customSerial?(new this.customSerial).serializeToString(t.documentElement):(new XMLSerializer).serializeToString(t.documentElement)}static toPrettyString(t){let e=['<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform">','  <xsl:strip-space elements="*"/>','  <xsl:template match="para[content-style][not(text())]">','    <xsl:value-of select="normalize-space(.)"/>',"  </xsl:template>",'  <xsl:template match="node()|@*">','    <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>',"  </xsl:template>",'  <xsl:output indent="yes"/>',"</xsl:stylesheet>"].join("\n"),n=this.parseXML(e),i=new XSLTProcessor;i.importStylesheet(n);let s=i.transformToDocument(t);return(new XMLSerializer).serializeToString(s)}static nodeText(t){let e="";for(let n of Array.from(t.childNodes))3!=n.nodeType&&4!=n.nodeType||(e+=n.nodeValue);return e}static childText(t,e){if(null==t)return null;let n=this.findElement(t,e);return null==n?null:this.nodeText(n)}static appendElement(t,e){let n=t.ownerDocument.createElement(e);return t.appendChild(n),n}static appendElementAfter(t,e){let n=t.ownerDocument.createElement(e),i=t.nextSibling;return null==i?t.parentNode.appendChild(n):t.parentNode.insertBefore(n,i),n}static appendText(t,e,n=!1){null!=e&&0!=e.length&&(n?t.appendChild(t.ownerDocument.createCDATASection(e)):t.appendChild(t.ownerDocument.createTextNode(e)))}static createTextChild(t,e,n,i=!1){let s=t.ownerDocument.createElement(e);t.appendChild(s),i?s.appendChild(t.ownerDocument.createCDATASection(n)):s.textContent=n}static setText(t,e,n=!1){for(;null!=t.firstChild;)t.removeChild(t.firstChild);this.appendText(t,e,n)}static findElement(t,e){if(null==t)return null;let n=t.firstChild;for(;null!=n;){if(1==n.nodeType&&n.nodeName==e)return n;n=n.nextSibling}return null}static findChildElements(t,e){if(null==t)return[];let n=[],i=t.firstChild;for(;null!=i;)1==i.nodeType&&i.nodeName===e&&n.push(i),i=i.nextSibling;return n}static childElements(t){if(null==t)return[];let e=[],n=t.firstChild;for(;null!=n;)1==n.nodeType&&e.push(n),n=n.nextSibling;return e}}function k(t){return"string"==typeof t?w.parse(t):t instanceof w?t:new w(t)}function y(t){return null==t?null:t.jquery?k(t[0]):k(t)}g.customParser=null,g.customSerial=null;class w{constructor(t){this.el=t}get elHTML(){return this.el}get elInput(){return this.el}get elCanvas(){return this.el}static parse(t){let e=g.parseXML(t);if(null==e)throw"Invalid XHTML string: "+t;let n=e.documentElement.outerHTML,i=document.createElement("template");return i.innerHTML=n,new w(i.content.firstChild)}static find(t){let e=document.querySelector(t);return e?new w(e):null}static findAll(t){let e=document.querySelectorAll(t),n=[];for(let t=0;t<e.length;t++)n.push(new w(e.item(t)));return n}parent(){let t=this.el.parentElement;return t?new w(t):null}ancestor(t){let e=this.el.closest(t);return e?new w(e):null}children(t){let e=[];for(let n=this.el.firstElementChild;n;n=n.nextElementSibling)t&&n.tagName.toLocaleLowerCase()!=t.toLocaleLowerCase()||e.push(new w(n));return e}find(t){let e=this.el.querySelector(t);return e?new w(e):null}findAll(t){let e=this.el.querySelectorAll(t),n=[];for(let t=0;t<e.length;t++)n.push(new w(e.item(t)));return n}exists(){return document.documentElement.contains(this.el)}isVisible(){return this.elHTML.offsetWidth>0||this.elHTML.offsetHeight>0||this.elHTML.getClientRects().length>0}append(t){this.el.append(t.el)}appendTo(t){return t instanceof w?t.el.append(this.el):t.appendChild(this.el),this}prepend(t){this.el.prepend(t.el)}prependTo(t){return t instanceof w?t.el.prepend(this.el):t.append(this.el),this}insertBefore(t){return t.el.parentElement.insertBefore(this.el,t.el),this}insertAfter(t){let e=t.el.nextElementSibling;return e?t.el.parentElement.insertBefore(this.el,e):t.el.parentElement.append(this.el),this}remove(){this.el.remove()}empty(){this.el.innerHTML=""}getHTML(){return this.el.innerHTML}setHTML(t){this.el.innerHTML=t}appendHTML(t){let e=g.parseXML("<z>"+t+"</z>");if(null==e)throw"Invalid XHTML string: "+t;let n=e.documentElement.innerHTML;this.el.insertAdjacentHTML("beforeend",n)}getText(){return this.el.textContent}setText(t){this.el.textContent=t}appendText(t){let e=document.createTextNode(t);this.el.appendChild(e)}getValue(){return this.el.value}setValue(t){this.el.value=t||""}getCSS(t){return this.elHTML.style.getPropertyValue(t)}setCSS(t,e){this.elHTML.style.setProperty(t,null==e?void 0:e.toString())}css(t){for(let e in t)this.setCSS(e,t[e].toString());return this}getAttr(t){return this.el.hasAttribute(t)?this.el.getAttribute(t):null}setAttr(t,e){this.el.setAttribute(t,e)}attr(t){for(let e in t)this.setAttr(e,t[e].toString());return this}addClass(t){for(let e of t.split(" "))e&&this.elHTML.classList.add(e)}removeClass(t){for(let e of t.split(" "))e&&this.elHTML.classList.remove(e)}hasClass(t){return this.elHTML.classList.contains(t)}setClass(t,e){e?this.addClass(t):this.removeClass(t)}class(t){if(Array.isArray(t))for(let e of t)this.addClass(e);else for(let e of t.split(" "))this.addClass(e);return this}toggleClass(t){for(let e in t)t[e]?this.elHTML.classList.add(e):this.elHTML.classList.remove(e)}width(){return this.elHTML.offsetWidth}height(){return this.elHTML.offsetHeight}offset(){let t=this.el.getBoundingClientRect(),e=this.el.ownerDocument.defaultView;return new h(t.left+e.pageXOffset,t.top+e.pageYOffset)}size(){return new c(this.width(),this.height())}area(){let t=this.offset();return new m(t.x,t.y,this.width(),this.height())}setBoundaryPixels(t,e,n,i){this.css({left:`${t}px`,top:`${e}px`,width:`${n}px`,height:`${i}px`})}setSizePixels(t,e){this.css({width:`${t}px`,height:`${e}px`})}hasFocus(){return this.el===document.activeElement}grabFocus(t=!1){t?setTimeout((()=>this.grabFocus()),10):this.elHTML.focus()}removeEvent(t,e){this.el.removeEventListener(t,e)}onKeyDown(t){this.el.addEventListener("keydown",t)}onKeyUp(t){this.el.addEventListener("keyup",t)}onKeyPress(t){this.el.addEventListener("keypress",t)}onScroll(t){this.el.addEventListener("scroll",t)}onWheel(t){this.el.addEventListener("wheel",t)}onClick(t){this.el.addEventListener("click",t)}onContextMenu(t){this.el.addEventListener("contextmenu",t)}onDblClick(t){this.el.addEventListener("dblclick",t)}onMouseDown(t){this.el.addEventListener("mousedown",t)}onMouseUp(t){this.el.addEventListener("mouseup",t)}onMouseEnter(t){this.el.addEventListener("mouseenter",t)}onMouseLeave(t){this.el.addEventListener("mouseleave",t)}onMouseMove(t){this.el.addEventListener("mousemove",t)}onMouseOver(t){this.el.addEventListener("mouseover",t)}onChange(t){this.el.addEventListener("change",t)}onInput(t){this.el.addEventListener("input",t)}onTouchStart(t){this.el.addEventListener("touchstart",t)}onTouchMove(t){this.el.addEventListener("touchmove",t)}onTouchCancel(t){this.el.addEventListener("touchcancel",t)}onTouchEnd(t){this.el.addEventListener("touchend",t)}}var x=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};function C(t,e=0){if(null==t||0==t.length)return e;let n=t.startsWith("0x")?parseInt(t.substring(2),16):t.startsWith("#")?parseInt(t.substring(1),16):parseInt(t);return isNaN(n)?e:n}function v(t,e=0){if(null==t||0==t.length)return e;let n=parseFloat(t);return isNaN(n)?e:n}function b(t,e,n){let i=k(`<${e}/>`);return n&&i.attr(n),y(t).append(i),i.el}function A(t,e){k(t).el.appendChild(document.createTextNode(e))}function T(t){return 1==t?"":"s"}function M(t,e){if(null==t)return"";let n=t.toPrecision(e);if(n.indexOf(".")>0){for(;n.endsWith("0");)n=n.substring(0,n.length-1);n.endsWith(".")&&(n=n.substring(0,n.length-1))}return n}function E(t){return null==t||"#"!=t.charAt(0)||7!=t.length?null:parseInt(t.substring(1),16)}function S(t){let e=(16777215&t).toString(16);for(;e.length<6;)e="0"+e;return"#"+e}function N(t){let e=t>>>24&255;return 0==e?1:255==e?0:1-e*(1/255)}const D=1/255;function R(t){return 16777215==t?"white":0==t?"black":-1==t?null:t>=0&&t<=16777215?S(t):"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+(1-(t>>24&255)*D)+")"}function O(t,e,n,i){t=Math.max(0,Math.min(1,t));let s,o,r,a=(e>>16&255)*D,l=(e>>8&255)*D,d=(255&e)*D,p=(n>>16&255)*D,h=(n>>8&255)*D,c=(255&n)*D;if(null==i){let e=1-t,n=t;s=Math.round(255*(e*a+n*p)),o=Math.round(255*(e*l+n*h)),r=Math.round(255*(e*d+n*c))}else{let e=(i>>16&255)*D,n=(i>>8&255)*D,m=(255&i)*D;if(t<.5){let e=2*t,n=1-e;s=Math.round(255*(n*a+e*p)),o=Math.round(255*(n*l+e*h)),r=Math.round(255*(n*d+e*c))}else{let i=2*(t-.5),a=1-i;s=Math.round(255*(a*p+i*e)),o=Math.round(255*(a*h+i*n)),r=Math.round(255*(a*c+i*m))}}return s<<16|o<<8|r}function L(t){let e=t.getDate(),n=t.getMonth(),i=t.getFullYear();return e+"-"+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n]+"-"+i}function B(t){let e="";if(!t)return"";for(t=t.firstChild;t;)3!=t.nodeType&&4!=t.nodeType||(e+=t.nodeValue),t=t.nextSibling;return e}function q(t){return!(null==t)}function _(t){return null==t}function I(t,e){let n=y(e).offset();return[t.pageX-n.x,t.pageY-n.y]}function z(t,e,n,i,s){t.css({left:e+"px",top:n+"px",width:i+"px",height:s+"px"})}function P(t){let e=t.offset();return[e.x,e.y,t.width(),t.height()]}function F(t){return[t.elHTML.offsetLeft,t.elHTML.offsetTop,t.elHTML.offsetWidth,t.elHTML.offsetHeight]}function j(){return null!=window.innerWidth?[window.innerWidth,window.innerHeight]:[window.document.body.clientWidth,window.document.body.clientHeight]}function U(t,e){return Math.hypot(t,e)}function X(t,e,n){return Math.hypot(t,e,n)}function Y(t,e){return t*t+e*e}function W(t,e,n){return t*t+e*e+n*n}function H(t){return t<0?-1:t>0?1:0}function G(t){return t*t}function V(t){return 0==t?0:1/t}function $(t,e){return t==e||Math.abs(t-e)<=1e-7*Math.max(t,e)}function K(t,e){return t==e||Math.abs(t-e)<=1e-14*Math.max(t,e)}function Q(t){return t<=1?0:Math.floor(Math.random()*t)}const Z=2*Math.PI,J=1/Z,tt=Math.PI/180,et=180/Math.PI;function nt(t){return t==-Math.PI?Math.PI:t<-Math.PI?t+Math.ceil((-t-Math.PI)*J)*Z:t>Math.PI?t-Math.ceil((t-Math.PI)*J)*Z:t}function it(t,e){let n=nt(t)-nt(e);return n-(n>Math.PI?Z:0)+(n<=-Math.PI?Z:0)}function st(t,e){let n=nt(t)-nt(e);return n+(n<0?Z:0)}function ot(t){if(null==t||t.length<2)return t;t=t.slice(0);for(let e=0;e<t.length;e++)t[e]=nt(t[e]);for(n.sort(t);;){let e=t[t.length-1],n=t[0],i=t[1];if(it(n,e)<=it(i,n))break;for(let e=t.length-1;e>0;e--)t[e]=t[e-1];t[0]=e}return t}function rt(t,e){t=ot(t);for(let n=1;n<t.length;n++)Math.abs(it(t[n],t[n-1]))<=e&&(t.splice(n,1),n--);return t}function at(t){if(null==t||0==t.length)return 0;let e=t[0];for(let n=1;n<t.length;n++)e=Math.min(e,t[n]);return e}function lt(t){if(null==t||0==t.length)return 0;let e=t[0];for(let n=1;n<t.length;n++)e=Math.max(e,t[n]);return e}function dt(t,e){if(null==t)return null;let n=t.firstChild;for(;n;){if(n.nodeName==e)return n;n=n.nextSibling}return null}function pt(t,e){if(null==t)return null;let n=t.firstChild,i=[];for(;n;)n.nodeName==e&&i.push(n),n=n.nextSibling;return i}function ht(t,e,n,i,s){let o=new Path2D;return o.moveTo(n-s,e),o.quadraticCurveTo(n,e,n,e+s),o.lineTo(n,i-s),o.quadraticCurveTo(n,i,n-s,i),o.lineTo(t+s,i),o.quadraticCurveTo(t,i,t,i-s),o.lineTo(t,e+s),o.quadraticCurveTo(t,e,t+s,e),o.closePath(),o}function ct(t,e,n,i,s){return[[n-s,n,n,n,n,n-s,t+s,t,t,t,t,t+s],[e,e,e+s,i-s,i,i,i,i,i-s,e+s,e,e],[!1,!0,!1,!1,!0,!1,!1,!0,!1,!1,!0,!1]]}function mt(t,e,n,i,s){t.beginPath(),t.moveTo(e,n),t.lineTo(i,s),t.stroke()}const ut=1.4;function ft(t){return t*ut+"px sans-serif"}function gt(){return"devicePixelRatio"in window&&window.devicePixelRatio>1?window.devicePixelRatio:1}function kt(t){if(null==t)return null;if(Array.isArray(t))return t.slice(0);if("object"!=typeof t)return t;let e={};for(let n in t)e[n]=t[n];return e}function yt(t){if(null==t)return null;if("function"==typeof t)return null;if("object"!=typeof t)return t;let e=Array.isArray(t)?[]:{};for(let n in t){let i=t[n];e[n]="object"==typeof i?yt(i):i}return e}function wt(t){if(!t)return"";const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,(t=>e[t]))}function xt(t){return null==t?"":t}function Ct(t){let e=[];for(let n in t)e.push(t[n]);return e}function vt(t,e){return t.map(((t,n)=>[t,e[n]]))}function bt(t){let e=[],n="";const i=t.length;for(let s=0;s<i;s++){let i=t.charCodeAt(s);i<128?n+=t.charAt(s):i<2048?(n+=String.fromCharCode(192|i>>6),n+=String.fromCharCode(128|63&i)):i<55296||i>=57344?(n+=String.fromCharCode(224|i>>12),n+=String.fromCharCode(128|i>>6&63),n+=String.fromCharCode(128|63&i)):(s++,i=65536+((1023&i)<<10|1023&t.charCodeAt(s)),n+=String.fromCharCode(240|i>>18),n+=String.fromCharCode(128|i>>12&63),n+=String.fromCharCode(128|i>>6&63),n+=String.fromCharCode(128|63&i)),n.length>100&&(e.push(n),n="")}return e.push(n),e.join("")}function At(t){let e=[],n="";const i=t.length;for(let s=0;s<i;s++){let i=t.charCodeAt(s);if(i<128)n+=t.charAt(s);else if(i>191&&i<224)n+=String.fromCharCode((31&i)<<6|63&t.charCodeAt(s+1)),s++;else if(i>223&&i<240)t+=String.fromCharCode((15&i)<<12|(63&t.charCodeAt(s+1))<<6|63&t.charCodeAt(s+2)),s+=2;else{let e=((7&i)<<18|(63&t.charCodeAt(s+1))<<12|(63&t.charCodeAt(s+2))<<6|63&t.charCodeAt(s+3))-65536;n+=String.fromCharCode(e>>10|55296,1023&e|56320),s+=3}n.length>100&&(e.push(n),n="")}return e.push(n),e.join("")}function Tt(t){let e=JSON.stringify(t,null,1).split(/\n/);for(let t=0;t<e.length;t++)if(e[t]=e[t].trim(),e[t].length>1&&(e[t].endsWith("{")||e[t].endsWith("["))){let n=e[t].charAt(e[t].length-1);e[t]=e[t].substring(0,e[t].length-1),e.splice(t+1,0,n),t--}let n=0;for(let t=0;t<e.length;t++){let i=e[t];"]"!=i&&"}"!=i&&"],"!=i&&"},"!=i||n--,e[t]="\t".repeat(n)+i,"["!=i&&"{"!=i||n++}return e.join("\n")}var Mt;function Et(t){return x(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let i=new XMLHttpRequest;i.open("GET",t.toString(),!0),i.responseType="text",i.onload=()=>e(i.response.toString()),i.onerror=()=>e(null),i.send()}))}))}function St(t,e){return x(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{let s=new XMLHttpRequest;s.open("POST",t.toString(),!0),s.responseType="text",s.onload=()=>{let t=s.response.toString();try{n(JSON.parse(t))}catch(e){let n=t.substring(0,Math.min(200,t.length))+(t.length>200?"...etc...":"");i("JSON parsing error on result:"+e+" for text: "+n)}},s.onerror=()=>i("Failed to request URL: "+t),s.send(JSON.stringify(e))}))}))}function Nt(){return x(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout((()=>t()))))}))}function Dt(t){return x(this,void 0,void 0,(function*(){return new Promise((e=>setTimeout((()=>e()),1e3*t)))}))}!function(t){t.Backspace="Backspace",t.Tab="Tab",t.Enter="Enter",t.Escape="Escape",t.Space=" ",t.PageUp="PageUp",t.PageDown="PageDown",t.End="End",t.Home="Home",t.Left="ArrowLeft",t.Right="ArrowRight",t.Up="ArrowUp",t.Down="ArrowDown",t.Delete="Delete",t.Insert="Insert"}(Mt||(Mt={}));let Rt=null;function Ot(){if(Rt)return Rt;let t=k("<div/>").css({visibility:"hidden",width:"100px",height:"100px",overflow:"scroll"}).appendTo(k(document.body)),e=k("<div/>").css({width:"100%",height:"100%"}).appendTo(t);return Rt=new c(100-e.elHTML.offsetWidth,100-e.elHTML.offsetHeight),t.remove(),Rt}function Lt(t,e){if(!t||!e)return 0;const i=Array.from(t),s=i.length,o=Array.from(e),r=o.length;let a=(t,e)=>{let s=[];for(let i=0;i<=t;i++)s.push(n.numberArray(0,e+1)),s[i][0]=i;for(let t=1;t<=e;t++)s[0][t]=t;for(let n=1;n<=e;n++)for(let e=1;e<=t;e++){let t=i[e-1]==o[n-1]?0:1;s[e][n]=Math.min(Math.min(s[e-1][n]+1,s[e][n-1]+1),s[e-1][n-1]+t)}return s[t][e]},l=i[s-1]==o[r-1]?0:1,d=a(s-1,r)+1,p=a(s,r-1)+1,h=a(s-1,r-1)+l;return Math.min(Math.min(d,p),h)}class Bt{}Bt.ELEMENTS=[null,"H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn"],Bt.ELEMENT_GROUPS=[0,1,18,1,2,13,14,15,16,17,18,1,2,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,5,6,7,8,9,10,11,12],Bt.ELEMENT_ROWS=[0,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],Bt.ELEMENT_BLOCKS=[0,1,2,1,1,2,2,2,2,2,2,1,1,2,2,2,2,2,2,1,1,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,1,1,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3],Bt.ELEMENT_VALENCE=[0,1,2,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,9,10,11,12,3,4,5,6,7,8,1,2,3,4,5,6,7,8,9,10,11,12,3,4,5,6,7,8,1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,5,6,7,8,9,10,11,12,3,4,5,6,7,8,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,5,6,7,8,9,10,11,12],Bt.ELEMENT_BONDING=[0,1,0,1,2,3,4,3,2,1,0,1,2,3,4,3,2,1,0,1,2,3,4,5,6,7,8,9,10,11,12,3,4,3,2,1,0,1,2,3,4,5,6,7,8,9,10,11,12,3,4,3,2,1,0,1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,5,6,7,8,9,10,11,12,3,4,3,2,1,0,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,5,6,7,8,9,10,11,12],Bt.ELEMENT_SHELL=[0,2,2,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,18,18,18,18,18,18,18,18,18,18,8,8,8,8,8,8,8,8,18,18,18,18,18,18,18,18,18,18,8,8,8,8,8,8,8,8,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,8,8,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],Bt.NATURAL_ATOMIC_WEIGHTS=[0,1.00794,4.002602,6.941,9.012182,10.811,12.0107,14.0067,15.9994,18.9984032,20.1797,22.98977,24.305,26.981538,28.0855,30.973761,32.065,35.453,39.948,39.0983,40.078,44.95591,47.867,50.9415,51.9961,54.938049,55.845,58.9332,58.6934,63.546,65.409,69.723,72.64,74.9216,78.96,79.904,83.798,85.4678,87.62,88.90585,91.224,92.90638,95.94,98,101.07,102.9055,106.42,107.8682,112.411,114.818,118.71,121.76,127.6,126.90447,131.293,132.90545,137.327,138.9055,140.116,140.90765,144.24,145,150.36,151.964,157.25,158.92534,162.5,164.93032,167.259,168.93421,173.04,174.967,178.49,180.9479,183.84,186.207,190.23,192.217,195.078,196.96655,200.59,204.3833,207.2,208.98038,209,210,222,223,226,227,230.0331266,231.03588,233.039628,237,244,243,247,247,251,252,257,258,259,262,261,262,266,264,277,268,271,272,285],Bt.ELEMENT_H=1,Bt.ELEMENT_He=2,Bt.ELEMENT_Li=3,Bt.ELEMENT_Be=4,Bt.ELEMENT_B=5,Bt.ELEMENT_C=6,Bt.ELEMENT_N=7,Bt.ELEMENT_O=8,Bt.ELEMENT_F=9,Bt.ELEMENT_Ne=10,Bt.ELEMENT_Na=11,Bt.ELEMENT_Mg=12,Bt.ELEMENT_Al=13,Bt.ELEMENT_Si=14,Bt.ELEMENT_P=15,Bt.ELEMENT_S=16,Bt.ELEMENT_Cl=17,Bt.ELEMENT_Ar=18,Bt.ELEMENT_K=19,Bt.ELEMENT_Ca=20,Bt.ELEMENT_Sc=21,Bt.ELEMENT_Ti=22,Bt.ELEMENT_V=23,Bt.ELEMENT_Cr=24,Bt.ELEMENT_Mn=25,Bt.ELEMENT_Fe=26,Bt.ELEMENT_Co=27,Bt.ELEMENT_Ni=28,Bt.ELEMENT_Cu=29,Bt.ELEMENT_Zn=30,Bt.ELEMENT_Ga=31,Bt.ELEMENT_Ge=32,Bt.ELEMENT_As=33,Bt.ELEMENT_Se=34,Bt.ELEMENT_Br=35,Bt.ELEMENT_Kr=36,Bt.ELEMENT_Rb=37,Bt.ELEMENT_Sr=38,Bt.ELEMENT_Y=39,Bt.ELEMENT_Zr=40,Bt.ELEMENT_Nb=41,Bt.ELEMENT_Mo=42,Bt.ELEMENT_Tc=43,Bt.ELEMENT_Ru=44,Bt.ELEMENT_Rh=45,Bt.ELEMENT_Pd=46,Bt.ELEMENT_Ag=47,Bt.ELEMENT_Cd=48,Bt.ELEMENT_In=49,Bt.ELEMENT_Sn=50,Bt.ELEMENT_Sb=51,Bt.ELEMENT_Te=52,Bt.ELEMENT_I=53,Bt.ELEMENT_Xe=54,Bt.ELEMENT_Cs=55,Bt.ELEMENT_Ba=56,Bt.ELEMENT_La=57,Bt.ELEMENT_Ce=58,Bt.ELEMENT_Pr=59,Bt.ELEMENT_Nd=60,Bt.ELEMENT_Pm=61,Bt.ELEMENT_Sm=62,Bt.ELEMENT_Eu=63,Bt.ELEMENT_Gd=64,Bt.ELEMENT_Tb=65,Bt.ELEMENT_Dy=66,Bt.ELEMENT_Ho=67,Bt.ELEMENT_Er=68,Bt.ELEMENT_Tm=69,Bt.ELEMENT_Yb=70,Bt.ELEMENT_Lu=71,Bt.ELEMENT_Hf=72,Bt.ELEMENT_Ta=73,Bt.ELEMENT_W=74,Bt.ELEMENT_Re=75,Bt.ELEMENT_Os=76,Bt.ELEMENT_Ir=77,Bt.ELEMENT_Pt=78,Bt.ELEMENT_Au=79,Bt.ELEMENT_Hg=80,Bt.ELEMENT_Tl=81,Bt.ELEMENT_Pb=82,Bt.ELEMENT_Bi=83,Bt.ELEMENT_Po=84,Bt.ELEMENT_At=85,Bt.ELEMENT_Rn=86,Bt.ELEMENT_Fr=87,Bt.ELEMENT_Ra=88,Bt.ELEMENT_Ac=89,Bt.ELEMENT_Th=90,Bt.ELEMENT_Pa=91,Bt.ELEMENT_U=92,Bt.ELEMENT_Np=93,Bt.ELEMENT_Pu=94,Bt.ELEMENT_Am=95,Bt.ELEMENT_Cm=96,Bt.ELEMENT_Bk=97,Bt.ELEMENT_Cf=98,Bt.ELEMENT_Es=99,Bt.ELEMENT_Fm=100,Bt.ELEMENT_Md=101,Bt.ELEMENT_No=102,Bt.ELEMENT_Lr=103,Bt.ELEMENT_Rf=104,Bt.ELEMENT_Db=105,Bt.ELEMENT_Sg=106,Bt.ELEMENT_Bh=107,Bt.ELEMENT_Hs=108,Bt.ELEMENT_Mt=109,Bt.ELEMENT_Ds=110,Bt.ELEMENT_Rg=111,Bt.ELEMENT_Cn=112;class qt{constructor(t,e,n){if(this.nbrs=[],this.indices=null,this.labels=null,this.props=null,null!=t)for(let e=0;e<t;e++)this.nbrs.push([]);if(null!=e&&null!=n)for(let t=0;t<e.length;t++)this.nbrs[e[t]].push(n[t]),this.nbrs[n[t]].push(e[t])}clone(){let t=new qt;for(let e of this.nbrs)t.nbrs.push(e.slice(0));return t.indices=null==this.indices?null:this.indices.slice(0),t.labels=null==this.labels?null:this.labels.slice(0),t.props=null==this.props?null:this.props.slice(0),t}static fromMolecule(t){let e=new qt;e.indices=[];for(let n=0;n<t.numAtoms;n++)e.nbrs.push([]),e.indices.push(n+1);for(let n=1;n<=t.numBonds;n++){let i=t.bondFrom(n)-1,s=t.bondTo(n)-1;e.nbrs[i].push(s),e.nbrs[s].push(i)}return e}static fromMoleculeMask(t,e){let i=n.maskCount(e),s=n.maskMap(e),o=new qt(i);o.indices=n.maskIdx(e),n.addTo(o.indices,1);for(let n=0;n<i;n++){let i=t.atomAdjList(o.indices[n]);o.nbrs[n]=[];for(let t=0;t<i.length;t++)e[i[t]-1]&&o.nbrs[n].push(s[i[t]-1])}return o}static fromNeighbours(t){let e=new qt;return e.nbrs=t,e}toString(){let t="#nodes="+this.nbrs.length;for(let e=0;e<this.nbrs.length;e++)t+=" "+e+":{"+this.nbrs[e]+"}",e<n.len(this.indices)&&(t+="[i="+this.indices[e]+"]"),e<n.len(this.labels)&&(t+="[l="+this.labels[e]+"]");return t}get numNodes(){return this.nbrs.length}numEdges(t){return this.nbrs[t].length}getEdge(t,e){return this.nbrs[t][e]}getEdges(t){return this.nbrs[t]}getIndex(t){return null==this.indices?0:this.indices[t]}setIndex(t,e){null==this.indices&&(this.indices=n.numberArray(0,this.nbrs.length)),this.indices[t]=e}getLabel(t){return null==this.labels?null:this.labels[t]}setLabel(t,e){null==this.labels&&(this.labels=n.stringArray("",this.nbrs.length)),this.labels[t]=e}getProperty(t){return null==this.props?null:this.props[t]}setProperty(t,e){null==this.props&&(this.props=new Array(this.nbrs.length)),this.props[t]=e}addNode(){return this.nbrs.push([]),null!=this.indices&&this.indices.push(0),null!=this.labels&&this.labels.push(""),null!=this.props&&this.props.push(null),this.nbrs.length-1}hasEdge(t,e){return this.nbrs[t].length<=this.nbrs[e].length?this.nbrs[t].indexOf(e)>=0:this.nbrs[e].indexOf(t)>=0}addEdge(t,e){this.nbrs[t].push(e),this.nbrs[e].push(t)}removeEdge(t,e){let n=this.nbrs[t].indexOf(e),i=this.nbrs[e].indexOf(t);n>=0&&this.nbrs[t].splice(n,1),i>=0&&this.nbrs[e].splice(i,1)}isolateNode(t){for(let e of this.nbrs[t]){let n=this.nbrs[e].indexOf(t);n>=0&&this.nbrs[e].splice(n,1)}this.nbrs[t]=[]}keepNodesMask(t){const e=this.nbrs.length,i=n.maskCount(t);if(i==e)return;if(0==i)return this.nbrs=[],this.indices=null,this.labels=null,void(this.props=null);let s=n.maskMap(t),o=[];for(let t=0;t<i;t++)o.push([]);for(let n=0,i=0;n<e;n++)if(t[n]){for(let e of this.nbrs[n])t[e]&&o[i].push(s[e]);i++}this.nbrs=o,null!=this.indices&&(this.indices=n.maskGet(this.indices,t)),null!=this.labels&&(this.labels=n.maskGet(this.labels,t)),null!=this.props&&(this.props=n.maskGet(this.props,t))}keepNodesIndex(t){this.keepNodesMask(n.idxMask(t,this.numNodes))}removeNodesMask(t){this.keepNodesMask(n.notMask(t))}removeNodesIndex(t){this.removeNodesMask(n.idxMask(t,this.numNodes))}subgraphIndex(t){const e=t.length;let n=new qt(e);if(null!=this.indices||null!=this.labels||null!=this.props)for(let i=0;i<e;i++)null!=this.indices&&n.setIndex(i,this.indices[t[i]]),null!=this.labels&&n.setLabel(i,this.labels[t[i]]),null!=this.props&&n.setProperty(i,this.props[t[i]]);for(let i=0;i<e;i++)for(let e of this.nbrs[t[i]]){let s=t.indexOf(e);s>i&&n.addEdge(i,s)}return n}subgraphMask(t){let e=this.clone();return e.keepNodesMask(t),e}calculateComponents(){const t=this.nbrs.length;if(0==t)return[];let e=n.numberArray(0,t);e[0]=1;let i=1,s=1;for(;;){for(;i<t&&e[i]>0;)i++;if(i>=t)break;let n=!1;for(let s=i;s<t;s++)if(0==e[s])for(let t=0;t<this.nbrs[s].length;t++)0!=e[this.nbrs[s][t]]&&(e[s]=e[this.nbrs[s][t]],n=!0);n||(e[i]=++s)}return e}calculateComponentGroups(){if(0==this.nbrs.length)return[];let t=this.calculateComponents(),e=n.max(t),i=[];for(let t=0;t<e;t++)i.push([]);for(let e=0;e<t.length;e++)i[t[e]-1].push(e);return i}calculateRingBlocks(){let t=this.numNodes,e=this.nbrs;if(0==t)return[[],0];let i=new Array(this.numNodes),s=n.booleanArray(!1,t);n.setTo(i,0);let o=new Array(t+1),r=0,a=0;for(;;){let n,l;if(0==r)for(n=-1,l=0;s[l];l++);else{n=o[r-1],l=-1;for(let t=0;t<e[n].length;t++)if(!s[e[n][t]]){l=e[n][t];break}}if(l>=0&&r>=2){let a=o[r-1];for(let d=0;d<e[l].length;d++){let p=e[l][d];if(p!=a&&s[p]){o[r]=l;for(let e=r;e==r||o[e+1]!=p;e--){let s=i[o[e]];if(0==s)i[o[e]]=n;else if(s!=n)for(let e=0;e<t;e++)i[e]==s&&(i[e]=n)}}}}if(l>=0?(s[l]=!0,o[r++]=l,a++):r--,a==t)break}let l=0;for(let e=0;e<t;e++)if(i[e]>0){l--;for(let n=t-1;n>=e;n--)i[n]==i[e]&&(i[n]=l)}for(let e=0;e<t;e++)i[e]=-i[e];return[i,-l]}calculateRingBlockGroups(){let[t,e]=this.calculateRingBlocks();if(0==e)return[];let i=n.numberArray(0,e);for(let e=0;e<t.length;e++)t[e]>0&&i[t[e]-1]++;let s=new Array(e);for(let t=0;t<e;t++)s[t]=new Array(i[t]),i[t]=0;for(let e=0;e<t.length;e++){let n=t[e]-1;n<0||(s[n][i[n]++]=e)}return s}findRingsOfSize(t){let[e,n]=this.calculateRingBlocks();if(0==n)return[];let i=[],s=new Array(this.numNodes);for(let o=1;o<=n;o++){for(let t=0;t<this.numNodes;t++)s[t]=e[t]==o;let n=this.findRingsOfSizeMask(t,s);for(let t=0;t<n.length;t++)i.push(n[t])}return i}findRingsOfSizeMask(t,e){let n=[];for(let i=0;i<this.numNodes;i++)if(e[i]){let s=new Array(t);s[0]=i,this.recursiveRingFind(s,1,t,e,n)}return n}calculateBFS(t){let e=n.numberArray(-1,this.numNodes);e[t]=0;let i=0,s=1,o=0,r=n.numberArray(0,this.numNodes);for(r[0]=t;;){let t=s;for(let n=o;n<s;n++)for(let s=0;s<this.nbrs[r[n]].length;s++){let o=this.nbrs[r[n]][s];e[o]<0&&(e[o]=i+1,r[t++]=o)}if(t==s)break;o=s,s=t,i++}return e}calculateGravity(){const t=this.numNodes,{nbrs:e}=this;let i=n.numberArray(1,t);for(let s=0;s<t;s++){let s=n.numberArray(0,t);for(let n=0;n<t;n++)for(let t=e[n].length-1;t>=0;t--)s[n]+=i[e[n][t]];i=s}return i}calculateShortestPath(t,e){const i=this.numNodes;let s=new Set;for(let t=0;t<i;t++)s.add(t);let o=n.numberArray(Number.MAX_SAFE_INTEGER,i),r=n.numberArray(-1,i);for(o[t]=0;s.size>0;){let t=-1;for(let e of s)(t<0||o[e]<o[t])&&(t=e);if(s.delete(t),t==e)break;for(let e of this.nbrs[t]){let n=o[t]+1;n<o[e]&&(o[e]=n,r[e]=t)}}let a=[];for(let t=e;r[t]>=0;t=r[t])a.unshift(t);return a.length>0&&a.unshift(t),a.length>0?a:null}adjacencyMatrix(){const t=this.numNodes;let e=[];for(let i=0;i<t;i++)e.push(n.numberArray(0,t));for(let n=0;n<t;n++)for(let t of this.nbrs[n])e[n][t]=e[t][n]=1;return e}distanceMatrix(){const t=this.numNodes;let e=[];for(let i=0;i<t;i++)e.push(n.numberArray(Number.POSITIVE_INFINITY,t));for(let n=0;n<t;n++){e[n][n]=0;for(let t of this.nbrs[n])e[n][t]=e[t][n]=1}for(let n=0;n<t;n++)for(let i=0;i<t;i++)for(let s=0;s<t;s++)Number.isFinite(e[n][s])&&Number.isFinite(e[i][n])&&(e[i][s]=Math.min(e[i][s],e[i][n]+e[n][s]));return e}recursiveRingFind(t,e,i,s,o){if(e<i){let r=t[e-1];for(let a=0;a<this.nbrs[r].length;a++){let l=this.nbrs[r][a];if(!s[l])continue;let d=!1;for(let n=0;n<e;n++)if(t[n]==l){d=!0;break}if(!d){let r=n.duplicate(t);r[e]=l,this.recursiveRingFind(r,e+1,i,s,o)}}return}let r=t[e-1],a=!1;for(let e=0;e<this.nbrs[r].length;e++)if(this.nbrs[r][e]==t[0]){a=!0;break}if(!a)return;for(let e=0;e<t.length;e++){let n=0,i=t[e];for(let e=0;e<this.nbrs[i].length;e++)t.indexOf(this.nbrs[i][e])>=0&&n++;if(2!=n)return}let l=0;for(let n=1;n<e;n++)t[n]<t[l]&&(l=n);let d=(l+1)%e,p=t[(l-1+e)%e]<t[d];if(0!=l||p){let n=new Array(e);for(let i=0;i<e;i++)n[i]=t[(l+(p?e-i:i))%e];t=n}for(let n=0;n<o.length;n++){let i=o[n],s=!0;for(let n=0;n<e;n++)if(i[n]!=t[n]){s=!1;break}if(s)return}o.push(t)}}class _t{constructor(t,e,n=[]){this.mol=t,this.resBonds=e,this.atomHyd=n,this.maxIter=1e3,this.bondOrders=[],this.tolerant=!1,this.mol=t,this.resBonds=e,this.atomHyd=n;for(let e=1;e<=t.numBonds;e++)this.bondOrders.push(t.bondOrder(e))}perform(){const{mol:t}=this;if(null==this.atomHyd){this.atomHyd=[];for(let e=1;e<=t.numAtoms;e++)this.atomHyd.push(t.atomHExplicit(e))}this.correctInputMask();let e=new qt(t.numAtoms);for(let n=1;n<=t.numBonds;n++)this.resBonds[n-1]&&e.addEdge(t.bondFrom(n)-1,t.bondTo(n)-1);let n=e.calculateComponentGroups();for(let t=0;t<n.length;t++)n[t].length>=2&&this.processComponent(n[t])}correctInputMask(){const{mol:t,atomHyd:e}=this,i=t.numAtoms,s=t.numBonds;let o=n.booleanArray(!1,i);for(let n=1;n<=i;n++){let i=t.atomicNumber(n),s=i==Bt.ELEMENT_C?4:i==Bt.ELEMENT_N||i==Bt.ELEMENT_P||i==Bt.ELEMENT_B?3:i==Bt.ELEMENT_O||i==Bt.ELEMENT_S?2:-1;s<0?o[n-1]=!0:(s+=t.atomCharge(n),e[n-1]>0&&(s-=e[n-1]),t.atomAdjCount(n)>=s&&(o[n-1]=!0))}for(let e=1;e<=s;e++)this.resBonds[e-1]||1==t.bondOrder(e)||(o[t.bondFrom(e)-1]=!0,o[t.bondTo(e)-1]=!0);this.resBonds=this.resBonds.slice(0);for(let e=0;e<s;e++)this.resBonds[e]&&(o[t.bondFrom(e+1)-1]||o[t.bondTo(e+1)-1])&&(this.bondOrders[e]=1,this.resBonds[e]=!1)}processComponent(t){const{mol:e,resBonds:i,bondOrders:s,atomHyd:o}=this;let r=t.length;if(2==r)return void(s[e.findBond(t[0]+1,t[1]+1)-1]=2);let a=n.booleanArray(!1,r);for(let n=0;n<r;n++){let i=t[n],s=i+1;a[n]=o[i]==ge.HEXPLICIT_UNKNOWN&&"N"==e.atomElement(s)&&e.atomAdjCount(s)-e.atomCharge(s)<=2}let l=new qt(r),d=l.calculateGravity(),p=n.idxMask(t,e.numAtoms),h=0;for(let t=1;t<=e.numBonds;t++)i[t-1]&&p[e.bondFrom(t)-1]&&p[e.bondTo(t)-1]&&h++;let c=n.numberArray(0,h),m=n.numberArray(0,h),u=n.numberArray(0,h),f=n.numberArray(0,h);h=0;for(let n=1;n<=e.numBonds;n++)if(i[n-1]&&p[e.bondFrom(n)-1]&&p[e.bondTo(n)-1]){let i=t.indexOf(e.bondFrom(n)-1),s=t.indexOf(e.bondTo(n)-1);c[h]=i,m[h]=s,u[h]=d[i]+d[s],f[h]=n,l.addEdge(i,s),h++}let g=n.numberArray(0,h);g[0]=n.idxMax(u);let k=n.booleanArray(!1,h);k[g[0]]=!0;for(let t=1;t<h;t++){let e=-1;for(let n=t-1;n>=0;n--){for(let t=0;t<h;t++)k[t]||c[t]!=c[g[n]]&&c[t]!=m[g[n]]&&m[t]!=c[g[n]]&&m[t]!=m[g[n]]||(e<0||u[t]>u[e])&&(e=t);if(e>=0)break}if(e<0)throw"Graph walk failed";g[t]=e,k[e]=!0}let y=[];y.push([!0]),y.push([!1]);let w=null,x=0,C=Math.ceil(.5*h),v=0;for(;y.length>0;){let t=y[0],e=n.append(t,!1),i=n.append(t,!0);if(this.validPath(e,g,c,m,l,a)||(e=null),this.validPath(i,g,c,m,l,a)||(i=null),n.len(e)==h){let t=n.maskCount(e);t>x&&(w=e,x=t),e=null}if(n.len(i)==h){let t=n.maskCount(i);t>x&&(w=i,x=t),i=null}if(x>=C)break;if(null==e&&null==i?y.shift():null!=e&&null!=i?(y[0]=e,y.splice(1,0,i)):y[0]=null!=e?e:i,v++,v>this.maxIter){if(null!=w)break;if(this.tolerant)return;throw"Resonance localisation exceeded maximum iteration count"}}if(null==w){if(this.tolerant)return;throw"Unable to find a solution to the resonance block."}for(let t=0;t<h;t++)s[f[g[t]]-1]=w[t]?2:1}validPath(t,e,i,s,o,r){let a=o.numNodes,l=n.numberArray(0,a),d=n.numberArray(0,a);for(let n=0;n<t.length;n++){let o=i[e[n]],r=s[e[n]];t[n]?(d[o]++,d[r]++):(l[o]++,l[r]++)}for(let t=0;t<a;t++){if(d[t]>1)return!1;if(!r[t]&&o.numEdges(t)>1&&l[t]==o.numEdges(t))return!1}return!0}}const It="xRESPATH:",zt="xRESRING:",Pt="xARENE:";class Ft{constructor(t){this.mol=t,this.resPaths=new Map,this.resRings=new Map,this.arenes=new Map;for(let t=1;t<=this.mol.numAtoms;t++)for(let e of this.mol.atomExtra(t))e.startsWith(It)?this.appendResPath(t,e.substring(It.length).split(":")):e.startsWith(zt)?this.appendResRing(t,e.substring(zt.length).split(":")):e.startsWith(Pt)&&this.appendArene(t,e.substring(Pt.length).split(":"));for(let[t,e]of this.resPaths.entries())e.atoms=this.pack(e.atoms),this.pathify(e.atoms,!1)||this.resPaths.delete(t);for(let[t,e]of this.resRings.entries())e.atoms=this.pack(e.atoms),this.pathify(e.atoms,!0)||this.resRings.delete(t);for(let[t,e]of this.arenes.entries())e.atoms=this.pack(e.atoms),e.atoms.length>1&&(e.centre=e.atoms.shift()),this.pathify(e.atoms,!1)||this.arenes.delete(t)}getPathBlocks(){return Array.from(this.resPaths.keys())}getRingBlocks(){return Array.from(this.resRings.keys())}getAreneBlocks(){return Array.from(this.arenes.keys())}getResPaths(){let t=[];for(let e of n.sorted(Array.from(this.resPaths.keys())))t.push(this.resPaths.get(e));return t}getResRings(){let t=[];for(let e of n.sorted(Array.from(this.resRings.keys())))t.push(this.resRings.get(e));return t}getArenes(){let t=[];for(let e of n.sorted(Array.from(this.arenes.keys())))t.push(this.arenes.get(e));return t}rewriteMolecule(){const t=this.mol;for(let e=1;e<=t.numAtoms;e++){let n=t.atomExtra(e),i=!1;for(let t=n.length-1;t>=0;t--)(n[t].startsWith(It)||n[t].startsWith(zt)||n[t].startsWith(Pt))&&(n.splice(t),i=!0);i&&t.setAtomExtra(e,n)}for(let[e,n]of this.resPaths.entries())for(let i=0;i<n.atoms.length;i++){let s=t.atomExtra(n.atoms[i]);s.push(It+e+":"+(i+1)),t.setAtomExtra(n.atoms[i],s)}for(let[e,n]of this.resRings.entries())for(let i=0;i<n.atoms.length;i++){let s=t.atomExtra(n.atoms[i]);s.push(zt+e+":"+(i+1)),t.setAtomExtra(n.atoms[i],s)}for(let[e,n]of this.arenes.entries())for(let i=-1;i<n.atoms.length;i++){let s=i<0?n.centre:n.atoms[i],o=t.atomExtra(s);o.push(Pt+e+":"+(i+2)),t.setAtomExtra(s,o)}}harmoniseNumbering(t){let e=t.getPathBlocks(),n=this.getResPaths();this.resPaths.clear();for(let t of n){let n=this.nextIdentifier(e);this.resPaths.set(n,t),e.push(n)}e=t.getRingBlocks();let i=this.getResRings();this.resRings.clear();for(let t of i){let n=this.nextIdentifier(e);this.resRings.set(n,t),e.push(n)}e=t.getAreneBlocks();let s=this.getArenes();this.arenes.clear();for(let t of s){let n=this.nextIdentifier(e);this.arenes.set(n,t),e.push(n)}}createPath(t){if(this.alreadyExists(t))return!1;let e=this.atomsAsPath(t);if(e){let t=this.nextIdentifier(Array.from(this.resPaths.keys()));return this.resPaths.set(t,e),!0}return!1}createRing(t){if(this.alreadyExists(t))return!1;let e=this.atomsAsRing(t);if(e){let t=this.nextIdentifier(Array.from(this.resRings.keys()));return this.resRings.set(t,e),!0}return!1}createArene(t){if(this.alreadyExists(t))return!1;let e=this.atomsAsArene(t);if(e){let t=this.nextIdentifier(Array.from(this.arenes.keys()));return this.arenes.set(t,e),!0}return!1}removeArtifact(t){let e=0,n=0,i=0;for(let[s,o]of this.resPaths.entries()){let r=0;for(let e of o.atoms)t.indexOf(e)>=0&&r++;r>i&&(e=1,n=s,i=r)}for(let[s,o]of this.resRings.entries()){let r=0;for(let e of o.atoms)t.indexOf(e)>=0&&r++;r>i&&(e=2,n=s,i=r)}for(let[s,o]of this.arenes.entries()){let r=t.indexOf(o.centre)>=0?1:0;for(let e of o.atoms)t.indexOf(e)>=0&&r++;r>i&&(e=3,n=s,i=r)}return 0!=e&&(1==e?this.resPaths.delete(n):2==e?this.resRings.delete(n):3==e&&this.arenes.delete(n),!0)}static removeAll(t){for(let e=1;e<=t.numAtoms;e++){let i=t.atomExtra(e),s=!1;for(let t=i.length-1;t>=0;t--)(i[t].startsWith(It)||i[t].startsWith(zt)||i[t].startsWith(Pt))&&(i=n.remove(i,t),s=!0);s&&t.setAtomExtra(e,i)}}appendResPath(t,e){let i=C(e[0],0);if(i<=0)return;let s=this.resPaths.get(i);null==s&&this.resPaths.set(i,s={atoms:n.numberArray(0,this.mol.numAtoms)});let o=e.length>=2?C(e[1],0):0;s.atoms.indexOf(t)>=0||(o>=1&&o<=this.mol.numAtoms?s.atoms[o-1]=t:s.atoms.push(t))}appendResRing(t,e){let i=C(e[0],0);if(i<=0)return;let s=this.resRings.get(i);null==s&&this.resRings.set(i,s={atoms:n.numberArray(0,this.mol.numAtoms)});let o=e.length>=2?C(e[1],0):0;s.atoms.indexOf(t)>=0||(o>=1&&o<=this.mol.numAtoms?s.atoms[o-1]=t:s.atoms.push(t))}appendArene(t,e){let i=C(e[0],0);if(i<=0)return;let s=this.arenes.get(i);null==s&&this.arenes.set(i,s={centre:0,atoms:n.numberArray(0,this.mol.numAtoms)});let o=e.length>=2?C(e[1],0):0;s.atoms.indexOf(t)>=0||(o>=1&&o<=this.mol.numAtoms?s.atoms[o-1]=t:s.atoms.push(t))}pack(t){let e=[];for(let n of t)0!=n&&e.push(n);return e}pathify(t,e){let i=t.length;if(i<2)return!1;let s=qt.fromMolecule(this.mol);for(let t=0;t<this.mol.numAtoms;t++)s.setIndex(t,t+1);s=s.subgraphIndex(n.add(t,-1));let o=0;for(let t=1;t<i;t++)s.numEdges(t)<s.numEdges(o)&&(o=t);n.setTo(t,-1);for(let n=0;n<i;n++)if(t[n]=o,n==i-1){if(e&&s.getEdges(o).indexOf(t[0])<0)return!1}else{let e=i;for(let n of s.getEdges(o))t.indexOf(n)<0&&n<e&&(e=n);if(e==i)return!1;o=e}for(let e=0;e<i;e++)t[e]=s.getIndex(t[e]);return!0}alreadyExists(t){t=n.sorted(t);for(let e of this.resPaths.values())if(n.equals(t,n.sorted(e.atoms)))return!0;for(let e of this.resRings.values())if(n.equals(t,n.sorted(e.atoms)))return!0;for(let e of this.arenes.values()){let i=n.append(e.atoms,e.centre);if(n.equals(t,n.sorted(i)))return!0}return!1}atomsAsPath(t){if(t.length<2)return null;let e={atoms:t};return this.pathify(e.atoms,!1)?e:null}atomsAsRing(t){if(t.length<3)return null;let e={atoms:t};return this.pathify(e.atoms,!0)?e:null}atomsAsArene(t){const e=t.length;if(e<3)return null;let i=qt.fromMolecule(this.mol).subgraphIndex(n.add(t,-1)),s=0;if(3==e){let o=[0,0,0];for(let r=0;r<e;r++){if(2!=i.numEdges(r))return null;for(let e of i.getEdges(r))o[r]+=this.mol.bondOrder(this.mol.findBond(t[r],t[e]));s=n.idxMin(o)}}else for(let t=1;t<e;t++)i.numEdges(t)>i.numEdges(s)&&(s=t);let o={centre:t[s],atoms:n.remove(t,s)};return this.pathify(o.atoms,!1)?o:null}nextIdentifier(t){if(0==t.length)return 1;let e=n.sorted(t);for(let t=0;t<e.length-1;t++)if(e[t+1]!=e[t]+1)return e[t]+1;return e[e.length-1]+1}}const jt="xPOLYMER:",Ut="*";var Xt,Yt,Wt,Ht,Gt;!function(t){t.HeadToTail="ht",t.HeadToHead="hh",t.Random="rnd"}(Xt||(Xt={}));class Vt{constructor(t){this.atoms=t,this.connect=null,this.bondConn=null,this.atomName=new Map,this.bondIncl=new Map,this.bondExcl=new Map}clone(){let t=new Vt(this.atoms.slice(0));t.connect=this.connect,this.bondConn&&(t.bondConn=this.bondConn.slice(0));for(let[e,n]of this.atomName.entries())t.atomName.set(e,n.slice(0));for(let[e,n]of this.bondIncl.entries())t.bondIncl.set(e,n.slice(0));for(let[e,n]of this.bondExcl.entries())t.bondExcl.set(e,n.slice(0));return t}}class $t{constructor(t){this.mol=t,this.units=new Map;let e=new Map;for(let n=1;n<=t.numAtoms;n++){let i=t.atomExtra(n);for(let t of i)if(t.startsWith(jt)){let i=t.substring(jt.length).split(":"),s=parseInt(i[0]);if(s>0){let t=e.get(s);t?t.push(n):t=[n],e.set(s,t)}}}for(let t of n.sorted(Array.from(e.keys())))this.appendBlock(t,e.get(t))}getIDList(){return n.sorted(Array.from(this.units.keys()))}getUnit(t){return this.units.get(t)}getUnits(){return Array.from(this.units.values())}rewriteMolecule(){this.purgeExtraFields();for(let t of n.sorted(Array.from(this.units.keys())))this.writeUnit(t,this.units.get(t))}harmoniseNumbering(t){let e=t.getIDList();for(let t of this.getIDList())if(e.includes(t)){let n=this.units.get(t);this.units.delete(t),t=this.nextIdentifier(e),this.units.set(t,n),e.push(t)}}removeUnit(t){let e=this.units.get(t);if(null==e)return;this.units.delete(t);let i=jt+t+":";for(let t of e.atoms){let e=this.mol.atomExtra(t);for(let t=e.length-1;t>=0;t--)e[t].startsWith(i)&&(e=n.remove(e,t));this.mol.setAtomExtra(t,e)}for(let t=1;t<=this.mol.numBonds;t++){let e=this.mol.bondExtra(t);if(!n.isBlank(e)){for(let t=e.length-1;t>=0;t--)e[t].startsWith(i)&&(e=n.remove(e,t));this.mol.setBondExtra(t,e)}}}removeAll(){this.units.clear(),this.purgeExtraFields()}createUnit(t){let e=this.nextIdentifier();return this.units.set(e,t.clone()),this.writeUnit(e,t),e}static hasPolymerExtensions(t){for(let e=1;e<=t.numAtoms;e++){let n=t.atomExtra(e);if(null!=n)for(let t of n)if(t.startsWith(jt))return!0}return!1}static getPolymerExtensions(t,e){let i=t.atomExtra(e),s=null;if(null==i)return null;for(let t of i)t.startsWith(jt)&&(s=n.append(s,t));return s}static removePolymerExtensions(t,e){let i=t.atomExtra(e);if(null==i)return;let s=!1;for(let t=i.length-1;t>=0;t--)i[t].startsWith(jt)&&(i=n.remove(i,t),s=!0);s&&t.setAtomExtra(e,i)}appendBlock(t,e){const{mol:i}=this;let s=0,o=new Vt(e);for(let n of e)for(let r of i.atomExtra(n))if(r.startsWith(jt)){let a=r.substring(jt.length).split(":");if(a.length<2||parseInt(a[0])!=t)continue;s=parseInt(a[1]);for(let t=2;t<a.length;t++)if(a[t]==Xt.HeadToTail)o.connect=Xt.HeadToTail;else if(a[t]==Xt.HeadToHead)o.connect=Xt.HeadToHead;else if(a[t]==Xt.Random)o.connect=Xt.Random;else if(a[t].startsWith("n")){let s=!1;for(let t of i.atomAdjList(n))if(!e.includes(t)){s=!0;break}if(s){let e=a[t].substring(1).split(",");o.atomName.set(n,e.map((t=>parseInt(t))))}}}if(s<0)return;for(let t=1;t<=i.numBonds;t++){let n=e.indexOf(i.bondFrom(t))>=0,o=e.indexOf(i.bondTo(t))>=0;(n&&!o||!n&&o)&&s--}if(0!=s)return;let r=null,a=null;for(let e=1;e<=i.numBonds;e++)for(let s of i.bondExtra(e))if(s.startsWith(jt)){let i=s.substring(jt.length).split(":");if(i.length<2||parseInt(i[0])!=t)continue;for(let t=1;t<i.length;t++)if(i[t].startsWith("i")){let n=i[t].substring(1).split(",");o.bondIncl.set(e,n.map((t=>parseInt(t))))}else if(i[t].startsWith("e")){let n=i[t].substring(1).split(",");o.bondExcl.set(e,n.map((t=>parseInt(t))))}else{let s=parseInt(i[t]);s>0&&(r=n.append(r,e),a=n.append(a,s))}}if(null!=r){if(r.length%2==1)return;o.bondConn=n.idxGet(r,n.idxSort(a))}this.units.set(t,o)}formatBlockAtom(t,e,i){let s=0;for(let t=1;t<=this.mol.numBonds;t++){let n=e.atoms.indexOf(this.mol.bondFrom(t))>=0,i=e.atoms.indexOf(this.mol.bondTo(t))>=0;(n&&!i||!n&&i)&&s++}let o=jt+t+":"+s;null!=e.connect&&(o+=":"+e.connect);let r=e.atomName.get(i);return n.notBlank(r)&&(o+=":n"+r.join(",")),o}formatBlockBond(t,e,i){let s=e.atoms.includes(this.mol.bondFrom(i)),o=e.atoms.includes(this.mol.bondTo(i));if(!(s&&!o||o&&!s))return null;let r=e.bondConn?e.bondConn.indexOf(i):-1,a=e.bondIncl.get(i),l=e.bondExcl.get(i);if(r<0&&n.isBlank(a)&&n.isBlank(l))return null;let d=jt+t;return r>=0&&(d+=":"+(r+1)),n.notBlank(a)&&(d+=":i"+a.join(",")),n.notBlank(l)&&(d+=":e"+l.join(",")),d}purgeExtraFields(){for(let t=1;t<=this.mol.numAtoms;t++){let e=this.mol.atomExtra(t),i=!1;for(let t=e.length-1;t>=0;t--)e[t].startsWith(jt)&&(e=n.remove(e,t),i=!0);i&&this.mol.setAtomExtra(t,e)}for(let t=1;t<=this.mol.numBonds;t++){let e=this.mol.bondExtra(t),i=!1;for(let t=e.length-1;t>=0;t--)e[t].startsWith(jt)&&(e=n.remove(e,t),i=!0);i&&this.mol.setBondExtra(t,e)}}writeUnit(t,e){const{mol:i}=this;for(let s of e.atoms){let o=this.formatBlockAtom(t,e,s);i.setAtomExtra(s,n.append(i.atomExtra(s),o))}for(let s=1;s<=i.numBonds;s++){let o=this.formatBlockBond(t,e,s);o&&i.setBondExtra(s,n.append(i.bondExtra(s),o))}}nextIdentifier(t){if(t||(t=this.getIDList()),0==t.length)return 1;for(let e=0;e<t.length-1;e++)if(t[e+1]!=t[e]+1)return t[e]+1;return t[t.length-1]+1}}!function(t){t[t.Linear=0]="Linear",t[t.Bent=1]="Bent",t[t.Trigonal=2]="Trigonal",t[t.Tetra1=3]="Tetra1",t[t.Tetra2=4]="Tetra2",t[t.SqPlan=5]="SqPlan",t[t.BasePyram=6]="BasePyram",t[t.TrigBip=7]="TrigBip",t[t.Octa1=8]="Octa1",t[t.Octa2=9]="Octa2"}(Yt||(Yt={}));class Kt{static placeNewAtom(t,e){let n=t.boundary(),i=n.maxX()+ge.IDEALBOND,s=n.maxY();return t.addAtom(e,i,s)}static placeNewFragment(t,e){if(0==e.numAtoms)return;let i=[1,0,-1,1,-1,1,0,-1],s=[1,1,1,0,0,-1,-1,-1],o=n.numberArray(0,8),r=n.numberArray(0,8),a=n.numberArray(0,8),l=t.boundary(),d=e.boundary();for(let n=0;n<8;n++){let p=i[n],h=s[n];o[n]=0==n||3==n||5==n?l.minX()-d.maxX():2==n||4==n||7==n?l.maxX()-d.minX():.5*(l.minX()+l.maxX()-d.minX()-d.maxX()),r[n]=5==n||6==n||7==n?l.minY()-d.maxY():0==n||1==n||2==n?l.maxY()-d.minY():.5*(l.minY()+l.maxY()-d.minY()-d.maxY()),o[n]-=p,r[n]-=h,a[n]=Kt.fragPosScore(t,e,o[n],r[n]),p*=.25,h*=.25;for(let i=100;i>0;i--){let i=Kt.fragPosScore(t,e,o[n]+p,r[n]+h);if(i<=a[n])break;a[n]=i,o[n]+=p,r[n]+=h}for(let l=100;l>0;l--)for(let l=0;l<8;l++){p=.1*i[l],h=.1*s[l];let d=Kt.fragPosScore(t,e,o[n]+p,r[n]+h);if(d<=a[n])break;a[n]=d,o[n]+=p,r[n]+=h}}let p=0;for(let t=1;t<8;t++)a[t]>a[p]&&(p=t);e=e.clone();for(let t=1;t<=e.numAtoms;t++)e.setAtomPos(t,e.atomX(t)+o[p],e.atomY(t)+r[p]);t.append(e)}static fragPosScore(t,e,n,i){let s=0;for(let o=1;o<=t.numAtoms;o++)for(let r=1;r<=e.numAtoms;r++){let a=e.atomX(r)+n-t.atomX(o),l=e.atomY(r)+i-t.atomY(o),d=a*a+l*l;if(d<1)return 0;s+=1/d}let o=t.boundary(),r=e.boundary(),a=Math.min(r.minX()+n,o.minX()),l=Math.max(r.maxX()+n,o.maxX()),d=Math.min(r.minY()+i,o.minY()),p=Math.max(r.maxY()+i,o.maxY()),h=Math.max(1,l-a),c=Math.max(1,p-d);return s/Math.max(h/c,c/h)}static mergeOverlappingAtoms(t){return Kt.mergeFragmentsDiv(t,0)}static mergeFragmentsDiv(t,e){const i=t.numAtoms;let s=Zt.overlappingAtomMask(t),o=n.booleanArray(!1,i),r=Qt.arrayAtomX(t),a=Qt.arrayAtomY(t),l=[];for(let t=0;t<i;t++)l.push(t+1);let d=e,p=e+1;0==e&&(d=i);for(let n=1;n<=d;n++)if(s[n-1]&&!o[n-1]){0==e&&(p=n+1);for(let e=p;e<=i;e++)if(s[e-1]&&!o[e-1]){if(Y(r[n-1]-r[e-1],a[n-1]-a[e-1])>Zt.OVERLAP_THRESHOLD_SQ)continue;let i=e,s=n,d=[0,0];for(let i=0;i<2;i++){let s=0==i?n:e;d[i]=("C"==t.atomElement(s)?0:1)+("X"==t.atomElement(s)?-100:0)+(0!=t.atomCharge(s)?1:0)+(0!=t.atomUnpaired(s)?1:0)+(t.atomIsotope(s)!=ge.ISOTOPE_NATURAL?1:0)+(t.atomHExplicit(s)!=ge.HEXPLICIT_UNKNOWN?1:0)+(Qt.hasAbbrev(t,s)?1e3:0)}d[1]>d[0]&&(i=n,s=e);for(let e=1;e<=t.numBonds;e++)t.bondFrom(e)==i&&t.setBondFrom(e,s),t.bondTo(e)==i&&t.setBondTo(e,s);o[i-1]=!0,l[i-1]=s}}for(let n=i;n>=1;n--)if(o[n-1]){n<=e&&e--,t.deleteAtomAndBonds(n);for(let t=0;t<i;t++)l[t]>n&&l[t]--}for(let n=t.numAtoms;n>e;n--)if("X"==t.atomElement(n)){t.deleteAtomAndBonds(n);for(let t=0;t<i;t++)l[t]>n&&l[t]--}return Qt.removeDuplicateBonds(t),l}static mergeFragmentsMask(t,e){let i=n.booleanArray(!1,t.numAtoms),s=t.numAtoms,o=Qt.arrayAtomX(t),r=Qt.arrayAtomY(t);for(let a=1;a<=s;a++)if(e[a-1])for(let l=1;l<=s;l++)if(!e[l-1]&&!i[l-1]&&Y(o[a-1]-o[l-1],r[a-1]-r[l-1])<Zt.OVERLAP_THRESHOLD_SQ){let e=l,s=a;"C"==t.atomElement(a)&&"C"!=t.atomElement(l)&&"X"!=t.atomElement(l)&&([e,s]=[a,l]),t.atomHExplicit(s)==ge.HEXPLICIT_UNKNOWN&&t.setAtomHExplicit(s,t.atomHExplicit(e)),t.setAtomUnpaired(s,t.atomUnpaired(s)+t.atomUnpaired(e)),t.setAtomCharge(s,t.atomCharge(s)+t.atomCharge(e)),t.setAtomExtra(s,n.concat(t.atomExtra(e),t.atomExtra(s)));for(let n=1;n<=t.numBonds;n++)t.bondFrom(n)==e&&t.setBondFrom(n,s),t.bondTo(n)==e&&t.setBondTo(n,s);i[e-1]=!0}for(let e=i.length;e>=1;e--)i[e-1]&&t.deleteAtomAndBonds(e);Qt.removeDuplicateBonds(t)}static matchAngleGeometry(t,e){if(e.length<=1)return!0;let i=Kt.GEOM_ANGLES[t],s=n.numberArray(0,e.length),o=n.booleanArray(!1,i.length);for(let t=0;t<e.length;t++)for(let t=1;t>=-1;t-=2){for(let n=0;n<e.length;n++)s[n]=(e[n]-e[0])*t;n.setTo(o,!1);let r=!0;for(let t=0;t<s.length;t++){let e=!1;for(let n=0;n<i.length;n++)if(!o[n]&&Math.abs(it(s[t],i[n]))<3*tt){o[n]=!0,e=!0;break}if(!e){r=!1;break}}if(r)return!0}return!1}static primeDirections(t,e){let n=Kt.calculateNewBondAngles(t,e,1),i=Kt.exitVectors(t,e);return l.uniqueAngles(n.concat(i),2*tt)}static exitVectors(t,e){let n=t.atomAdjList(e),i=n.length;if(0==i)return[0,90*tt,180*tt,-90*tt];if(1==i)return[];let s=[],o=l.sortAngles(Zt.atomBondAngles(t,e,n));for(let t=0;t<i;t++){let e=t<i-1?t+1:0;s.push(nt(o[t]+.5*st(o[e],o[t])))}return s}static calculateNewBondAngles(t,e,n){let i=t.atomAdjList(e);if(0==i.length){let n=t.atomicNumber(e);return Bt.ELEMENT_BLOCKS[n]<=2?[0,90*tt,180*tt,-90*tt]:[90*tt,-90*tt,30*tt,150*tt,210*tt,-30*tt,180*tt,0*tt]}let s=Kt.guessAtomGeometry(t,e,n),o=Zt.atomBondAngles(t,e,i);for(let t=0;t<s.length;t++){let e=Kt.mapAngleSubstituent(s[t],o);if(null!=e)return e}return[]}static guessAtomGeometry(t,e,i){let s=t.atomAdjList(e),o=s.length,r=t.atomicNumber(e),a=Bt.ELEMENT_BLOCKS[r],l=Bt.ELEMENT_ROWS[r],d=t.atomElement(e),p=[],h=[],c=[],m=!0;for(let n=0;n<o;n++)p.push(t.bondOrder(t.findBond(e,s[n]))),h.push(t.atomicNumber(s[n])),c.push(200*p[n]+h[n]),1!=p[n]&&(m=!0);for(let t=0;t<o-1;)c[t]>c[t+1]?(n.swap(s,t,t+1),n.swap(p,t,t+1),n.swap(h,t,t+1),n.swap(c,t,t+1),t>0&&t--):t++;let u=Zt.atomBondAngles(t,e,s);if(1==o){if("C"==d||"N"==d){if(2==p[0]&&2==i)return[Yt.Linear];if(3==p[0]&&1==i||1==p[0]&&3==i)return[Yt.Linear]}return a>2?[Yt.Octa1,Yt.Octa2]:0==i||"C"!=d&&"N"!=d&&"O"!=d?[Yt.Trigonal,Yt.Linear]:[Yt.Trigonal]}if(2==o&&Math.abs(it(u[0],u[1]))>=175*tt)return a<=2?[Yt.SqPlan]:[Yt.Octa1,Yt.Octa2];let f=[];0==a?f=[Yt.Trigonal,Yt.SqPlan]:1==a?f=[Yt.Trigonal,Yt.SqPlan,Yt.Octa1,Yt.Octa2]:2==a?(f.push(Yt.Trigonal),"C"==d&&m?(f.push(Yt.Tetra1),f.push(Yt.Tetra2),f.push(Yt.SqPlan)):("C"!=d||m)&&(l<=3?(f.push(Yt.Tetra1),f.push(Yt.Tetra2),f.push(Yt.SqPlan)):(f.push(Yt.Tetra1),f.push(Yt.Tetra2),f.push(Yt.SqPlan),f.push(Yt.Octa1),f.push(Yt.Octa2)))):(f.push(Yt.Octa1),f.push(Yt.Octa2));for(let t=f.length-1;t>=0;t--)Kt.matchAngleGeometry(f[t],u)||f.splice(t,1);return f}static mapAngleSubstituent(t,e){let i=Kt.GEOM_ANGLES[t];const s=e.length,o=i.length;if(s>=o)return null;if(0==s)return i.slice(0);let r=[];for(let t=0;t<s;t++)for(let a=0;a<o;a++)for(let l=1;l>=-1;l-=2){let d=[];for(let n=0;n<o;n++)d.push(nt(e[t]+l*(i[n]-i[a])));let p=n.booleanArray(!1,o),h=0;for(let t=0;t<o;t++)if(!p[t])for(let n=0;n<s;n++)if(Math.abs(it(d[t],e[n]))<3*tt){p[t]=!0,h++;break}if(h==s)for(let t=0;t<o;t++)p[t]||r.push(d[t])}if(0==r.length)return null;r=l.sortAngles(r);for(let t=0;t<r.length-1;t++){let e=r[t],n=it(r[t+1],e);Math.abs(n)<5*tt&&(r[t]=e+.5*n,r.splice(t+1,1),t--)}return r}static refitAtomGeometry(t,e,i){let s=Kt.GEOM_ANGLES[i],o=s.length,r=t.atomAdjList(e),a=r.length;if(a<=1||a>o)return null;let l=Zt.atomBondAngles(t,e,r),d=n.booleanArray(!1,a),p=!0;for(let n=0;n<a;n++)d[n]=t.bondInRing(t.findBond(e,r[n])),d[n]||(p=!1);if(p)return null;let h=null,c=0,m=Qt.calculateWalkWeight(t,e);for(let t=0;t<o;t++)for(let e=0;e<a;e++)for(let i=1;i>=-1;i-=2){let p=n.numberArray(0,a),u=n.booleanArray(!1,o);for(let n=0;n<a;n++){let r=-1,a=0;for(let d=0;d<o;d++)if(!u[d]){let o=nt(s[d]*i-s[t]+l[e]),h=Math.abs(it(o,l[n]));(r<0||h<a)&&(r=d,a=h,p[n]=o)}u[r]=!0}let f=!1;for(let t=0;t<a;t++)if(d[t]&&Math.abs(it(p[t],l[t]))>2*tt){f=!0;break}if(f)continue;let g=0;for(let t=0;t<a;t++)g+=m[r[t]-1]*Math.abs(it(p[t],l[t]));(null==h||g<c)&&(h=p,c=g)}if(null==h)return null;let u=!0;for(let t=0;t<a;t++)if(Math.abs(it(h[t],l[t]))>2*tt){u=!1;break}if(u)return null;t=t.clone();for(let n=0;n<a;n++)d[n]||Zt.rotateBond(t,e,r[n],h[n]-l[n]);return t}static switchAtomGeometry(t,e,i,s){let o=0,r=0,a=0,l=0,d=t.atomAdjList(e),p=Zt.atomBondAngles(t,e,d),h=n.numberArray(0,p.length-1),c=t.atomX(e),m=t.atomY(e);for(let e=0;e<i.length;e++){let n=d.indexOf(i[e]),u=p[n];for(let t=0,e=0;t<d.length;t++)t!=n&&(h[e++]=p[t]);let f=U(t.atomX(i[e])-c,t.atomY(i[e])-m);for(let n=0;n<s.length;n++){if(d.length>=Kt.GEOM_ANGLES[s[n]].length)continue;let p=Kt.mapAngleSubstituent(s[n],h);if(null!=p)for(let n=0;n<p.length;n++){let s=it(p[n],u);if(!(Math.abs(s)<3*tt)&&(s<0&&(s+=Z),0==o||s<r-2*tt||s<r+2*tt&&i[e]<o)){let d=c+f*Math.cos(p[n]),h=m+f*Math.sin(p[n]);if(0!=Zt.atomAtPoint(t,d,h))continue;o=i[e],r=s,a=d,l=h}}break}}return 0==o?null:((t=t.clone()).setAtomPos(o,a,l),t)}static pickAtomsToConnect(t,e){if(e.length<2)return null;if(2==e.length)return t.findBond(e[0],e[1])>0?null:e;const n=G(ge.IDEALBOND+.1);let i=Number.MAX_VALUE,s=0,o=0,r=[];for(let a=0;a<e.length-1;a++)for(let l=a+1;l<e.length;l++){if(t.findBond(e[a],e[l])>0)continue;let d=Y(t.atomX(e[a])-t.atomX(e[l]),t.atomY(e[a])-t.atomY(e[l]));d<n?(r.push(e[a]),r.push(e[l])):d<i&&(i=d,s=e[a],o=e[l])}return 0==r.length&&0!=s&&(r.push(s),r.push(o)),0==r.length?null:r}static pickNewAtomDirection(t,e,n){if(1==n.length)return n[0];let i=n[0],s=Number.MAX_VALUE;for(let o=0;o<n.length;o++){let r=t.atomX(e)+ge.IDEALBOND*Math.cos(n[o]),a=t.atomY(e)+ge.IDEALBOND*Math.sin(n[o]),l=Zt.congestionPoint(t,r,a);l>s||(Zt.overlapsAtom(t,r,a,.2)&&(l+=1e5),l<s&&(i=n[o],s=l))}return i}static joinOverlappingAtoms(t,e){t=t.clone(),e=e.slice(0);const i=t.numAtoms;let s=Qt.arrayAtomX(t),o=Qt.arrayAtomY(t),r=[],a=[],l=[];for(let n=0;n<i-1;n++)if(e[n]){let d=[n+1],p=s[n],h=o[n];for(let r=n+1;r<i;r++)if(e[r]){if(Y(s[r]-s[n],o[r]-o[n])>Zt.OVERLAP_THRESHOLD_SQ)continue;d.push(r+1),p+=s[r],h+=o[r];let e=t.atomAdjBonds(r+1);for(let i=0;i<e.length;i++)t.bondFrom(e[i])==r+1?t.setBondFrom(e[i],n+1):t.bondTo(e[i])==r+1&&t.setBondTo(e[i],n+1)}if(1==d.length)continue;r.push(d),a.push(p/d.length),l.push(h/d.length)}if(0==r.length)return null;let d=n.booleanArray(!0,i);for(let e=0;e<r.length;e++){let n=r[e];t.setAtomPos(n[0],a[e],l[e]);for(let t=1;t<n.length;t++)d[n[t]-1]=!1}return t=Qt.subgraphMask(t,d),Qt.removeDuplicateBonds(t),t}static moveToEdge(t,e,n,i){let s=!1,o=!1,r=0,a=0,l=0,d=0,p=0,h=0,c=0,m=0;for(let n=1;n<=t.numAtoms;n++){let i=t.atomX(n),u=t.atomY(n);e[n-1]?((!s||i<r)&&(r=i),(!s||u<a)&&(a=u),(!s||i>l)&&(l=i),(!s||u>d)&&(d=u),s=!0):((!o||i<p)&&(p=i),(!o||u<h)&&(h=u),(!o||i>c)&&(c=i),(!o||u>m)&&(m=u),o=!0)}const u=.9;if(n<0&&0==i&&l<=p-u||n>0&&0==i&&r>=c+u||0==n&&i<0&&d<=h-u||0==n&&i>0&&a>=m+u)return null;t=t.clone();let f=0,g=0;n<0&&(f=p-l-1),n>0&&(f=c-r+1),i<0&&(g=h-d-1),i>0&&(g=m-a+1);for(let n=1;n<=t.numAtoms;n++)e[n-1]&&t.setAtomPos(n,t.atomX(n)+f,t.atomY(n)+g);return t}static placeAdditionalHydrogens(t,e,n){let i=t.numAtoms;const s=t.atomX(e),o=t.atomY(e);let r=t.atomAdjList(e);if(2==r.length&&2==n){const n=Math.atan2(t.atomY(r[0])-o,t.atomX(r[0])-s),a=Math.atan2(t.atomY(r[1])-o,t.atomX(r[1])-s);if(Math.abs(it(n,a))<170*tt){let r=.5*(n+a)+Math.PI,l=r-30*tt,d=r+30*tt;return t.addAtom("H",s+ge.IDEALBOND*Math.cos(l),o+ge.IDEALBOND*Math.sin(l)),t.addAtom("H",s+ge.IDEALBOND*Math.cos(d),o+ge.IDEALBOND*Math.sin(d)),t.addBond(e,i+1,1),void t.addBond(e,i+2,1)}}if(1==r.length&&3==n){let n=Math.atan2(t.atomY(r[0])-o,t.atomX(r[0])-s),a=n+90*tt,l=n+180*tt,d=n+270*tt;return t.addAtom("H",s+ge.IDEALBOND*Math.cos(a),o+ge.IDEALBOND*Math.sin(a)),t.addAtom("H",s+ge.IDEALBOND*Math.cos(l),o+ge.IDEALBOND*Math.sin(l)),t.addAtom("H",s+ge.IDEALBOND*Math.cos(d),o+ge.IDEALBOND*Math.sin(d)),t.addBond(e,i+1,1),t.addBond(e,i+2,1),void t.addBond(e,i+3,1)}let a=Kt.pickNewAtomDirection(t,e,Kt.primeDirections(t,e));t.addAtom("H",s+ge.IDEALBOND*Math.cos(a),o+ge.IDEALBOND*Math.sin(a)),t.addBond(e,i+1,1),n>1&&Kt.placeAdditionalHydrogens(t,e,n-1)}static allViableDirections(t,e,n){if(0==t.atomAdjCount(e)){let t=[];for(let e=0;e<12;e++)t.push(30*tt);return t}let i=t.atomAdjList(e),s=Kt.exitVectors(t,e),o=Kt.guessAtomGeometry(t,e,n);1==i.length&&o.indexOf(Yt.Linear)<0&&o.push(Yt.Linear);let r=Zt.atomBondAngles(t,e,i);for(let t of o){let e=Kt.mapAngleSubstituent(t,r);if(null!=e)for(let t of e)s.push(t)}return l.uniqueAngles(s,2*tt)}static proposeNewRing(t,e,n,i,s,o,r){let a=0==o&&0==s?.5*Math.PI:Math.atan2(o,s);if(r){const t=30*tt;a=Math.round(a/t)*t}return Kt.positionSimpleRing(t,e,n,i,a)}static proposeAtomRing(t,e,n,i,s){let o=[],r=t.atomX(n),a=t.atomY(n);if(0==t.atomAdjCount(n))for(let t=0;t<12;t++)o.push(Z*t/12);else if(1==t.atomAdjCount(n)){let e=t.atomAdjList(n)[0];o.push(nt(Math.atan2(t.atomY(e)-a,t.atomX(e)-r)+Math.PI))}else{let e=[];for(let i of t.atomAdjList(n))e.push(Math.atan2(t.atomY(i)-a,t.atomX(i)-r));e=ot(e);for(let t=0;t<e.length;t++){let n=e[t],i=e[t<e.length-1?t+1:0];o.push(n+.5*st(i,n))}}let l=Math.atan2(s,i),d=0,p=Number.MAX_VALUE;for(let t of o){let e=Math.abs(it(t,l));e<p&&(d=t,p=e)}return Kt.positionSimpleRing(t,e,t.atomX(n),t.atomY(n),d)}static proposeBondRing(t,e,n,i,s){let o=t.bondFrom(n),r=t.bondTo(n),a=t.atomX(r)-t.atomX(o),l=t.atomY(r)-t.atomY(o),d=i*l-s*a,p=d>0?-90*tt:90*tt,h=Math.atan2(l,a)+p,c=Z/e,m=ge.IDEALBOND/(2*Math.sin(.5*c)),u=m*Math.cos(.5*c),f=.5*(t.atomX(o)+t.atomX(r))+u*Math.cos(h),g=.5*(t.atomY(o)+t.atomY(r))+u*Math.sin(h),k=[],y=[];for(let t=0;t<e;t++){let e=h-Math.PI+(t-.5)*c;k.push(f+Math.cos(e)*m),y.push(g+Math.sin(e)*m)}let[w,x]=d<0?[o,r]:[r,o];return k[0]=t.atomX(w),y[0]=t.atomY(w),k[1]=t.atomX(x),y[1]=t.atomY(x),[k,y]}static positionSimpleRing(t,e,n,i,s){let o=Z/e,r=ge.IDEALBOND/(2*Math.sin(.5*o)),a=n+r*Math.cos(s),l=i+r*Math.sin(s),d=[],p=[];for(let t=0;t<e;t++){let e=s-Math.PI+t*o;d.push(a+Math.cos(e)*r),p.push(l+Math.sin(e)*r)}return[d,p]}static guidelineSprouts(t,e){let i=[],s=[],o=[];for(let i=0;i<3;i++){s.push(Kt.allViableDirections(t,e,i+1)),o.push([i+1]);for(let t=0;t<i;t++)null!=s[t]&&n.equals(s[i],s[t])&&(s[i]=null,o[t].push(i+1))}const r=t.atomX(e),a=t.atomY(e);for(let t=0;t<3;t++)if(null!=s[t]){let n={atom:e,orders:o[t],x:[],y:[]};for(let e=0;e<s[t].length;e++)n.x[e]=r+Math.cos(s[t][e])*ge.IDEALBOND,n.y[e]=a+Math.sin(s[t][e])*ge.IDEALBOND;i.push(n)}return i}}Kt.GEOM_ANGLES=[[0,180*tt],[0,120*tt],[0,120*tt,240*tt],[0,90*tt,150*tt,240*tt],[0,120*tt,180*tt,240*tt],[0,90*tt,180*tt,270*tt],[0,90*tt,150*tt,210*tt,270*tt],[0,60*tt,90*tt,180*tt,210*tt],[0,60*tt,120*tt,180*tt,240*tt,300*tt],[0,45*tt,90*tt,180*tt,225*tt,270*tt]];class Qt{static isBlank(t){return null==t||0==t.numAtoms}static notBlank(t){return null!=t&&t.numAtoms>0}static orBlank(t){return null==t?new ge:t}static hasAnyAbbrev(t){for(let e=1;e<=t.numAtoms;e++)if(Qt.hasAbbrev(t,e))return!0;return!1}static hasAbbrev(t,e){let n=t.atomExtra(e);for(let t=0;t<(null==n?0:n.length);t++)if(n[t].startsWith("a"))return!0;return!1}static getAbbrev(t,e){let n=t.atomExtra(e);for(let t=0;t<(null!=n?n.length:0);t++)if(n[t].startsWith("a"))return ge.fromString(n[t].substring(1));return null}static setAbbrev(t,e,n){let i=0;for(let t=1;t<=n.numAtoms;t++)if(n.atomElement(t)==Qt.ABBREV_ATTACHMENT){i=t;break}if(0==i)throw"No attachment points indicated.";if(i>=2&&(n=n.clone()).swapAtoms(i,1),t.atomAdjList(e).length>1)throw"Setting abbreviation for non-terminal atom.";if(1==n.atomAdjCount(1)&&t.atomAdjCount(e)>0){let i=t.findBond(e,t.atomAdjList(e)[0]),s=n.findBond(1,n.atomAdjList(1)[0]);t.setBondOrder(i,n.bondOrder(s))}let s=t.atomExtra(e),o=-1;for(let t=0;t<(null!=s?s.length:0);t++)if(s[t].startsWith("a")){o=t;break}o<0&&(o=s.push(null)-1),s[o]="a"+n.toString(),t.setAtomExtra(e,s)}static validateAbbrevs(t){for(let e=1;e<=t.numAtoms;e++)Qt.hasAbbrev(t,e)&&(t.atomAdjCount(e)>1&&Qt.clearAbbrev(t,e),0!=t.atomCharge(e)&&t.setAtomCharge(e,0),0!=t.atomUnpaired(e)&&t.setAtomUnpaired(e,0),0!=t.atomIsotope(e)&&t.setAtomIsotope(e,ge.ISOTOPE_NATURAL),t.atomHExplicit(e)!=ge.HEXPLICIT_UNKNOWN&&t.setAtomHExplicit(e,ge.HEXPLICIT_UNKNOWN))}static convertToAbbrev(t,e,n){let i=this.convertToAbbrevIndex(t,e,n);return i?i[0]:null}static convertToAbbrevIndex(t,e,i){let s=0,o=null;for(let n=1;n<=t.numBonds;n++){let i=t.bondFrom(n),r=t.bondTo(n),a=0;if(e[i-1]&&!e[r-1]?(a=i,o=$t.getPolymerExtensions(t,r)):!e[i-1]&&e[r-1]&&(a=r,o=$t.getPolymerExtensions(t,i)),0!=a){if(s>0&&a!=s)return[null,null];s=a}}if(0==s)return[null,null];let r=t.numAtoms,a=0,l=0,d=n.booleanArray(!1,r),p=n.booleanArray(!1,r);for(let t=0;t<r;t++)d[t]=e[t],p[t]=!e[t]||t+1==s,d[t]&&t+1<=s&&a++,p[t]&&t+1<=s&&l++;let h=ge.BONDTYPE_NORMAL,c=0;for(let n of t.atomAdjList(s))if(!e[n-1]){if(0!=c){h=ge.BONDTYPE_NORMAL;break}let e=t.findBond(s,n);t.bondFrom(e)==s&&(h=t.bondType(e)),c++}let m=Qt.subgraphMask(t,p);m.setAtomElement(l,Qt.ABBREV_ATTACHMENT),m.setAtomCharge(l,0),m.setAtomUnpaired(l,0),m.setAtomHExplicit(l,ge.HEXPLICIT_UNKNOWN);for(let t=1;t<=m.numAtoms;t++)m.setAtomMapNum(t,0);m.setAtomExtra(l,[]),m.setAtomTransient(l,[]);let u=m.atomAdjList(l),f=0,g=0,k=1/u.length,y=1;for(let t=0;t<u.length;t++){f+=m.atomX(u[t]),g+=m.atomY(u[t]);let e=m.findBond(l,u[t]);0==t?y=m.bondOrder(e):y!=m.bondOrder(e)&&(y=1)}f*=k,g*=k,l>1&&m.swapAtoms(l,1);let w=Qt.subgraphMask(t,d),x=w.addAtom(i,f,g);return w.addBond(a,x,y,h),Qt.setAbbrev(w,x,m),null!=o&&w.setAtomExtra(x,n.concat(w.atomExtra(x),o)),[w,x]}static expandAbbrevs(t,e){for(;;){let n=!1;for(let i=1;i<=t.numAtoms;i++)Qt.hasAbbrev(t,i)&&(Qt.expandOneAbbrev(t,i,e)&&(n=!0),i--);if(!n)break}}static expandedAbbrevs(t){return this.hasAnyAbbrev(t)?(t=t.clone(),this.expandAbbrevs(t,!0),t):t}static expandOneAbbrev(t,e,n){let i=Qt.getAbbrev(t,e);if(null==i)return null;if(1!=t.atomAdjCount(e)||0==i.numAtoms)return Qt.clearAbbrev(t,e),null;let s=t.atomMapNum(e);for(let t=1;t<=i.numAtoms;t++)i.setAtomMapNum(t,0);if(s>0)for(let t of i.atomAdjList(1))i.setAtomMapNum(t,s);return Qt.expandOneAbbrevFrag(t,e,i,n)}static expandOneAbbrevFrag(t,e,i,s){let o=$t.getPolymerExtensions(t,e),r=1==t.atomAdjCount(e)?t.atomAdjList(e)[0]:0,a=t.findBond(e,r),l=ge.BONDTYPE_NORMAL;if(a>0&&(l=t.bondType(a),t.bondFrom(a)==r||l!=ge.BONDTYPE_INCLINED&&l!=ge.BONDTYPE_DECLINED||(l=ge.BONDTYPE_NORMAL)),s){let n=t.atomX(e)-t.atomX(r),s=t.atomY(e)-t.atomY(r),o=i.atomAdjList(1),a=0,l=0,d=1/o.length;for(let t=0;t<o.length;t++)a+=i.atomX(o[t])-i.atomX(1),l+=i.atomY(o[t])-i.atomY(1);a*=d,l*=d;let p=Math.atan2(s,n),h=Math.atan2(l,a);Zt.rotateMolecule(i,p-h),Zt.translateMolecule(i,t.atomX(r)-i.atomX(1),t.atomY(r)-i.atomY(1))}if(null!=o)for(let t=1;t<=i.numAtoms;t++){let e=i.atomExtra(t);for(let t=e.length-1;t>=0;t--)o.indexOf(e[t])>=0&&e.splice(t,1);i.setAtomExtra(t,n.concat(e,o))}let d=t.numAtoms+1;t.append(i);for(let e=1;e<=t.numBonds;e++)t.bondFrom(e)==d?(t.setBondFrom(e,r),t.setBondType(e,l)):t.bondTo(e)==d&&(t.setBondFromTo(e,r,t.bondFrom(e)),t.setBondType(e,l));let p=n.booleanArray(!1,t.numAtoms);for(let t=p.length-i.numAtoms;t<p.length;t++)p[t]=!0;return t.deleteAtomAndBonds(d),t.deleteAtomAndBonds(e),p.splice(d-1,1),p.splice(e-1,1),p}static clearAbbrev(t,e){let n=t.atomExtra(e);for(let i=0;i<(null!=n?n.length:0);i++)if(n[i].startsWith("a"))return n.splice(i,1),t.setAtomExtra(e,n),void t.setAtomElement(e,"C")}static setAtomElement(t,e,n){t.atomElement(e)!=n&&(this.clearAbbrev(t,e),t.setAtomElement(e,n))}static addBond(t,e,n,i,s){null==s&&(s=ge.BONDTYPE_NORMAL),t.atomAdjCount(e)>=1&&this.clearAbbrev(t,e),t.atomAdjCount(n)>=1&&this.clearAbbrev(t,n);let o=t.findBond(e,n);return o>0&&t.deleteBond(o),t.addBond(e,n,i,s)}static subgraphMask(t,e){let n=[],i=0;for(let s=0;s<t.numAtoms;s++)e[s]?n.push(++i):n.push(0);if(0==i)return new ge;if(i==t.numAtoms)return t.clone();let s=new ge;s.keepTransient=!0;for(let n=1;n<=t.numAtoms;n++)if(e[n-1]){let e=s.addAtom(t.atomElement(n),t.atomX(n),t.atomY(n),t.atomCharge(n),t.atomUnpaired(n));s.setAtomIsotope(e,t.atomIsotope(n)),s.setAtomHExplicit(e,t.atomHExplicit(n)),s.setAtomMapNum(e,t.atomMapNum(n)),s.setAtomExtra(e,t.atomExtra(n)),s.setAtomTransient(e,t.atomTransient(n))}for(let e=1;e<=t.numBonds;e++){let i=n[t.bondFrom(e)-1],o=n[t.bondTo(e)-1];if(i>0&&o>0){let n=s.addBond(i,o,t.bondOrder(e),t.bondType(e));s.setBondExtra(n,t.bondExtra(e)),s.setBondTransient(n,t.bondTransient(e))}}return s.keepTransient=t.keepTransient,s}static subgraphIndex(t,e){let i=n.numberArray(0,t.numAtoms);for(let t=0;t<i.length;t++)i[t]=0;for(let t=0;t<e.length;t++)i[e[t]-1]=t+1;let s=new ge;s.keepTransient=!0;for(let n=0;n<e.length;n++){let i=s.addAtom(t.atomElement(e[n]),t.atomX(e[n]),t.atomY(e[n]),t.atomCharge(e[n]),t.atomUnpaired(e[n]));s.setAtomIsotope(i,t.atomIsotope(e[n])),s.setAtomHExplicit(i,t.atomHExplicit(e[n])),s.setAtomMapNum(i,t.atomMapNum(e[n])),s.setAtomExtra(i,t.atomExtra(e[n])),s.setAtomTransient(i,t.atomTransient(e[n]))}for(let e=1;e<=t.numBonds;e++){let n=i[t.bondFrom(e)-1],o=i[t.bondTo(e)-1];if(n>0&&o>0){let i=s.addBond(n,o,t.bondOrder(e),t.bondType(e));s.setBondExtra(i,t.bondExtra(e)),s.setBondTransient(i,t.bondTransient(e))}}return s.keepTransient=t.keepTransient,s}static subgraphWithAttachments(t,e){let n=e.slice(0);for(let i=1;i<=t.numBonds;i++){let s=t.bondFrom(i)-1,o=t.bondTo(i)-1;e[s]&&!e[o]?n[o]=!0:e[o]&&!e[s]&&(n[s]=!0)}let i=t.clone();for(let t=1;t<=i.numAtoms;t++)n[t-1]&&!e[t-1]&&(i.setAtomElement(t,"X"),i.setAtomCharge(t,0),i.setAtomUnpaired(t,0),i.setAtomHExplicit(t,ge.HEXPLICIT_UNKNOWN),i.setAtomExtra(t,[]));return Qt.subgraphMask(i,n)}static append(t,e){let n=t.boundary(),i=e.boundary(),s=n.maxX()+ge.IDEALBOND-i.minX(),o=.5*(n.minY()+n.maxY()-i.minY()-i.maxY()),r=t.numAtoms;t.append(e);for(let e=r+1;e<=t.numAtoms;e++)t.setAtomPos(e,t.atomX(e)+s,t.atomY(e)+o)}static deleteAtoms(t,e){let i=n.booleanArray(!0,t.numAtoms);for(let t=0;t<e.length;t++)i[e[t]-1]=!1;return Qt.subgraphMask(t,i)}static componentList(t){if(0==t.numAtoms)return null;let e=qt.fromMolecule(t).calculateComponentGroups();for(let t of e)n.addTo(t,1);return e}static getAtomSides(t,e){let i=qt.fromMolecule(t),s=i.calculateComponents(),o=[];for(let t=0;t<s.length;t++)o.push(s[t]==s[e-1]);o[e-1]=!1;let r=n.maskIdx(o);i.keepNodesMask(o),s=i.calculateComponents();let a=n.max(s),l=[];for(let t=0;t<a;t++)l.push([e]);for(let t=0;t<s.length;t++)l[s[t]-1].push(r[t]+1);return l}static getBondSides(t,e){let i=t.bondFrom(e),s=t.bondTo(e),o=t.bondInRing(e),r=qt.fromMolecule(t),a=r.calculateComponents(),l=[];for(let t=0;t<a.length;t++)l.push(a[t]==a[i-1]);o?(l[i-1]=!1,l[s-1]=!1):r.removeEdge(i-1,s-1);let d=n.maskIdx(l);r.keepNodesMask(l),a=r.calculateComponents();let p=n.max(a),h=[];for(let t=0;t<p;t++)h[t]=[],o&&(h[t].push(i),h[t].push(s));for(let t=0;t<a.length;t++)h[a[t]-1].push(d[t]+1);return h}static arrayAtomX(t){let e=n.numberArray(0,t.numAtoms);for(let n=e.length-1;n>=0;n--)e[n]=t.atomX(n+1);return e}static arrayAtomY(t){let e=n.numberArray(0,t.numAtoms);for(let n=e.length-1;n>=0;n--)e[n]=t.atomY(n+1);return e}static arrayAtomMapNum(t){let e=n.numberArray(0,t.numAtoms);for(let n=e.length-1;n>=0;n--)e[n]=t.atomMapNum(n+1);return e}static molecularFormula(t,e){let i="",s="",o="",r="";1==e?[i,s]=["{","}","{^","}"]:e instanceof Array&&(i=e[0],s=e[1],o=e[2],r=e[3]);for(let e=1;e<=t.numAtoms;e++)if(Qt.hasAbbrev(t,e)){t=t.clone(),Qt.expandAbbrevs(t,!1);break}let a=0,l=0,d=n.stringArray("",t.numAtoms);for(let e=1;e<=t.numAtoms;e++){l+=t.atomHydrogens(e);let n=t.atomElement(e);t.atomIsotope(e)!=ge.ISOTOPE_NATURAL&&(n=o+t.atomIsotope(e)+r+n),"C"==n?a++:"H"==n?l++:d[e-1]=n}d.sort();let p="";a>0&&(p+="C"),a>1&&(e&&(p+=i),p+=a,e&&(p+=s)),l>0&&(p+="H"),l>1&&(e&&(p+=i),p+=l,e&&(p+=s));for(let t=0;t<d.length;t++)if(d[t].length>0){let n=1;for(;t+1<d.length&&d[t]==d[t+1];t++)n++;p+=d[t],n>1&&(e&&(p+=i),p+=n,e&&(p+=s))}return p.toString()}static molecularWeight(t){for(let e=1;e<=t.numAtoms;e++)if(Qt.hasAbbrev(t,e)){t=t.clone(),Qt.expandAbbrevs(t,!1);break}let e=0;for(let n=1;n<=t.numAtoms;n++){e+=t.atomHydrogens(n)*Bt.NATURAL_ATOMIC_WEIGHTS[1];let i=t.atomIsotope(n);if(i!=ge.ISOTOPE_NATURAL){e+=i;continue}let s=ge.elementAtomicNumber(t.atomElement(n));s>0&&s<Bt.NATURAL_ATOMIC_WEIGHTS.length&&(e+=Bt.NATURAL_ATOMIC_WEIGHTS[s])}return e}static removeDuplicateBonds(t){let e=[];for(let n=1;n<=t.numBonds;n++){let i=Math.min(t.bondFrom(n),t.bondTo(n))*t.numAtoms+Math.max(t.bondFrom(n),t.bondTo(n));e.push(i)}let i=n.idxSort(e),s=n.booleanArray(!1,i.length),o=0;for(;o<i.length;){let n=1;for(;o+n<i.length&&e[i[o]]==e[i[o+n]];)n++;let r=o;for(let e=o+1;e<o+n;e++){let n=i[r]+1,s=i[e]+1,o=t.bondFrom(n),a=t.bondTo(n),l=t.atomElement(o),d=t.atomElement(a),p=0,h=0;if("C"==l||"N"==l?p=4:"O"==l&&(p=3),"C"==d||"N"==d?h=4:"O"==d&&(h=3),p>0||h>0){let i=0,l=0,d=0,c=0;for(let e=1;e<=t.numBonds;e++)e==s||t.bondFrom(e)!=o&&t.bondTo(e)!=o||(i+=t.bondOrder(e)),e==s||t.bondFrom(e)!=a&&t.bondTo(e)!=a||(l+=t.bondOrder(e)),e==n||t.bondFrom(e)!=o&&t.bondTo(e)!=o||(d+=t.bondOrder(e)),e==n||t.bondFrom(e)!=a&&t.bondTo(e)!=a||(c+=t.bondOrder(e));let m=0,u=0;if(p>0&&i>p&&m++,h>0&&l>h&&m++,p>0&&d>p&&u++,h>0&&c>h&&u++,m<u)continue;if(m>u){r=e;continue}}let c=2*t.bondOrder(n),m=2*t.bondOrder(s);c+=(0==c?4:0)+(t.bondType(n)!=ge.BONDTYPE_NORMAL?1:0),m+=(0==m?4:0)+(t.bondType(s)!=ge.BONDTYPE_NORMAL?1:0),m>c&&(r=e)}s[i[r]]=!0,o+=n}for(let e=t.numBonds;e>=1;e--)s[e-1]&&t.bondFrom(e)!=t.bondTo(e)||t.deleteBond(e)}static calculateWalkWeight(t,e){let i=0,s=qt.fromMolecule(t).calculateComponents();for(let t=0;t<s.length;t++)s[t]==s[e-1]&&i++;let o=n.numberArray(1,t.numAtoms),r=n.numberArray(0,t.numAtoms);for(o[e-1]=0;i>0;i--){for(let e=0;e<t.numAtoms;e++)r[e]=o[e];for(let e=1;e<=t.numBonds;e++){let n=t.bondFrom(e)-1,i=t.bondTo(e)-1;o[n]+=.1*r[i],o[i]+=.1*r[n]}o[e-1]=0}return o}static totalHydrogens(t,e){let n=t.atomHydrogens(e),i=t.atomAdjList(e);for(let e=0;e<i.length;e++)"H"==t.atomElement(i[e])&&n++;return n}static stripHydrogens(t,e=!1){for(let n=t.numAtoms;n>=1;n--)(e&&"H"==t.atomElement(n)||this.boringHydrogen(t,n))&&t.deleteAtomAndBonds(n)}static boringHydrogen(t,e){if("H"!=t.atomElement(e))return!1;if(0!=t.atomCharge(e)||0!=t.atomUnpaired(e))return!1;if(t.atomIsotope(e)!=ge.ISOTOPE_NATURAL)return!1;if(n.notBlank(t.atomExtra(e))||n.notBlank(t.atomTransient(e)))return!1;if(1!=t.atomAdjCount(e))return!1;let i=t.atomAdjList(e)[0];if("H"==t.atomElement(i))return!1;let s=t.atomAdjBonds(e)[0];return 1==t.bondOrder(s)&&t.bondType(s)==ge.BONDTYPE_NORMAL&&t.atomHExplicit(i)==ge.HEXPLICIT_UNKNOWN&&!(ge.HYVALENCE_EL.indexOf(t.atomElement(i))<0)}static createHydrogens(t,e){null==e&&(e=!1);let n=t.numAtoms;for(let i=1;i<=n;i++){let n=t.atomHydrogens(i);if(0!=n)if(t.atomHExplicit(i)!=ge.HEXPLICIT_UNKNOWN&&t.setAtomHExplicit(i,0),e)Kt.placeAdditionalHydrogens(t,i,n);else for(;n>0;n--){let e=t.addAtom("H",t.atomX(i),t.atomY(i));t.addBond(i,e,1)}}return t.numAtoms-n}static atomVec3(t,e){return t.is3D()?[t.atomX(e),t.atomY(e),t.atomZ(e)]:[t.atomX(e),t.atomY(e),0]}static atomOxidationState(t,e){if(0==t.atomAdjCount(e))return null;if(this.hasAbbrev(t,e))return null;let n=t.atomicNumber(e);if(0==n)return null;let i=n==Bt.ELEMENT_H||2==Bt.ELEMENT_BLOCKS[n],s=t.atomHydrogens(e)+(i?-t.atomCharge(e):t.atomCharge(e));for(let n of t.atomAdjBonds(e)){let o=t.bondOrder(n),r=t.bondOther(n,e),a=["O","S","Se","Te"].includes(t.atomElement(r));s+=i||a?o:o%2}return n==Bt.ELEMENT_H&&1==s||n==Bt.ELEMENT_B&&3==s||n==Bt.ELEMENT_C&&4==s||n==Bt.ELEMENT_N&&3==s||n==Bt.ELEMENT_O&&2==s?null:(n!=Bt.ELEMENT_S||2!=s&&4!=s&&6!=s)&&(n!=Bt.ELEMENT_P||3!=s&&5!=s)&&(n!=Bt.ELEMENT_F&&n!=Bt.ELEMENT_Cl&&n!=Bt.ELEMENT_Br&&n!=Bt.ELEMENT_I||1!=s)?s:null}static oxidationStateText(t){if(0==t)return"0";let e=t<0?"-":"",n=Math.abs(t);return 1==n?e+="I":2==n?e+="II":3==n?e+="III":4==n?e+="IV":5==n?e+="V":6==n?e+="VI":7==n?e+="VII":8==n?e+="VIII":9==n?e+="IX":10==n?e+="X":11==n?e+="XI":12==n?e+="XII":e=(t>0?"+":"")+t,e}}Qt.TEMPLATE_ATTACHMENT="X",Qt.ABBREV_ATTACHMENT="*";class Zt{static atomAtPoint(t,e,n,i){null==i&&(i=Zt.OVERLAP_THRESHOLD);const s=i*i;for(let i=1;i<=t.numAtoms;i++)if(Y(t.atomX(i)-e,t.atomY(i)-n)<s)return i;return 0}static sketchEquivalent(t,e,i){null==i&&(i=Zt.DEFAULT_EQUIV_TOLERANCE);const s=t.numAtoms,o=t.numBonds;if(s!=e.numAtoms||o!=e.numBonds)return!1;const r=i*i;let a=t.boundary(),l=e.boundary();if(Math.abs(a.minX()-l.minX())>i)return!1;if(Math.abs(a.minY()-l.minY())>i)return!1;if(Math.abs(a.maxX()-l.maxX())>i)return!1;if(Math.abs(a.maxY()-l.maxY())>i)return!1;let d=Qt.arrayAtomX(t),p=Qt.arrayAtomY(t),h=Qt.arrayAtomX(e),c=Qt.arrayAtomY(e),m=n.numberArray(0,s),u=n.booleanArray(!1,s);for(let n=0;n<s;n++){let i=-1;if(Y(d[n]-h[n],p[n]-c[n])<r&&(i=n),i<0){let t=Number.MAX_VALUE;for(let e=0;e<s;e++)if(!u[e]){let s=Y(d[n]-h[e],p[n]-c[e]);s<t&&(t=s,i=e)}if(i<0||t>r)return!1}if(m[n]=i+1,u[i]=!0,t.atomElement(n+1)!=e.atomElement(i+1))return!1;if(t.atomCharge(n+1)!=e.atomCharge(i+1))return!1;if(t.atomUnpaired(n+1)!=e.atomUnpaired(i+1))return!1;if(t.atomHExplicit(n+1)!=e.atomHExplicit(i+1)&&t.atomHExplicit(n+1)!=ge.HEXPLICIT_UNKNOWN&&e.atomHExplicit(i+1)!=ge.HEXPLICIT_UNKNOWN)return!1}for(let n=1;n<=o;n++){let i=t.bondFrom(n),s=t.bondTo(n),o=m[i-1],r=m[s-1],a=e.findBond(o,r);if(0==a)return!1;if(t.bondOrder(n)!=e.bondOrder(a)||t.bondType(n)!=e.bondType(a))return!1;if(e.bondFrom(a)==o&&e.bondTo(a)==r);else if(e.bondType(a)==ge.BONDTYPE_INCLINED||e.bondType(a)==ge.BONDTYPE_DECLINED||e.bondFrom(a)!=r||e.bondTo(a)!=o)return!1}return!0}static sketchMappable(t,e,n){null==n&&(n=Zt.DEFAULT_EQUIV_TOLERANCE);let i=t.boundary(),s=e.boundary(),o=i.minX()-s.minX(),r=i.minY()-s.minY();if(Math.abs(o)>.1*n||Math.abs(r)>.1*n){e=e.clone();for(let t=1;t<=e.numAtoms;t++)e.setAtomPos(t,e.atomX(t)+o,e.atomY(t)+r)}return Zt.sketchEquivalent(t,e,n)}static atomBondAngles(t,e,n){null==n&&(n=t.atomAdjList(e));let i=[],s=t.atomX(e),o=t.atomY(e);for(let e of n)i.push(Math.atan2(t.atomY(e)-o,t.atomX(e)-s));return i}static overlapsAtom(t,e,n,i){const s=i*i;for(let i=1;i<=t.numAtoms;i++)if(Y(t.atomX(i)-e,t.atomY(i)-n)<s)return!0;return!1}static overlappingAtomMask(t,e){null==e&&(e=Zt.OVERLAP_THRESHOLD);const i=t.numAtoms;let s,o,r=t.boundary();r.w>r.h?(s=Qt.arrayAtomX(t),o=Qt.arrayAtomY(t)):(s=Qt.arrayAtomY(t),o=Qt.arrayAtomX(t));let a=n.booleanArray(!1,i),l=n.idxSort(s);const d=e*e;for(let t=1;t<i-1;t++){for(let n=t-1;n>=0;n--){let i=s[l[t]]-s[l[n]];if(i>e)break;Y(i,o[l[t]]-o[l[n]])<d&&(a[l[t]]=!0,a[l[n]]=!0)}for(let n=t+1;n<i;n++){let i=s[l[n]]-s[l[t]];if(i>e)break;Y(i,o[l[n]]-o[l[t]])<d&&(a[l[t]]=!0,a[l[n]]=!0)}}return a}static overlappingAtomList(t,e){return null==e&&(e=Zt.OVERLAP_THRESHOLD),n.add(n.maskIdx(Zt.overlappingAtomMask(t,e)),1)}static congestionPoint(t,e,n,i){null==i&&(i=1e-5);let s=0,o=t.numAtoms;for(let r=1;r<=o;r++)s+=1/(i+Y(t.atomX(r)-e,t.atomY(r)-n));return s}static congestionMolecule(t,e){null==e&&(e=1e-5);let n=0;const i=t.numAtoms;let s=Qt.arrayAtomX(t),o=Qt.arrayAtomY(t);for(let t=0;t<i-1;t++)for(let r=t+1;r<i;r++)n+=1/(e+Y(s[t]-s[r],o[t]-o[r]));return n}static translateMolecule(t,e,n){for(let i=1;i<=t.numAtoms;i++)t.setAtomPos(i,t.atomX(i)+e,t.atomY(i)+n)}static rotateMolecule(t,e,n,i){if(null==n||null==i){let e=t.boundary();n=e.midX(),i=e.midY()}let s=Math.cos(e),o=Math.sin(e);for(let e=1;e<=t.numAtoms;e++){let r=t.atomX(e)-n,a=t.atomY(e)-i;t.setAtomPos(e,n+r*s-a*o,i+r*o+a*s)}}static rotateBond(t,e,n,i){if(i=nt(i),Math.abs(i)<.1*tt)return;let s=qt.fromMolecule(t);s.isolateNode(e-1);let o=s.calculateComponents(),r=t.atomX(e),a=t.atomY(e),l=Math.cos(i),d=Math.sin(i);for(let e=1;e<=t.numAtoms;e++)if(o[e-1]==o[n-1]){let n=t.atomX(e)-r,i=t.atomY(e)-a;t.setAtomPos(e,r+n*l-i*d,a+n*d+i*l)}}static rotateAtoms(t,e,n,i,s){let o=Math.cos(s),r=Math.sin(s);for(let s=1;s<=t.numAtoms;s++)if(e[s-1]){let e=t.atomX(s)-n,a=t.atomY(s)-i;t.setAtomPos(s,n+e*o-a*r,i+e*r+a*o)}}static angleNeighbours(t,e){let i=t.atomAdjList(e);if(i.length<=1)return null;let s=[];for(let n=0;n<i.length;n++)s.push(Math.atan2(t.atomY(i[n])-t.atomY(e),t.atomX(i[n])-t.atomX(e)));if(2==i.length)return it(s[1],s[0])>0?i:[i[1],i[0]];let o=n.idxSort(s);return n.idxGet(i,o)}static mergeAtoms(t,e,n){for(let i=1;i<=t.numBonds;i++)t.bondFrom(i)==e&&t.setBondFrom(i,n),t.bondTo(i)==e&&t.setBondTo(i,n);t.deleteAtomAndBonds(e)}static normaliseBondDistances(t){const e=t.numBonds;if(0==e)return;let i=[];for(let n=1;n<=e;n++){let e=t.bondFrom(n),s=t.bondTo(n);i.push(Y(t.atomX(s)-t.atomX(e),t.atomY(s)-t.atomY(e)))}n.sort(i);let s=1&~e?.5*(Math.sqrt(i[e>>1])+Math.sqrt(i[(e>>1)-1])):Math.sqrt(i[e>>1]);if(s<.1||s>.9*ge.IDEALBOND&&s<1.1*ge.IDEALBOND)return;let o=t.boundary(),r=o.midX(),a=o.midY(),l=ge.IDEALBOND/s;for(let e=t.numAtoms;e>=1;e--){let n=(t.atomX(e)-r)*l+r,i=(t.atomY(e)-a)*l+a;t.setAtomPos(e,n,i)}}static centreMolecule(t){if(Qt.isBlank(t))return;let e=Qt.arrayAtomX(t),i=Qt.arrayAtomY(t),s=e.length,o=1/s,r=n.sum(e)*o,a=n.sum(i)*o,l=Number.POSITIVE_INFINITY,d=0,p=0;for(let t=0;t<s;t++){let n=Y(e[t]-r,i[t]-a);n<l&&(d=-e[t],p=-i[t],l=n)}for(let n=0;n<s;n++)t.setAtomPos(n+1,e[n]+d,i[n]+p)}static mirrorImage(t){t=t.clone();for(let e=1;e<=t.numAtoms;e++)t.setAtomX(e,-t.atomX(e));for(let e=1;e<=t.numBonds;e++)t.bondType(e)==ge.BONDTYPE_DECLINED?t.setBondType(e,ge.BONDTYPE_INCLINED):t.bondType(e)==ge.BONDTYPE_INCLINED&&t.setBondType(e,ge.BONDTYPE_DECLINED);return t}static alignOrientFlip(t,e,n,i){if(e.length<2||e.length!=i.length)throw"Invalid mapping indices.";let s=t.atomX(e[0]),o=t.atomY(e[0]);Zt.translateMolecule(n,s-n.atomX(i[0]),o-n.atomY(i[0]));const r=e.length-1;let a=[],l=[],d=0,p=0;for(let h=0;h<r;h++){a.push(Math.atan2(t.atomY(e[h+1])-o,t.atomX(e[h+1])-s)),l.push(Math.atan2(n.atomY(i[h+1])-o,n.atomX(i[h+1])-s));let r=it(a[h],l[h]),c=it(a[h],-l[h]);r<-175*tt&&d>0?r+=Z:r>175*tt&&d<0&&(r-=Z),c<-175*tt&&p>0?c+=Z:c>175*tt&&p<0&&(c-=Z),d+=r,p+=c}if(r>1){let t=1/r;d*=t,p*=t}let h=0,c=0;for(let t=0;t<r;t++)h+=Math.abs(it(a[t],l[t]+d)),c+=Math.abs(it(a[t],-l[t]+p));if(c<h){for(let t=1;t<=n.numAtoms;t++)n.setAtomY(t,2*o-n.atomY(t));for(let t=1;t<=n.numBonds;t++)n.bondType(t)==ge.BONDTYPE_DECLINED?n.setBondType(t,ge.BONDTYPE_INCLINED):n.bondType(t)==ge.BONDTYPE_INCLINED&&n.setBondType(t,ge.BONDTYPE_DECLINED);Zt.rotateMolecule(n,s,o,p)}else Zt.rotateMolecule(n,s,o,d)}static atomIsWeirdLinear(t,e){let n=t.atomAdjBonds(e);if(2!=n.length)return!1;for(let e=0;e<n.length;e++)if(3==t.bondOrder(n[e]))return!1;let i=t.atomAdjList(e),s=Math.atan2(t.atomY(i[0])-t.atomY(e),t.atomX(i[0])-t.atomX(e)),o=Math.atan2(t.atomY(i[1])-t.atomY(e),t.atomX(i[1])-t.atomX(e));return Math.abs(it(s,o))>=175*tt}}Zt.OVERLAP_THRESHOLD=.2,Zt.OVERLAP_THRESHOLD_SQ=Zt.OVERLAP_THRESHOLD*Zt.OVERLAP_THRESHOLD,Zt.DEFAULT_EQUIV_TOLERANCE=.2,function(t){t.AtomAromatic="yAROMATIC",t.BondAromatic="yAROMATIC",t.BondZeroDative="yZERO_DATIVE",t.BondZeroHydrogen="yZERO_HYDROGEN",t.AtomChiralMDLOdd="yCHIRAL_MDL_ODD",t.AtomChiralMDLEven="yCHIRAL_MDL_EVEN",t.AtomChiralMDLRacemic="yCHIRAL_MDL_RACEMIC",t.AtomExplicitValence="yMDL_EXPLICIT_VALENCE",t.AtomSgroupMultiAttach="yMDL_SGROUP_MULTIATTACH",t.AtomSgroupMultiRepeat="yMDL_SGROUP_MULTIREPEAT",t.AtomSgroupData="yMDL_SGROUP_DATA",t.AtomSCSRClass="yMDL_SCSR_CLASS",t.AtomSCSRSeqID="yMDL_SCSR_SEQID",t.AtomSCSRAttchOrd="yMDL_SCSR_ATTCHORD"}(Wt||(Wt={}));class Jt{static noteAromaticAtoms(t){const e=t.numAtoms;let i=n.booleanArray(!1,e);for(let n=1;n<=e;n++)i[n-1]=t.atomTransient(n).indexOf(Wt.AtomAromatic)>=0;return i}static noteAromaticBonds(t){const e=t.numBonds;let i=n.booleanArray(!1,e);for(let n=1;n<=e;n++)i[n-1]=t.bondTransient(n).indexOf(Wt.BondAromatic)>=0;return i}static noteZeroDativeBonds(t){const e=t.numBonds;let i=n.booleanArray(!1,e);for(let n=1;n<=e;n++)i[n-1]=t.bondTransient(n).includes(Wt.BondZeroDative);return i}static noteZeroHydrogenBonds(t){const e=t.numBonds;let i=n.booleanArray(!1,e);for(let n=1;n<=e;n++)i[n-1]=t.bondTransient(n).includes(Wt.BondZeroHydrogen);return i}static markExplicitValence(t,e,n){let i=t.atomTransient(e).filter((t=>!t.startsWith(Wt.AtomExplicitValence+":")));i.push(`${Wt.AtomExplicitValence}:${n}`),t.setAtomTransient(e,i)}static noteExplicitValence(t,e){let n=t.atomTransient(e);for(let t of n)if(t.startsWith(Wt.AtomExplicitValence+":"))return parseInt(t.substring(Wt.AtomExplicitValence.length+1));return null}static markSgroupMultiAttach(t,e,i,s={}){let o=0;for(let e=1;e<=t.numAtoms;e++)for(let n of t.atomTransient(e))if(n.startsWith(Wt.AtomSgroupMultiAttach+":")){let t=n.substring(Wt.AtomSgroupMultiAttach.length+1),e=(t.indexOf(","),t.split(",")),i=parseInt(e[0]);if(!(i>0))continue;o=Math.max(o,i)}let r=`${Wt.AtomSgroupMultiAttach}:${o+1},${null!=e?e:""}`;for(let[t,e]of Object.entries(s))r+=","+t+"="+e;for(let e of i)t.setAtomTransient(e,n.append(t.atomTransient(e),r))}static hasAnySgroupMultiAttach(t){for(let e=1;e<=t.numAtoms;e++)if(t.atomTransient(e).some((t=>t.startsWith(Wt.AtomSgroupMultiAttach+":"))))return!0;return!1}static noteAllSgroupMultiAttach(t){let e={};for(let n=1;n<=t.numAtoms;n++)for(let i of t.atomTransient(n))if(i.startsWith(Wt.AtomSgroupMultiAttach+":")){let t=i.substring(Wt.AtomSgroupMultiAttach.length+1).split(",");if(t.length<2)continue;let s=parseInt(t[0]),o=t[1];if(!(s>0))continue;let r={};for(let e=2;e<t.length;e++){let n=t[e].indexOf("=");n<0||(r[t[e].substring(0,n)]=t[e].substring(n+1))}let a=e[s];a?a.atoms.push(n):e[s]={name:o,atoms:[n],keyval:r}}return Object.values(e)}static markSgroupMultiRepeat(t,e,i){let s=0;for(let e=1;e<=t.numAtoms;e++)for(let n of t.atomTransient(e))if(n.startsWith(Wt.AtomSgroupMultiRepeat+":")){let t=n.substring(Wt.AtomSgroupMultiRepeat.length+1),e=t.indexOf(",");if(e<=0)continue;let i=parseInt(t.substring(0,e));if(i<=0)continue;s=Math.max(s,i)}let o=i.length/e,r=`${Wt.AtomSgroupMultiRepeat}:${s+1},${e},${o},`;for(let e=0;e<i.length;e++)t.setAtomTransient(i[e],n.append(t.atomTransient(i[e]),r+(e+1)))}static hasAnySgroupMultiRepeat(t){for(let e=1;e<=t.numAtoms;e++)if(t.atomTransient(e).some((t=>t.startsWith(Wt.AtomSgroupMultiRepeat+":"))))return!0;return!1}static noteAllSgroupMultiRepeat(t){let e={};for(let i=1;i<=t.numAtoms;i++)for(let s of t.atomTransient(i))if(s.startsWith(Wt.AtomSgroupMultiRepeat+":")){let t=s.substring(Wt.AtomSgroupMultiRepeat.length+1).split(",");if(t.length<4)continue;let o=parseInt(t[0]),r=parseInt(t[1]),a=parseInt(t[2]),l=parseInt(t[3]);if(!(o>0)||r<2||a<1||l<1||l>r*a)continue;let d=e[o];if(null==d)e[o]=d={mult:r,unit:a,atoms:n.numberArray(0,r*a)};else if(d.mult!=r||d.unit!=a)continue;d.atoms[l-1]=i}return Object.values(e)}static markSgroupData(t,e,i,s,o,r){var a;let l=0;for(let e=1;e<=t.numAtoms;e++)for(let n of t.atomTransient(e))if(n.startsWith(Wt.AtomSgroupData+":")){let t=n.substring(Wt.AtomSgroupData.length+1),e=t.indexOf(",");if(e<=0)continue;let i=parseInt(t.substring(0,e));if(i<=0)continue;l=Math.max(l,i)}let d=[(l+1).toString(),e,i,s,o];for(let t=1;t<d.length;t++)d[t]=(null!==(a=d[t])&&void 0!==a?a:"").replace(/\,/g,"@@");let p=Wt.AtomSgroupData+":"+d.join(",");for(let e=0;e<r.length;e++)t.setAtomTransient(r[e],n.append(t.atomTransient(r[e]),p))}static hasAnySgroupData(t){for(let e=1;e<=t.numAtoms;e++)if(t.atomTransient(e).some((t=>t.startsWith(Wt.AtomSgroupData+":"))))return!0;return!1}static noteAllSgroupData(t){let e={};for(let n=1;n<=t.numAtoms;n++)for(let i of t.atomTransient(n))if(i.startsWith(Wt.AtomSgroupData+":")){let t=i.substring(Wt.AtomSgroupData.length+1).split(",");if(t.length<5)continue;let s=parseInt(t[0]);for(let e=1;e<5;e++)t[e]=t[e].replace(/\@\@/g,",");if(!(s>0))continue;let o=e[s];o?o.atoms.push(n):e[s]={name:t[1],value:t[2],unit:t[3],query:t[4],atoms:[n]}}return Object.values(e)}}!function(t){t.Charges="qC:",t.Aromatic="qA:",t.Unsaturated="qU:",t.Elements="qE:",t.ElementsNot="qE!",t.RingSizes="qR:",t.RingSizesNot="qR!",t.RingBlock="qB:",t.NumRings="qN:",t.RingBonds="qG:",t.Adjacency="qJ:",t.BondSums="qO:",t.Valences="qV:",t.Hydrogens="qH:",t.Isotopes="qI:",t.SubFrags="qX:",t.SubFragsNot="qX!"}(Ht||(Ht={})),function(t){t.RingSizes="qR:",t.RingSizesNot="qR!",t.RingBlock="qB:",t.NumRings="qN:",t.Orders="qO:"}(Gt||(Gt={}));class te{static hasAnyQueryAtom(t,e){let n=t.atomExtra(e);for(let t=n.length-1;t>=0;t--)if(n[t].startsWith("q"))return!0;return!1}static hasAnyQueryBond(t,e){let n=t.bondExtra(e);for(let t=n.length-1;t>=0;t--)if(n[t].startsWith("q"))return!0;return!1}static hasQueryAtom(t,e,n){let i=t.atomExtra(e);for(let t=i.length-1;t>=0;t--)if(i[t].startsWith(n))return!0;return!1}static hasQueryBond(t,e,n){let i=t.bondExtra(e);for(let t=i.length-1;t>=0;t--)if(i[t].startsWith(n))return!0;return!1}static deleteQueryAtom(t,e,n){let i=t.atomExtra(e),s=!1;for(let t=i.length-1;t>=0;t--)i[t].startsWith(n)&&(i.splice(t,1),s=!0);s&&t.setAtomExtra(e,i)}static deleteQueryBond(t,e,n){let i=t.bondExtra(e),s=!1;for(let t=i.length-1;t>=0;t--)i[t].startsWith(n)&&(i.splice(t,1),s=!0);s&&t.setBondExtra(e,i)}static deleteQueryAtomAll(t,e){t.setAtomExtra(e,t.atomExtra(e).filter((t=>!t.startsWith("q"))))}static deleteQueryBondAll(t,e){t.setBondExtra(e,t.bondExtra(e).filter((t=>!t.startsWith("q"))))}static queryAtomString(t,e,n){let i=t.atomExtra(e);for(let t=i.length-1;t>=0;t--)if(i[t].startsWith(n))return i[t].substring(n.length);return null}static queryAtomStringList(t,e,i){let s=t.atomExtra(e),o=null;if(null!=s)for(let t of s)t.startsWith(i)&&(o=n.append(o,t.substring(i.length)));return o}static queryBondString(t,e,n){let i=t.bondExtra(e);for(let t=i.length-1;t>=0;t--)if(i[t].startsWith(n))return i[t].substring(n.length);return null}static setQueryAtom(t,e,n,i){if(!i)return void this.deleteQueryAtom(t,e,n);let s=n+i,o=t.atomExtra(e);for(let t=o.length-1;t>=0;t--)o[t].startsWith(n)&&(null!=s?(o[t]=s,s=null):o.splice(t,1));null!=s&&o.push(s),t.setAtomExtra(e,o)}static setQueryAtomList(t,e,i,s){if(n.isBlank(s))return void this.deleteQueryAtom(t,e,i);let o=t.atomExtra(e);for(let t=o.length-1;t>=0;t--)o[t].startsWith(i)&&o.splice(t,1);for(let t of s)o.push(i+t);t.setAtomExtra(e,o)}static setQueryBond(t,e,n,i){if(!i)return void this.deleteQueryBond(t,e,n);let s=n+i,o=t.bondExtra(e);for(let t=o.length-1;t>=0;t--)o[t].startsWith(n)&&(null!=s?(o[t]=s,s=null):o.splice(t,1));null!=s&&o.push(s),t.setBondExtra(e,o)}static queryAtomCharges(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.Charges))}static queryAtomAromatic(t,e){return this.parseBoolean(this.queryAtomString(t,e,Ht.Aromatic))}static queryAtomUnsaturated(t,e){return this.parseBoolean(this.queryAtomString(t,e,Ht.Unsaturated))}static queryAtomElements(t,e){return this.parseStrings(this.queryAtomString(t,e,Ht.Elements))}static queryAtomElementsNot(t,e){return this.parseStrings(this.queryAtomString(t,e,Ht.ElementsNot))}static queryAtomRingSizes(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.RingSizes))}static queryAtomRingSizesNot(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.RingSizesNot))}static queryAtomRingBlock(t,e){return this.parseBoolean(this.queryAtomString(t,e,Ht.RingBlock))}static queryAtomNumRings(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.NumRings))}static queryAtomRingBonds(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.RingBonds))}static queryAtomAdjacency(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.Adjacency))}static queryAtomBondSums(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.BondSums))}static queryAtomValences(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.Valences))}static queryAtomHydrogens(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.Hydrogens))}static queryAtomIsotope(t,e){return this.parseIntegers(this.queryAtomString(t,e,Ht.Isotopes))}static queryAtomSubFrags(t,e){return this.parseMolecules(this.queryAtomStringList(t,e,Ht.SubFrags))}static queryAtomSubFragsNot(t,e){return this.parseMolecules(this.queryAtomStringList(t,e,Ht.SubFragsNot))}static queryBondRingSizes(t,e){return this.parseIntegers(this.queryBondString(t,e,Gt.RingSizes))}static queryBondRingSizesNot(t,e){return this.parseIntegers(this.queryBondString(t,e,Gt.RingSizesNot))}static queryBondRingBlock(t,e){return this.parseBoolean(this.queryBondString(t,e,Gt.RingBlock))}static queryBondNumRings(t,e){return this.parseIntegers(this.queryBondString(t,e,Gt.NumRings))}static queryBondOrders(t,e){return this.parseIntegers(this.queryBondString(t,e,Gt.Orders))}static setQueryAtomCharges(t,e,n){this.setQueryAtom(t,e,Ht.Charges,this.formatIntegers(n))}static setQueryAtomAromatic(t,e,n){this.setQueryAtom(t,e,Ht.Aromatic,this.formatBoolean(n))}static setQueryAtomUnsaturated(t,e,n){this.setQueryAtom(t,e,Ht.Unsaturated,this.formatBoolean(n))}static setQueryAtomElements(t,e,n){this.setQueryAtom(t,e,Ht.Elements,this.formatStrings(n))}static setQueryAtomElementsNot(t,e,n){this.setQueryAtom(t,e,Ht.ElementsNot,this.formatStrings(n))}static setQueryAtomRingSizes(t,e,n){this.setQueryAtom(t,e,Ht.RingSizes,this.formatIntegers(n))}static setQueryAtomRingSizesNot(t,e,n){this.setQueryAtom(t,e,Ht.RingSizesNot,this.formatIntegers(n))}static setQueryAtomRingBlock(t,e,n){this.setQueryAtom(t,e,Ht.RingBlock,this.formatBoolean(n))}static setQueryAtomNumRings(t,e,n){this.setQueryAtom(t,e,Ht.NumRings,this.formatIntegers(n))}static setQueryAtomRingBonds(t,e,n){this.setQueryAtom(t,e,Ht.RingBonds,this.formatIntegers(n))}static setQueryAtomAdjacency(t,e,n){this.setQueryAtom(t,e,Ht.Adjacency,this.formatIntegers(n))}static setQueryAtomBondSums(t,e,n){this.setQueryAtom(t,e,Ht.BondSums,this.formatIntegers(n))}static setQueryAtomValences(t,e,n){this.setQueryAtom(t,e,Ht.Valences,this.formatIntegers(n))}static setQueryAtomHydrogens(t,e,n){this.setQueryAtom(t,e,Ht.Hydrogens,this.formatIntegers(n))}static setQueryAtomIsotope(t,e,n){this.setQueryAtom(t,e,Ht.Isotopes,this.formatIntegers(n))}static setQueryAtomSubFrags(t,e,n){this.setQueryAtomList(t,e,Ht.SubFrags,this.formatMolecules(n))}static setQueryAtomSubFragsNot(t,e,n){this.setQueryAtomList(t,e,Ht.SubFragsNot,this.formatMolecules(n))}static setQueryBondRingSizes(t,e,n){this.setQueryBond(t,e,Gt.RingSizes,this.formatIntegers(n))}static setQueryBondRingSizesNot(t,e,n){this.setQueryBond(t,e,Gt.RingSizesNot,this.formatIntegers(n))}static setQueryBondRingBlock(t,e,n){this.setQueryBond(t,e,Gt.RingBlock,this.formatBoolean(n))}static setQueryBondNumRings(t,e,n){this.setQueryBond(t,e,Gt.NumRings,this.formatIntegers(n))}static setQueryBondOrders(t,e,n){this.setQueryBond(t,e,Gt.Orders,this.formatIntegers(n))}static parseIntegers(t){if(!t)return null;let e=t.split(","),n=new Array(e.length);for(let t=0;t<e.length;t++)n[t]=parseInt(e[t]);return n}static parseStrings(t){return t?t.split(","):null}static parseBoolean(t){return t?"yes"==t:null}static parseMolecules(t){if(!t)return null;let e=[];for(let n of t){let t=ge.fromString(n);Qt.notBlank(t)&&e.push(t)}return e}static formatIntegers(t){if(n.isBlank(t))return null;let e="";for(let n=0;n<t.length;n++)n>0&&(e+=","),e+=t[n];return e}static formatStrings(t){if(n.isBlank(t))return null;let e="";for(let n=0;n<t.length;n++)n>0&&(e+=","),e+=t[n];return e}static formatBoolean(t){return t?"yes":"no"}static formatMolecules(t){if(n.isBlank(t))return null;let e=[];for(let n of t)Qt.notBlank(n)&&e.push(n.toString());return e}}const ee="xCHIRAC:",ne="xCHIREL:";class ie{static hasStereoGroups(t){for(let e=1;e<=t.numAtoms;e++){let n=t.atomExtra(e);if(null!=n)for(let t of n)if(t.startsWith(ee)||t.startsWith(ne))return!0}return!1}constructor(t){this.mol=t,this.chiRac=new Map,this.chiRel=new Map,this.mol=t;for(let e=1;e<=t.numAtoms;e++){let i=t.atomExtra(e);if(null!=i)for(let t of i)if(t.startsWith(ee)){let i=parseInt(t.substring(8));i>0&&this.chiRac.set(i,n.append(this.chiRac.get(i),e))}else if(t.startsWith(ne)){let i=parseInt(t.substring(8));i>0&&this.chiRel.set(i,n.append(this.chiRel.get(i),e))}}for(let[t,e]of this.chiRac.entries()){for(let t=e.length-1;t>=0;t--)this.atomHasWedge(e[t])||e.splice(t,1);e.length>0?this.chiRac.set(t,e):this.chiRac.delete(t)}for(let[t,e]of this.chiRel.entries()){for(let t=e.length-1;t>=0;t--)this.atomHasWedge(e[t])||e.splice(t,1);e.length>0?this.chiRel.set(t,e):this.chiRel.delete(t)}}getRacemicGroups(){return Array.from(this.chiRac.keys())}getRelativeGroups(){return Array.from(this.chiRel.keys())}getRacemicAtoms(){return Array.from(this.chiRac.values())}getRelativeAtoms(){return Array.from(this.chiRel.values())}getRacemicGroupAtoms(t){return this.chiRac.get(t)}getRelativeGroupAtoms(t){return this.chiRel.get(t)}rewriteMolecule(){for(let t=1;t<=this.mol.numAtoms;t++){let e=this.mol.atomExtra(t),n=!1;for(let t=e.length-1;t>=0;t--)(e[t].startsWith(ee)||e[t].startsWith(ne))&&(e.splice(t,1),n=!0);n&&this.mol.setAtomExtra(t,e)}for(let[t,e]of this.chiRac.entries())for(let n of e)this.mol.setAtomExtra(n,[...this.mol.atomExtra(n),ee+t]);for(let[t,e]of this.chiRel.entries())for(let n of e)this.mol.setAtomExtra(n,[...this.mol.atomExtra(n),ne+t])}harmoniseNumbering(t){let e=t.getRacemicGroups(),n=this.getRacemicAtoms();this.chiRac.clear();for(let t of n){let n=this.nextIdentifier(e);this.chiRac.set(n,t),e.push(n)}e=t.getRelativeGroups(),n=this.getRelativeAtoms(),this.chiRel.clear();for(let t of n){let n=this.nextIdentifier(e);this.chiRel.set(n,t),e.push(n)}}createRacemic(t){let e=this.nextIdentifier(this.getRacemicGroups());return this.chiRac.set(e,t),e}createRelative(t){let e=this.nextIdentifier(this.getRelativeGroups());return this.chiRel.set(e,t),e}removeRacemic(t){this.chiRac.delete(t)}removeRelative(t){this.chiRel.delete(t)}static removeAll(t){for(let e=1;e<=t.numAtoms;e++){let n=t.atomExtra(e),i=!1;for(let t=n.length-1;t>=0;t--)(n[t].startsWith(ee)||n[t].startsWith(ne))&&(n.splice(t,1),i=!0);i&&t.setAtomExtra(e,n)}}atomHasWedge(t){if(this.mol.is3D())return!0;let e=!1;for(let n of this.mol.atomAdjBonds(t)){let i=this.mol.bondType(n);if(i==ge.BONDTYPE_UNKNOWN)return!1;this.mol.bondFrom(n)==t&&(i!=ge.BONDTYPE_INCLINED&&i!=ge.BONDTYPE_DECLINED||(e=!0))}return e}nextIdentifier(t){if(0==t.length)return 1;let e=n.sorted(t);for(let t=0;t<e.length-1;t++)if(e[t+1]!=e[t]+1)return e[t]+1;return e[e.length-1]+1}}const se={H:[1],B:[3],C:[4],Si:[4],N:[3],P:[3,5],As:[3,5],O:[2],S:[2,4,6],Se:[2,4,6],Te:[2,4,6],F:[1],Cl:[1,3,5,7],Br:[1],I:[1,3,5,7],At:[1,3,5,7]};class oe{constructor(t){this.parseHeader=!0,this.parseExtended=!0,this.allowV3000=!0,this.considerRescale=!0,this.keepAromatic=!1,this.keepParity=!1,this.keepQuery=!0,this.mol=null,this.molName="",this.overallStereoAbsolute=!0,this.resBonds=null,this.groupAttachAny=new Map,this.groupAttachAll=new Map,this.groupStereoAbsolute=[],this.groupStereoRacemic=[],this.groupStereoRelative=[],this.groupLinkNodes=[],this.groupMixtures=[],this.scsrTemplates=null,this.pos=0,this.lines=t.split(/\r?\n/)}parse(){return this.parseHeader&&(this.molName=this.lines[0],this.pos=3),this.parseCTAB(),this.mol}nextLine(){if(this.pos>=this.lines.length)throw"MDL Molfile parser: premature end, at line "+(this.pos+1);return this.lines[this.pos++]}parseCTAB(){this.mol=new ge,this.mol.keepTransient=!0;let t=this.nextLine(),e=t.length>=39?t.substring(34,39):"";if(this.allowV3000&&"V3000"==e)return this.parseV3000(),void(this.mol.keepTransient=!1);if("V2000"!=e)throw"Invalid MDL MOL: no Vx000 tag.";let i=parseInt(t.substring(0,3).trim()),s=parseInt(t.substring(3,6).trim());t.length>=15&&(this.overallStereoAbsolute=1==parseInt(t.substring(12,15).trim()));for(let e=0;e<i;e++){if(t=this.nextLine(),t.length<34)throw"Invalid MDL MOL: atom line"+(e+1);let i=parseFloat(t.substring(0,10).trim()),s=parseFloat(t.substring(10,20).trim()),o=parseFloat(t.substring(20,30).trim()),r=t.substring(31,34).trim(),a=t.length<39?0:parseInt(t.substring(36,39).trim()),l=0,d=t.length<42?0:parseInt(t.substring(39,42).trim()),p=t.length<45?0:parseInt(t.substring(42,45).trim()),h=t.length<51?0:parseInt(t.substring(48,51).trim()),c=t.length<63?0:parseInt(t.substring(60,63).trim());a>=1&&a<=3?a=4-a:4==a?(a=0,l=2):a=a>=5&&a<=7?4-a:0;let m=this.mol.addAtom(r,i,s,a,l);if(0!=o&&(this.mol.setAtomZ(m,o),this.mol.setIs3D(!0)),this.mol.setAtomMapNum(m,c),p>0&&te.setQueryAtomHydrogens(this.mol,m,[p-1]),d>0&&this.keepParity){let t=this.mol.atomTransient(m);1==d?this.mol.setAtomTransient(m,n.append(t,Wt.AtomChiralMDLOdd)):2==d?this.mol.setAtomTransient(m,n.append(t,Wt.AtomChiralMDLEven)):3==d&&this.mol.setAtomTransient(m,n.append(t,Wt.AtomChiralMDLRacemic))}0!=h&&Jt.markExplicitValence(this.mol,e+1,h>14?0:h)}for(let e=0;e<s;e++){if(t=this.nextLine(),t.length>=9&&t.length<12&&(t=t.substring(0,9)+"  0"),t.length<12)throw"Invalid MDL MOL: bond line"+(e+1);let o=parseInt(t.substring(0,3).trim()),r=parseInt(t.substring(3,6).trim()),a=parseInt(t.substring(6,9).trim()),l=parseInt(t.substring(9,12).trim());if(o==r||o<1||o>i||r<1||r>i)throw"Invalid MDL MOL: bond line"+(e+1);let d=a>=1&&a<=3?a:8==a||9==a||10==a?0:1,p=ge.BONDTYPE_NORMAL;1==l?p=ge.BONDTYPE_INCLINED:6==l?p=ge.BONDTYPE_DECLINED:3!=l&&4!=l||(p=ge.BONDTYPE_UNKNOWN);let h=this.mol.addBond(o,r,d,p);9==a&&this.mol.appendBondTransient(h,Wt.BondZeroDative),9==a&&this.mol.appendBondTransient(h,Wt.BondZeroHydrogen),this.keepQuery?4==a?te.setQueryBondOrders(this.mol,h,[-1]):5==a?te.setQueryBondOrders(this.mol,h,[1,2]):6==a?te.setQueryBondOrders(this.mol,h,[-1,1]):7==a?te.setQueryBondOrders(this.mol,h,[-1,2]):8==a&&te.setQueryBondOrders(this.mol,h,[-1,0,1,2,3]):4==a&&(this.keepAromatic?this.mol.setBondTransient(h,n.append(this.mol.bondTransient(h),Wt.BondAromatic)):(null==this.resBonds&&(this.resBonds=n.booleanArray(!1,s)),this.resBonds[e]=!0))}let o=new Map,r=new Map,a=new Map,l=new Map,d=new Map;for(;t=this.nextLine(),!t.startsWith("M  END");){let e=0;if(t.startsWith("M  CHG"))e=1;else if(t.startsWith("M  RAD"))e=2;else if(t.startsWith("M  ISO"))e=3;else if(t.startsWith("M  RGP"))e=4;else if(this.parseExtended&&t.startsWith("M  HYD"))e=5;else if(this.parseExtended&&t.startsWith("M  ZCH"))e=6;else if(this.parseExtended&&t.startsWith("M  ZBO"))e=7;else if(this.parseExtended&&t.startsWith("M  ZPA"))e=8;else if(this.parseExtended&&t.startsWith("M  ZRI"))e=9;else if(this.parseExtended&&t.startsWith("M  ZAR"))e=10;else if(this.parseExtended&&t.startsWith("M  RBC"))e=11;else if(this.parseExtended&&t.startsWith("M  SUB"))e=12;else if(this.parseExtended&&t.startsWith("M  UNS"))e=13;else if(t.startsWith("A  ")&&t.length>=6){let e=parseInt(t.substring(3,6).trim());if(e>=1&&e<=this.mol.numAtoms){if(t=this.nextLine(),null==t)break;this.mol.setAtomElement(e,t);continue}}else if(t.startsWith("M  STY")){let e=parseInt(t.substring(6,9).trim());for(let n=0;n<e;n++){let e=parseInt(t.substring(9+8*n,13+8*n).trim()),i=t.substring(14+8*n,17+8*n);"SUP"==i?l.set(e,{atoms:[],name:null}):"MIX"==i||"FOR"==i?d.set(e,{index:e,parent:0,atoms:[],type:i}):"SRU"!=i&&"COP"!=i&&"MUL"!=i&&"DAT"!=i||l.set(e,{atoms:[],name:null,bracketType:i})}}else if(t.startsWith("M  SPL")){let e=parseInt(t.substring(6,9).trim());for(let n=0;n<e;n++){let e=parseInt(t.substring(9+8*n,13+8*n).trim()),i=parseInt(t.substring(13+8*n,17+8*n).trim()),s=d.get(e);null!=s&&(s.parent=i)}}else if(t.startsWith("M  SAL")){let e=parseInt(t.substring(6,10).trim()),i=l.get(e);if(null!=i){let e=parseInt(t.substring(10,13).trim()),s=n.numberArray(0,e);for(let n=0;n<e;n++)s[n]=parseInt(t.substring(13+4*n,17+4*n).trim());i.atoms=n.concat(i.atoms,s)}let s=d.get(e);if(null!=s){let e=parseInt(t.substring(10,13).trim()),i=n.numberArray(0,e);for(let n=0;n<e;n++)i[n]=parseInt(t.substring(13+4*n,17+4*n).trim());s.atoms=n.concat(s.atoms,i)}}else if(t.startsWith("M  SBL")){let e=parseInt(t.substring(6,10).trim()),i=l.get(e);if(null!=i){let e=parseInt(t.substring(10,13).trim()),s=n.numberArray(0,e);for(let n=0;n<e;n++)s[n]=parseInt(t.substring(13+4*n,17+4*n).trim());i.bonds=n.concat(i.bonds,s)}}else if(t.startsWith("M  SMT")){let e=parseInt(t.substring(6,10).trim()),n=l.get(e);null!=n&&(n.name=t.substring(11).trim())}else if(t.startsWith("M  SCL")){let e=parseInt(t.substring(6,10).trim()),n=l.get(e);null!=n&&(n.templateClass=t.substring(11).trim())}else if(t.startsWith("M  SDT")){let e=parseInt(t.substring(6,10).trim()),n=l.get(e);n&&(n.name=t.substring(11,41).trim(),n.unit=t.substring(43,63).trim(),n.query=t.substring(63).trim())}else if(t.startsWith("M  SED")){let e=parseInt(t.substring(6,10).trim()),n=l.get(e);n&&(n.value=t.substring(11).trim())}else if(t.startsWith("M  SCN")){let e=parseInt(t.substring(6,9).trim());for(let n=0;n<e;n++){let e=parseInt(t.substring(9+8*n,13+8*n).trim()),i=t.substring(14+8*n,17+8*n),s=l.get(e);null!=s&&(s.connectType=i.trim())}}else if(t.startsWith("M  CRS")){let e=parseInt(t.substring(6,10).trim()),i=l.get(e);if(null!=i){let e=parseInt(t.substring(10,13).trim());i.bondConn=n.numberArray(0,e);for(let n=0;n<e;n++)i.bondConn[n]=parseInt(t.substring(13+4*n,17+4*n).trim())}}else if(t.startsWith("M  LIN")){let e=parseInt(t.substring(6,9).trim());for(let n=0;n<e;n++){let e={atom:parseInt(t.substring(9+8*n,13+8*n).trim()),nbrs:[],minRep:1,maxRep:parseInt(t.substring(13+8*n,17+8*n).trim())},i=parseInt(t.substring(17+8*n,21+8*n).trim()),s=parseInt(t.substring(21+8*n,25+8*n).trim());i>0&&e.nbrs.push(i),s>0&&e.nbrs.push(s),this.groupLinkNodes.push(e)}}else if(t.startsWith("M  ALS")){let e=parseInt(t.substring(7,10).trim()),n=parseInt(t.substring(10,13).trim()),i=t.charAt(14),s=[];for(let e=0;e<n;e++)s.push(t.substring(16+4*e,20+4*e).trim());this.mol.setAtomElement(e,"*"),"F"==i?te.setQueryAtomElements(this.mol,e,s):"T"==i&&te.setQueryAtomElementsNot(this.mol,e,s)}if(8==e||9==e||10==e){let n=parseInt(t.substring(6,9).trim()),s=parseInt(t.substring(9,13).trim()),l=8==e?o:9==e?r:a;for(let e=0;e<n;e++){let n=parseInt(t.substring(13+4*e,17+4*e).trim());if(n<1||n>i)throw"Invalid MDL MOL: M-block";let o=l.get(s);o||l.set(s,o=[]),o.push(n)}}else if(e>0){let n=parseInt(t.substring(6,9).trim());for(let i=0;i<n;i++){let n=parseInt(t.substring(9+8*i,13+8*i).trim()),s=parseInt(t.substring(13+8*i,17+8*i).trim());if(n<1)throw"Invalid MDL MOL: M-block";1==e?this.mol.setAtomCharge(n,s):2==e?1==s||3==s?this.mol.setAtomUnpaired(n,2):2==s&&this.mol.setAtomUnpaired(n,1):3==e?this.mol.setAtomIsotope(n,s):4==e?this.mol.setAtomElement(n,"R"+s):5==e?this.mol.setAtomHExplicit(n,s):6==e?this.mol.setAtomCharge(n,s):7==e?this.mol.setBondOrder(n,s):11==e&&0!=s?(-2==s?s=this.countRingBonds(n):-1==s&&(s=0),te.setQueryAtomRingBonds(this.mol,n,[s])):12==e&&0!=s?(-2==s?s=this.countSubstitutions(n):-1==s&&(s=0),te.setQueryAtomAdjacency(this.mol,n,[s])):13==e&&1==s&&te.setQueryAtomUnsaturated(this.mol,n,!0)}}}if(this.postFix(),this.parseExtended){let t=new Ft(this.mol);for(let e of o.values())t.createPath(e);for(let e of r.values())t.createRing(e);for(let e of a.values())t.createArene(e);t.rewriteMolecule()}for(let t of n.sorted(Array.from(l.keys()))){let e=l.get(t);e.bracketType&&(l.delete(t),this.applyPolymerBlock(e))}for(let t of n.sorted(Array.from(l.keys()))){let e=l.get(t);l.delete(t),this.applySuperAtom(e,Array.from(l.values()))}for(let t of n.sorted(Array.from(d.keys())))this.groupMixtures.push(d.get(t));this.mol.keepTransient=!1}postFix(){const t=this.mol;for(let e=1;e<=t.numAtoms;e++){if(Qt.hasAbbrev(t,e)||t.atomTransient(e).some((t=>t.startsWith(Wt.AtomSCSRClass))))continue;let n=t.atomElement(e);"D"==n?(t.setAtomElement(e,"H"),t.setAtomIsotope(e,2)):"T"==n&&(t.setAtomElement(e,"H"),t.setAtomIsotope(e,3)),t.is3D&&void 0===t.atomZ(e)&&t.setAtomZ(e,0);let i=Jt.noteExplicitValence(this.mol,e),s=se[n];if(null!=i){let n=i<0||i>14?0:i;for(let i of t.atomAdjBonds(e))n-=t.bondOrder(i);n!=t.atomHydrogens(e)&&t.setAtomHExplicit(e,Math.max(0,n))}else if(s){let i=t.atomCharge(e),o="C"==n||"H"==n?Math.abs(i):"B"==n?-Math.abs(i):-i,r=t.atomUnpaired(e);r>0&&("C"==n||"O"==n||"S"==n||"N"==n||"P"==n)&&(o+=r);for(let n of t.atomAdjBonds(e))o+=t.bondOrder(n);for(let n of s)if(o<=n){let i=n-o;i!=t.atomHydrogens(e)&&t.setAtomHExplicit(e,Math.max(0,i));break}}}if(this.considerRescale&&n.isBlank(this.scsrTemplates)&&Zt.normaliseBondDistances(t),null!=this.resBonds){let e=new _t(t,this.resBonds,null);try{e.perform();for(let n=0;n<t.numBonds;n++)t.setBondOrder(n+1,e.bondOrders[n])}catch(t){}}}parseV3000(){var t;let e;!function(t){t[t.Atom=0]="Atom",t[t.Bond=1]="Bond",t[t.Coll=2]="Coll",t[t.SGroup=3]="SGroup",t[t.Template=4]="Template"}(e||(e={}));let i=!1,s=!1,o=null,r=null,a=[],l=[],d=[],p=[],h=[],c=[],m=[];const u="Invalid MDL MOL V3000: ";for(;;){let t=this.nextLine();if("M  END"==t)break;if(!t.startsWith("M  V30 "))continue;let h=t.substring(7);if(h.startsWith("BEGIN TEMPLATE"))s=!0;else if(h.startsWith("END TEMPLATE"))s=!1;else if(h.startsWith("TEMPLATE ")&&s)m.push([t]);else if(s&&null!=m)n.last(m).push(t);else if(h.startsWith("COUNTS "))r=h.substring(7);else if(h.startsWith("BEGIN CTAB"))i=!0;else if(h.startsWith("BEGIN ATOM"))o=e.Atom;else if(h.startsWith("BEGIN BOND"))o=e.Bond;else if(h.startsWith("BEGIN COLLECTION"))o=e.Coll;else if(h.startsWith("BEGIN SGROUP"))o=e.SGroup;else if(h.startsWith("END "))o=null;else if(i&&o==e.Atom)a.push(h);else if(i&&o==e.Bond)l.push(h);else if(i&&o==e.Coll)d.push(h);else if(i&&o==e.SGroup)p.push(h);else if(i&&null==o&&h.startsWith("LINKNODE ")){let t=this.splitWithQuotes(h.substring(9)),e={atom:0,nbrs:[],minRep:parseInt(t[0]),maxRep:parseInt(t[1])},i=parseInt(t[2]),s=[];for(let e=0;e<2*i;e++)s.push(parseInt(t[3+e]));n.sort(s);for(let t=0;t<s.length;t++)t<s.length-1&&s[t]==s[t+1]?e.atom=s[t++]:e.nbrs.push(s[t]);this.groupLinkNodes.push(e)}}let f=r.trim().split(/\s+/);if(f.length<2)throw u+"counts line malformatted";let g=parseInt(f[0]),k=parseInt(f[1]);if(g<0||g>a.length)throw u+"unreasonable atom count: "+g;if(k<0||k>l.length)throw u+"unreasonable bond count: "+k;let y=[],w=[];for(let t=0;t<a.length;t++){let e=a[t];for(;t<a.length-1&&e.endsWith("-");)t++,e=e.substring(0,e.length-1)+a[t];let n=this.splitWithQuotes(e);if(n.length<6)throw u+"atom line has too few components: "+e;let i=parseInt(n[0],0);if(i<1||i>g)throw u+"invalid atom index: "+n[0];if(null!=y[i-1])throw u+"duplicate atom index: "+i;y[i-1]=n}for(let t=0;t<l.length;t++){let e=l[t];for(;t<l.length-1&&e.endsWith("-");)t++,e=e.substring(0,e.length-1)+l[t];let n=this.splitWithQuotes(e);if(n.length<4)throw u+"bond line has too few components: "+e;let i=parseInt(n[0],0);if(i<1||i>k)throw u+"invalid bond index: "+n[0];if(null!=w[i-1])throw u+"duplicate bond index: "+i;w[i-1]=n}for(let t=1;t<=g;t++){let e=y[t-1];if(null==e)throw u+"atom definition missing for #"+t;let n=e[1];n.length>2&&n.startsWith('"')&&n.endsWith('"')&&(n=n.substring(1,n.length-1));let i=parseFloat(e[2]),s=parseFloat(e[3]),o=parseFloat(e[4]),r=parseInt(e[5]);this.mol.addAtom(n,i,s),0!=o&&(this.mol.setAtomZ(t,o),this.mol.setIs3D(!0)),this.mol.setAtomMapNum(t,r),this.parseQueryAtomList(this.mol,t);for(let n=6;n<e.length;n++){let i=e[n].indexOf("=");if(i<0)continue;let s=e[n].substring(0,i),o=e[n].substring(i+1);if("CHG"==s)this.mol.setAtomCharge(t,parseInt(o));else if("RAD"==s){let e=parseInt(o);1==e||3==e?this.mol.setAtomUnpaired(t,2):2==e&&this.mol.setAtomUnpaired(t,1)}else if("MASS"==s)this.mol.setAtomIsotope(t,parseInt(o));else if("CFG"==s)parseInt(o)>0&&this.keepParity;else if("VAL"==s)Jt.markExplicitValence(this.mol,t,parseInt(o));else if("CLASS"==s)this.mol.appendAtomTransient(t,Wt.AtomSCSRClass+":"+o);else if("SEQID"==s)this.mol.appendAtomTransient(t,Wt.AtomSCSRSeqID+":"+o);else if("ATTCHORD"==s){let e=this.unpackStrings(o);null!=e&&this.mol.appendAtomTransient(t,Wt.AtomSCSRAttchOrd+":"+e.join(","))}else if("HCOUNT"==s){let e=parseInt(o);0!=e&&te.setQueryAtomHydrogens(this.mol,t,[Math.max(e,0)])}else if("RBCNT"==s){let e=parseInt(o);-2==e?h.push(t):0!=e&&te.setQueryAtomRingBonds(this.mol,t,[Math.max(e,0)])}else if("SUBST"==s){let e=parseInt(o);-2==e?c.push(t):0!=e&&te.setQueryAtomAdjacency(this.mol,t,[Math.max(e,0)])}else"UNSAT"==s&&1==parseInt(o)&&te.setQueryAtomUnsaturated(this.mol,t,!0)}}for(let t=1;t<=k;t++){let e=w[t-1];if(null==e)throw u+"bond definition missing for #"+t;let i=parseInt(e[1]),s=parseInt(e[2]),o=parseInt(e[3]),r=i>=1&&i<=3?i:9==i||10==i?0:1;this.mol.addBond(s,o,r),9==i&&this.mol.appendBondTransient(t,Wt.BondZeroDative),10==i&&this.mol.appendBondTransient(t,Wt.BondZeroHydrogen),this.keepQuery?4==i?te.setQueryBondOrders(this.mol,t,[-1]):5==i?te.setQueryBondOrders(this.mol,t,[1,2]):6==i?te.setQueryBondOrders(this.mol,t,[-1,1]):7==i?te.setQueryBondOrders(this.mol,t,[-1,2]):8==i&&te.setQueryBondOrders(this.mol,t,[-1,0,1,2,3]):4==i&&(this.keepAromatic?this.mol.setBondTransient(t,n.append(this.mol.bondTransient(t),Wt.BondAromatic)):(null==this.resBonds&&(this.resBonds=n.booleanArray(!1,k)),this.resBonds[t-1]=!0));let a=null,l=null;for(let n=4;n<e.length;n++){let i=e[n].indexOf("=");if(i<0)continue;let s=e[n].substring(0,i),o=e[n].substring(i+1);if("CFG"==s){let e=parseInt(o);this.mol.setBondType(t,1==e?ge.BONDTYPE_INCLINED:2==e?ge.BONDTYPE_UNKNOWN:3==e?ge.BONDTYPE_DECLINED:ge.BONDTYPE_NORMAL)}else"DISP"==s?"COORD"==o&&this.mol.setBondOrder(t,0):"ENDPTS"==s?a=this.unpackList(o):"ATTACH"==s&&(l=o)}null!=l&&null!=a&&("ALL"==l?this.groupAttachAll.set(t,a):"ANY"==l&&this.groupAttachAny.set(t,a))}for(let t of h)te.setQueryAtomRingBonds(this.mol,t,[this.countRingBonds(t)]);for(let t of c)te.setQueryAtomAdjacency(this.mol,t,[this.countSubstitutions(t)]);this.postFix();for(let t=0;t<d.length;t++){let e=d[t];for(;t<d.length-1&&e.endsWith("-");)t++,e=e.substring(0,e.length-1)+d[t];let n=this.splitWithQuotes(e);n[0].startsWith("MDLV30/STEABS")?n[1].startsWith("ATOMS=")&&(this.groupStereoAbsolute=this.unpackList(n[1].substring(5))):n[0].startsWith("MDLV30/STERAC")?n[1].startsWith("ATOMS=")&&this.groupStereoRacemic.push(this.unpackList(n[1].substring(6))):n[0].startsWith("MDLV30/STEREL")&&n[1].startsWith("ATOMS=")&&this.groupStereoRelative.push(this.unpackList(n[1].substring(6)))}let x=new ie(this.mol);for(let t of this.groupStereoRacemic)x.createRacemic(t);for(let t of this.groupStereoRelative)x.createRelative(t);x.rewriteMolecule();let C=new Map;for(let e=0;e<p.length;e++){let n=p[e];for(;e<p.length-1&&n.endsWith("-");)e++,n=n.substring(0,n.length-1)+p[e];let i=this.splitWithQuotes(n),s=parseInt(i[0]);if(i.length>3&&s>0&&"SUP"==i[1]){let e={atoms:[],name:null};for(let n=3;n<i.length;n++)if(i[n].startsWith("ATOMS="))e.atoms=this.unpackList(i[n].substring(6));else if(i[n].startsWith("LABEL="))e.name=this.withoutQuotes(i[n].substring(6));else if(i[n].startsWith("XBONDS="))e.bonds=this.unpackList(i[n].substring(7));else if(i[n].startsWith("CLASS="))e.templateClass=this.withoutQuotes(i[n].substring(6));else if(i[n].startsWith("NATREPLACE="))e.natReplace=this.withoutQuotes(i[n].substring(11));else if(i[n].startsWith("SAP=")){const s=this.unpackStrings(i[n].substring(4));e.attachPoints=[...null!==(t=e.attachPoints)&&void 0!==t?t:[],...s]}C.set(s,e)}else if(i.length>3&&s>0&&("MIX"==i[1]||"FOR"==i[1])&&parseInt(i[2])==s){let t={index:s,parent:0,atoms:null,type:i[1]};for(let e=3;e<i.length;e++)i[e].startsWith("ATOMS=")?t.atoms=this.unpackList(i[e].substring(6)):i[e].startsWith("PARENT=")&&(t.parent=parseInt(i[e].substring(7)));this.groupMixtures.push(t)}else if(i.length>3&&s>0&&("SRU"==i[1]||"COP"==i[1]||"MUL"==i[1]||"DAT"==i[1])){let t={atoms:[],name:null,bracketType:i[1]};for(let e=3;e<i.length;e++)i[e].startsWith("ATOMS=")?t.atoms=this.unpackList(i[e].substring(6)):i[e].startsWith("BONDS=")?t.bonds=this.unpackList(i[e].substring(6)):i[e].startsWith("LABEL=")?t.name=this.withoutQuotes(i[e].substring(6)):i[e].startsWith("CONNECT=")?t.connectType=i[e].substring(8):i[e].startsWith("XBCORR=")?t.bondConn=this.unpackList(i[e].substring(7)):i[e].startsWith("MULT=")?t.name=this.withoutQuotes(i[e].substring(5)):i[e].startsWith("FIELDNAME=")?t.name=this.withoutQuotes(i[e].substring(10)):i[e].startsWith("FIELDDATA=")&&(t.value=this.withoutQuotes(i[e].substring(10)));C.set(s,t)}}for(let t of n.sorted(Array.from(C.keys()))){let e=C.get(t);e.bracketType&&(C.delete(t),this.applyPolymerBlock(e))}for(let t of n.sorted(Array.from(C.keys()))){let e=C.get(t);C.delete(t),this.applySuperAtom(e,Array.from(C.values()))}m.length>0&&(this.scsrTemplates=m.map((t=>this.parseV3000Template(t))))}parseQueryAtomList(t,e){let n=t.atomElement(e),i=!1;if(n.startsWith("NOT ")&&(n=n.substring(4),i=!0),n.length<2||!n.startsWith("[")||!n.endsWith("]"))return;n=n.substring(1,n.length-1);let s=n.split(",");t.setAtomElement(e,"*"),i?te.setQueryAtomElementsNot(t,e,s):te.setQueryAtomElements(t,e,s)}applySuperAtom(t,e){if(null==t.name&&null==t.templateClass||n.isBlank(t.atoms))return;let i=n.booleanArray(!0,this.mol.numAtoms);for(let e of t.atoms)i[e-1]=!1;let s=t.name;if(null!=s){let t;for(;(t=s.indexOf("\\S"))>=0;)s=s.substring(0,t)+"{^"+s.substring(t+2);for(;(t=s.indexOf("\\s"))>=0;)s=s.substring(0,t)+"{"+s.substring(t+2);for(;(t=s.indexOf("\\n"))>=0;)s=s.substring(0,t)+"}"+s.substring(t+2)}let[o,r]=t.templateClass?[null,null]:Qt.convertToAbbrevIndex(this.mol,i,s);if(null==o){let e={};return t.bonds&&(e.bonds=t.bonds.join(" ")),t.templateClass&&(e.templateClass=t.templateClass),t.natReplace&&(e.natReplace=t.natReplace),t.attachPoints&&(e.attachPoints=t.attachPoints.join(" ")),void Jt.markSgroupMultiAttach(this.mol,s,t.atoms,e)}this.mol=o;let a=n.maskMap(i);for(let t of e){let e=!1;for(let i=t.atoms.length-1;i>=0;i--){let s=a[t.atoms[i]-1]+1;0==s?(t.atoms=n.remove(t.atoms,i),e=!0):t.atoms[i]=s}e&&(t.atoms=n.sorted(n.append(t.atoms,r)))}}applyPolymerBlock(t){if("MUL"==t.bracketType){let e=parseInt(t.name);return void Jt.markSgroupMultiRepeat(this.mol,e,t.atoms)}if("DAT"==t.bracketType)return void(null!=t.atoms&&Jt.markSgroupData(this.mol,t.name,t.value,t.unit,t.query,t.atoms));let e=new $t(this.mol),i=null;if(null==t.connectType);else if("HT"==t.connectType)i=Xt.HeadToTail;else if("HH"==t.connectType)i=Xt.HeadToHead;else{if("EU"!=t.connectType)return;i=Xt.Random}let s=null;if(3==n.len(t.bondConn)){let e=t.bondConn[0],n=t.bondConn[2],i=t.bondConn[1],o=0;for(let s=1;s<=this.mol.numBonds;s++)if(s!=e&&s!=n&&s!=i){let e=t.atoms.indexOf(this.mol.bondFrom(s))>=0,n=t.atoms.indexOf(this.mol.bondTo(s))>=0;if(e&&!n||!e&&n){if(o>0){o=0;break}o=s}}s=[e,n,i,o]}else 4==n.len(t.bondConn)&&(s=t.bondConn);let o=new Vt(t.atoms);o.connect=i,o.bondConn=s,e.createUnit(o)}parseV3000Template(t){let e=t[0],n=this.splitWithQuotes(e.substring(16)),i=n[1],s=null;for(let t=2;t<n.length;t++)n[t].startsWith("NATREPLACE=")&&(s=n[t].substring(11));t[0]="  0  0  0  0  0  0  0  0  0  0  0 V3000",t.push("M  END");let o=new oe(t.join("\n"));return o.parseHeader=!1,o.parse(),{name:i,natReplace:s,mol:o.mol}}withoutQuotes(t){return t.length>=2&&t.startsWith('"')&&t.endsWith('"')?t.substring(1,t.length-1):t}splitWithQuotes(t){let e=[],n="",i=0,s=!1;for(let o=0;o<t.length;o++){let r=t.charAt(o);" "!=r||0!=i||s?(n+=r,'"'==r?s=!s:"("==r||"["==r?i++:")"!=r&&"]"!=r||i--):(n.length>0&&e.push(n),n="")}return n.length>0&&e.push(n),e}unpackList(t){if(!t.startsWith("(")||!t.endsWith(")"))return null;t=t.substring(1,t.length-1);let e=[];for(let n of t.split(" "))e.push(parseInt(n));return e[0]!=e.length-1?null:n.remove(e,0)}unpackStrings(t){if(!t.startsWith("(")||!t.endsWith(")"))return null;let e=(t=t.substring(1,t.length-1)).split(" ");return parseInt(e[0])!=e.length-1?null:n.remove(e,0)}countRingBonds(t){let e=0;for(let n of this.mol.atomAdjBonds(t))this.mol.bondInRing(n)&&e++;return e}countSubstitutions(t){let e=0;for(let n of this.mol.atomAdjList(t))"H"!=this.mol.atomElement(n)&&e++;return e}}class re{constructor(t){this.ds=new ye,this.upcastColumns=!0,this.pos=0,this.lines=t.split(/\r?\n/)}parse(){return this.parseStream(),this.upcastColumns&&this.upcastStringColumns(),this.ds}parseStream(){let t=this.ds;t.appendColumn("Molecule","molecule","Molecular structure");let e=-1,n=[];for(;this.pos<this.lines.length;){let i=this.lines[this.pos++];if(!i.startsWith("$$$$")){n.push(i);continue}let s=t.appendRow(),o="",r=0;for(;r<n.length&&(i=n[r],!i.startsWith("> "))&&(o+=i+"\n",r++,!i.startsWith("M\tEND")););let a=null,l=null;try{if(o.length>0){let t=new oe(o);t.parse(),a=t.mol,l=t.molName}}catch(t){}if(null!=a&&t.setMolecule(s,0,a),l&&(e<0&&(e=t.appendColumn("Name","string","Molecule name")),t.setString(s,e,l)),0==s&&null!=a){let e=n[0],i=n[2];e.length>=7&&e.startsWith("$name=")&&t.changeColumnName(0,e.substring(6),t.colDescr(0)),i.length>=8&&i.startsWith("$title=")&&(t.title=i.substring(7))}for(;r+1<n.length;r+=3){let e=n[r],i=n[r+1];if(!e.startsWith(">"))continue;let o=e.indexOf("<");if(o<0)continue;if(e=e.substring(o+1),o=e.indexOf(">"),o<0)continue;if(e=e.substring(0,o),0==e.length)continue;for(;r+2<n.length&&n[r+2].length>0;)i+="\n"+n[r+2],r++;let a=t.findColByName(e);a<0&&(a=t.appendColumn(e,"string","")),0==i.length?t.setToNull(s,a):t.setString(s,a,i)}n=[]}0==t.numRows&&(this.ds=null)}upcastStringColumns(){let t=this.ds;for(let e=0;e<t.numCols;e++)if("string"==t.colType(e)){let n=!0,i=!0,s=!0,o=!0;for(let r=0;r<t.numRows&&(i||s||o);r++){if(t.isNull(r,e))continue;n=!1;let a=t.getString(r,e);if(o){let t=a.toLowerCase();"true"!=t&&"false"!=t&&(o=!1)}if(s){let t=parseInt(a);isFinite(t)&&t==parseFloat(a)||(s=!1)}i&&(isFinite(parseFloat(a))||(i=!1))}n||(s?t.changeColumnType(e,"integer"):i?t.changeColumnType(e,"real"):o&&t.changeColumnType(e,"boolean"))}}}const ae="M  V30 ";class le{constructor(t){this.mol=t,this.includeHeader=!0,this.includeCounts=!0,this.includeEnd=!0,this.overallStereoAbsolute=!0,this.enhancedFields=!1,this.chargeSeparate=!1,this.abbrevSgroups=!0,this.polymerBlocks=!0,this.molName="",this.scsrTemplates=null,this.sgroups=[],this.lines=[]}write(){return this.includeHeader&&(this.lines.push(this.molName),this.lines.push("Generated by WebMolKit"),this.lines.push("")),this.writeCTAB(),this.lines.join("\n")}writeV3000(){return this.includeHeader&&(this.lines.push(this.molName),this.lines.push("Generated by WebMolKit"),this.lines.push("")),this.writeCTAB3000(),this.lines.join("\n")}writeEither(){let t=ie.hasStereoGroups(this.mol)||this.mol.numAtoms>=1e3||this.mol.numBonds>=1e3||n.notBlank(this.scsrTemplates);if(!t)for(let e=1;e<=this.mol.numBonds;e++)if(0==this.mol.bondOrder(e)&&null==te.queryBondOrders(this.mol,e)){t=!0;break}return t?this.writeV3000():this.write()}getResult(){return this.lines.join("\n")}writeCTAB(){var t;let e=this.mol=this.mol.clone();e.keepTransient=!0,(Qt.hasAnyAbbrev(e)||Jt.hasAnySgroupMultiAttach(e)||Jt.hasAnySgroupMultiRepeat(e)||Jt.hasAnySgroupData(e))&&(this.abbrevSgroups?this.partialAbbrevExpansion():Qt.expandAbbrevs(e,!0),this.prepareSgroups());let i=[],s=[];for(let t=1;t<=e.numAtoms;t++){let n=null,o="F";if(n=te.queryAtomElements(e,t),null==n&&(n=te.queryAtomElementsNot(e,t),o="T"),null==n)continue;e.setAtomElement(t,"L");let r=this.intrpad(t,3)+" "+o+"  "+this.intrpad(n.length,3);for(let t of n)r+=this.intrpad(ge.elementAtomicNumber(t),4);i.push(r),r="M  ALS "+this.intrpad(t,3)+this.intrpad(n.length,3)+" "+o+" ";for(let t of n)r+=this.pad(t,4);s.push(r)}this.lines.push(this.intrpad(e.numAtoms,3)+this.intrpad(e.numBonds,3)+this.intrpad(i.length,3)+"  0"+(this.overallStereoAbsolute?"  1":"  0")+"  0  0  0  0  0999 V2000");let o=[],r=[],a=[],l=[],d=[],p=[],h=[],c=[],m=[],u=[],f=[],g=[],k=[],y=[],w=[],x=[],C=[],v=[];for(let t=1;t<=e.numAtoms;t++){let i=e.atomX(t),s=e.atomY(t),f=e.is3D()?e.atomZ(t):0,g=this.rpad(i.toFixed(4),10)+this.rpad(s.toFixed(4),10)+this.rpad(f.toFixed(4),10),b=e.atomElement(t);for(b.length>3&&(b=b.substring(0,3)),b.length>1&&"R"==b.charAt(0)&&b.charAt(1)>="0"&&b.charAt(1)<="9"&&(h.push(t),c.push(parseInt(b.substring(1))),b="R#");b.length<4;)b+=" ";g+=" "+b+"0";let A=e.atomCharge(t),T=e.atomUnpaired(t),M=e.atomMapNum(t);A=A>=-3&&A<=-1?4-A:0==A&&2==T?4:A>=1&&A<=3?4-A:0;let E=te.queryAtomHydrogens(e,t),S=0;1==n.len(E)&&(S=E[0]+1);let N=this.mdlValence(e,t,15);g+=this.intrpad(A,3)+"  0"+this.intrpad(S,3)+"  0"+this.intrpad(N,3)+"  0  0  0"+this.intrpad(M,3)+"  0  0",this.lines.push(g),0!=e.atomCharge(t)&&(o.push(t),r.push(e.atomCharge(t))),this.enhancedFields&&e.atomHExplicit(t)!=ge.HEXPLICIT_UNKNOWN&&(m.push(t),u.push(e.atomHExplicit(t))),1==T&&(a.push(t),l.push(2)),2==T&&(a.push(t),l.push(1)),e.atomIsotope(t)!=ge.ISOTOPE_NATURAL&&(d.push(t),p.push(e.atomIsotope(t)));let D=te.queryAtomRingBonds(e,t),R=te.queryAtomAdjacency(e,t),O=te.queryAtomUnsaturated(e,t);1==n.len(D)&&(k.push(t),y.push(0==D[0]?-1:D[0])),1==n.len(R)&&(w.push(t),x.push(0==R[0]?-1:R[0])),1==O&&(C.push(t),v.push(1))}let b=Jt.noteAromaticBonds(e);for(let i=1;i<=e.numBonds;i++){let s=e.bondOrder(i),o=s,r=n.sorted(null!==(t=te.queryBondOrders(e,i))&&void 0!==t?t:[]);b[i-1]||n.equals(r,[-1])?o=4:n.equals(r,[1,2])?o=5:n.equals(r,[-1,1])?o=6:n.equals(r,[-1,2])?o=7:n.equals(r,[-1,0,1,2,3])?o=8:o>3&&(o=3);let a=e.bondType(i);a==ge.BONDTYPE_NORMAL||(a=a==ge.BONDTYPE_INCLINED?1:a==ge.BONDTYPE_DECLINED?6:a==ge.BONDTYPE_UNKNOWN?1==o?4:3:0);let l=this.intrpad(e.bondFrom(i),3)+this.intrpad(e.bondTo(i),3)+this.intrpad(o,3)+this.intrpad(a,3)+"  0  0  0";this.lines.push(l),this.enhancedFields&&(s<1||s>3||o!=s&&n.isBlank(r))&&(f.push(i),g.push(s))}if(this.lines.push(...i),this.lines.push(...s),this.writeMBlockPair("CHG",o,r),this.writeMBlockPair("RAD",a,l),this.writeMBlockPair("ISO",d,p),this.writeMBlockPair("RGP",h,c),this.writeMBlockPair("HYD",m,u),this.writeMBlockPair("ZCH",[],[]),this.writeMBlockPair("ZBO",f,g),this.writeMBlockPair("RBC",k,y),this.writeMBlockPair("SUB",w,x),this.writeMBlockPair("UNS",C,v),this.enhancedFields){let t=new Ft(this.mol),e=0;for(let n of t.getResPaths())this.writeMBlockFlat("ZPA",++e,n.atoms);for(let n of t.getResRings())this.writeMBlockFlat("ZRI",++e,n.atoms);for(let i of t.getArenes())this.writeMBlockFlat("ZAR",++e,n.prepend(i.atoms,i.centre))}let A=n.booleanArray(!1,e.numAtoms);for(let t=0;t<this.sgroups.length;t++){let e=this.sgroups[t];for(let t of e.atoms)A[t-1]=!0;let n=this.intrpad(t+1,4);this.lines.push("M  STY  1"+n+" "+e.type);for(let t=0;t<e.atoms.length;t+=15){let i=Math.min(e.atoms.length-t,15),s="M  SAL"+n+this.intrpad(i,3);for(let n=0;n<i;n++)s+=this.intrpad(e.atoms[t+n],4);this.lines.push(s)}if("DAT"!=e.type&&(e.name&&this.lines.push("M  SMT"+n+" "+e.name),e.templateClass&&(this.lines.push("M  SCL"+n+" "+e.templateClass),e.name||this.lines.push("M  SDS EXP  1"+n))),"MUL"==e.type){let t=parseInt(e.name),i=e.atoms.length/t;for(let t=0;t<i;t+=15){let s=Math.min(i-t,15),o="M  SPA"+n+this.intrpad(s,3);for(let n=0;n<s;n++)o+=this.intrpad(e.atoms[t+n],4);this.lines.push(o)}e.parent>0&&this.lines.push("M  SPL    1"+n+this.intrpad(e.parent,4))}"DAT"==e.type&&(this.lines.push("M  SDT"+n+" "+this.pad(e.name,32)+this.pad(e.unit,20)+e.query),this.lines.push("M  SED"+n+" "+e.value))}this.polymerBlocks&&this.encodePolymerBlocks(this.sgroups.length);for(let t=1;t<=e.numAtoms;t++)e.atomElement(t).length>2&&(this.lines.push("A  "+this.intrpad(t,3)),this.lines.push(e.atomElement(t)));this.includeEnd&&this.lines.push("M  END")}writeMBlockPair(t,e,n){const i=e.length;for(let s=0;s<i;s+=8){let o=Math.min(8,i-s),r="M  "+t+this.intrpad(o,3);for(let t=0;t<o;t++)r+=this.intrpad(e[s+t],4)+this.intrpad(n[s+t],4);this.lines.push(r)}}writeMBlockFlat(t,e,n){const i=n.length;for(let s=0;s<i;s+=15){let o=Math.min(15,i-s),r="M  "+t+this.intrpad(o,3)+this.intrpad(e,4);for(let t=0;t<o;t++)r+=this.intrpad(n[s+t],4);this.lines.push(r)}}writeMBlockFlatIdxFirst(t,e,n){const i=n.length;for(let s=0;s<i;s+=15){let o=Math.min(15,i-s),r="M  "+t+this.intrpad(e,4)+this.intrpad(o,3);for(let t=0;t<o;t++)r+=this.intrpad(n[s+t],4);this.lines.push(r)}}intrpad(t,e){return this.rpad(t.toString(),e)}rpad(t,e){for(;t.length<e;)t=" "+t;return t}pad(t,e){for(;t.length<e;)t+=" ";return t}mdlValence(t,e,n){let i=Jt.noteExplicitValence(t,e);if(null!=i)return i>0?i:n;let s=t.atomHydrogens(e),o=t.atomElement(e),r=se[o];if(null==r&&0==s)return 0;let a=t.atomCharge(e),l="C"==o||"H"==o?Math.abs(a):"B"==o?-Math.abs(a):-a,d=0;for(let n of t.atomAdjBonds(e))d+=t.bondOrder(n);let p=l+s+d;if(r)for(let t of r)if(t>=l+d){if(t==p)return 0;break}let h=p-l;return h<=0||h>14?n:h}partialAbbrevExpansion(){const{mol:t}=this;for(let e=1;e<=t.numAtoms;e++)if(Qt.hasAbbrev(t,e)){let n=Qt.getAbbrev(t,e);if(null==n||1!=t.atomAdjCount(e)){Qt.clearAbbrev(t,e);continue}Qt.hasAnyAbbrev(n)&&(Qt.expandAbbrevs(n,!0),Qt.setAbbrev(t,e,n));let i=t.bondOrder(t.atomAdjBonds(e)[0]);if(1==n.atomAdjCount(1)&&i==n.bondOrder(n.atomAdjBonds(1)[0]))continue;Qt.expandOneAbbrev(t,e,!0),e--}}prepareSgroups(){const{mol:t}=this;for(let e=1;e<=t.numAtoms;e++)t.atomMapNum(e)<0&&t.setAtomMapNum(e,0);let e=0;for(let n=1;n<=t.numAtoms;n++)if(Qt.hasAbbrev(t,n)){this.sgroups.push({type:"SUP",name:t.atomElement(n),atoms:null});let i=Qt.expandOneAbbrev(t,n,!0);if(null==i)continue;e--;for(let n=0;n<i.length;n++)i[n]&&t.setAtomMapNum(n+1,e);n--}for(let n=-1,i=0;n>=e;n--,i++){let e=[];for(let i=1;i<=t.numAtoms;i++)t.atomMapNum(i)==n&&(e.push(i),t.setAtomMapNum(i,0));this.sgroups[i].atoms=e}for(let e of Jt.noteAllSgroupMultiAttach(t)){let t={type:"SUP",name:e.name,atoms:e.atoms},n=e.keyval.bonds;n&&(t.bonds=n.split(" ").map((t=>parseInt(t)))),t.templateClass=e.keyval.templateClass,t.natReplace=e.keyval.natReplace,n=e.keyval.attachPoints,n&&(t.attachPoints=n.split(" ")),this.sgroups.push(t)}for(let e of Jt.noteAllSgroupMultiRepeat(t))this.sgroups.push({type:"MUL",name:e.mult.toString(),atoms:e.atoms});for(let e of Jt.noteAllSgroupData(t))this.sgroups.push({type:"DAT",name:e.name,value:e.value,unit:e.unit,query:e.query,atoms:e.atoms});for(let t=0;t<this.sgroups.length;t++){let e=this.sgroups[t];if("MUL"!=e.type)continue;let n=-1,i=Number.MAX_SAFE_INTEGER;t:for(let s=0;s<this.sgroups.length;s++)if(s!=t){let t=this.sgroups[s];if("MUL"!=t.type||t.atoms.length>=i)continue;for(let n of e.atoms)if(!t.atoms.includes(n))continue t;n=s,i=t.atoms.length}n>=0&&(e.parent=n+1)}}encodePolymerBlocks(t){let e=new $t(this.mol);for(let i of e.getIDList()){let s=e.getUnit(i),o=this.intrpad(++t,4);this.lines.push("M  STY  1"+o+" SRU"),s.connect==Xt.HeadToTail?this.lines.push("M  SCN  1"+o+" HT "):s.connect==Xt.HeadToHead?this.lines.push("M  SCN  1"+o+" HH "):s.connect==Xt.Random&&this.lines.push("M  SCN  1"+o+" EU "),this.writeMBlockFlatIdxFirst("SAL",t,s.atoms);let r=null;for(let t=1;t<=this.mol.numBonds;t++){let e=s.atoms.indexOf(this.mol.bondFrom(t))>=0,i=s.atoms.indexOf(this.mol.bondTo(t))>=0;(e&&!i||!e&&i)&&(r=n.append(r,t))}if(null!=r&&this.writeMBlockFlatIdxFirst("SBL",t,r),4==n.len(s.bondConn)){let e=[s.bondConn[0],s.bondConn[2],s.bondConn[1]];this.writeMBlockFlatIdxFirst("CRS",t,e)}this.lines.push("M  SMT"+o+" n")}}writeCTAB3000(){var t;let e=this.mol;(Qt.hasAnyAbbrev(e)||Jt.hasAnySgroupMultiAttach(e)||Jt.hasAnySgroupMultiRepeat(e)||Jt.hasAnySgroupData(e))&&(e=this.mol=e.clone(),e.keepTransient=!0,this.abbrevSgroups?this.partialAbbrevExpansion():Qt.expandAbbrevs(e,!0),this.prepareSgroups());let i=this.populateV3000Sgroups();this.includeCounts&&this.lines.push("  0  0  0     0  0            999 V3000"),this.lines.push(ae+"BEGIN CTAB"),this.lines.push(ae+`COUNTS ${e.numAtoms} ${e.numBonds} ${i.length} 0 ${this.overallStereoAbsolute?1:0}`),this.lines.push(ae+"BEGIN ATOM");for(let t=1;t<=e.numAtoms;t++){let i=e.atomElement(t),s=te.queryAtomElements(e,t);null!=s?i="["+s.join(",")+"]":(s=te.queryAtomElementsNot(e,t),null!=s&&(i="NOT ["+s.join(",")+"]")),i.includes(" ")&&(i=`"${i}"`);let o=e.atomX(t),r=e.atomY(t),a=e.is3D()?e.atomZ(t):0,l=e.atomMapNum(t),d=e.atomCharge(t),p=e.atomUnpaired(t),h=e.atomIsotope(t),c=this.mdlValence(e,t,-1),m=`${ae}${t} ${i} ${o.toFixed(4)} ${r.toFixed(4)} ${a.toFixed(4)} ${l}`;0!=d&&(m+=" CHG="+d),1==p?m+=" RAD=2":2==p&&(m+=" RAD=1"),0!=h&&(m+=" MASS="+h),0!=c&&(m+=" VAL="+c);let u=te.queryAtomHydrogens(e,t),f=te.queryAtomRingBonds(e,t),g=te.queryAtomAdjacency(e,t),k=te.queryAtomUnsaturated(e,t);1==n.len(u)&&(m+=" HCOUNT="+(0==u[0]?-1:u[0])),1==n.len(f)&&(m+=" RBCNT="+(0==f[0]?-1:f[0])),1==n.len(g)&&(m+=" SUBST="+(0==g[0]?-1:g[0])),1==k&&(m+=" UNSAT=1");for(let n of e.atomTransient(t))if(n.startsWith(Wt.AtomSCSRClass))m+=" CLASS="+n.substring(Wt.AtomSCSRClass.length+1);else if(n.startsWith(Wt.AtomSCSRSeqID))m+=" SEQID="+n.substring(Wt.AtomSCSRSeqID.length+1);else if(n.startsWith(Wt.AtomSCSRAttchOrd)){let t=n.substring(Wt.AtomSCSRAttchOrd.length+1).split(",");m+=" ATTCHORD="+this.packV3000Strings(t)}this.lines.push(m)}if(this.lines.push(ae+"END ATOM"),e.numBonds>0){this.lines.push(ae+"BEGIN BOND");let i=Jt.noteAromaticBonds(e),s=Jt.noteZeroHydrogenBonds(e);for(let o=1;o<=e.numBonds;o++){let r=e.bondFrom(o),a=e.bondTo(o),l=e.bondOrder(o),d=l,p=n.sorted(null!==(t=te.queryBondOrders(e,o))&&void 0!==t?t:[]);i[o-1]||n.equals(p,[-1])?d=4:n.equals(p,[1,2])?d=5:n.equals(p,[-1,1])?d=6:n.equals(p,[-1,2])?d=7:n.equals(p,[-1,0,1,2,3])?d=8:0==d?d=s[o-1]?10:9:d>3&&(d=3);let h=e.bondType(o),c=`${ae}${o} ${d} ${r} ${a}`;h==ge.BONDTYPE_INCLINED?c+=" CFG=1":h==ge.BONDTYPE_DECLINED?c+=" CFG=3":h==ge.BONDTYPE_UNKNOWN&&(c+=" CFG=2"),0!=l||s[o-1]||(c+=" DISP=COORD"),this.lines.push(c)}this.lines.push(ae+"END BOND")}i.length>0&&(this.lines.push(ae+"BEGIN SGROUP"),this.lines.push(...i),this.lines.push(ae+"END SGROUP"));let s=[],o=new ie(e),r=0,a=0;for(let t of o.getRacemicAtoms())s.push(ae+"MDLV30/STERAC"+ ++r+" ATOMS="+this.packV3000List(t));for(let t of o.getRelativeAtoms())s.push(ae+"MDLV30/STEREL"+ ++a+" ATOMS="+this.packV3000List(t));s.length>0&&(this.lines.push(ae+"BEGIN COLLECTION"),this.lines.push(...s),this.lines.push(ae+"END COLLECTION")),this.lines.push(ae+"END CTAB"),n.notBlank(this.scsrTemplates)&&this.populateSCSRTemplates(),this.includeEnd&&this.lines.push("M  END")}populateV3000Sgroups(){let t=this.mol,e=[];for(let t=0;t<this.sgroups.length;t++){let n=this.sgroups[t],i=e.length+1,s=`${ae}${i} ${n.type} 0`;if("SUP"==n.type){if(s+=" LABEL="+(n.name.includes(" ")?`"${n.name}"`:n.name),s+=" ATOMS="+this.packV3000List(n.atoms),n.bonds&&(s+=" XBONDS="+this.packV3000List(n.bonds)),n.templateClass&&(s+=" CLASS="+n.templateClass,n.name||(s+=" ESTATE=E")),n.natReplace&&(s+=" NATREPLACE="+n.natReplace),n.attachPoints)for(let t=0;t+2<n.attachPoints.length;t+=3)s+=` SAP=(3 ${n.attachPoints[t]} ${n.attachPoints[t+1]} ${n.attachPoints[t+2]})`}else if("MUL"==n.type){let t=parseInt(n.name),e=n.atoms.length/t;s+=" MULT="+n.name,s+=" ATOMS="+this.packV3000List(n.atoms),s+=" PATOMS="+this.packV3000List(n.atoms.slice(0,e)),n.parent>0&&(s+=" PARENT="+n.parent)}else"DAT"==n.type&&(s+=" ATOMS="+this.packV3000List(n.atoms),s+=" FIELDNAME="+(n.name.includes(" ")?`"${n.name}"`:n.name),s+=" FIELDDATA="+(n.value.includes(" ")?`"${n.value}"`:n.value));e.push(s)}if(this.polymerBlocks){let n=new $t(t);for(let i of n.getIDList()){let s=e.length+1,o=n.getUnit(i),r=`${ae}${s} SRU 0`;r+=" ATOMS="+this.packV3000List(o.atoms),o.connect==Xt.HeadToTail?r+=" CONNECT=HT":o.connect==Xt.HeadToHead?r+=" CONNECT=HH":o.connect==Xt.Random&&(r+=" CONNECT=EU");let a=[];for(let e=1;e<=t.numBonds;e++){let n=o.atoms.includes(t.bondFrom(e)),i=o.atoms.includes(t.bondTo(e));(n&&!i||!n&&i)&&a.push(e)}a.length>0&&(r+=" BONDS="+this.packV3000List(a)),null!=o.bondConn&&(r+=" XBCORR="+this.packV3000List(o.bondConn)),e.push(r)}}return e}populateSCSRTemplates(){this.lines.push(ae+"BEGIN TEMPLATE");for(let n=0;n<this.scsrTemplates.length;n++){var t=this.scsrTemplates[n];let i=ae+"TEMPLATE "+(n+1)+" "+t.name;t.natReplace&&(i+=" NATREPLACE="+t.natReplace),this.lines.push(i);var e=new le(t.mol);e.includeHeader=!1,e.includeCounts=!1,e.includeEnd=!1;let s=e.writeV3000();for(i of s.trimEnd().split("\n"))this.lines.push(i)}this.lines.push(ae+"END TEMPLATE")}packV3000List(t){let e="("+t.length;for(let n of t)e+=" "+n;return e+")"}packV3000Strings(t){let e="("+t.length;for(let n of t)e+=" "+n;return e+")"}}class de{constructor(t){this.ds=t,this.enhancedFields=!0,this.chargeSeparate=!1,this.abbrevSgroups=!0,this.lines=[]}write(){let t=this.ds,e=this.lines,n=this.ds.firstColOfType("molecule");for(let i=0;i<t.numRows;i++){let s=n<0?null:t.getMolecule(i,n);if(null!=s){let t=new le(s);t.enhancedFields=this.enhancedFields,t.chargeSeparate=this.chargeSeparate,t.abbrevSgroups=this.abbrevSgroups;let n=t.write();e.push(n)}for(let s=0;s<t.numCols;s++)if(s!=n&&t.notNull(i,s)){let n=t.colType(s),o="";"string"==n?o=t.getString(i,s):"integer"==n?o=t.getInteger(i,s).toString():"real"==n?o=t.getReal(i,s).toString():"boolean"==n&&(o=t.getBoolean(i,s)?"true":"false"),""!=o&&(e.push("> <"+t.colName(s)+">"),e.push(o),e.push(""))}e.push("$$$$")}return e.join("\n")}getResult(){return this.lines.join("\n")}}function pe(t){let e=null;for(let n=0;n<t.length;n++){let i=t.charAt(n),s="\n\t\\,=".includes(i),o=i.charCodeAt(0)<32;null==e&&(s||o)&&(e=t.substring(0,n)),s?e+="\n"==i?"\\n":"\t"==i?"\\t":"\\"+i:o||null!=e&&(e+=i)}return null!=e?e:t}function he(t){let e="",n=[];for(let i of t)i.includes("\n")?n.push(i):e+=","+pe(i);e+="\n";for(let t of n){let n=t.trimEnd().split("\n");for(let t=0;t<n.length;t++)e+=`${0==t?".":":"}${n[t]}\n`}return e}function ce(t,e,n,i){let s=e,o=t.length;if(e>=o){if(i)throw new Error("Molecule missing line fragment");return null}let r=!1;for(;s<o;){let e=t.charAt(s);if("\\"==e){if(s==o-1)throw new Error("Escape character \\ at end of line");r=!0,s+=2}else{if(e==n)break;s++}}if(!r)return{str:t.substring(e,s),pos:s};var a="";for(let n=e;n<s;n++){let e=t.charAt(n);"\\"==e?(e=t.charAt(++n),a+="n"==e?"\n":"t"==e?"\t":e):a+=e}return{str:a,pos:s}}class me{static readUnknown(t){if(t.startsWith('"'))try{let e=JSON.parse(t);if(e&&"string"==typeof e){try{let t=me.readNative(e);if(t)return t}catch(t){}try{let t=me.readMDLMOL(e);if(t)return t}catch(t){}}}catch(t){}let e=me.readNative(t);if(e)return e;try{e=me.readMDLMOL(t)}catch(t){}return e}static readNative(t){if(t.startsWith("SketchEl!"))return this.readNativeLegacy(t);let e=new ge;e.keepTransient=!0;let n=t.split(/\r?\n/),i=n[0].match(/^Elements\!\((\d+),(\d+)\)$/);if(!i)return null;let s=parseInt(i[1]),o=parseInt(i[2]);if(!(s>=0))throw new Error(`Invalid atom count: ${i[1]}`);if(!(o>=0))throw new Error(`Invalid bond count: ${i[2]}`);const r="Molecule atom content ends prematurely",a="Molecule unexpected end tag",l=t=>{let e=parseInt(t);if(Number.isNaN(e))throw new Error(`Malformed integer: ${t}`);return e},d=t=>{let e=parseFloat(t);if(Number.isNaN(e))throw new Error(`Malformed float: ${t}`);return e},p=(t,n)=>{if(!n)return;let i=n.charAt(0);"z"==i?e.setAtomZ(t,d(n.substring(1))):"c"==i?e.setAtomCharge(t,l(n.substring(1))):"u"==i?e.setAtomUnpaired(t,l(n.substring(1))):"h"==i?e.setAtomHExplicit(t,l(n.substring(1))):"i"==i?e.setAtomIsotope(t,l(n.substring(1))):"m"==i?e.setAtomMapNum(t,l(n.substring(1))):"y"==i?e.appendAtomTransient(t,n):e.appendAtomExtra(t,n)},h=(t,n)=>{if(!n)return;let i=n.charAt(0);"i"==i?e.setBondType(t,ge.BONDTYPE_INCLINED):"d"==i?e.setBondType(t,ge.BONDTYPE_DECLINED):"u"==i?e.setBondType(t,ge.BONDTYPE_UNKNOWN):"y"==i?e.appendBondTransient(t,n):e.appendBondExtra(t,n)};let c=1;for(let t=1;t<=s;t++){if(!n[c])throw new Error(r);let i=ce(n[c],0,"=",!0),l=ce(n[c],i.pos+1,",",!0),h=ce(n[c],l.pos+1,",",!0),u=d(l.str),f=d(h.str);e.addAtom(i.str,u,f);let g=h.pos+1;for(;null!=(k=ce(n[c],g,",",!1));)p(t,k.str),g=k.pos+1;for(c++;;){if(!n[c])throw new Error(r);if("!End"==n[c]){if(t==s&&0==o)break;throw new Error(a)}if(!n[c].startsWith("."))break;for(var m=n[c].substring(1);;){if(c++,!n[c])throw new Error(r);if(!n[c].startsWith(":"))break;m+="\n"+n[c].substring(1)}p(t,m)}}for(let t=1;t<=o;t++){if(!n[c])throw new Error(r);var u=ce(n[c],0,"-",!0),f=ce(n[c],u.pos+1,"=",!0),g=ce(n[c],f.pos+1,",",!0);let i=l(u.str),d=l(f.str),p=l(g.str);if(i<1||i>s||d<1||d>s||p<0||p>4)throw new Error("Invalid bond specification");e.addBond(i,d,p);let m=g.pos+1;for(;;){var k;if(null==(k=ce(n[c],m,",",!1)))break;h(t,k.str),m=k.pos+1}for(c++;;){if(!n[c])throw new Error(r);if("!End"==n[c]){if(t==o)break;throw new Error(a)}if(!n[c].startsWith("."))break;let e=n[c].substring(1);for(;;){if(c++,!n[c])throw new Error(r);if(!n[c].startsWith(":"))break;e+="\n"+n[c].substring(1)}h(t,e)}}if("!End"!=n[c])throw new Error("Molecule end tag missing");return e.keepTransient=!1,e}static readNativeLegacy(t){let e=new ge;e.keepTransient=!0;let n=t.split(/\r?\n/);if(n.length<2)return null;if(!n[0].startsWith("SketchEl!")&&n.length>=4&&n[3].indexOf("V2000")>=0){let e=t.indexOf("SketchEl!");if(e<0)return null;n=t.substring(e).split(/r?\n/)}let i=n[0].match(/^SketchEl\!\((\d+)\,(\d+)\)/);if(!i)return null;let s=parseInt(i[1]),o=parseInt(i[2]);if(n.length<2+s+o)return null;if(!n[1+s+o].match(/^!End/))return null;for(let t=0;t<s;t++){let i=n[1+t].split(/[=,;]/),s=e.addAtom(me.skUnescape(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseInt(i[3]),parseInt(i[4])),o=[],r=[];for(let t=5;t<i.length;t++)i[t].charAt(0),"i"==i[t].charAt(0)||("e"==i[t].charAt(0)?e.setAtomHExplicit(s,parseInt(i[t].substring(1))):"m"==i[t].charAt(0)?e.setAtomIsotope(s,parseInt(i[t].substring(1))):"n"==i[t].charAt(0)?e.setAtomMapNum(s,parseInt(i[t].substring(1))):"x"==i[t].charAt(0)?o.push(me.skUnescape(i[t])):"y"==i[t].charAt(0)?r.push(me.skUnescape(i[t])):"z"==i[t].charAt(0)?(e.setAtomZ(s,parseFloat(i[t].substring(1))),e.setIs3D(!0)):o.push(me.skUnescape(i[t])));e.setAtomExtra(s,o),e.setAtomTransient(s,r)}for(let t=0;t<o;t++){let i=n[1+s+t].split(/[=,]/),o=i[0].split("-"),r=parseInt(o[0].trim()),a=parseInt(o[1].trim());if(r==a)continue;let l=e.addBond(r,a,parseInt(i[1]),parseInt(i[2])),d=new Array,p=new Array;for(let t=3;t<i.length;t++)i[t].charAt(0),"x"==i[t].charAt(0)?d.push(me.skUnescape(i[t])):"y"==i[t].charAt(0)?p.push(me.skUnescape(i[t])):d.push(me.skUnescape(i[t]));e.setBondExtra(l,d),e.setBondTransient(l,p)}return e.keepTransient=!1,e}static writeNative(t){if(!this.formatV2Elements)return this.writeNativeLegacy(t);let e=[`Elements!(${t.numAtoms},${t.numBonds})\n`];const n=t=>(1e-4*Math.round(1e4*t)).toFixed(4);for(let i=1;i<=t.numAtoms;i++){let s=t.atomElement(i),o=n(t.atomX(i)),r=n(t.atomY(i));e.push(`${pe(s)}=${o},${r}`);let a=[];t.is3D()&&a.push(`z${n(t.atomZ(i))}`);let l=t.atomCharge(i),d=t.atomUnpaired(i),p=t.atomHExplicit(i),h=t.atomIsotope(i),c=t.atomMapNum(i);0!=l&&a.push(`c${l}`),0!=d&&a.push(`u${d}`),p!=ge.HEXPLICIT_UNKNOWN&&a.push(`h${p}`),h!=ge.ISOTOPE_NATURAL&&a.push(`i${h}`),c>0&&a.push(`m${c}`),a.push(...t.atomExtra(i)),a.push(...t.atomTransient(i)),e.push(he(a))}for(let n=1;n<=t.numBonds;n++){let i=t.bondFrom(n),s=t.bondTo(n),o=t.bondOrder(n);e.push(`${i}-${s}=${o}`);let r=[],a=t.bondType(n);a==ge.BONDTYPE_INCLINED?r.push("i"):a==ge.BONDTYPE_DECLINED?r.push("d"):a==ge.BONDTYPE_UNKNOWN&&r.push("u"),r.push(...t.bondExtra(n)),r.push(...t.bondTransient(n)),e.push(he(r))}return e.push("!End\n"),e.join("")}static writeNativeLegacy(t){let e="SketchEl!("+t.numAtoms+","+t.numBonds+")\n";for(let n=1;n<=t.numAtoms;n++){let i=t.atomElement(n),s=t.atomX(n),o=t.atomY(n),r=t.atomCharge(n),a=t.atomUnpaired(n),l=t.atomHExplicit(n)!=ge.HEXPLICIT_UNKNOWN?"e"+t.atomHExplicit(n):"i"+t.atomHydrogens(n);e+=me.skEscape(i)+"="+s.toFixed(4)+","+o.toFixed(4)+";"+r+","+a+","+l,t.is3D()&&(e+=",z"+t.atomZ(n)),t.atomIsotope(n)!=ge.ISOTOPE_NATURAL&&(e+=",m"+t.atomIsotope(n)),t.atomMapNum(n)>0&&(e+=",n"+t.atomMapNum(n)),e+=me.skEncodeExtra(t.atomExtra(n)),e+=me.skEncodeExtra(t.atomTransient(n)),e+="\n"}for(let n=1;n<=t.numBonds;n++)e+=t.bondFrom(n)+"-"+t.bondTo(n)+"="+t.bondOrder(n)+","+t.bondType(n),e+=me.skEncodeExtra(t.bondExtra(n)),e+=me.skEncodeExtra(t.bondTransient(n)),e+="\n";return e+="!End\n",e}static readMDLMOL(t){let e=new oe(t);return e.parseHeader=!0,e.parse(),e.mol}static writeMDLMOL(t){return new le(t).write()}static skUnescape(t){let e,n="";for(;e=t.match(/^(.*?)\\([0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])(.*)/);)n+=e[1]+String.fromCharCode(parseInt("0x"+e[2])),t=e[3];return n+t}static skEscape(t){let e="";for(let n=0;n<t.length;n++){let i=t.charAt(n),s=t.charCodeAt(n);if(s<=32||s>127||"\\"==i||","==i||";"==i||"="==i){let t=(65535&s).toString(16).toUpperCase();e+="\\";for(let n=4-t.length;n>0;n--)e+="0";e+=t}else e+=i}return e}static skEncodeExtra(t){let e="";for(let n=0;n<t.length;n++)e+=","+me.skEscape(t[n]);return e}}me.formatV2Elements=!1;class ue{}class fe{}class ge{constructor(){this.atoms=[],this.bonds=[],this.hasZCoord=!1,this.keepTransient=!1,this.hasTransient=!1,this.graph=null,this.graphBond=null,this.ringID=null,this.compID=null,this.ring3=null,this.ring4=null,this.ring5=null,this.ring6=null,this.ring7=null}clone(){let t=new ge;return t.atoms=yt(this.atoms),t.bonds=yt(this.bonds),t.hasZCoord=this.hasZCoord,t.keepTransient=this.keepTransient,t.hasTransient=this.hasTransient,t.graph=this.graph,t.graphBond=this.graphBond,t.ringID=this.ringID,t.compID=this.compID,t.ring3=this.ring3,t.ring4=this.ring4,t.ring5=this.ring5,t.ring6=this.ring6,t.ring7=this.ring7,t}static fromString(t){return me.readNative(t)}toString(){return me.writeNative(this)}append(t){let e=this.atoms.length;for(let e=1;e<=t.numAtoms;e++){let n=this.addAtom(t.atomElement(e),t.atomX(e),t.atomY(e),t.atomCharge(e),t.atomUnpaired(e));this.setAtomIsotope(n,t.atomIsotope(e)),this.setAtomHExplicit(n,t.atomHExplicit(e)),this.setAtomMapNum(n,t.atomMapNum(e)),this.setAtomExtra(n,t.atomExtra(e)),this.setAtomTransient(n,t.atomTransient(e))}for(let n=1;n<=t.numBonds;n++){let i=this.addBond(t.bondFrom(n)+e,t.bondTo(n)+e,t.bondOrder(n),t.bondType(n));this.setBondExtra(i,t.bondExtra(n)),this.setBondTransient(i,t.bondTransient(n))}this.trashTransient()}get numAtoms(){return this.atoms.length}getAtom(t){if(t<1||t>this.atoms.length)throw new Error(`Molecule.getAtom: index ${t} out of range (#atoms=${this.atoms.length})`);return this.atoms[t-1]}atomElement(t){return this.getAtom(t).element}atomX(t){return this.getAtom(t).x}atomY(t){return this.getAtom(t).y}atomCharge(t){return this.getAtom(t).charge}atomUnpaired(t){return this.getAtom(t).unpaired}atomIsotope(t){return this.getAtom(t).isotope}atomHExplicit(t){return this.getAtom(t).hExplicit}atomMapNum(t){return this.getAtom(t).mapNum}atomExtra(t){return this.getAtom(t).extra.slice(0)}atomTransient(t){return this.getAtom(t).transient.slice(0)}get numBonds(){return this.bonds.length}getBond(t){if(t<1||t>this.bonds.length)throw new Error(`Molecule.getBond: index ${t} out of range (#bonds=${this.bonds.length})`);return this.bonds[t-1]}bondFrom(t){return this.getBond(t).from}bondTo(t){return this.getBond(t).to}bondOrder(t){return this.getBond(t).order}bondType(t){return this.getBond(t).type}bondExtra(t){return this.getBond(t).extra.slice(0)}bondTransient(t){return this.getBond(t).transient.slice(0)}bondFromTo(t){let e=this.getBond(t);return[e.from,e.to]}addAtom(t,e,n,i=0,s=0){let o=new ue;return o.element=t,o.x=e,o.y=n,o.charge=i,o.unpaired=s,o.isotope=ge.ISOTOPE_NATURAL,o.hExplicit=ge.HEXPLICIT_UNKNOWN,o.mapNum=0,o.extra=[],o.transient=[],this.atoms.push(o),this.trashTransient(),this.trashGraph(),this.atoms.length}setAtomElement(t,e){this.getAtom(t).element=e,this.trashTransient()}setAtomPos(t,e,n,i){let s=this.getAtom(t);s.x=e,s.y=n,s.z=null==i?0:i,this.trashTransient()}setAtomX(t,e){this.getAtom(t).x=e,this.trashTransient()}setAtomY(t,e){this.getAtom(t).y=e,this.trashTransient()}setAtomCharge(t,e){this.getAtom(t).charge=e,this.trashTransient()}setAtomUnpaired(t,e){this.getAtom(t).unpaired=e,this.trashTransient()}setAtomIsotope(t,e){this.getAtom(t).isotope=e,this.trashTransient()}setAtomHExplicit(t,e){this.getAtom(t).hExplicit=e,this.trashTransient()}setAtomMapNum(t,e){this.getAtom(t).mapNum=e,this.trashTransient()}setAtomExtra(t,e){this.getAtom(t).extra=e.slice(0)}setAtomTransient(t,e){this.getAtom(t).transient=e.slice(0),e.length>0&&(this.hasTransient=!0)}swapAtoms(t,e){let n=this.atoms[t-1];this.atoms[t-1]=this.atoms[e-1],this.atoms[e-1]=n;for(let n=0;n<this.bonds.length;n++){let i=this.bonds[n];i.from==e?i.from=t:i.from==t&&(i.from=e),i.to==e?i.to=t:i.to==t&&(i.to=e)}this.trashGraph()}addBond(t,e,n,i=ge.BONDTYPE_NORMAL){let s=new fe;return s.from=t,s.to=e,s.order=n,s.type=i,s.extra=[],s.transient=[],this.bonds.push(s),this.trashTransient(),this.trashGraph(),this.bonds.length}setBondFrom(t,e){this.getBond(t).from=e,this.trashTransient(),this.trashGraph()}setBondTo(t,e){this.getBond(t).to=e,this.trashTransient(),this.trashGraph()}setBondFromTo(t,e,n){this.getBond(t).from=e,this.getBond(t).to=n,this.trashTransient(),this.trashGraph()}setBondOrder(t,e){this.getBond(t).order=e,this.trashTransient()}setBondType(t,e){this.getBond(t).type=e,this.trashTransient()}setBondExtra(t,e){this.getBond(t).extra=e.slice(0)}setBondTransient(t,e){this.getBond(t).transient=e.slice(0),e.length>0&&(this.hasTransient=!0)}deleteAtomAndBonds(t){for(let e=this.numBonds;e>=1;e--)this.bondFrom(e)==t||this.bondTo(e)==t?this.deleteBond(e):(this.bondFrom(e)>t&&this.setBondFrom(e,this.bondFrom(e)-1),this.bondTo(e)>t&&this.setBondTo(e,this.bondTo(e)-1));this.atoms.splice(t-1,1),this.trashTransient(),this.trashGraph()}deleteBond(t){this.bonds.splice(t-1,1),this.trashTransient(),this.trashGraph()}atomHydrogens(t){let e=this.atomHExplicit(t);if(e!=ge.HEXPLICIT_UNKNOWN)return e;for(let n=0;n<ge.HYVALENCE_EL.length;n++)if(ge.HYVALENCE_EL[n]==this.atomElement(t)){e=ge.HYVALENCE_VAL[n];break}if(e==ge.HEXPLICIT_UNKNOWN)return 0;let n=this.atomCharge(t);"C"==this.atomElement(t)&&(n=-Math.abs(n)),e+=n-this.atomUnpaired(t);let i=this.atomAdjBonds(t);for(let t=0;t<i.length;t++)e-=this.bondOrder(i[t]);return e<0?0:e}findBond(t,e){for(let n=1;n<=this.numBonds;n++){let i=this.bondFrom(n),s=this.bondTo(n);if(t==i&&e==s||t==s&&e==i)return n}return 0}bondOther(t,e){let n=this.bondFrom(t),i=this.bondTo(t);return n==e?i:i==e?n:0}atomExplicit(t){let e=this.atoms[t-1];return e.isotope!=ge.ISOTOPE_NATURAL||"C"!=e.element||0!=e.charge||0!=e.unpaired||0==this.atomAdjCount(t)}atomRingBlock(t){return null==this.graph&&this.buildGraph(),null==this.ringID&&this.buildRingID(),this.ringID[t-1]}bondInRing(t){let e=this.atomRingBlock(this.bondFrom(t)),n=this.atomRingBlock(this.bondTo(t));return e>0&&e==n}atomConnComp(t){return null==this.graph&&this.buildGraph(),null==this.compID&&this.buildConnComp(),this.compID[t-1]}atomAdjCount(t){return this.buildGraph(),this.graph[t-1].length}atomAdjList(t){this.buildGraph();let e=this.graph[t-1].slice(0);for(let t=e.length-1;t>=0;t--)e[t]++;return e}atomAdjBonds(t){return this.buildGraph(),this.graphBond[t-1].slice(0)}findRingsOfSize(t){let e=null;if(3==t&&null!=this.ring3&&(e=this.ring3),4==t&&null!=this.ring4&&(e=this.ring4),5==t&&null!=this.ring5&&(e=this.ring5),6==t&&null!=this.ring6&&(e=this.ring6),7==t&&null!=this.ring7&&(e=this.ring7),null==e){null==this.graph&&this.buildGraph(),null==this.ringID&&this.buildRingID(),e=[];for(let i=1;i<=this.atoms.length;i++)if(this.ringID[i-1]>0){let s=n.numberArray(0,t);s[0]=i,this.recursiveRingFind(s,1,t,this.ringID[i-1],e)}3==t&&(this.ring3=e),4==t&&(this.ring4=e),5==t&&(this.ring5=e),6==t&&(this.ring6=e),7==t&&(this.ring7=e)}let i=[];for(let t=0;t<e.length;t++)i.push(e[t].slice(0));return i}boundary(){if(0==this.atoms.length)return m.zero();let t=this.atoms[0].x,e=t,n=this.atoms[0].y,i=n;for(let s=1;s<this.atoms.length;s++)t=Math.min(t,this.atoms[s].x),n=Math.min(n,this.atoms[s].y),e=Math.max(e,this.atoms[s].x),i=Math.max(i,this.atoms[s].y);return new m(t,n,e-t,i-n)}atomicNumber(t){return ge.elementAtomicNumber(this.atomElement(t))}static elementAtomicNumber(t){return Math.max(0,Bt.ELEMENTS.indexOf(t))}is3D(){return this.hasZCoord}setIs3D(t){this.hasZCoord=t}atomZ(t){return this.getAtom(t).z}setAtomZ(t,e){this.getAtom(t).z=e}compareTo(t){if(null==t||0==t.numAtoms)return 0==this.numAtoms?0:1;if(this.numAtoms<t.numAtoms)return-1;if(this.numAtoms>t.numAtoms)return 1;if(this.numBonds<t.numBonds)return-1;if(this.numBonds>t.numBonds)return 1;for(let e=1;e<=this.numAtoms;e++){if(this.atomElement(e)<t.atomElement(e))return-1;if(this.atomElement(e)>t.atomElement(e))return 1;if(this.atomX(e)<t.atomX(e))return-1;if(this.atomX(e)>t.atomX(e))return 1;if(this.atomY(e)<t.atomY(e))return-1;if(this.atomY(e)>t.atomY(e))return 1;if(this.atomCharge(e)<t.atomCharge(e))return-1;if(this.atomCharge(e)>t.atomCharge(e))return 1;if(this.atomUnpaired(e)<t.atomUnpaired(e))return-1;if(this.atomUnpaired(e)>t.atomUnpaired(e))return 1;if(this.atomHExplicit(e)<t.atomHExplicit(e))return-1;if(this.atomHExplicit(e)>t.atomHExplicit(e))return 1;if(this.atomIsotope(e)<t.atomIsotope(e))return-1;if(this.atomIsotope(e)>t.atomIsotope(e))return 1;if(this.atomMapNum(e)<t.atomMapNum(e))return-1;if(this.atomMapNum(e)>t.atomMapNum(e))return 1;let n=this.atomExtra(e).map((t=>t.trimEnd())),i=t.atomExtra(e).map((t=>t.trimEnd()));if(n.length<i.length)return-1;if(n.length>i.length)return 1;for(let t=0;t<n.length;t++){if(n[t]<i[t])return-1;if(n[t]>i[t])return 1}if(n=this.atomTransient(e).map((t=>t.trimEnd())),i=t.atomTransient(e).map((t=>t.trimEnd())),n.length<i.length)return-1;if(n.length>i.length)return 1;for(let t=0;t<n.length;t++){if(n[t]<i[t])return-1;if(n[t]>i[t])return 1}}for(let e=1;e<=this.numBonds;e++){if(this.bondFrom(e)<t.bondFrom(e))return-1;if(this.bondFrom(e)>t.bondFrom(e))return 1;if(this.bondTo(e)<t.bondTo(e))return-1;if(this.bondTo(e)>t.bondTo(e))return 1;if(this.bondOrder(e)<t.bondOrder(e))return-1;if(this.bondOrder(e)>t.bondOrder(e))return 1;if(this.bondType(e)<t.bondType(e))return-1;if(this.bondType(e)>t.bondType(e))return 1;let n=this.bondExtra(e),i=t.bondExtra(e);if(n.length<i.length)return-1;if(n.length>i.length)return 1;for(let t=0;t<n.length;t++){if(n[t]<i[t])return-1;if(n[t]>i[t])return 1}if(n=this.bondTransient(e),i=t.bondTransient(e),n.length<i.length)return-1;if(n.length>i.length)return 1;for(let t=0;t<n.length;t++){if(n[t]<i[t])return-1;if(n[t]>i[t])return 1}}return 0}trashTransient(){if(!this.keepTransient&&this.hasTransient){for(let t of this.atoms)t.transient=[];for(let t of this.bonds)t.transient=[];this.hasTransient=!1}}appendAtomExtra(t,e){this.getAtom(t).extra.push(e)}appendAtomTransient(t,e){this.getAtom(t).transient.push(e)}appendBondExtra(t,e){this.getBond(t).extra.push(e)}appendBondTransient(t,e){this.getBond(t).transient.push(e)}getAtomCloned(t){return yt(this.getAtom(t))}getBondCloned(t){return yt(this.getBond(t))}setAtom(t,e){if(!e)return;let i=this.getAtom(t);e.element!=i.element&&this.setAtomElement(t,e.element),e.x!=i.x&&this.setAtomX(t,e.x),e.y!=i.y&&this.setAtomY(t,e.y),e.z!=i.z&&this.setAtomZ(t,e.z),e.charge!=i.charge&&this.setAtomCharge(t,e.charge),e.unpaired!=i.unpaired&&this.setAtomUnpaired(t,e.unpaired),e.isotope!=i.isotope&&this.setAtomIsotope(t,e.isotope),e.hExplicit!=i.hExplicit&&this.setAtomHExplicit(t,e.hExplicit),e.mapNum!=i.mapNum&&this.setAtomMapNum(t,e.mapNum),n.equals(e.extra,i.extra)||this.setAtomExtra(t,e.extra),n.equals(e.transient,i.transient)||this.setAtomTransient(t,e.transient)}setBond(t,e){if(null==e)return;let i=this.getBond(t);e.from!=i.from&&this.setBondFrom(t,e.from),e.to!=i.to&&this.setBondTo(t,e.to),e.order!=i.order&&this.setBondOrder(t,e.order),e.type!=i.type&&this.setBondType(t,e.type),n.equals(e.extra,i.extra)||this.setBondExtra(t,e.extra),n.equals(e.transient,i.transient)||this.setBondTransient(t,e.transient)}modifyAtoms(t){for(let n=1;n<=this.numAtoms;n++){var e=t(n,this.getAtomCloned(n));null!=e&&this.setAtom(n,e)}}modifyAtomsIndices(t,e){for(let i of t){var n=e(i,this.getAtomCloned(i));null!=n&&this.setAtom(i,n)}}modifyBonds(t){for(let n=1;n<=this.numBonds;n++){var e=t(n,this.getBondCloned(n));null!=e&&this.setBond(n,e)}}modifyBondsIndices(t,e){for(let i of t){var n=e(i,this.getBondCloned(i));null!=n&&this.setBond(i,n)}}findAtomMatch(t){for(let e=1;e<=this.numAtoms;e++)if(t(this.getAtom(e)))return e;return 0}findBondMatch(t){for(let e=1;e<=this.numBonds;e++)if(t(this.getBond(e)))return e;return 0}findAllAtoms(t){let e=[];for(let n=1;n<=this.numAtoms;n++)t(this.getAtom(n))&&e.push(n);return e}findAllBonds(t){let e=[];for(let n=1;n<=this.numBonds;n++)t(this.getBond(n))&&e.push(n);return e}mapAtoms(t){let e=new Array(this.numAtoms);for(let n=1;n<=this.numAtoms;n++)e[n-1]=t(this.getAtom(n));return e}mapBonds(t){let e=new Array(this.numBonds);for(let n=1;n<=this.numBonds;n++)e[n-1]=t(this.getBond(n));return e}mapAtomsIndices(t,e){let n=new Array(t.length),i=0;for(let s of t)n[i++]=e(this.getAtom(s));return n}mapBondsIndices(t,e){let n=new Array(t.length),i=0;for(let s of t)n[i++]=e(this.getBond(s));return n}trashGraph(){this.graph=null,this.graphBond=null,this.ringID=null,this.compID=null,this.ring3=null,this.ring4=null,this.ring5=null,this.ring6=null,this.ring7=null}buildGraph(){if(null!=this.graph&&null!=this.graphBond)return;let t=[],e=[],n=this.numAtoms,i=this.numBonds;for(let i=0;i<n;i++)t.push([]),e.push([]);for(let n=1;n<=i;n++){let i=this.getBond(n);t[i.from-1].push(i.to-1),t[i.to-1].push(i.from-1),e[i.from-1].push(n),e[i.to-1].push(n)}this.graph=t,this.graphBond=e}buildConnComp(){const t=this.atoms.length;this.compID=n.numberArray(0,t);for(let e=0;e<t;e++)this.compID[e]=0;let e=1;for(this.compID[0]=e;;){let n=!1;for(let i=0;i<t;i++)if(this.compID[i]==e)for(let t=0;t<this.graph[i].length;t++)0==this.compID[this.graph[i][t]]&&(this.compID[this.graph[i][t]]=e,n=!0);if(!n){for(let i=0;i<t;i++)if(0==this.compID[i]){this.compID[i]=++e,n=!0;break}if(!n)break}}}buildRingID(){const t=this.atoms.length;if(this.ringID=n.numberArray(0,t),0==t)return;let e=n.booleanArray(!1,t);for(let n=0;n<t;n++)this.ringID[n]=0,e[n]=!1;let i=n.numberArray(0,t+1),s=0,o=0;for(;;){let n,r;if(0==s)for(n=-1,r=0;e[r];r++);else{n=i[s-1],r=-1;for(let t=0;t<this.graph[n].length;t++)if(!e[this.graph[n][t]]){r=this.graph[n][t];break}}if(r>=0&&s>=2){let o=i[s-1];for(let a=0;a<this.graph[r].length;a++){let l=this.graph[r][a];if(l!=o&&e[l]){i[s]=r;for(let e=s;e==s||i[e+1]!=l;e--){let s=this.ringID[i[e]];if(0==s)this.ringID[i[e]]=n;else if(s!=n)for(let e=0;e<t;e++)this.ringID[e]==s&&(this.ringID[e]=n)}}}}if(r>=0?(e[r]=!0,i[s++]=r,o++):s--,o==t)break}let r=0;for(let e=0;e<t;e++)if(this.ringID[e]>0){r--;for(let n=t-1;n>=e;n--)this.ringID[n]==this.ringID[e]&&(this.ringID[n]=r)}for(let e=0;e<t;e++)this.ringID[e]=-this.ringID[e]}recursiveRingFind(t,e,i,s,o){const{graph:r}=this;if(e<i){let n=t[e-1];for(let a=0;a<r[n-1].length;a++){let l=r[n-1][a]+1;if(this.ringID[l-1]!=s)continue;let d=!1;for(let n=0;n<e;n++)if(t[n]==l){d=!0;break}if(!d){let n=t.slice(0);n[e]=l,this.recursiveRingFind(n,e+1,i,s,o)}}return}let a=t[e-1],l=!1;for(let e=0;e<r[a-1].length;e++)if(r[a-1][e]+1==t[0]){l=!0;break}if(!l)return;for(let e=0;e<t.length;e++){let n=0,i=t[e]-1;for(let e=0;e<r[i].length;e++)t.indexOf(r[i][e]+1)>=0&&n++;if(2!=n)return}let d=0;for(let n=1;n<e;n++)t[n]<t[d]&&(d=n);let p=(d+1)%e,h=t[(d-1+e)%e]<t[p];if(0!=d||h){let i=n.numberArray(0,e);for(let n=0;n<e;n++)i[n]=t[(d+(h?e-n:n))%e];t=i}for(let n=0;n<o.length;n++){let i=o[n],s=!0;for(let n=0;n<e;n++)if(i[n]!=t[n]){s=!1;break}if(s)return}o.push(t)}}var ke;ge.IDEALBOND=1.5,ge.HEXPLICIT_UNKNOWN=-1,ge.ISOTOPE_NATURAL=0,ge.BONDTYPE_NORMAL=0,ge.BONDTYPE_INCLINED=1,ge.BONDTYPE_DECLINED=2,ge.BONDTYPE_UNKNOWN=3,ge.HYVALENCE_EL=["C","N","O","S","P"],ge.HYVALENCE_VAL=[4,3,2,2,3],ge.PREFIX_EXTRA="x",ge.PREFIX_TRANSIENT="y",function(t){t.Molecule="molecule",t.String="string",t.Real="real",t.Integer="integer",t.Boolean="boolean",t.Extend="extend"}(ke||(ke={}));class ye{constructor(t){t||(t={}),t.title||(t.title=""),t.description||(t.description=""),null==t.numCols&&(t.numCols=n.len(t.colData)),null==t.numRows&&(t.numRows=n.len(t.rowData)),null==t.numExtens&&(t.numExtens=n.len(t.extData)),null==t.colData&&(t.colData=[]),null==t.rowData&&(t.rowData=[]),null==t.extData&&(t.extData=[]),this.data=t}clone(t=!0){let{numCols:e,numRows:n,colData:i,rowData:s}=this.data,o={title:this.data.title,description:this.data.description,numCols:e,numRows:t?n:0,numExtens:this.data.numExtens,colData:yt(i),rowData:t?new Array(n):[],extData:yt(this.data.extData)};if(t)for(let t=0;t<n;t++){let n=s[t],r=new Array(e);for(let t=0;t<e;t++)null!=n[t]&&"molecule"==i[t].type&&n[t]instanceof ge?r[t]=n[t].clone():r[t]=n[t];o.rowData[t]=r}return new ye(o)}cloneMask(t,e=null,i=!0){let{numCols:s,numRows:o,colData:r,rowData:a}=this.data,l={title:this.data.title,description:this.data.description,numCols:n.maskCount(t),numRows:e?n.maskCount(e):0,numExtens:i?this.data.numExtens:0,colData:yt(n.maskGet(r,t)),rowData:[],extData:i?yt(this.data.extData):[]};if(e)for(let i=0;i<o;i++)if(e[i]){let e=a[i],s=n.maskGet(e,t);l.rowData.push(s)}const{colData:d,rowData:p}=l;for(let t=d.length-1;t>=0;t--)if("molecule"==d[t].type)for(let e=p.length-1;e>=0;e--)null!=p[e][t]&&p[e][t]instanceof ge&&(p[e][t]=p[e][t].clone());return new ye(l)}getData(){return this.data}get numCols(){return this.data.numCols}get numRows(){return this.data.numRows}get title(){return this.data.title}set title(t){this.data.title=t}get description(){return this.data.description}set description(t){this.data.description=t}get numExtensions(){return this.data.numExtens}getExtName(t){return this.data.extData[t].name}getExtType(t){return this.data.extData[t].type}getExtData(t){return this.data.extData[t].data}setExtName(t,e){this.data.extData[t].name=e}setExtType(t,e){this.data.extData[t].type=e}setExtData(t,e){this.data.extData[t].data=e}appendExtension(t,e,n){return this.data.numExtens++,this.data.extData.push({name:t,type:e,data:n}),this.data.numExtens-1}insertExtension(t,e,n,i){this.data.numExtens++,this.data.extData.splice(t,0,{name:e,type:n,data:i})}deleteExtension(t){this.data.extData.splice(t,1),this.data.numExtens--}colName(t){return this.data.colData[t].name}colType(t){return this.data.colData[t].type}colDescr(t){return this.data.colData[t].descr}isNull(t,e){return"string"==typeof e&&(e=this.findColByName(e)),e<0?null:null==this.data.rowData[t][e]}notNull(t,e){return!this.isNull(t,e)}isBlank(t,e){if("string"==typeof e&&(e=this.findColByName(e)),this.isNull(t,e))return!0;let n=this.colType(e);return"molecule"==n?0==this.getMolecule(t,e).numAtoms:"string"==n?0==this.getString(t,e).length:"extend"==n&&0==this.getExtend(t,e).length}notBlank(t,e){return!this.isBlank(t,e)}getObject(t,e){return"string"==typeof e&&(e=this.findColByName(e)),this.data.rowData[t][e]}getMolecule(t,e){if("string"==typeof e&&(e=this.findColByName(e)),e<0)return null;let n=this.data.rowData[t][e];return null==n?null:("string"==typeof n&&(n=ge.fromString(n),this.data.rowData[t][e]=n),n)}getMoleculeClone(t,e){let n=this.getMolecule(t,e);return null==n?null:n.clone()}getMoleculeBlank(t,e){return this.getMolecule(t,e)||new ge}getString(t,e){if("string"==typeof e&&(e=this.findColByName(e)),e<0)return null;let n=this.data.rowData[t][e];return null==n?"":n}getInteger(t,e){return"string"==typeof e&&(e=this.findColByName(e)),e<0?null:this.data.rowData[t][e]}getReal(t,e){return"string"==typeof e&&(e=this.findColByName(e)),e<0?null:this.data.rowData[t][e]}getBoolean(t,e){return"string"==typeof e&&(e=this.findColByName(e)),e<0?null:this.data.rowData[t][e]}getExtend(t,e){return"string"==typeof e&&(e=this.findColByName(e)),e<0?null:this.data.rowData[t][e]}setToNull(t,e){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=null)}setObject(t,e,n){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=n)}setMolecule(t,e,n){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=n?n.clone():null)}setString(t,e,n){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=n)}setInteger(t,e,n){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=n)}setReal(t,e,n){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=n)}setBoolean(t,e,n){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=n)}setExtend(t,e,n){"string"==typeof e&&(e=this.findColByName(e)),e<0||(this.data.rowData[t][e]=n)}isEqualMolecule(t,e,n){return"string"==typeof e&&(e=this.findColByName(e)),this.isNull(t,e)==(null==n)&&(null==n||0==this.getMolecule(t,e).compareTo(n))}isEqualString(t,e,n){return"string"==typeof e&&(e=this.findColByName(e)),this.isNull(t,e)==(null==n||""==n)&&(null==n||""==n||this.getString(t,e)==n)}isEqualInteger(t,e,n){return"string"==typeof e&&(e=this.findColByName(e)),this.isNull(t,e)==(null==n)&&(null==n||this.getInteger(t,e)==n)}isEqualReal(t,e,n){return"string"==typeof e&&(e=this.findColByName(e)),this.isNull(t,e)==(null==n)&&(null==n||this.getReal(t,e)==n)}isEqualBoolean(t,e,n){return"string"==typeof e&&(e=this.findColByName(e)),this.isNull(t,e)==(null==n)&&(null==n||this.getBoolean(t,e)==n)}appendColumn(t,e,n){this.data.numCols++,this.data.colData.push({name:t,type:e,descr:n});for(let t=0;t<this.data.numRows;t++)this.data.rowData[t].push(null);return this.data.numCols-1}insertColumn(t,e,n,i){this.data.numCols++,this.data.colData.splice(t,0,{name:e,type:n,descr:i});for(let e=0;e<this.data.numRows;e++)this.data.rowData[e].splice(t,0,null)}deleteColumn(t){this.data.numCols--,this.data.colData.splice(t,1);for(let e=0;e<this.data.numRows;e++)this.data.rowData[e].splice(t,1)}changeColumnName(t,e,n){this.data.colData[t].name=e,this.data.colData[t].descr=n}changeColumnType(t,e){let n=this.colType(t);if(n==e)return;let i="molecule"==n||"molecule"==e||"extend"==n||"extend"==e;for(let s=this.data.rowData.length-1;s>=0;s--){let o=this.data.rowData[s];if(null==o[t])continue;if(i){o[t]=null;continue}let r="";if("string"==n?r=o[t]:"integer"==n||"real"==n?r=o[t].toString():"boolean"==n&&(r=o[t]?"true":"false"),o[t]=null,"string"==e)o[t]=r;else if("integer"==e){let e=parseInt(r);o[t]=isFinite(e)?e:null}else if("real"==e){let e=parseFloat(r);o[t]=isFinite(e)?e:null}else"boolean"==e&&(o[t]="true"==r.toLowerCase())}this.data.colData[t].type=e}ensureColumn(t,e,n){for(let i=0;i<this.data.numCols;i++)if(this.data.colData[i].name==t)return this.data.colData[i].type!=e&&this.changeColumnType(i,e),this.data.colData[i].descr=n,i;return this.appendColumn(t,e,n)}reorderColumns(t){let e=!0;for(let n=0;n<t.length-1;n++)if(t[n]!=t[n+1]-1){e=!1;break}if(!e){this.data.colData=n.idxGet(this.data.colData,t);for(let e=0;e<this.data.numRows;e++)this.data.rowData[e]=n.idxGet(this.data.rowData[e],t)}}appendRow(){this.data.numRows++;let t=new Array;for(let e=0;e<this.data.numCols;e++)t.push(null);return this.data.rowData.push(t),this.data.numRows-1}appendRowFrom(t,e){return this.data.numRows++,this.data.rowData.push(t.data.rowData[e].slice(0)),this.data.numRows-1}insertRow(t){this.data.numRows++;let e=new Array;for(let t=0;t<this.data.numCols;t++)e.push(null);this.data.rowData.splice(t,0,e)}deleteRow(t){this.data.numRows--,this.data.rowData.splice(t,1)}deleteAllRows(){this.data.numRows=0,this.data.rowData=new Array}moveRowUp(t){let e=this.data.rowData[t];this.data.rowData[t]=this.data.rowData[t-1],this.data.rowData[t-1]=e}moveRowDown(t){let e=this.data.rowData[t];this.data.rowData[t]=this.data.rowData[t+1],this.data.rowData[t+1]=e}swapRows(t,e){n.swap(this.data.rowData,t,e)}exciseSingleRow(t){let e={title:this.data.title,description:this.data.description,numCols:this.data.numCols,numRows:1,numExtens:this.data.numExtens,colData:this.data.colData.slice(0),rowData:[this.data.rowData[t].slice(0)],extData:this.data.extData.slice(0)};return new ye(e)}colIsPrimitive(t){"string"==typeof t&&(t=this.findColByName(t));let e=this.data.colData[t].type;return"string"==e||"real"==e||"integer"==e||"boolean"==e}findColByName(t,e){for(let n=0;n<this.data.numCols;n++)if(this.data.colData[n].name==t&&(null==e||this.data.colData[n].type==e))return n;return-1}firstColOfType(t){for(let e=0;e<this.data.numCols;e++)if(this.data.colData[e].type==t)return e;return-1}copyCell(t,e,n,i,s){if(this.setToNull(t,e),n.isNull(i,s))return;let o=n.getObject(i,s);this.setObject(t,e,ye.convertType(o,n.colType(s),this.colType(e)))}static convertType(t,e,n){const i=e,s=n;if(null==t||i==s||"string"==typeof t&&""==t)return t;if("string"==s){if("integer"==i)return t.toString();if("real"==i)return t.toString();if("boolean"==i)return t?"true":"false"}else if("real"==s){if("string"==i)return v(t,null);if("integer"==i)return t;if("boolean"==i)return t?1:0}else if("integer"==s){if("string"==i)return C(t,null);if("real"==i)return Math.round(t);if("boolean"==i)return t?1:0}else if("boolean"==s){if("string"==i)return"true"==t.toLowerCase();if("integer"==i)return t>0;if("real"==i)return t>=.5}return null}toString(t,e){"string"==typeof e&&(e=this.findColByName(e));let n=this.data.rowData[t][e];return null==n?null:n.toString()}toInt(t,e){if(!this.colIsPrimitive(e))return null;let n=this.data.rowData[t][e];return null==n?null:parseInt(n)}toReal(t,e){if(!this.colIsPrimitive(e))return null;let n=this.data.rowData[t][e];return null==n?null:parseFloat(n)}}class we{constructor(t,e,n){this.code=t,this.allowModify=!0,this.subordinateCodes=[],this.ds=e||new ye,null!=n&&(this.allowModify=n)}isColumnReserved(t){return!1}areColumnsReserved(t){let e=n.booleanArray(!1,t.length);for(let n=0;n<t.length;n++)e[n]=this.isColumnReserved(t[n]);return e}rowFirstBlock(t){return!0}rowBlockCount(t){return 1}aspectUnion(t){}initiateNewRow(t){}columnEffectivelyBlank(t){return[]}numTextRenderings(t){return 0}produceTextRendering(t,e){return null}numGraphicRenderings(t){return 0}produceGraphicRendering(t,e,n){return null}numHeaderRenderings(){return 0}produceHeaderRendering(t){return null}}we.TEXT_PLAIN=0,we.TEXT_LINK=1,we.TEXT_HTML=2;let xe={};function Ce(t){let e=t.CODE,n=t.NAME;xe[e]={code:e,name:n,classdef:t}}class ve{constructor(t){this.ds=t}list(){let t=[],e=[],n=new Set;for(let t=0;t<this.ds.numExtensions;t++)n.add(this.ds.getExtType(t));for(let i in xe)n.has(i)?t.push(i):e.push(i);return[t,e]}instantiate(t){let e=xe[t];return e?new e.classdef(this.ds):null}enumerate(){let t=[];for(let e=0;e<this.ds.numExtensions;e++){let n=this.ds.getExtType(e);xe[n]&&t.push(this.instantiate(n))}return t}aspectName(t){let e=xe[t];return e?e.name:null}}class be{constructor(){this.prefixes={},this.targetName="",this.targetURI="",this.organismName="",this.organismURI="",this.targetTypeName="",this.targetTypeURI="",this.cellName="",this.cellURI="",this.assayTypeName="",this.assayTypeURI="",this.assayDescription="",this.sourceName="",this.sourceURI="",this.sourceVersion="",this.documentName="",this.documentURI="",this.measureTypeName="",this.measureTypeURI="",this.unitNames=[],this.unitURIs=[]}}class Ae extends we{static isAssayProvenance(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==Ae.CODE)return!0;return!1}constructor(t,e){super(Ae.CODE,t,e),this.setup()}getHeader(){for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==Ae.CODE)return this.parseMetaData(this.ds.getExtData(t));return null}setHeader(t){let e=this.formatMetaData(t);for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==Ae.CODE)return void this.ds.setExtData(t,e);this.ds.appendExtension(Ae.NAME,Ae.CODE,e)}getMolecule(t){let e=this.ds.findColByName(Ae.COLNAME_MOLECULE);return e<0?null:this.ds.getMolecule(t,e)}getName(t){let e=this.ds.findColByName(Ae.COLNAME_NAME);return e<0?null:this.ds.getString(t,e)}getValue(t){let e=this.ds.findColByName(Ae.COLNAME_VALUE);return e<0?null:this.ds.isNull(t,e)?Number.NaN:this.ds.getReal(t,e)}getError(t){let e=this.ds.findColByName(Ae.COLNAME_ERROR);if(e<0)return null;if(this.ds.isNull(t,e))return Number.NaN;let n=this.ds.getReal(t,e);return n<=0?Number.NaN:n}getUnits(t){let e=this.ds.findColByName(Ae.COLNAME_UNITS);return e<0?null:this.ds.getString(t,e)}getRelation(t){let e=this.ds.findColByName(Ae.COLNAME_RELATION);return e<0?null:this.ds.getString(t,e)}getSourceURI(t){let e=this.ds.findColByName(Ae.COLNAME_SOURCEURI);return e<0?null:this.ds.getString(t,e)}setMolecule(t,e){let n=this.ds.findColByName(Ae.COLNAME_MOLECULE);n>=0&&this.ds.setMolecule(t,n,e)}setName(t,e){let n=this.ds.findColByName(Ae.COLNAME_NAME);n>=0&&this.ds.setString(t,n,e)}setValue(t,e){let n=this.ds.findColByName(Ae.COLNAME_VALUE);n<0||(Number.isNaN(e)?this.ds.setToNull(t,n):this.ds.setReal(t,n,e))}setError(t,e){let n=this.ds.findColByName(Ae.COLNAME_ERROR);n<0||(Number.isNaN(e)?this.ds.setToNull(t,n):this.ds.setReal(t,n,e))}setUnits(t,e){let n=this.ds.findColByName(Ae.COLNAME_UNITS);n>=0&&this.ds.setString(t,n,e)}setRelation(t,e){let n=this.ds.findColByName(Ae.COLNAME_RELATION);n>=0&&this.ds.setString(t,n,e)}setSourceURI(t,e){let n=this.ds.findColByName(Ae.COLNAME_SOURCEURI);n>=0&&this.ds.setString(t,n,e)}setup(){this.parseAndCorrect()}parseAndCorrect(){let t=new be,e=!1;for(let n=0;n<this.ds.numExtensions;n++)if(this.ds.getExtType(n)==Ae.CODE){t=this.parseMetaData(this.ds.getExtData(n)),e=!0;break}if(this.allowModify&&(this.ds.ensureColumn(Ae.COLNAME_MOLECULE,"molecule","Molecular structure of compound being measured"),this.ds.ensureColumn(Ae.COLNAME_NAME,"string","Name of compound"),this.ds.ensureColumn(Ae.COLNAME_VALUE,"real","Measured value"),this.ds.ensureColumn(Ae.COLNAME_ERROR,"real","Experimental error of measurement"),this.ds.ensureColumn(Ae.COLNAME_UNITS,"string","Units of measurement"),this.ds.ensureColumn(Ae.COLNAME_RELATION,"string","Relation: exact, greater or less"),this.ds.ensureColumn(Ae.COLNAME_SOURCEURI,"string","Source identifier for activity measurement")),!e&&this.allowModify){let e=this.formatMetaData(t);this.ds.appendExtension(Ae.NAME,Ae.CODE,e)}}parseMetaData(t){let e=new be;for(let n of t.split(/\r?\n/)){let t=n.indexOf("=");t<0||(n.startsWith("pfx:")?e.prefixes[me.skUnescape(n.substring(4,t))]=me.skUnescape(n.substring(t+1)):n.startsWith("targetName=")?e.targetName=me.skUnescape(n.substring(t+1)):n.startsWith("targetURI=")?e.targetURI=me.skUnescape(n.substring(t+1)):n.startsWith("organismName=")?e.organismName=me.skUnescape(n.substring(t+1)):n.startsWith("organismURI=")?e.organismURI=me.skUnescape(n.substring(t+1)):n.startsWith("targetTypeName=")?e.targetTypeName=me.skUnescape(n.substring(t+1)):n.startsWith("targetTypeURI=")?e.targetTypeURI=me.skUnescape(n.substring(t+1)):n.startsWith("cellName=")?e.cellName=me.skUnescape(n.substring(t+1)):n.startsWith("cellURI=")?e.cellURI=me.skUnescape(n.substring(t+1)):n.startsWith("assayTypeName=")?e.assayTypeName=me.skUnescape(n.substring(t+1)):n.startsWith("assayTypeURI=")?e.assayTypeURI=me.skUnescape(n.substring(t+1)):n.startsWith("assayDescription=")?e.assayDescription=me.skUnescape(n.substring(t+1)):n.startsWith("sourceName=")?e.sourceName=me.skUnescape(n.substring(t+1)):n.startsWith("sourceURI=")?e.sourceURI=me.skUnescape(n.substring(t+1)):n.startsWith("sourceVersion=")?e.sourceVersion=me.skUnescape(n.substring(t+1)):n.startsWith("documentName=")?e.documentName=me.skUnescape(n.substring(t+1)):n.startsWith("documentURI=")?e.documentURI=me.skUnescape(n.substring(t+1)):n.startsWith("measureTypeName=")?e.measureTypeName=me.skUnescape(n.substring(t+1)):n.startsWith("measureTypeURI=")?e.measureTypeURI=me.skUnescape(n.substring(t+1)):n.startsWith("unit:")&&(e.unitNames.push(me.skUnescape(n.substring(5,t))),e.unitURIs.push(me.skUnescape(n.substring(t+1)))))}return e}formatMetaData(t){let e="";for(let n in t.prefixes)e+="pfx:"+me.skEscape(n)+"="+me.skEscape(t.prefixes[n])+"\n";e+="targetName="+me.skEscape(t.targetName)+"\n",e+="targetURI="+me.skEscape(t.targetURI)+"\n",e+="organismName="+me.skEscape(t.organismName)+"\n",e+="organismURI="+me.skEscape(t.organismURI)+"\n",e+="targetTypeName="+me.skEscape(t.targetTypeName)+"\n",e+="targetTypeURI="+me.skEscape(t.targetTypeURI)+"\n",e+="cellName="+me.skEscape(t.cellName)+"\n",e+="cellURI="+me.skEscape(t.cellURI)+"\n",e+="assayTypeName="+me.skEscape(t.assayTypeName)+"\n",e+="assayTypeURI="+me.skEscape(t.assayTypeURI)+"\n",e+="assayDescription="+me.skEscape(t.assayDescription)+"\n",e+="sourceName="+me.skEscape(t.sourceName)+"\n",e+="sourceURI="+me.skEscape(t.sourceURI)+"\n",e+="sourceVersion="+me.skEscape(t.sourceVersion)+"\n",e+="documentName="+me.skEscape(t.documentName)+"\n",e+="documentURI="+me.skEscape(t.documentURI)+"\n",e+="measureTypeName="+me.skEscape(t.measureTypeName)+"\n",e+="measureTypeURI="+me.skEscape(t.measureTypeURI)+"\n";for(let n=0,i=Math.min(t.unitNames.length,t.unitURIs.length);n<i;n++)e+="unit:"+me.skEscape(t.unitNames[n])+"="+me.skEscape(t.unitURIs[n])+"\n";return e}plainHeading(){return Ae.NAME}isColumnReserved(t){return t==Ae.COLNAME_VALUE||t==Ae.COLNAME_ERROR||t==Ae.COLNAME_UNITS||t==Ae.COLNAME_RELATION||t==Ae.COLNAME_SOURCEURI}numTextRenderings(t){return 2}produceTextRendering(t,e){let n=this.getHeader();if(0==e){let e={name:"Activity",descr:"Activity measurement details for this record",text:"",type:we.TEXT_PLAIN},n=this.getValue(t),i=this.getError(t),s=this.getUnits(t),o=this.getRelation(t);return e.text="",Number.isNaN(n)||(o&&(e.text+=o+" "),e.text+=n,Number.isNaN(i)||(e.text+="  "+i),s&&(e.text+=" "+s)),e}if(1==e){let e={name:"Source",descr:"Origin of the structure and activity measurement",text:"",type:we.TEXT_LINK},i=this.getSourceURI(t);for(let t in n.prefixes)if(i.startsWith(t+":")){i=n.prefixes[t]+i.substring(t.length+1);break}return e.text=i,e}return null}}Ae.CODE="org.mmi.aspect.AssayProvenance",Ae.NAME="Assay Provenance",Ae.COLNAME_MOLECULE="Molecule",Ae.COLNAME_NAME="Name",Ae.COLNAME_VALUE="Value",Ae.COLNAME_ERROR="Error",Ae.COLNAME_UNITS="Units",Ae.COLNAME_RELATION="Relation",Ae.COLNAME_SOURCEURI="SourceURI",Ae.URI_UNIT_M="http://purl.obolibrary.org/obo/UO_0000062",Ae.URI_UNIT_mM="http://purl.obolibrary.org/obo/UO_0000063",Ae.URI_UNIT_uM="http://purl.obolibrary.org/obo/UO_0000064",Ae.URI_UNIT_nM="http://purl.obolibrary.org/obo/UO_0000065",Ae.URI_UNIT_pM="http://purl.obolibrary.org/obo/UO_0000066",Ae.URI_UNIT_logM="http://www.bioassayontology.org/bao#BAO_0000101",Ae.URI_UNIT_perM="http://www.bioassayontology.org/bao#BAO_0000102",Ae.URI_UNIT_gL="http://purl.obolibrary.org/obo/UO_0000175",Ae.URI_UNIT_mgL="http://purl.obolibrary.org/obo/UO_0000273",Ae.URI_UNIT_ugL="http://purl.obolibrary.org/obo/UO_0000275",Ae.URI_UNIT_binary="http://www.bioassayontology.org/bao#BAO_0080023",Ce(Ae);class Te{constructor(){this.colNameMolecule="",this.colNameValue="",this.thresholdValue=.5,this.thresholdRelation=">=",this.folding=0,this.noteField="",this.noteTitle="",this.noteOrigin="",this.noteComment=""}}class Me extends we{static isBayesianSource(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==Me.CODE)return!0;return!1}constructor(t,e){super(Me.CODE,t,e),this.setup()}getModels(){let t="";for(let e=0;e<this.ds.numExtensions;e++)if(this.ds.getExtType(e)==Me.CODE){t=this.ds.getExtData(e);break}let e=[],n=null;for(let i of t.split("\n")){if("model:"==i){null!=n&&e.push(n),n={};continue}if(null==n)continue;let t=i.indexOf("=");t<0||(i.startsWith("colNameMolecule=")?n.colNameMolecule=me.skUnescape(i.substring(t+1)):i.startsWith("colNameValue=")?n.colNameValue=me.skUnescape(i.substring(t+1)):i.startsWith("thresholdValue=")?n.thresholdValue=parseFloat(i.substring(t+1)):i.startsWith("thresholdRelation=")?n.thresholdRelation=me.skUnescape(i.substring(t+1)):i.startsWith("folding=")?n.folding=parseInt(i.substring(t+1)):i.startsWith("noteField=")?n.noteField=me.skUnescape(i.substring(t+1)):i.startsWith("noteTitle=")?n.noteTitle=me.skUnescape(i.substring(t+1)):i.startsWith("noteOrigin=")?n.noteOrigin=me.skUnescape(i.substring(t+1)):i.startsWith("noteComment=")&&(n.noteComment=me.skUnescape(i.substring(t+1))))}return null!=n&&e.push(n),e}setModels(t){let e=[];for(let n of t)e.push("model:"),e.push("colNameMolecule="+me.skEscape(n.colNameMolecule)),e.push("colNameValue="+me.skEscape(n.colNameValue)),e.push("thresholdValue="+n.thresholdValue),e.push("thresholdRelation="+me.skEscape(n.thresholdRelation)),e.push("folding=%d"+n.folding),e.push("noteField="+me.skEscape(n.noteField)),e.push("noteTitle="+me.skEscape(n.noteTitle)),e.push("noteOrigin="+me.skEscape(n.noteOrigin)),e.push("noteComment="+me.skEscape(n.noteComment));let n=e.join("\n");for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==Me.CODE)return void this.ds.setExtData(t,n.toString());this.ds.appendExtension("BayesianSource",Me.CODE,n.toString())}setup(){if(this.allowModify){let t=this.getModels();this.setModels(t)}}plainHeading(){return Me.NAME}}Me.CODE="org.mmi.aspect.BayesianSource",Me.NAME="Bayesian Source",Ce(Me);class Ee{}class Se{}class Ne extends we{static isBayesianPrediction(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==Ne.CODE)return!0;return!1}constructor(t,e){super(Ne.CODE,t,e),this.setup()}getModels(){let t="";for(let e=0;e<this.ds.numExtensions;e++)if(this.ds.getExtType(e)==Ne.CODE){t=this.ds.getExtData(e);break}let e=[],n=null;for(let i of t.split("\n")){if("model:"==i){null!=n&&e.push(n),n={};continue}if(null==n)continue;let t=i.indexOf("=");t<0||(i.startsWith("colMolecule=")?n.colMolecule=me.skUnescape(i.substring(t+1)):i.startsWith("colRaw=")?n.colRaw=me.skUnescape(i.substring(t+1)):i.startsWith("colScaled=")?n.colScaled=me.skUnescape(i.substring(t+1)):i.startsWith("colArcTan=")?n.colArcTan=me.skUnescape(i.substring(t+1)):i.startsWith("colDomain=")?n.colDomain=me.skUnescape(i.substring(t+1)):i.startsWith("colAtoms=")?n.colAtoms=me.skUnescape(i.substring(t+1)):i.startsWith("name=")?n.name=me.skUnescape(i.substring(t+1)):i.startsWith("description=")?n.description=me.skUnescape(i.substring(t+1)):i.startsWith("targetName=")?n.targetName=me.skUnescape(i.substring(t+1)):i.startsWith("isOffTarget=")&&(n.isOffTarget="true"==i.substring(t+1)))}return null!=n&&e.push(n),e}setModels(t){let e=[];for(let n of t)e.push("model:"),e.push("colMolecule="+me.skEscape(n.colMolecule)),e.push("colRaw="+me.skEscape(n.colRaw)),e.push("colScaled="+me.skEscape(n.colScaled)),e.push("colArcTan="+me.skEscape(n.colArcTan)),e.push("colDomain="+me.skEscape(n.colDomain)),e.push("colAtoms="+me.skEscape(n.colAtoms)),e.push("name="+me.skEscape(n.name)),e.push("description="+me.skEscape(n.description)),e.push("targetName="+me.skEscape(n.targetName)),e.push("isOffTarget="+n.isOffTarget);let n=e.join("\n");for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==Me.CODE)return void this.ds.setExtData(t,n.toString());this.ds.appendExtension("BayesianPrediction",Ne.CODE,n.toString())}getOutcome(t,e){let n=new Se;n.raw=this.ds.getReal(t,e.colRaw),n.scaled=this.ds.getReal(t,e.colScaled),n.arctan=this.ds.getReal(t,e.colArcTan),n.domain=this.ds.getReal(t,e.colDomain);let i=this.ds.getString(t,e.colAtoms);if(i){n.atoms=[];for(let t of i.split(","))n.atoms.push(parseFloat(t))}return n}setOutcome(t,e,n){let i=this.ds.findColByName(e.colRaw,"real");i>=0&&this.ds.setReal(t,i,n.raw),i=this.ds.findColByName(e.colScaled,"real"),i>=0&&this.ds.setReal(t,i,n.scaled),i=this.ds.findColByName(e.colArcTan,"real"),i>=0&&this.ds.setReal(t,i,n.arctan),i=this.ds.findColByName(e.colDomain,"real"),i>=0&&this.ds.setReal(t,i,n.domain),i=this.ds.findColByName(e.colAtoms,"string"),i>=0&&this.ds.setString(t,i,n.atoms?n.atoms.toString():null)}setup(){if(this.allowModify){let t=this.getModels();this.setModels(t)}}plainHeading(){return Me.NAME}}Ne.CODE="org.mmi.aspect.BayesianPrediction",Ne.NAME="Bayesian Prediction",Ce(Ne);class De extends we{static isMeasurementData(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==De.CODE)return!0;return!1}constructor(t,e){super(De.CODE,t,e),this.header={units:[],fields:[]},this.setup()}getHeader(){return this.header}setHeader(t){this.header=t;let e=this.formatMetaData(t);for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==De.CODE)return void this.ds.setExtData(t,e);this.ds.appendExtension(De.NAME,De.CODE,e)}effectHeader(t){this.setHeader(t),this.ensureFields()}rename(t,e){let n=this.header.fields[t].name;if(n!=e){this.header.fields[t].name=e,this.setHeader(this.header);for(let t of[De.SUFFIX_VALUE,De.SUFFIX_ERROR,De.SUFFIX_UNITS,De.SUFFIX_MOD]){let i=this.ds.findColByName(n+t);i>=0&&this.ds.changeColumnName(i,e+t,this.ds.colDescr(i))}}}reservedColumns(t){let e=this.header.fields[t].name;return[e+De.SUFFIX_VALUE,e+De.SUFFIX_ERROR,e+De.SUFFIX_UNITS,e+De.SUFFIX_MOD]}getValue(t,e){return this.getValueField(t,this.header.fields[e])}getValueField(t,e){let n={value:Number.NaN,error:Number.NaN,units:"",mod:""},i=this.ds.findColByName(e.name+De.SUFFIX_VALUE,"real"),s=this.ds.findColByName(e.name+De.SUFFIX_ERROR,"real"),o=this.ds.findColByName(e.name+De.SUFFIX_UNITS,"string"),r=this.ds.findColByName(e.name+De.SUFFIX_MOD,"string");return i>=0&&this.ds.notNull(t,i)&&(n.value=this.ds.getReal(t,i)),s>=0&&this.ds.notNull(t,s)&&(n.error=this.ds.getReal(t,s)),o>=0&&(n.units=this.ds.getString(t,o)),r>=0&&(n.mod=this.ds.getString(t,r)),n}setValue(t,e,n){let i=this.header.fields[e].name,s=this.ds.findColByName(i+De.SUFFIX_VALUE,"real"),o=this.ds.findColByName(i+De.SUFFIX_ERROR,"real"),r=this.ds.findColByName(i+De.SUFFIX_UNITS,"string"),a=this.ds.findColByName(i+De.SUFFIX_MOD,"string");s>=0&&(isNaN(n.value)?this.ds.setToNull(t,s):this.ds.setReal(t,s,n.value)),o>=0&&(isNaN(n.error)?this.ds.setToNull(t,o):this.ds.setReal(t,o,n.error)),r>=0&&this.ds.setString(t,r,n.units),a>=0&&this.ds.setString(t,a,n.mod)}clearValue(t,e){let n=this.header.fields[e].name,i=this.ds.findColByName(n+De.SUFFIX_VALUE,"real"),s=this.ds.findColByName(n+De.SUFFIX_ERROR,"real"),o=this.ds.findColByName(n+De.SUFFIX_UNITS,"string"),r=this.ds.findColByName(n+De.SUFFIX_MOD,"string");i>=0&&this.ds.setToNull(t,i),s>=0&&this.ds.setToNull(t,s),o>=0&&this.ds.setToNull(t,o),r>=0&&this.ds.setToNull(t,r)}getDescr(t,e){let n=this.ds.findColByName(this.header.fields[e].name);return n<0?"":this.ds.colDescr(n)}setDescr(t,e,n){let i=this.ds.findColByName(this.header.fields[e].name);i>=0&&this.ds.changeColumnName(i,this.ds.colName(i),n)}setup(){this.parseAndCorrect()}parseAndCorrect(){this.header={units:[],fields:[]};let t=!1;for(let e=0;e<this.ds.numExtensions;e++)if(this.ds.getExtType(e)==De.CODE){this.header=this.parseMetaData(this.ds.getExtData(e)),t=!0;break}if(this.ensureFields(),!t&&this.allowModify){let t=this.formatMetaData(this.header);this.ds.appendExtension(De.NAME,De.CODE,t)}}ensureFields(){for(let t of this.header.fields){let e="Measurement",n=this.ds.findColByName(t.name);n>=0&&(e=this.ds.colDescr(n)),this.allowModify&&(this.ds.ensureColumn(t.name+De.SUFFIX_VALUE,"real",e),this.ds.ensureColumn(t.name+De.SUFFIX_ERROR,"real","Error"),this.ds.ensureColumn(t.name+De.SUFFIX_UNITS,"string","Units"),this.ds.ensureColumn(t.name+De.SUFFIX_MOD,"string","Modifier"))}}parseMetaData(t){let e={units:[],fields:[]};for(let n of t.split(/\r?\n/)){let t=n.indexOf("=");if(!(t<0))if(n.startsWith("unit=")){let i=n.substring(t+1).split(",");i.length>=2&&e.units.push({name:me.skUnescape(i[0]),uri:me.skUnescape(i[1])})}else if(n.startsWith("field=")){let i=n.substring(t+1).split(","),s={name:me.skUnescape(i[0]),units:[],defnURI:[]};for(let t=1;t<i.length;t++)s.units.push(me.skUnescape(i[t]));e.fields.push(s)}else if(n.startsWith("definition=")){let i=n.substring(t+1).split(",");if(i.length>=2){let t=e.fields.find((t=>t.name==i[0]));if(!t)continue;for(let e=1;e<i.length;e++)t.defnURI.push(me.skUnescape(i[e]))}}}return e}formatMetaData(t){let e=[];for(let n of t.units)e.push("unit="+me.skEscape(n.name)+","+me.skEscape(n.uri));for(let i of t.fields){let t="field="+me.skEscape(i.name);for(let e of i.units)t+=","+me.skEscape(e);if(e.push(t),n.notBlank(i.defnURI)){t="definition="+me.skEscape(i.name);for(let e of i.defnURI)t+=","+me.skEscape(e);e.push(t)}}return e.join("\n")}plainHeading(){return De.NAME}isColumnReserved(t){return this.areColumnsReserved([t])[0]}areColumnsReserved(t){let e=new Set;for(let t of this.header.fields)e.add(t.name+De.SUFFIX_VALUE),e.add(t.name+De.SUFFIX_ERROR),e.add(t.name+De.SUFFIX_UNITS),e.add(t.name+De.SUFFIX_MOD);let n=[];for(let i of t)n.push(e.has(i));return n}numTextRenderings(t){return this.header.fields.length}produceTextRendering(t,e){let n=this.header.fields[e],i=this.ds.findColByName(n.name),s={name:n.name,descr:i<0?"":this.ds.colDescr(i),text:"",type:we.TEXT_PLAIN},o=this.getValue(t,e);return Number.isNaN(o.value)||(o.mod&&(s.text+=o.mod+" "),s.text+=o.value,Number.isNaN(o.error)||(s.text+="  "+o.error),o.units&&(s.text+=" "+o.units)),s}}De.CODE="org.mmi.aspect.MeasurementData",De.NAME="Measurement Data",De.SUFFIX_VALUE="",De.SUFFIX_ERROR="_error",De.SUFFIX_UNITS="_units",De.SUFFIX_MOD="_mod",Ce(De);class Re{}class Oe extends we{static isBinaryData(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==Oe.CODE)return!0;return!1}constructor(t,e){super(Oe.CODE,t,e),this.fields=[],this.setup()}getFields(){return yt(this.fields)}setFields(t){this.fields=yt(t);let e=this.formatMetaData(t);for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==De.CODE)return void this.ds.setExtData(t,e);this.ds.appendExtension(De.NAME,De.CODE,e)}getValue(t,e){let n=this.getDestValue(t,e);return null!=n?n:this.getSourceValue(t,e)}getSourceValue(t,e){let n=this.ds.findColByName(e.colNameSource);if(n<0||this.ds.isNull(t,n))return null;let i=this.ds.colType(n),s=0;if("boolean"==i)return this.ds.getBoolean(t,n);if("integer"==i)s=this.ds.getInteger(t,n);else{if("real"!=i)return null;s=this.ds.getReal(t,n)}return">"==e.thresholdRelation?s>e.thresholdValue:"<"==e.thresholdRelation?s<e.thresholdValue:">="==e.thresholdRelation?s>=e.thresholdValue:"<="==e.thresholdRelation?s<=e.thresholdValue:null}getDestValue(t,e){return this.ds.getBoolean(t,e.colNameDest)}setup(){this.parseAndCorrect()}parseAndCorrect(){let t=!1;for(let e=0;e<this.ds.numExtensions;e++)if(this.ds.getExtType(e)==De.CODE){this.fields=this.parseMetaData(this.ds.getExtData(e)),t=!0;break}if(!t&&this.allowModify){let t=this.formatMetaData(this.fields);this.ds.appendExtension(De.NAME,De.CODE,t)}}parseMetaData(t){let e=[],n=null;for(let i of t.split(/\r?\n/)){if("field:"==i){null!=n&&e.push(n),n={colNameSource:"",colNameDest:"",thresholdValue:.5,thresholdRelation:">="};continue}if(null==n)continue;let t=i.indexOf("=");t<0||(i.startsWith("colNameSource=")?n.colNameSource=me.skUnescape(i.substring(t+1)):i.startsWith("colNameDest=")?n.colNameDest=me.skUnescape(i.substring(t+1)):i.startsWith("thresholdValue=")?n.thresholdValue=parseFloat(i.substring(t+1)):i.startsWith("thresholdRelation=")&&(n.thresholdRelation=me.skUnescape(i.substring(t+1))))}return null!=n&&e.push(n),e}formatMetaData(t){let e=[];for(let n of t)e.push("field:"),e.push("colNameSource="+me.skEscape(n.colNameSource)),e.push("colNameDest="+me.skEscape(n.colNameDest)),e.push("thresholdValue="+n.thresholdValue),e.push("thresholdRelation="+me.skEscape(n.thresholdRelation));return e.join("\n")}plainHeading(){return Oe.NAME}isColumnReserved(t){return!1}}var Le,Be,qe,_e,Ie,ze,Pe,Fe,je,Ue,Xe,Ye,We,He,Ge,Ve;Oe.CODE="org.mmi.aspect.BinaryData",Oe.NAME="Binary Data",Ce(Oe),function(t){t.Role="role",t.Pressure="pressure",t.TurnoverNumber="turnover_number",t.EnantiomericExcess="enantiomeric_excess",t.Time="time",t.Heat="heat",t.Light="light"}(Le||(Le={})),function(t){t[t.Experiment=0]="Experiment",t[t.Step=1]="Step",t[t.Reactant=2]="Reactant",t[t.Reagent=3]="Reagent",t[t.Product=4]="Product"}(Be||(Be={})),function(t){t[t.Boolean=0]="Boolean",t[t.Number=1]="Number",t[t.Optional=2]="Optional",t[t.String=3]="String"}(qe||(qe={})),function(t){t.Reagent="reagent",t.Catalyst="catalyst",t.Solvent="solvent",t.Adjunct="adjunct"}(_e||(_e={}));class $e{static unpackMeta(t){if(!t)return[];let e=[];for(let n of t.split("\n"))if(n){let t=n.indexOf("="),i=me.skUnescape(t<0?n:n.substring(0,t)),s=t<0?null:me.skUnescape(n.substring(t+1)),o=this.VALUES[i];null==s||o!=qe.Number&&o!=qe.Optional||(s=parseFloat(s)),e.push([i,s])}return e.sort(((t,e)=>t[0].localeCompare(e[0]))),e}static packMeta(t){let e=[];for(let[n,i]of t)null==i?e.push(me.skEscape(n)):e.push(me.skEscape(n)+"="+me.skEscape(i.toString()));return e.join("\n")}static withMetaKey(t,e,n){let i=this.unpackMeta(t),s=i.find((t=>t[0]==e));return null!=n?s?s[1]=n:i.push([e,n]):i=i.filter((t=>t[0]!=e)),this.packMeta(i)}static describeMeta(t,e){let n=(t,e)=>{if(null==t)return"";if(0==t)return"0";let n=Math.ceil(-Math.log10(Math.abs(t)));n=Math.max(0,Math.max(n,e));let i=t.toFixed(n);if(i.indexOf(".")<0)return i;for(;i.endsWith("0");)i=i.substring(0,i.length-1);return i.endsWith(".")&&(i=i.substring(0,i.length-1)),i};if(t==Le.Role)return e?`role: ${e}`:null;if(t==Le.Pressure)return null==e?null:`${n(e,2)} atm`;if(t==Le.TurnoverNumber)return null==e?null:`${n(e,2)} turnover${1==e?"":"s"}`;if(t==Le.EnantiomericExcess)return null==e?null:`${n(e,2)}% ee`;if(t==Le.Time){if(null==e)return null;if(e<1){let t=60*e;return`${n(t,2)} min${1==t?"":"s"}`}return`${n(e,2)} hour${1==e?"":"s"}`}return t==Le.Heat?null==e?"":`${n(e,2)} C`:t==Le.Light?null==e?"h":`${n(e,2)} nm`:null}}$e.APPLICABILITY={[Le.Role]:[Be.Reagent],[Le.Pressure]:[Be.Reactant,Be.Reagent],[Le.TurnoverNumber]:[Be.Reagent],[Le.EnantiomericExcess]:[Be.Product],[Le.Time]:[Be.Step],[Le.Heat]:[Be.Step],[Le.Light]:[Be.Step]},$e.NAMES={[Le.Role]:"Role",[Le.Pressure]:"Pressure",[Le.TurnoverNumber]:"Turnover Number",[Le.EnantiomericExcess]:"Enantiomeric Excess",[Le.Time]:"Time",[Le.Heat]:"Heat",[Le.Light]:"Light"},$e.UNITS={[Le.Pressure]:"atm",[Le.TurnoverNumber]:null,[Le.EnantiomericExcess]:"%",[Le.Time]:"hr",[Le.Heat]:"C",[Le.Light]:"nm"},$e.VALUES={[Le.Role]:qe.String,[Le.Pressure]:qe.Number,[Le.TurnoverNumber]:qe.Number,[Le.EnantiomericExcess]:qe.Number,[Le.Time]:qe.Number,[Le.Heat]:qe.Optional,[Le.Light]:qe.Optional},function(t){t[t.Primary=1]="Primary",t[t.Secondary=2]="Secondary",t[t.Product=3]="Product",t[t.Independent=4]="Independent"}(Ie||(Ie={})),function(t){t[t.Unknown=0]="Unknown",t[t.Actual=1]="Actual",t[t.Virtual=2]="Virtual",t[t.Conflict=3]="Conflict"}(ze||(ze={}));class Ke{constructor(t,e,n,i){this.comp=t,this.step=e,this.type=n,this.idx=i,this.role=0,this.molw=0,this.valueEquiv=0,this.statEquiv=0,this.valueMass=Ze.UNSPECIFIED,this.statMass=0,this.valueVolume=Ze.UNSPECIFIED,this.statVolume=0,this.valueMoles=Ze.UNSPECIFIED,this.statMoles=0,this.valueDensity=Ze.UNSPECIFIED,this.statDensity=0,this.valueConc=Ze.UNSPECIFIED,this.statConc=0,this.valueYield=Ze.UNSPECIFIED,this.statYield=0}}class Qe{constructor(){this.step=0,this.idx=0,this.massReact=[],this.massProd=[],this.massWaste=[],this.massProdWaste=[],this.molwReact=[],this.molwProd=[],this.impliedWaste=0,this.isBlank=!1}}class Ze{static isStoichZero(t){return!this.isStoichUnity(t)&&0==parseFloat(t)}static isStoichUnity(t){if(!t||"1"==t)return!0;let[e,n]=this.extractStoichFraction(t);return 0!=e&&e==n}static extractStoichFraction(t){if(!t)return[1,1];let e=1,n=1,i=t.indexOf("/");if(i<0){let n=parseFloat(t);n>=0&&(e=n)}else{let s=parseFloat(t.substring(0,i)),o=parseFloat(t.substring(i+1));s>=0&&(e=s),o>=0&&(n=o)}return[e,n]}static extractStoichValue(t){let[e,n]=this.extractStoichFraction(t);return n<=1?e:e/n}static stoichAsRatio(t){let[e,n]=this.extractStoichFraction(t);return e==Math.floor(e)?[e,n]:this.stoichFractAsRatio(e)}static stoichFractAsRatio(t){if(t==Math.floor(t))return[t,1];const e=Ze.MAX_DENOM;if(null==Ze.RATIO_FRACT){Ze.RATIO_FRACT=[];for(let t=2;t<=e;t++)for(let n=1;n<t&&n<e-1;n++)Ze.RATIO_FRACT.push(1*n/t)}let n=Math.floor(t),i=t-n,s=Number.MAX_VALUE,o=1,r=1;for(let t=0,n=2;n<=e;n++)for(let a=1;a<n&&a<e-1;a++){let e=Math.abs(Ze.RATIO_FRACT[t++]-i);e<s&&(s=e,o=a,r=n)}return[o+n*r,r]}static impliedReagentStoich(t,e){if(Qt.isBlank(t.mol)||0==e.length)return 0;let i=n.numberArray(-1,e.length),s=t.mol,o=0;for(let t=1;t<=s.numAtoms;t++){let n=s.atomMapNum(t);if(0==n)continue;let r=0;for(let t=0;t<e.length;t++){let o=e[t].mol;if(Qt.isBlank(o))continue;let a=0;for(let t=1;t<=o.numAtoms;t++)o.atomMapNum(t)==n&&a++;if(a>0){let o=0;for(let t=1;t<=s.numAtoms;t++)s.atomMapNum(t)==n&&o++;i[t]<0&&(i[t]=Ze.extractStoichValue(e[t].stoich)),r+=a*i[t]/o}}o=Math.max(o,r)}return o}static componentRatio(t,e){let n=[],i=[],s=0==e?t.steps[0].reactants:t.steps[e-1].products;for(let t of s){let[e,s]=this.stoichAsRatio(t.stoich);n.push(e),i.push(s)}for(let s of t.steps[e].reagents){let o=this.impliedReagentStoich(s,t.steps[e].products),[r,a]=0==o?[0,1]:this.stoichFractAsRatio(o);n.push(0==r?1:r),i.push(a)}for(let s of t.steps[e].products){let[t,e]=this.stoichAsRatio(s.stoich);n.push(0==t?1:t),i.push(e)}let o=1;for(let t=0;t<n.length;t++)i[t]>1&&o%i[t]!=0&&(o*=i[t]);let r=[],a=[],l=[],d=0;for(let t=0;t<s.length;t++,d++)r.push(n[d]*o/i[d]);for(let s=0;s<t.steps[e].reagents.length;s++,d++)a.push(n[d]*o/i[d]);for(let s=0;s<t.steps[e].products.length;s++,d++)l.push(n[d]*o/i[d]);return[r,a,l]}constructor(t){this.entry=t,this.quantities=[],this.primaryMoles=[],this.idxPrimary=[],this.idxYield=[],this.allMassReact=[],this.allMassProd=[],this.allMassWaste=[],this.greenMetrics=[]}calculate(){for(this.classifyTypes();this.calculateSomething(););this.allMassReact=[],this.allMassProd=[],this.allMassWaste=[];for(let t=0;t<this.quantities.length;t++){let e=this.quantities[t];if(e.type==We.Reactant||e.type==We.Reagent){if(0==e.valueEquiv&&e.type==We.Reagent)continue;this.allMassReact.push(e.valueMass)}else e.type==We.Product&&(e.comp.waste?this.allMassWaste.push(e.valueMass):(this.allMassProd.push(e.valueMass),this.calculateGreenMetrics(t)))}}get numQuantities(){return this.quantities.length}getQuantity(t){return this.quantities[t]}getAllQuantities(){return this.quantities.slice(0)}get numGreenMetrics(){return this.greenMetrics.length}getGreenMetrics(t){return this.greenMetrics[t]}getAllGreenMetrics(){return this.greenMetrics.slice(0)}getAllMassReact(){return this.allMassReact.slice(0)}getAllMassProd(){return this.allMassProd.slice(0)}getAllMassWaste(){return this.allMassWaste.slice(0)}findComponent(t,e,n){for(let i of this.quantities)if(i.step==t&&i.type==e&&i.idx==n)return i;return null}static formatMolWeight(t){return t==Ze.UNSPECIFIED?"":M(t,6)+" g/mol"}static formatMass(t){return t==Ze.UNSPECIFIED?"":t<=1e-6?M(1e6*t,6)+" g":t<=.001?M(1e3*t,6)+" mg":t>=1e3?M(.001*t,6)+" kg":M(t,6)+" g"}static formatVolume(t){return t==Ze.UNSPECIFIED?"":t<=1e-6?M(1e6*t,6)+" nL":t<=.001?M(1e3*t,6)+" L":t>=1e3?M(.001*t,6)+" L":M(t,6)+" mL"}static formatMoles(t){return t==Ze.UNSPECIFIED?"":t<=1e-9?M(1e9*t,6)+" nmol":t<=1e-6?M(1e6*t,6)+" mol":t<=.001?M(1e3*t,6)+" mmol":M(t,6)+" mol"}static formatDensity(t){return t==Ze.UNSPECIFIED?"":M(t,6)+" g/mL"}static formatConc(t){return t==Ze.UNSPECIFIED?"":t<=1e-9?M(1e9*t,6)+" nmol/L":t<=1e-6?M(1e6*t,6)+" mol/L":t<=.001?M(1e3*t,6)+" mmol/L":M(t,6)+" mol/L"}static formatPercent(t){return t==Ze.UNSPECIFIED?"":M(t,6)+"%"}static formatEquiv(t){return t==Ze.UNSPECIFIED?"":M(t,4)+" equiv"}classifyTypes(){for(let t=0;t<this.entry.steps.length;t++){let e=this.entry.steps[t];for(let n=0;n<e.reactants.length;n++)this.quantities.push(new Ke(e.reactants[n],t,We.Reactant,n));for(let n=0;n<e.reagents.length;n++)this.quantities.push(new Ke(e.reagents[n],t,We.Reagent,n));for(let n=0;n<e.products.length;n++)this.quantities.push(new Ke(e.products[n],t,We.Product,n))}for(let t=0;t<this.quantities.length;t++){let e=this.quantities[t];if(e.type==We.Reagent)if(null!=e.comp.equiv)e.valueEquiv=e.comp.equiv;else{let t=Ze.impliedReagentStoich(e.comp,this.entry.steps[e.step].products);t>0&&(e.valueEquiv=t)}else e.valueEquiv=Ze.extractStoichValue(e.comp.stoich);null!=e.comp.mol&&(e.molw=Qt.molecularWeight(e.comp.mol)),e.role=4,0==e.step&&e.type==We.Reactant?e.comp.primary?(e.role=1,this.idxPrimary.push(t)):e.role=2:e.type==We.Reagent||e.type!=We.Product||e.comp.waste?e.valueEquiv>0&&(e.role=2):(e.role=3,this.idxYield.push(t)),null!=e.comp.mass&&(e.valueMass=e.comp.mass),null!=e.comp.volume&&(e.valueVolume=e.comp.volume),null!=e.comp.moles&&(e.valueMoles=e.comp.moles),null!=e.comp.density&&(e.valueDensity=e.comp.density),null!=e.comp.conc&&(e.valueConc=e.comp.conc),null!=e.comp.yield&&(e.valueYield=e.comp.yield),e.statEquiv=e.valueEquiv==Ze.UNSPECIFIED?0:1,e.statMass=e.valueMass==Ze.UNSPECIFIED?0:1,e.statVolume=e.valueVolume==Ze.UNSPECIFIED?0:1,e.statMoles=e.valueMoles==Ze.UNSPECIFIED?0:1,e.statDensity=e.valueDensity==Ze.UNSPECIFIED?0:1,e.statConc=e.valueConc==Ze.UNSPECIFIED?0:1,e.statYield=e.valueYield==Ze.UNSPECIFIED?0:1}if(0==this.idxPrimary.length)for(let t=0;t<this.quantities.length;t++){let e=this.quantities[t];e.type==We.Reactant&&0==e.step&&(e.role=1,this.idxPrimary.push(t))}}calculateSomething(){let t=!1;for(let e of this.quantities){if(e.molw>0&&e.valueMass==Ze.UNSPECIFIED&&1==e.statMoles&&(e.valueMass=e.valueMoles*e.molw,e.statMass=2,t=!0),e.molw>0&&e.valueMass!=Ze.UNSPECIFIED&&e.valueMoles==Ze.UNSPECIFIED&&(e.valueMoles=e.valueMass/e.molw,e.statMoles=2,t=!0),e.molw>0&&1==e.statMass&&1==e.statMoles){let t=e.valueMass/e.molw;this.closeEnough(e.valueMoles,t)||(e.statMass=3,e.statMoles=3)}let n=1==e.statConc||1==e.statVolume&&(1==e.statMass||1==e.statMoles);if(n||(e.valueDensity>0&&e.valueMass==Ze.UNSPECIFIED&&e.valueVolume!=Ze.UNSPECIFIED&&(e.valueMass=e.valueVolume*e.valueDensity,e.statMass=2,t=!0),e.valueDensity>0&&e.valueMass!=Ze.UNSPECIFIED&&e.valueVolume==Ze.UNSPECIFIED&&(e.valueVolume=e.valueMass/e.valueDensity,e.statVolume=2,t=!0),e.valueDensity==Ze.UNSPECIFIED&&e.valueMass!=Ze.UNSPECIFIED&&e.valueVolume!=Ze.UNSPECIFIED&&e.valueConc==Ze.UNSPECIFIED&&(1!=e.statMass&&1!=e.statMoles||(e.valueDensity=e.valueMass/e.valueVolume,e.statDensity=2,t=!0))),n&&(e.valueConc>0&&e.valueMoles==Ze.UNSPECIFIED&&e.valueVolume!=Ze.UNSPECIFIED&&(e.valueMoles=.001*e.valueVolume*e.valueConc,e.statMoles=2,t=!0),e.valueConc>0&&e.valueMoles!=Ze.UNSPECIFIED&&e.valueVolume==Ze.UNSPECIFIED&&(e.valueVolume=1e3*e.valueMoles/e.valueConc,e.statVolume=2,t=!0),e.valueConc==Ze.UNSPECIFIED&&e.valueMass!=Ze.UNSPECIFIED&&e.valueVolume!=Ze.UNSPECIFIED&&(e.valueConc=1e3*e.valueMoles/e.valueVolume,e.statConc=2,t=!0),1==e.statConc&&e.valueMoles>0&&1==e.statVolume)){let t=1e3*e.valueMoles/e.valueConc;this.closeEnough(e.valueVolume,t)||(e.statConc=3,1==e.statMass&&(e.statMass=3),1==e.statMoles&&(e.statMoles=3),e.statVolume=3)}e.molw>0&&e.valueMass==Ze.UNSPECIFIED&&e.valueMoles!=Ze.UNSPECIFIED&&(e.valueMass=e.valueMoles*e.molw,e.statMass=2,t=!0),1==e.statDensity&&1==e.statConc&&(e.statDensity=3,e.statConc=3)}if(t)return!0;let e=!1,i=this.entry.steps.length,s=n.numberArray(0,i),o=n.numberArray(0,i),r=this.primaryMoles=n.numberArray(0,i);for(let t of this.quantities){let e=-1;if(0==t.step&&t.type==We.Reactant&&t.comp.primary)e=t.step;else{if(!(t.step<i-1&&t.type==We.Product)||t.comp.waste)continue;e=t.step+1}o[e]<0||(1!=t.statMoles?(s[e]++,o[e]+=t.valueEquiv,r[e]+=t.valueMoles):o[e]=-1)}if(o[0]<=0){s[0]=0,o[0]=0,r[0]=0;for(let t of this.idxPrimary){let e=this.quantities[t];if(0==e.statMoles){s[0]=0,o[0]=-1,r[0]=0;break}s[0]++,o[0]+=e.valueEquiv,r[0]+=e.valueMoles}}let a=n.numberArray(0,i);for(let t=0;t<i;t++)a[t]=0==s[t]||o[t]<=0?0:r[t]/o[t],a[t]>0&&(e=!0);if(!e)for(let t=0;t<i;t++){let i=[];for(let e of this.quantities){if(e.step!=t||3!=e.role)continue;if(0==e.statMoles||e.valueMoles<=0||e.valueEquiv<=0)continue;let n=e.valueYield>0?.01*e.valueYield:1;i.push(e.valueMoles/(e.valueEquiv*n))}i.length>0&&(a[t]=n.sum(i)/i.length,e=!0)}if(!e)return!1;for(let e of this.quantities)if(e.type==We.Product&&0!=a[e.step]&&(e.valueYield==Ze.UNSPECIFIED&&e.valueMoles!=Ze.UNSPECIFIED&&(e.valueYield=100*e.valueMoles/(a[e.step]*e.valueEquiv),e.statYield=2,t=!0),e.valueYield!=Ze.UNSPECIFIED&&e.valueMoles==Ze.UNSPECIFIED&&(e.valueMoles=.01*e.valueYield*(a[e.step]*e.valueEquiv),e.statMoles=2,t=!0),e.valueMoles>0&&1==e.statYield)){let t=100*e.valueMoles/(a[e.step]*e.valueEquiv);this.closeEnough(e.valueYield,t)||(1==e.statMass&&(e.statMass=3),1==e.statMoles&&(e.statMoles=3),e.statYield=3)}if(t)return!0;for(let e of this.quantities)0!=a[e.step]&&(e.valueMass==Ze.UNSPECIFIED&&e.valueMoles==Ze.UNSPECIFIED&&e.valueEquiv>0&&(e.valueMoles=a[e.step]*e.valueEquiv,e.statMoles=2,t=!0),e.valueMoles!=Ze.UNSPECIFIED&&e.valueEquiv==Ze.UNSPECIFIED&&(e.valueEquiv=e.valueMoles/a[e.step],e.statEquiv=2,t=!0));return t}calculateGreenMetrics(t){let e=this.quantities[t],i=new Qe;i.step=e.step,i.idx=e.idx,i.isBlank=!0;for(let t=0;t<this.quantities.length;t++){let e=this.quantities[t];if(e.step>i.step)continue;let n=e.valueEquiv;0==n&&e.type==We.Reagent||(e.valueMass!=Ze.UNSPECIFIED&&(i.isBlank=!1),e.type==We.Reactant||e.type==We.Reagent?(i.massReact.push(e.valueMass),e.step==i.step&&n>0&&e.molw>0&&i.molwReact.push(n*e.molw)):e.type==We.Product&&(e.comp.waste?i.massWaste.push(e.valueMass):(e.step==i.step&&i.massProd.push(e.valueMass),n>0&&e.molw>0&&(e.step==i.step?i.molwProd.push(n*e.molw):e.step==i.step-1&&i.molwReact.push(n*e.molw))),e.step==i.step&&i.massProdWaste.push(e.valueMass)))}i.impliedWaste=n.sum(i.massReact)-n.sum(i.massProdWaste),Math.abs(i.impliedWaste)>.001&&(i.impliedWaste=0),this.greenMetrics.push(i)}closeEnough(t,e){if(t<=0||e<=0)return!0;let n=t/e;return n>=.99&&n<=1.01}}Ze.UNSPECIFIED=-1,Ze.MAX_DENOM=16,Ze.RATIO_FRACT=null;class Je{constructor(t){this.mol=t,this.bondMask=null,this.crossings=[]}calculateCrossings(){const{mol:t,bondMask:e,crossings:i}=this;let s=t.numAtoms,o=t.numBonds,r=n.booleanArray(!1,s);for(let n=1;n<o;n++){if(e&&!e[n-1])continue;let s=t.atomX(t.bondFrom(n)),a=t.atomY(t.bondFrom(n)),d=t.atomX(t.bondTo(n)),p=t.atomY(t.bondTo(n)),h=d-s,c=p-a;s+=.001*h,a+=.001*c,d-=.001*h,p-=.001*c;for(let m=n+1;m<=o;m++){if(e&&!e[m-1])continue;let o=t.atomX(t.bondFrom(m)),u=t.atomY(t.bondFrom(m)),f=t.atomX(t.bondTo(m)),g=t.atomY(t.bondTo(m));h=f-o,c=g-u,o+=.001*h,u+=.001*c,f-=.001*h,g-=.001*c,l.doLineSegsIntersect(s,a,d,p,o,u,f,g)&&(i.push({bond1:n,bond2:m,higher:0}),r[t.bondFrom(n)-1]=!0,r[t.bondTo(n)-1]=!0,r[t.bondFrom(m)-1]=!0,r[t.bondTo(m)-1]=!0)}}if(0==i.length)return;let a=new Set;for(let e=1;e<=s;e++){let n=t.atomRingBlock(e);n>0&&a.add(n)}for(let e=1;e<=s;e++)if(!r[e-1]){let n=t.atomRingBlock(e);n>0&&a.has(n)&&(r[e-1]=!0)}let d=this.connectMaskedComponents(r),p=qt.fromMoleculeMask(t,d),h=p.calculateComponentGroups();for(let t=0;t<h.length;t++){for(let e=0;e<h[t].length;e++)h[t][e]=p.getIndex(h[t][e]);this.embedComponent(h[t])}}connectMaskedComponents(t){const{mol:e}=this;let i=n.duplicate(t),s=qt.fromMolecule(e),o=e.numAtoms,r=e.numBonds,a=n.booleanArray(!1,o);for(;;){let t=!1;for(let n=1;n<=r;n++){let r=e.bondFrom(n),l=e.bondTo(n),d=0;if(i[r-1]&&!i[l-1])d=l;else{if(!i[l-1]||i[r-1])continue;d=r}if(a[d-1])continue;let p=s.clone();p.removeEdge(r-1,l-1);let h=p.calculateComponents(),c=!1;for(let t=0;t<o;t++)if(i[t]&&h[t]==h[d-1]){c=!0;break}c?(i[d-1]=!0,t=!0):a[d-1]=!0}if(!t)break}return i}embedComponent(t){const{mol:e,crossings:i}=this;let s=e.numAtoms,o=t.length,r=n.booleanArray(!1,s);for(let e=0;e<o;e++)r[t[e]-1]=!0;let a=n.numberArray(0,o),l=new Array(o);if(this.seedFromInternalWedges(t,r,a));else if(this.seedFromExternalWedges(t,r,a));else if(this.seedFromPerspective(t,r,a));else if(!this.seedFromDensity(t,r,a))return;let d=this.normaliseHeights(a);for(;d<o;){this.expandOutward(a,l,t,r);let e=this.normaliseHeights(l);if(e==d)break;for(let t=0;t<o;t++)a[t]=l[t];d=e}for(let n of i)r[e.bondFrom(n.bond1)-1]&&this.updateCrossing(n,t,a)}seedFromInternalWedges(t,e,n){const{mol:i}=this;let s=i.numBonds,o=!1;for(let r=1;r<=s;r++){let s=i.bondType(r);if(s!=ge.BONDTYPE_INCLINED&&s!=ge.BONDTYPE_DECLINED)continue;let a=i.bondFrom(r),l=i.bondTo(r);e[a-1]&&e[l-1]&&(s==ge.BONDTYPE_INCLINED?(n[t.indexOf(a)]-=.5,n[t.indexOf(l)]+=.5):(n[t.indexOf(a)]+=.5,n[t.indexOf(l)]-=.5),o=!0)}return o}seedFromExternalWedges(t,e,n){const{mol:i}=this;let s=i.numBonds,o=!1;for(let r=1;r<=s;r++){let s=i.bondType(r);if(s!=ge.BONDTYPE_INCLINED&&s!=ge.BONDTYPE_DECLINED)continue;let a=i.bondFrom(r),l=i.bondTo(r);e[a-1]?(n[t.indexOf(a)]+=s==ge.BONDTYPE_INCLINED?1:-1,o=!0):e[l-1]&&(n[t.indexOf(l)]+=s==ge.BONDTYPE_INCLINED?-1:1,o=!0)}return o}seedFromPerspective(t,e,n){const{mol:i}=this;let s=i.numBonds,o=0,r=0,a=0,l=0;for(let t=1;t<=s;t++){let n=i.bondFrom(t),s=i.bondTo(t);if(!e[n-1]||!e[s-1])continue;let d=U(i.atomX(n)-i.atomX(s),i.atomY(n)-i.atomY(s));o+=d,a++,d>r&&(r=d,l=t)}return 0!=a&&0!=l&&(o/=a,!(r<1.02*o||(n[t.indexOf(i.bondFrom(l))]=1,n[t.indexOf(i.bondTo(l))]=1,0)))}seedFromDensity(t,e,n){const{mol:i}=this;let s=0,o=0;for(let e=0;e<t.length;e++){let n=i.atomX(t[e]),r=i.atomY(t[e]),a=0;for(let s=0;s<t.length;s++)e!=s&&(a+=1/(.001+Y(i.atomX(t[s])-n,i.atomY(t[s])-r)));a>o&&(s=t[e],o=a)}return 0!=s&&(n[t.indexOf(s)]=1,!0)}normaliseHeights(t){n.addTo(t,-n.min(t));let e=1e-6*n.max(t),i=n.idxSort(t),s=-1,o=0;for(let n=0;n<i.length;n++)(s<0||Math.abs(s-t[i[n]])>e)&&o++,s=t[i[n]],t[i[n]]=o;return n.addTo(t,-.5*(1+n.max(t))),o}expandOutward(t,e,n,i){const{mol:s}=this;let o=n.length;for(let n=0;n<o;n++)e[n]=t[n];for(let r=0;r<o;r++){let o=s.atomAdjList(n[r]);for(let s=0;s<o.length;s++)i[o[s]-1]&&(e[n.indexOf(o[s])]+=.1*t[r])}}updateCrossing(t,e,n){const{mol:i}=this;let s=i.bondFrom(t.bond1),o=i.bondTo(t.bond1),r=i.bondFrom(t.bond2),a=i.bondTo(t.bond2),d=e.indexOf(s),p=e.indexOf(o),h=e.indexOf(r),c=e.indexOf(a);if(d<0||p<0||h<0||c<0)return;let m=i.atomX(s),u=i.atomY(s),f=i.atomX(o),g=i.atomY(o),k=i.atomX(r),y=i.atomY(r),w=i.atomX(a),x=i.atomY(a),C=l.lineIntersect(m,u,f,g,k,y,w,x),v=f-m,b=g-u,A=w-k,T=x-y,M=Math.abs(v)>Math.abs(b)?(C[0]-m)/v:(C[1]-u)/b,E=Math.abs(A)>Math.abs(T)?(C[0]-k)/A:(C[1]-y)/T;if(M<0||M>1||E<0||E>1)return;let S=n[d],N=n[p],D=n[h],R=S+M*(N-S),O=D+E*(n[c]-D);t.higher=R>O?1:2}}class tn{constructor(t,e,n){this.px=t,this.py=e,this.margin=n,this.theta=0,this.stop=!1,this.hashKey=JSON.stringify([this.px,this.py])}calculate(){this.lookupCache()||(this.setupParameters(),this.stop||(this.currentScore=this.calculateScore(this.cx,this.cy,this.rw,this.rh),this.coarseDiscovery(),this.fineImprovement(),this.theta=-this.theta,this.saveCache()))}getSpline(){return l.createBezierEllipse(this.cx,this.cy,this.rw,this.rh,this.theta)}lookupCache(){let t=this.hashKey,e=tn.cacheMap.get(t);if(e){this.cx=e.cx,this.cy=e.cy,this.rw=e.rw,this.rh=e.rh,this.theta=e.theta;const{cacheVal:n}=tn;for(let e=n.length-1;e>=0;e--)if(n[e].hashKey==t){e<n.length-1&&(n.push(n[e]),n.splice(e,1));break}return!0}return!1}saveCache(){let t=this.hashKey;const{cacheVal:e,cacheMap:n}=tn;for(e.push(this),n.set(t,this);e.length>1e3;)n.delete(e[0].hashKey),e.splice(0)}setupParameters(){const t=this.psz=this.px.length,e=this.invpsz=1/t;this.cx=n.sum(this.px)*e,this.cy=n.sum(this.py)*e;let i=new Array(t),s=new Array(t);for(let e=0;e<t;e++)i[e]=Math.atan2(this.py[e]-this.cy,this.px[e]-this.cx),s[e]=U(this.px[e]-this.cx,this.py[e]-this.cy);let o=n.idxSort(i);this.px=n.idxGet(this.px,o),this.py=n.idxGet(this.py,o),i=n.idxGet(i,o),s=n.idxGet(s,o);let r=new Array(t),a=new Array(t);const l=(i,s,o)=>{for(let e=0;e<t;e++)r[e]=s[e]*Math.cos(i[e]+o),a[e]=s[e]*Math.sin(i[e]+o);let l=n.sum(r)*e,d=n.sum(a)*e,p=0,h=0;for(let e=0;e<t;e++)p+=G(r[e]-l),h+=Math.abs(a[e]-d);return h/(1+p)};let d=Number.POSITIVE_INFINITY;for(let t=0;t<360;t++){let e=t*tt,n=l(i,s,e);n<d&&(this.theta=e,d=n)}for(let t=-1;t<=1;t+=.05){let e=this.theta+t*tt,n=l(i,s,e);n<d&&(this.theta=e,d=n)}for(let e=0;e<t;e++)this.px[e]=this.cx+s[e]*Math.cos(i[e]+this.theta),this.py[e]=this.cy+s[e]*Math.sin(i[e]+this.theta);this.cx=n.sum(this.px)*e,this.cy=n.sum(this.py)*e,this.rw=this.rh=1}coarseDiscovery(){const{margin:t}=this;let e=.1*t,n=.5*e;const i=[{dx:-1,dy:0,dw:0,dh:0},{dx:1,dy:0,dw:0,dh:0},{dx:0,dy:-1,dw:0,dh:0},{dx:0,dy:1,dw:0,dh:0},{dx:0,dy:0,dw:-1,dh:0},{dx:0,dy:0,dw:1,dh:0},{dx:0,dy:0,dw:0,dh:-1},{dx:0,dy:0,dw:0,dh:1}];for(let t=0;t<1e3;t++){let t=!1,s=this.currentScore,o=this.cx,r=this.cy,a=this.rw,l=this.rh;for(let d of i){let i=this.cx+d.dx*e,p=this.cy+d.dy*e,h=this.rw+d.dw*n,c=this.rh+d.dh*n,m=this.calculateScore(i,p,h,c);m>s&&!$(m,s)&&(t=!0,s=m,o=i,r=p,a=h,l=c)}if(!t)break;this.currentScore=s,this.cx=o,this.cy=r,this.rw=a,this.rh=l}}fineImprovement(){const{margin:t}=this;let e=.1*t,n=.5*e;const i=2/3;for(let t=0;t<20;t++){let s=!1,o=this.currentScore,r=this.cx,a=this.cy,l=this.rw,d=this.rh;for(let t=-1;t<=1;t++){let i=this.cx+t*e;for(let p=-1;p<=1;p++){let h=this.cy+p*e;for(let e=-1;e<=1;e++){let c=this.rw+e*n;for(let m=-1;m<=1;m++){let u=this.rh+m*n;if(0==t&&0==p&&0==e&&0==m)continue;let f=this.calculateScore(i,h,c,u);f>o&&!$(f,o)&&(s=!0,o=f,r=i,a=h,l=c,d=u)}}}}s?(this.currentScore=o,this.cx=r,this.cy=a,this.rw=l,this.rh=d):(t++,e*=i,n*=i)}}calculateScore(t,e,i,s){const{px:o,py:r,margin:a}=this,d=o.length;let p=Z/24,h=n.numberArray(Number.POSITIVE_INFINITY,d);for(let n=0;n<24;n++){let c=n*p,m=Math.cos(c),u=Math.sin(c),f=i*m*1-s*u*0,g=i*m*0+s*u*1,k=U(f,g)+a,y=Math.atan2(g,f),w=t+k*Math.cos(y),x=e+k*Math.sin(y);for(let n=0;n<d;n++){let i=n==d-1?0:n+1;if(l.doLineSegsIntersect(t,e,w,x,o[n],r[n],o[i],r[i]))return 0}for(let t=0;t<d;t++)h[t]=Math.min(h[t],Y(w-o[t],x-r[t]))}let c=0;for(let t of h)c+=1/(1+Math.sqrt(t));return i*s+c}}tn.cacheVal=[],tn.cacheMap=new Map;class en{constructor(){this.UNITS_PER_EM=2048,this.INV_UNITS_PER_EM=1/this.UNITS_PER_EM,this.PANOSE_1="2 11 6 4 3 5 4 4 2 4",this.ASCENT=1638,this.DESCENT=-410,this.MISSING_HORZ=2048,this.MISSING_DATA="M256 0v1536h1536v-1536h-1536zM384 128h1280v1280h-1280v-1280z",this.ASCENT_FUDGE=.9,this.UNICODE=[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],this.HORIZ_ADV_X=[720,806,940,1676,1302,2204,1488,550,930,930,1302,1676,745,930,745,930,1302,1302,1302,1302,1302,1302,1302,1302,1302,1302,930,930,1676,1676,1676,1117,2048,1400,1404,1430,1578,1295,1177,1588,1539,862,931,1419,1140,1726,1532,1612,1235,1612,1424,1400,1262,1499,1400,2025,1403,1260,1403,930,930,930,1676,1302,1302,1230,1276,1067,1276,1220,720,1276,1296,562,705,1212,562,1992,1296,1243,1276,1276,874,1067,807,1296,1212,1676,1212,1212,1076,1300,930,1300,1676,720,806,1302,1302,1302,1302,930,1302,1302,2048,1117,1320,1676,930,2048,1302,1110,1676,1110,1110,1302,1314,1302,745,1302,1110,1117,1320,2048,2048,2048,1117,1400,1400,1400,1400,1400,1400,2016,1430,1295,1295,1295,1295,862,862,862,862,1588,1532,1612,1612,1612,1612,1612,1676,1612,1499,1499,1499,1499,1260,1240,1270,1230,1230,1230,1230,1230,1230,1956,1067,1220,1220,1220,1220,562,562,562,562,1253,1296,1243,1243,1243,1243,1243,1676,1243,1296,1296,1296,1296,1212,1276,930,1302,1302,1400,930,1538,1782,1105,1804,1543,1859,562,1400,1404,1160,1440,1295,1403,1539,1612,862,1419,1404,1726,1532,1329,1612,1539,1235,1377,1262,1260,1677,1403,1783,1676,862,1260,1276,1050,1296,562,1293,1276,1270,1212,1245,1050,937,1296,1278,562,1212,1212,1310,1212,1030,1243,1305,1280,1040,1291,1016,1293,1618,1208,1683,1666,562,1293,1243,1293,1666,1302,1489,1676,1489,1676,740,745,1676,2048,1302,1676,1676,1676,1676],this.GLYPH_DATA=["","M515 1489l-26 -1079h-170l-28 1079h224zM505 0h-204v211h204v-211z","M772 1556l-43 -579h-132l-43 579h218zM386 1556l-43 -579h-132l-43 579h218z","M1481 932h-333l-92 -376h308v-135h-343l-104 -421h-129l104 421h-270l-104 -421h-129l104 421h-298v135h333l92 376h-308v135h343l105 422h129l-105 -422h270l105 422h129l-105 -422h298v-135zM1022 934h-274l-94 -380h274z","M1160 380q0 -155 -121 -257.5t-317 -121.5v-362h-118v357q-132 1 -248 25.5t-201 63.5v198h16q19 -14 68 -40.5t95 -43.5q52 -19 121.5 -35.5t148.5 -19.5v433q-40 8 -74 15.5t-63 15.5q-163 41 -234 123.5t-71 203.5q0 148 116.5 250t325.5 119v272h118v-270 q101 -2 207 -24t178 -51v-196h-14q-75 46 -156.5 81.5t-214.5 44.5v-431q30 -5 65 -13.5t61 -13.5q149 -32 230.5 -110t81.5 -213zM604 747v413q-107 -8 -180 -58.5t-73 -140.5q0 -91 54 -137t199 -77zM971 354q0 94 -58.5 137.5t-190.5 68.5v-414q120 12 184.5 61t64.5 147 z","M884 1076q0 -224 -94.5 -333t-272.5 -109q-182 0 -275 109t-93 332q0 224 95 333t273 109q181 0 274 -110t93 -331zM1575 1489l-780 -1489h-165l780 1489h165zM2055 413q0 -224 -95 -333t-273 -109q-181 0 -274 110t-93 331q0 224 94.5 333t272.5 109q182 0 275 -109 t93 -332zM706 1076q0 172 -44.5 240t-144.5 68q-102 0 -146 -68t-44 -241t44 -240.5t146 -67.5q100 0 144.5 67.5t44.5 241.5zM1877 413q0 172 -44.5 240t-144.5 68q-102 0 -146 -68t-44 -241t44 -240.5t146 -67.5q100 0 144.5 67.5t44.5 241.5z","M792 1191q0 95 -56.5 149.5t-144.5 54.5q-92 0 -150 -61.5t-58 -150.5q0 -75 39.5 -133t170.5 -137q98 35 148.5 102.5t50.5 175.5zM986 315l-478 466q-31 -15 -62 -39.5t-62 -66.5q-28 -39 -46 -94t-18 -124q0 -146 85.5 -235.5t242.5 -89.5q93 0 184.5 45.5 t153.5 137.5zM1287 909v-96q0 -96 -25 -216t-85 -229l378 -368h-246l-229 224q-115 -142 -235 -198.5t-247 -56.5q-208 0 -345.5 121.5t-137.5 318.5q0 92 26 159t61 116q35 47 87 88.5t105 72.5q-110 72 -158.5 145t-48.5 184q0 67 26.5 127.5t79.5 110.5q50 48 130.5 78 t177.5 30q173 0 280 -87.5t107 -221.5q0 -44 -12 -99.5t-41 -99.5q-32 -49 -91 -94t-153 -77l371 -362q14 40 21 88t8 100q2 56 1.5 125t-0.5 117h195z","M386 1556l-43 -579h-136l-43 579h222z","M783 -412h-229q-177 203 -275 443t-98 541t98 541t275 443h229v-10q-81 -73 -154.5 -168.5t-136.5 -222.5q-60 -123 -97.5 -271t-37.5 -312q0 -171 36.5 -313t98.5 -270q60 -123 137 -222.5t154 -168.5v-10z","M749 572q0 -301 -98 -541t-275 -443h-229v10q77 69 154.5 168.5t136.5 222.5q62 128 98.5 270t36.5 313q0 164 -37 312t-98 271q-63 127 -136.5 222.5t-154.5 168.5v10h229q177 -203 275 -443t98 -541z","M1137 887l-64 -110l-362 213l6 -360h-129l5 360l-361 -214l-65 110l381 207l-381 207l65 110l362 -213l-6 359h129l-7 -359l363 212l64 -110l-380 -205z","M1466 572h-545v-545h-166v545h-545v160h545v545h166v-545h545v-160z","M575 285l-282 -655h-146l174 655h254z","M777 561h-624v181h624v-181z","M492 0h-239v285h239v-285z","M860 1556l-717 -1860h-173l714 1860h176z","M1167 745q0 -401 -125.5 -588.5t-389.5 -187.5q-268 0 -391.5 190t-123.5 584q0 397 125 586.5t390 189.5q268 0 391.5 -192.5t123.5 -581.5zM904 291q35 81 47.5 190.5t12.5 263.5q0 152 -12.5 264t-48.5 190q-35 77 -95.5 116t-155.5 39q-94 0 -155.5 -39t-97.5 -118 q-34 -74 -46.5 -193t-12.5 -261q0 -156 11 -261t47 -188q33 -78 93.5 -119t160.5 -41q94 0 156 39t96 118z","M1084 0h-806v152h310v998h-310v136q63 0 135 10.5t109 30.5q46 25 72.5 63.5t30.5 103.5h155v-1342h304v-152z","M1169 0h-1008v209q105 90 210.5 180t196.5 179q192 186 263 295.5t71 236.5q0 116 -76.5 181.5t-213.5 65.5q-91 0 -197 -32t-207 -98h-10v210q71 35 189.5 64t229.5 29q229 0 359 -110.5t130 -299.5q0 -85 -21.5 -158.5t-63.5 -139.5q-39 -62 -91.5 -122t-127.5 -133 q-107 -105 -221 -203.5t-213 -182.5h801v-171z","M1038 717q48 -43 79 -108t31 -168q0 -102 -37 -187t-104 -148q-75 -70 -176.5 -103.5t-222.5 -33.5q-124 0 -244 29.5t-197 64.5v209h15q85 -56 200 -93t222 -37q63 0 134 21t115 62q46 44 68.5 97t22.5 134q0 80 -25.5 132.5t-70.5 82.5q-45 31 -109 42.5t-138 11.5h-90 v166h70q152 0 242.5 63.5t90.5 185.5q0 54 -23 94.5t-64 66.5q-43 26 -92 36t-111 10q-95 0 -202 -34t-202 -96h-10v209q71 35 189.5 64.5t229.5 29.5q109 0 192 -20t150 -64q72 -48 109 -116t37 -159q0 -124 -87.5 -216.5t-206.5 -116.5v-14q48 -8 110 -33.5t105 -63.5z ","M1203 419h-221v-419h-192v419h-713v230l721 840h184v-910h221v-160zM790 579v672l-577 -672h577z","M1157 473q0 -104 -38 -199t-104 -160q-72 -70 -171.5 -107.5t-230.5 -37.5q-122 0 -235 25.5t-191 61.5v211h14q82 -52 192 -88.5t216 -36.5q71 0 137.5 20t118.5 70q44 43 66.5 103t22.5 139q0 77 -26.5 130t-73.5 85q-52 38 -126.5 53.5t-166.5 15.5q-88 0 -169.5 -12 t-140.5 -24v767h896v-175h-703v-396q43 4 88 6t78 2q121 0 212 -20.5t167 -72.5q80 -55 124 -142t44 -218z","M1191 483q0 -227 -149.5 -370.5t-366.5 -143.5q-110 0 -200 34t-159 101q-86 83 -132.5 220t-46.5 330q0 198 42.5 351t135.5 272q88 113 227 176.5t324 63.5q59 0 99 -5t81 -18v-191h-10q-28 15 -84.5 28.5t-115.5 13.5q-215 0 -343 -134.5t-149 -363.5 q84 51 165.5 77.5t188.5 26.5q95 0 167.5 -17.5t148.5 -70.5q88 -61 132.5 -154t44.5 -226zM988 475q0 93 -27.5 154t-90.5 106q-46 32 -102 42t-117 10q-85 0 -158 -20t-150 -62q-2 -22 -3 -42.5t-1 -51.5q0 -158 32.5 -249.5t89.5 -144.5q46 -44 99.5 -64.5t116.5 -20.5 q145 0 228 88.5t83 254.5z","M1173 1266l-674 -1266h-214l717 1314h-848v175h1019v-223z","M1180 415q0 -193 -150.5 -321t-378.5 -128q-242 0 -385.5 125t-143.5 320q0 124 72 224.5t203 159.5v6q-120 64 -177.5 140t-57.5 190q0 168 138 280t351 112q223 0 356 -107t133 -272q0 -101 -63 -198.5t-185 -152.5v-6q140 -60 214 -148t74 -224zM943 1142 q0 107 -82.5 170.5t-210.5 63.5q-126 0 -206.5 -60t-80.5 -162q0 -72 40.5 -124.5t122.5 -93.5q37 -18 106.5 -47t135.5 -48q99 66 137 137t38 164zM974 396q0 92 -40.5 147.5t-158.5 111.5q-47 22 -103 41t-149 53q-90 -49 -144.5 -133t-54.5 -190q0 -135 93 -223t236 -88 q146 0 233.5 75t87.5 206z","M1167 834q0 -195 -44.5 -354t-134.5 -271q-91 -114 -228 -176t-322 -62q-52 0 -98 5.5t-82 17.5v191h10q29 -15 82 -28.5t118 -13.5q221 0 346.5 132.5t145.5 365.5q-93 -56 -175 -80t-179 -24q-92 0 -166.5 18t-149.5 70q-88 61 -132.5 155t-44.5 225q0 228 150 371 t366 143q108 0 200 -33.5t161 -100.5q85 -83 131 -213.5t46 -337.5zM965 877q0 155 -32 249t-88 146q-47 45 -101 64.5t-117 19.5q-144 0 -227.5 -90t-83.5 -253q0 -95 27 -155t91 -105q45 -31 99 -41.5t120 -10.5q78 0 158 21t150 61q1 21 2.5 41.5t1.5 52.5z","M585 832h-239v285h239v-285zM585 0h-239v285h239v-285z","M585 832h-239v285h239v-285zM658 285l-282 -655h-146l174 655h254z","M1408 77l-1154 513v124l1154 513v-180l-910 -395l910 -395v-180z","M1431 782h-1186v160h1186v-160zM1431 362h-1186v160h1186v-160z","M1422 590l-1154 -513v180l910 395l-910 395v180l1154 -513v-124z","M1005 1139q0 -98 -35 -174.5t-92 -135.5q-56 -57 -129 -107t-155 -97v-225h-179v305q65 37 140.5 81t123.5 89q58 52 90 107.5t32 141.5q0 113 -76.5 168.5t-197.5 55.5q-108 0 -204.5 -34t-152.5 -69h-10v204q70 27 177.5 48.5t203.5 21.5q215 0 339.5 -104.5 t124.5 -275.5zM610 0h-204v211h204v-211z","M1870 663q0 -139 -40.5 -269t-115.5 -237h-440l-27 116q-74 -60 -142 -92t-156 -32q-168 0 -268.5 127t-100.5 355q0 227 123 362t294 135q73 0 129 -16.5t121 -49.5v48h159v-842h243q42 75 63.5 187.5t21.5 201.5q0 164 -45.5 298t-133.5 230t-218 147.5t-295 51.5 q-160 0 -292.5 -58t-227.5 -156q-96 -98 -150.5 -234.5t-54.5 -290.5q0 -165 52 -301.5t147 -233.5q99 -101 232 -152.5t290 -51.5q86 0 177.5 11t175.5 35v-142q-97 -21 -181 -28.5t-173 -7.5q-186 0 -345 63.5t-273 177.5q-115 115 -179 276t-64 356q0 185 67 344.5 t183 276.5t275 184t340 67q196 0 350 -62t260 -174t162.5 -269.5t56.5 -350.5zM1245 408v518q-63 29 -113 41.5t-107 12.5q-129 0 -202 -90t-73 -256q0 -163 58 -246.5t181 -83.5q67 0 134 31t122 73z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523z","M1323 458q0 -111 -42 -196t-113 -140q-84 -66 -184.5 -94t-255.5 -28h-528v1489h441q163 0 244 -12t155 -50q82 -43 119 -110.5t37 -161.5q0 -106 -54 -180.5t-144 -119.5v-8q151 -31 238 -132.5t87 -256.5zM990 1129q0 54 -18 91t-58 60q-47 27 -114 33.5t-166 6.5h-236 v-430h256q93 0 148 9.5t102 39.5t66.5 77.5t19.5 112.5zM1117 450q0 90 -27 143t-98 90q-48 25 -116.5 32.5t-166.5 7.5h-311v-554h262q130 0 213 13.5t136 49.5q56 39 82 89t26 129z","M1350 108q-55 -24 -99.5 -45t-116.5 -44q-61 -19 -132.5 -32.5t-157.5 -13.5q-162 0 -294.5 45.5t-230.5 142.5q-96 95 -150 241.5t-54 340.5q0 184 52 329t150 245q95 97 229.5 148t298.5 51q120 0 239.5 -29t265.5 -102v-235h-15q-123 103 -244 150t-259 47 q-113 0 -203.5 -36.5t-161.5 -113.5q-69 -75 -107.5 -189.5t-38.5 -264.5q0 -157 42.5 -270t109.5 -184q70 -74 163.5 -109.5t197.5 -35.5q143 0 268 49t234 147h14v-232z","M1458 743q0 -203 -88.5 -368t-235.5 -256q-102 -63 -227.5 -91t-330.5 -28h-376v1489h372q218 0 346.5 -31.5t217.5 -86.5q152 -95 237 -253t85 -375zM1251 746q0 175 -61 295t-182 189q-88 50 -187 69.5t-237 19.5h-186v-1149h186q143 0 249.5 21t195.5 78 q111 71 166.5 187t55.5 290z","M1181 0h-981v1489h981v-176h-783v-408h783v-176h-783v-553h783v-176z","M1151 1313h-753v-420h647v-176h-647v-717h-198v1489h951v-176z","M1442 110q-122 -56 -266.5 -97.5t-279.5 -41.5q-174 0 -319 48t-247 144q-103 97 -159 242.5t-56 340.5q0 357 208.5 563.5t572.5 206.5q127 0 259.5 -30.5t285.5 -103.5v-235h-18q-31 24 -90 63t-116 65q-69 31 -156.5 51.5t-198.5 20.5q-250 0 -395.5 -160.5 t-145.5 -434.5q0 -289 152 -449.5t414 -160.5q96 0 191.5 19t167.5 49v365h-399v174h595v-639z","M1339 0h-198v729h-743v-729h-198v1489h198v-584h743v584h198v-1489z","M725 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152z","M746 387q0 -196 -119.5 -302t-320.5 -106q-48 0 -128 8.5t-134 20.5v185h11q41 -14 101 -29t123 -15q92 0 146.5 21t80.5 60q27 40 34.5 98t7.5 134v869h-315v158h513v-1102z","M1397 0h-257l-589 663l-148 -158v-505h-198v1489h198v-777l723 777h240l-665 -700z","M1142 0h-942v1489h198v-1313h744v-176z","M1526 0h-198v1283l-414 -873h-118l-411 873v-1283h-185v1489h270l397 -829l384 829h275v-1489z","M1336 0h-245l-706 1332v-1332h-185v1489h307l644 -1216v1216h185v-1489z","M1310 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1292 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5z","M1174 1039q0 -99 -34.5 -183.5t-96.5 -146.5q-77 -77 -182 -115.5t-265 -38.5h-198v-555h-198v1489h404q134 0 227 -22.5t165 -70.5q85 -57 131.5 -142t46.5 -215zM968 1034q0 77 -27 134t-82 93q-48 31 -109.5 44.5t-155.5 13.5h-196v-595h167q120 0 195 21.5t122 68.5 q47 48 66.5 101t19.5 119z","M1528 -365q-60 -15 -118.5 -21.5t-119.5 -6.5q-174 0 -279.5 95.5t-114.5 273.5q-24 -4 -46.5 -5.5t-43.5 -1.5q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5 q91 -100 139.5 -245t48.5 -329q0 -273 -111.5 -460t-299.5 -262q4 -114 54 -177t182 -63q41 0 97.5 12.5t80.5 22.5h27v-182zM1292 744q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5z","M1432 0h-257l-498 592h-279v-592h-198v1489h417q135 0 225 -17.5t162 -62.5q81 -51 126.5 -128.5t45.5 -196.5q0 -161 -81 -269.5t-223 -163.5zM969 1070q0 64 -22.5 113.5t-74.5 83.5q-43 29 -102 40.5t-139 11.5h-233v-562h200q94 0 164 16.5t119 61.5q45 42 66.5 96.5 t21.5 138.5z","M1282 425q0 -87 -40.5 -172t-113.5 -144q-80 -64 -186.5 -100t-256.5 -36q-161 0 -289.5 30t-261.5 89v248h14q113 -94 261 -145t278 -51q184 0 286.5 69t102.5 184q0 99 -48.5 146t-147.5 73q-75 20 -162.5 33t-185.5 33q-198 42 -293.5 143.5t-95.5 264.5 q0 187 158 306.5t401 119.5q157 0 288 -30t232 -74v-234h-14q-85 72 -223.5 119.5t-283.5 47.5q-159 0 -255.5 -66t-96.5 -170q0 -93 48 -146t169 -81q64 -14 182 -34t200 -41q166 -44 250 -133t84 -249z","M1262 1313h-532v-1313h-198v1313h-532v176h1262v-176z","M1321 598q0 -162 -35.5 -282.5t-116.5 -200.5q-77 -76 -180 -111t-240 -35q-140 0 -244 37t-175 109q-81 82 -116.5 198t-35.5 285v891h198v-901q0 -121 16.5 -191t55.5 -127q44 -65 119.5 -98t181.5 -33q107 0 182 32.5t120 98.5q39 57 55.5 130.5t16.5 182.5v906h198 v-891z","M1374 1489l-542 -1489h-264l-542 1489h212l467 -1310l467 1310h202z","M1933 1489l-387 -1489h-223l-313 1236l-306 -1236h-218l-394 1489h203l313 -1238l308 1238h201l311 -1250l311 1250h194z","M1336 1489l-514 -736l513 -753h-229l-406 613l-416 -613h-216l519 744l-507 745h228l401 -605l410 605h217z","M1254 1489l-524 -836v-653h-198v632l-526 857h219l407 -666l411 666h211z","M1288 0h-1162v184l913 1129h-879v176h1106v-179l-922 -1134h944v-176z","M759 -392h-520v1948h520v-143h-346v-1662h346v-143z","M960 -304h-173l-717 1860h176z","M691 -392h-520v143h346v1662h-346v143h520v-1948z","M1490 684h-198l-455 627l-454 -629h-197l589 807h126z","M1306 -300h-1310v120h1310v-120z","M762 1302h-149l-273 374h243z","M1053 0h-187v119q-25 -17 -67.5 -47.5t-82.5 -48.5q-47 -23 -108 -38.5t-143 -15.5q-151 0 -256 100t-105 255q0 127 54.5 205.5t155.5 123.5q102 45 245 61t307 24v29q0 64 -22.5 106t-64.5 66q-40 23 -96 31t-117 8q-74 0 -165 -19.5t-188 -56.5h-10v191q55 15 159 33 t205 18q118 0 205.5 -19.5t151.5 -66.5q63 -46 96 -119t33 -181v-758zM866 275v311q-86 -5 -202.5 -15t-184.5 -29q-81 -23 -131 -71.5t-50 -133.5q0 -96 58 -144.5t177 -48.5q99 0 181 38.5t152 92.5z","M1168 567q0 -140 -39.5 -252t-106.5 -188q-71 -79 -156 -118.5t-187 -39.5q-95 0 -166 22.5t-140 60.5l-12 -52h-176v1556h188v-556q79 65 168 106.5t200 41.5q198 0 312.5 -152t114.5 -429zM974 562q0 200 -66 303.5t-213 103.5q-82 0 -166 -35.5t-156 -91.5v-640 q80 -36 137.5 -50t130.5 -14q156 0 244.5 102.5t88.5 321.5z","M1011 70q-94 -45 -178.5 -70t-179.5 -25q-121 0 -222 35.5t-173 107.5q-73 72 -113 182t-40 257q0 274 150.5 430t397.5 156q96 0 188.5 -27t169.5 -66v-209h-10q-86 67 -177.5 103t-178.5 36q-160 0 -252.5 -107.5t-92.5 -315.5q0 -202 90.5 -310.5t254.5 -108.5 q57 0 116 15t106 39q41 21 77 44.5t57 40.5h10v-207z","M1091 0h-188v117q-81 -70 -169 -109t-191 -39q-200 0 -317.5 154t-117.5 427q0 142 40.5 253t109.5 189q68 76 158.5 116t187.5 40q88 0 156 -18.5t143 -57.5v484h188v-1556zM903 275v641q-76 34 -136 47t-131 13q-158 0 -246 -110t-88 -312q0 -199 68 -302.5t218 -103.5 q80 0 162 35.5t153 91.5z","M1120 539h-823q0 -103 31 -179.5t85 -125.5q52 -48 123.5 -72t157.5 -24q114 0 229.5 45.5t164.5 89.5h10v-205q-95 -40 -194 -67t-208 -27q-278 0 -434 150.5t-156 427.5q0 274 149.5 435t393.5 161q226 0 348.5 -132t122.5 -375v-102zM937 683q-1 148 -74.5 229 t-223.5 81q-151 0 -240.5 -89t-101.5 -221h640z","M786 1374h-10q-31 9 -81 18.5t-88 9.5q-121 0 -175.5 -53.5t-54.5 -193.5v-38h339v-158h-333v-959h-188v959h-127v158h127v37q0 199 99 305.5t286 106.5q63 0 113.5 -6t92.5 -14v-172z","M1091 127q0 -284 -129 -417t-397 -133q-89 0 -173.5 12.5t-166.5 35.5v192h10q46 -18 146 -44.5t200 -26.5q96 0 159 23t98 64q35 39 50 94t15 123v102q-85 -68 -162.5 -101.5t-197.5 -33.5q-200 0 -317.5 144.5t-117.5 407.5q0 144 40.5 248.5t110.5 180.5 q65 71 158 110.5t185 39.5q97 0 162.5 -19.5t138.5 -59.5l12 48h176v-990zM903 307v609q-75 34 -139.5 48.5t-128.5 14.5q-155 0 -244 -104t-89 -302q0 -188 66 -285t219 -97q82 0 164.5 31.5t151.5 84.5z","M1119 0h-188v636q0 77 -9 144.5t-33 105.5q-25 42 -72 62.5t-122 20.5q-77 0 -161 -38t-161 -97v-834h-188v1556h188v-563q88 73 182 114t193 41q181 0 276 -109t95 -314v-725z","M387 1304h-212v195h212v-195zM375 0h-188v1117h188v-1117z","M533 1304h-212v195h212v-195zM521 -27q0 -196 -100 -296t-268 -100q-40 0 -105.5 8t-109.5 20v179h10q28 -11 75.5 -25t92.5 -14q72 0 116 20t66 60t28.5 96.5t6.5 137.5v900h-233v158h421v-1144z","M1199 0h-248l-448 489l-122 -116v-373h-188v1556h188v-998l543 559h237l-519 -516z","M375 0h-188v1556h188v-1556z","M1815 0h-188v636q0 72 -6.5 139t-27.5 107q-23 43 -66 65t-124 22q-79 0 -158 -39.5t-158 -100.5q3 -23 5 -53.5t2 -60.5v-715h-188v636q0 74 -6.5 140.5t-27.5 106.5q-23 43 -66 64.5t-124 21.5q-77 0 -154.5 -38t-154.5 -97v-834h-188v1117h188v-124q88 73 175.5 114 t186.5 41q114 0 193.5 -48t118.5 -133q114 96 208 138.5t201 42.5q184 0 271.5 -111.5t87.5 -311.5v-725z","M1119 0h-188v636q0 77 -9 144.5t-33 105.5q-25 42 -72 62.5t-122 20.5q-77 0 -161 -38t-161 -97v-834h-188v1117h188v-124q88 73 182 114t193 41q181 0 276 -109t95 -314v-725z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z","M1168 572q0 -136 -39 -248.5t-110 -190.5q-66 -74 -155.5 -114.5t-189.5 -40.5q-87 0 -157.5 19t-143.5 59v-468h-188v1529h188v-117q75 63 168.5 105.5t199.5 42.5q202 0 314.5 -152.5t112.5 -423.5zM974 567q0 202 -69 302t-212 100q-81 0 -163 -35t-157 -92v-633 q80 -36 137.5 -49t130.5 -13q157 0 245 106t88 314z","M1091 -412h-188v538q-87 -75 -173 -111.5t-186 -36.5q-199 0 -317.5 153.5t-118.5 423.5q0 144 41.5 254.5t109.5 185.5q66 73 155 113t188 40q90 0 159.5 -20t141.5 -59l12 48h176v-1529zM903 284v632q-78 35 -138 49t-130 14q-163 0 -248 -110.5t-85 -304.5 q0 -196 68.5 -301.5t215.5 -105.5q82 0 164 35.5t153 91.5z","M882 912h-10q-42 10 -81.5 14.5t-93.5 4.5q-87 0 -168 -38.5t-156 -99.5v-793h-188v1117h188v-165q112 90 197.5 127.5t174.5 37.5q49 0 71 -2.5t66 -9.5v-193z","M983 322q0 -153 -126.5 -251t-345.5 -98q-124 0 -227.5 29.5t-173.5 64.5v211h10q89 -67 198 -106.5t209 -39.5q124 0 194 40t70 126q0 66 -38 100t-146 58q-40 9 -104.5 21t-117.5 26q-147 39 -208.5 114.5t-61.5 185.5q0 69 28.5 130t86.5 109q56 47 142.5 74.5 t193.5 27.5q100 0 202.5 -24.5t170.5 -59.5v-201h-10q-72 53 -175 89.5t-202 36.5q-103 0 -174 -39.5t-71 -117.5q0 -69 43 -104q42 -35 136 -57q52 -12 116.5 -24t107.5 -22q131 -30 202 -103q71 -74 71 -196z","M765 10q-53 -14 -115.5 -23t-111.5 -9q-171 0 -260 92t-89 295v594h-127v158h127v321h188v-321h388v-158h-388v-509q0 -88 4 -137.5t28 -92.5q22 -40 60.5 -58.5t117.5 -18.5q46 0 96 13.5t72 22.5h10v-169z","M1111 0h-188v124q-95 -75 -182 -115t-192 -40q-176 0 -274 107.5t-98 315.5v725h188v-636q0 -85 8 -145.5t34 -103.5q27 -44 70 -64t125 -20q73 0 159.5 38t161.5 97v834h188v-1117z","M1151 1117l-452 -1117h-189l-449 1117h204l346 -889l343 889h197z","M1590 1117l-291 -1117h-174l-287 861l-285 -861h-173l-294 1117h196l205 -865l279 865h155l286 -865l194 865h189z","M1152 0h-237l-317 429l-319 -429h-219l436 557l-432 560h237l315 -422l316 422h220l-439 -550z","M1151 1117l-652 -1529h-201l208 466l-445 1063h204l343 -828l346 828h197z","M995 0h-902v139l651 821h-637v157h871v-134l-654 -824h671v-159z","M1113 -392h-150q-179 0 -290.5 99.5t-111.5 287.5v149q0 169 -83 264.5t-254 95.5h-51v156h51q171 0 254 95.5t83 264.5v149q0 188 111.5 287.5t290.5 99.5h150v-138h-114q-136 0 -197.5 -63t-61.5 -203v-175q0 -139 -77 -233.5t-214 -149.5v-24q137 -55 214 -149.5 t77 -233.5v-175q0 -140 61.5 -203t197.5 -63h114v-138z","M552 -392h-174v1948h174v-1948z","M1127 504h-51q-171 0 -254 -95.5t-83 -264.5v-149q0 -188 -111.5 -287.5t-290.5 -99.5h-150v138h114q136 0 197.5 63t61.5 203v175q0 139 77 233.5t214 149.5v24q-137 55 -214 149.5t-77 233.5v175q0 140 -61.5 203t-197.5 63h-114v138h150q179 0 290.5 -99.5 t111.5 -287.5v-149q0 -169 83 -264.5t254 -95.5h51v-156z","M1489 927q-2 -99 -22.5 -195t-65.5 -171q-46 -77 -111 -121t-165 -44q-94 0 -167 39.5t-157 141.5q-102 125 -148 157t-96 32q-94 0 -144 -87.5t-59 -283.5h-167q2 100 22.5 194.5t64.5 171.5q43 74 112 119.5t165 45.5q93 0 166.5 -38.5t158.5 -142.5q80 -98 131 -143.5 t112 -45.5q103 0 151.5 101t51.5 270h167z","","M505 1278h-204v211h204v-211zM515 0h-224l26 1079h170z","M1120 74q-71 -30 -161 -53.5t-194 -26.5v-355h-118v359q-227 21 -357.5 165t-130.5 394q0 242 133.5 391.5t354.5 171.5v355h118v-351q104 -3 197 -25t158 -53v-203h-11q-55 44 -142 85t-202 50v-839q120 10 206.5 52.5t137.5 83.5h11v-201zM647 142v834 q-135 -20 -216 -125t-81 -294q0 -181 76 -286t221 -129z","M1163 0h-1026v207q118 32 169.5 126.5t51.5 279.5h-176v138h176v310q0 200 126.5 328.5t331.5 128.5q105 0 181 -17t140 -34v-206h-10q-62 42 -138 66t-162 24q-140 0 -209.5 -82.5t-69.5 -226.5v-291h415v-138h-415v-61q0 -126 -62 -219.5t-160 -150.5v-11h837v-171z ","M1168 257l-110 -110l-236 234q-44 -26 -81 -37t-89 -11q-46 0 -89.5 12.5t-79.5 35.5l-236 -236l-109 113l233 234q-23 37 -35 81.5t-12 87.5q0 52 11 88.5t37 79.5l-234 237l111 110l235 -235q36 23 79.5 35.5t88.5 12.5q44 0 88 -12t81 -35l234 234l113 -109l-235 -237 q24 -38 36 -79.5t12 -89.5q0 -45 -12.5 -89t-35.5 -80zM832 661q0 73 -52.5 129t-127.5 56q-73 0 -126.5 -55t-53.5 -130q0 -74 52.5 -129.5t127.5 -55.5q73 0 126.5 54.5t53.5 130.5z","M1191 1489l-448 -831v-94h372v-138h-370v-426h-188v426h-370v138h372v73l-451 852h212l332 -659l336 659h203z","M552 758h-174v798h174v-798zM552 -392h-174v798h174v-798z","M1128 601q0 -106 -59 -187t-158 -136v-7q97 -46 141 -118.5t44 -162.5q0 -77 -33 -146t-98 -119q-72 -56 -169 -83t-221 -27q-87 0 -170.5 13.5t-175.5 44.5v194h10q79 -37 169 -62t198 -25q134 0 215 48.5t81 135.5q0 56 -19.5 88.5t-64.5 57.5q-41 23 -113 41.5 t-154 38.5q-214 52 -296 133q-83 81 -83 210q0 98 57 182.5t159 141.5v7q-101 48 -143 121t-42 162q0 81 32 146.5t99 117.5q64 50 163.5 79t227.5 29q87 0 171 -14t175 -43v-194h-10q-58 27 -152.5 57t-215.5 30q-127 0 -211.5 -46t-84.5 -133q0 -57 21.5 -92.5t64.5 -58.5 t109 -41.5t157 -39.5q200 -46 290 -125q89 -79 89 -218zM881 399q28 33 43 65.5t15 90.5q0 51 -16.5 86t-45.5 58q-28 24 -67 39.5t-83 27.5q-39 11 -85.5 21.5t-116.5 30.5q-18 -9 -49 -31.5t-53 -46.5q-24 -26 -43 -69t-19 -92q0 -50 15.5 -85t44.5 -59q27 -23 67.5 -39 t84.5 -27q38 -10 86 -22t115 -31q20 11 53 34.5t54 48.5z","M958 1304h-199v195h199v-195zM545 1304h-199v195h199v-195z","M1889 655q0 -358 -253.5 -611.5t-611.5 -253.5t-611.5 253.5t-253.5 611.5t253.5 611.5t611.5 253.5t611.5 -253.5t253.5 -611.5zM1773 655q0 310 -219.5 532t-529.5 222t-529.5 -222t-219.5 -532t219.5 -532t529.5 -222t529.5 222t219.5 532zM1375 258 q-86 -39 -165.5 -58.5t-157.5 -19.5q-227 0 -359 123t-132 357q0 225 134.5 354t356.5 129q89 0 175 -24t148 -52v-181h-16q-54 40 -138.5 75t-173.5 35q-142 0 -221.5 -85.5t-79.5 -250.5q0 -159 76.5 -246t224.5 -87q83 0 161.5 29t150.5 81h16v-179z","M944 554h-170v94q-28 -20 -52.5 -38.5t-68.5 -37.5q-45 -20 -85.5 -30.5t-113.5 -10.5q-128 0 -215.5 85t-87.5 217q0 106 46.5 173.5t123.5 103.5q78 36 197.5 51.5t255.5 21.5v18q0 53 -18 85t-51 51q-34 18 -77.5 23t-91.5 5q-84 0 -168 -24t-123 -38h-14v172 q45 13 137 29t169 16q217 0 312 -84.5t95 -243.5v-638zM774 796v245q-69 -4 -160.5 -12t-145.5 -23q-64 -18 -103 -56.5t-39 -106.5q0 -76 45.5 -114t139.5 -38q82 0 147.5 33.5t115.5 71.5z","M1146 191l-528 419v85l528 418v-188l-357 -273l357 -273v-188zM716 162l-550 446v89l550 445v-196l-371 -294l371 -294v-196z","M1456 57h-171v545h-1075v160h1246v-705z","M777 561h-624v181h624v-181z","M1889 655q0 -358 -253.5 -611.5t-611.5 -253.5t-611.5 253.5t-253.5 611.5t253.5 611.5t611.5 253.5t611.5 -253.5t253.5 -611.5zM1773 655q0 310 -219.5 532t-529.5 222t-529.5 -222t-219.5 -532t219.5 -532t529.5 -222t529.5 222t219.5 532zM1581 215h-223l-331 355 h-162v-355h-165v915h312q94 0 155 -8t120 -39q63 -34 92.5 -82.5t29.5 -121.5q0 -97 -56.5 -161.5t-155.5 -102.5zM1229 868q0 36 -14 64t-47 46q-31 17 -66 22t-88 5h-149v-309h127q62 0 107 9.5t74 32.5q31 25 43.5 55t12.5 75z","M1306 1668h-1305l-5 120h1310v-120z","M956 1116q0 -168 -116 -284t-285 -116t-285 115.5t-116 284.5q0 168 116 284t285 116q170 0 285.5 -116t115.5 -284zM791 1116q0 102 -67 171.5t-169 69.5t-169 -69.5t-67 -171.5q0 -104 68.5 -172.5t167.5 -68.5q102 0 169 70t67 171z","M1461 179h-1246v158h540v422h-540v158h540v545h166v-545h540v-158h-540v-422h540v-158z","M967 566h-760v156q100 62 183.5 117t134.5 96q131 103 168 154.5t37 135.5q0 69 -53.5 107t-143.5 38q-89 0 -175 -30.5t-134 -61.5h-13v180q71 26 158.5 43.5t174.5 17.5q180 0 273.5 -78.5t93.5 -203.5q0 -99 -48.5 -174.5t-163.5 -165.5q-55 -43 -132.5 -94 t-143.5 -92h544v-145z","M956 817q0 -75 -33 -131.5t-89 -90.5q-57 -35 -131 -51.5t-163 -16.5q-94 0 -176.5 15t-156.5 43v179h14q41 -36 138.5 -65.5t190.5 -29.5q100 0 166.5 35.5t66.5 110.5q0 85 -59 115t-171 30h-143v141h128q112 0 165.5 38.5t53.5 106.5q0 61 -49.5 96.5t-153.5 35.5 q-77 0 -174.5 -31t-141.5 -67h-14v178q74 27 160.5 44.5t176.5 17.5q175 0 271.5 -68t96.5 -174q0 -89 -55 -146t-144 -83v-8q95 -17 160.5 -72.5t65.5 -151.5z","M963 1676l-273 -374h-149l179 374h243z","M1124 0h-178l-10 118q-59 -65 -123.5 -102t-155.5 -37q-86 0 -149.5 35t-129.5 99v-525h-188v1529h188v-838q32 -39 109.5 -80t168.5 -41q93 0 159.5 33.5t120.5 93.5v832h188v-1117z","M1106 -363h-148v1722h-214v-1722h-149v956q-206 5 -332 129t-126 328q0 207 130 323t373 116h466v-1852z","M492 511h-239v283h239v-283z","M880 -89q0 -162 -91.5 -248t-237.5 -86q-37 0 -95 7t-103 19v160h9q26 -10 70 -23t94 -13q104 0 153 39t49 127q0 29 -3 65.5t-6 61.5h153q2 -19 5 -45t3 -64z","M914 566h-615v122h234v568h-242v112q45 0 99 6.5t84 18.5q37 16 59 38t25 62h135v-805h221v-122z","M996 1025q0 -235 -122 -364.5t-315 -129.5q-201 0 -319.5 132.5t-118.5 361.5t118.5 362t319.5 133q193 0 315 -130t122 -365zM814 1025q0 172 -67.5 258t-187.5 86q-122 0 -189 -87t-67 -257t67 -256.5t189 -86.5q120 0 187.5 85.5t67.5 257.5z","M1154 608l-550 -446v196l371 294l-371 294v196l550 -445v-89zM702 610l-528 -419v188l357 273l-357 273v188l528 -418v-85z","M545 565h-165v681h-209v117q102 0 165 22t72 108h137v-928zM1410 1489l-780 -1489h-165l780 1489h165zM1857 220h-163v-220h-150v220h-465v185l466 539h149v-591h163v-133zM1548 353v400l-353 -400h353z","M545 565h-165v681h-209v117q102 0 165 22t72 108h137v-928zM1410 1489l-780 -1489h-165l780 1489h165zM1955 0h-688v148q91 69 158 121t106 89q109 103 141 157.5t32 136.5q0 70 -44 107t-120 37q-70 0 -141.5 -30t-112.5 -62h-15v179q65 27 140.5 44t152.5 17 q157 0 241.5 -79t84.5 -201q0 -93 -41 -167t-147 -168q-49 -43 -119.5 -96t-125.5 -94h498v-139z","M793 826q0 -71 -30 -127t-78 -90q-53 -37 -114.5 -53t-140.5 -16q-82 0 -153.5 15t-136.5 43v175h17q37 -35 114 -64.5t156 -29.5q84 0 139 36.5t55 108.5q0 83 -50 112.5t-141 29.5h-140v139h125q87 0 134.5 38t47.5 104q0 60 -41 95.5t-128 35.5q-66 0 -142.5 -31 t-113.5 -66h-17v175q64 27 139 44t154 17q152 0 237 -70t85 -168q0 -87 -48.5 -143.5t-125.5 -82.5v-8q80 -16 138.5 -70.5t58.5 -148.5zM1500 1489l-780 -1489h-165l780 1489h165zM1913 220h-163v-220h-150v220h-465v185l466 539h149v-591h163v-133zM1604 353v400 l-353 -400h353z","M712 1278h-204v211h204v-211zM958 40q-83 -30 -176 -50t-205 -20q-215 0 -339.5 104.5t-124.5 275.5q0 98 34.5 173t93.5 137q58 62 136.5 112.5t146.5 91.5v225h179v-305q-60 -33 -139 -81.5t-125 -88.5q-54 -47 -88 -109t-34 -140q0 -113 76.5 -168.5t197.5 -55.5 q103 0 201.5 33t155.5 70h10v-204z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523zM862 1675h-149l-273 374h243z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523zM955 2049l-273 -374h-149l179 374h243z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523zM1033 1670h-159l-185 256l-184 -256h-155l228 379h227z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523zM1119 1992q-11 -152 -77 -229t-177 -77q-54 0 -100 19.5t-87 56.5q-47 43 -79.5 64.5t-71.5 21.5q-52 0 -78 -45t-30 -121h-131q8 151 79 228t174 77q50 0 96.5 -19.5 t88.5 -55.5q47 -41 83.5 -61.5t69.5 -20.5q51 0 79.5 46t31.5 116h129z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523zM1005 1677h-199v195h199v-195zM592 1677h-199v195h199v-195z","M1374 0h-211l-148 415h-640l-148 -415h-201l519 1407q-89 44 -142.5 123.5t-53.5 181.5q0 143 102 240t248 97q147 0 248.5 -97t101.5 -240q0 -100 -52.5 -181.5t-141.5 -123.5zM899 1710q0 86 -57 143.5t-143 57.5t-143 -58t-57 -143q0 -86 57.5 -143.5t142.5 -57.5 q86 0 143 57.5t57 143.5zM953 585l-258 715l-259 -715h517z","M1901 0h-944v556h-524l-212 -556h-207l594 1489h1293v-176h-749v-408h749v-176h-749v-553h749v-176zM957 723v601h-219l-239 -601h458z","M1350 108q-55 -24 -99.5 -45t-116.5 -44q-11 -3 -24 -7.5t-31 -7.5q2 -19 3.5 -44.5t1.5 -48.5q0 -162 -93.5 -248t-240.5 -86q-38 0 -97.5 7t-104.5 19v162h9q26 -10 71.5 -24t95.5 -14q106 0 155 40t49 126q0 19 -1 41.5t-3 42.5q-19 -2 -40.5 -3t-39.5 -1 q-162 0 -294.5 45.5t-230.5 142.5q-96 95 -150 241.5t-54 340.5q0 184 52 329t150 245q95 97 229.5 148t298.5 51q120 0 239.5 -29t265.5 -102v-235h-15q-123 103 -244 150t-259 47q-113 0 -203.5 -36.5t-161.5 -113.5q-69 -75 -107.5 -189.5t-38.5 -264.5q0 -157 42.5 -270 t109.5 -184q70 -74 163.5 -109.5t197.5 -35.5q143 0 268 49t234 147h14v-232z","M1181 0h-981v1489h981v-176h-783v-408h783v-176h-783v-553h783v-176zM822 1675h-149l-273 374h243z","M1181 0h-981v1489h981v-176h-783v-408h783v-176h-783v-553h783v-176zM993 2049l-273 -374h-149l179 374h243z","M1181 0h-981v1489h981v-176h-783v-408h783v-176h-783v-553h783v-176zM1031 1670h-159l-185 256l-184 -256h-155l228 379h227z","M1181 0h-981v1489h981v-176h-783v-408h783v-176h-783v-553h783v-176zM1038 1677h-199v195h199v-195zM625 1677h-199v195h199v-195z","M725 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152zM568 1675h-149l-273 374h243z","M725 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152zM725 2049l-273 -374h-149l179 374h243z","M725 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152zM776 1670h-159l-185 256l-184 -256h-155l228 379h227z","M725 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152zM738 1677h-199v195h199v-195zM325 1677h-199v195h199v-195z","M1468 743q0 -203 -88.5 -368t-235.5 -256q-102 -63 -227.5 -91t-330.5 -28h-376v740h-196v143h196v606h372q218 0 347 -31.5t217 -86.5q152 -95 237 -253t85 -375zM1261 746q0 175 -61 295t-182 189q-88 50 -187 69.5t-237 19.5h-188v-436h361v-143h-361v-570h188 q143 0 249.5 21t195.5 78q111 71 166.5 187t55.5 290z","M1336 0h-245l-706 1332v-1332h-185v1489h307l644 -1216v1216h185v-1489zM1208 1992q-11 -152 -77 -229t-177 -77q-54 0 -100 19.5t-87 56.5q-47 43 -79.5 64.5t-71.5 21.5q-52 0 -78 -45t-30 -121h-131q8 151 79 228t174 77q50 0 96.5 -19.5t88.5 -55.5 q47 -41 83.5 -61.5t69.5 -20.5q51 0 79.5 46t31.5 116h129z","M1310 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1292 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5zM932 1675h-149l-273 374h243z","M1310 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1292 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5zM1083 2049l-273 -374h-149l179 374h243z","M1310 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1292 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5zM1136 1670h-159l-185 256l-184 -256h-155l228 379h227z","M1310 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1292 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5zM1207 1992q-11 -152 -77 -229t-177 -77q-54 0 -100 19.5t-87 56.5q-47 43 -79.5 64.5t-71.5 21.5q-52 0 -78 -45t-30 -121h-131q8 151 79 228 t174 77q50 0 96.5 -19.5t88.5 -55.5q47 -41 83.5 -61.5t69.5 -20.5q51 0 79.5 46t31.5 116h129z","M1307 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1289 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5zM1108 1677h-199v195h199v-195zM695 1677h-199v195h199v-195z","M1385 216l-111 -111l-436 440l-436 -440l-111 111l440 436l-440 436l111 111l436 -440l436 440l111 -111l-440 -436z","M1498 744q0 -184 -49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-115 0 -215.5 29t-179.5 84l-159 -228h-132l205 294q-101 100 -155.5 250t-54.5 346q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q118 0 215 -27.5t179 -82.5l142 201h132 l-188 -268q101 -100 156.5 -248.5t55.5 -350.5zM1097 1260q-57 46 -129 68.5t-161 22.5q-110 0 -200 -38.5t-156 -116.5q-64 -76 -98.5 -190.5t-34.5 -261.5q0 -140 29.5 -252t87.5 -188zM1295 744q0 139 -30 253t-88 189l-664 -957q60 -45 132.5 -68t161.5 -23 q110 0 201.5 40t153.5 116q67 82 100 194.5t33 255.5z","M1321 598q0 -162 -35.5 -282.5t-116.5 -200.5q-77 -76 -180 -111t-240 -35q-140 0 -244 37t-175 109q-81 82 -116.5 198t-35.5 285v891h198v-901q0 -121 16.5 -191t55.5 -127q44 -65 119.5 -98t181.5 -33q107 0 182 32.5t120 98.5q39 57 55.5 130.5t16.5 182.5v906h198 v-891zM932 1675h-149l-273 374h243z","M1321 598q0 -162 -35.5 -282.5t-116.5 -200.5q-77 -76 -180 -111t-240 -35q-140 0 -244 37t-175 109q-81 82 -116.5 198t-35.5 285v891h198v-901q0 -121 16.5 -191t55.5 -127q44 -65 119.5 -98t181.5 -33q107 0 182 32.5t120 98.5q39 57 55.5 130.5t16.5 182.5v906h198 v-891zM1073 2049l-273 -374h-149l179 374h243z","M1321 598q0 -162 -35.5 -282.5t-116.5 -200.5q-77 -76 -180 -111t-240 -35q-140 0 -244 37t-175 109q-81 82 -116.5 198t-35.5 285v891h198v-901q0 -121 16.5 -191t55.5 -127q44 -65 119.5 -98t181.5 -33q107 0 182 32.5t120 98.5q39 57 55.5 130.5t16.5 182.5v906h198 v-891zM1084 1670h-159l-185 256l-184 -256h-155l228 379h227z","M1321 598q0 -162 -35.5 -282.5t-116.5 -200.5q-77 -76 -180 -111t-240 -35q-140 0 -244 37t-175 109q-81 82 -116.5 198t-35.5 285v891h198v-901q0 -121 16.5 -191t55.5 -127q44 -65 119.5 -98t181.5 -33q107 0 182 32.5t120 98.5q39 57 55.5 130.5t16.5 182.5v906h198 v-891zM1056 1677h-199v195h199v-195zM643 1677h-199v195h199v-195z","M1254 1489l-524 -836v-653h-198v632l-526 857h219l407 -666l411 666h211zM935 2049l-273 -374h-149l179 374h243z","M1174 787q0 -92 -35 -176.5t-95 -141.5q-78 -75 -187.5 -111t-260.5 -36h-198v-322h-198v1489h198v-270h205q133 0 230 -22.5t164 -66.5q83 -53 130 -138t47 -205zM968 782q0 72 -26 125.5t-82 88.5q-48 30 -112 42.5t-154 12.5h-196v-563h167q119 0 195 20.5t123 65.5 q44 41 64.5 92t20.5 116z","M1165 481q0 -214 -135.5 -359.5t-354.5 -145.5q-44 0 -101.5 7.5t-93.5 20.5v165h10q42 -24 91.5 -33t105.5 -9q74 0 129 29t88 78q35 52 50.5 115.5t15.5 139.5q0 166 -105.5 250.5t-303.5 84.5v150q157 0 234 59.5t77 188.5q0 35 -11 68t-41 64q-27 29 -71 46.5 t-105 17.5q-57 0 -103 -14.5t-86 -53.5q-37 -36 -59.5 -102t-22.5 -161v-1087h-188v1080q0 124 36 215.5t100 153.5q60 58 149.5 87.5t183.5 29.5q183 0 297.5 -87t114.5 -238q0 -112 -71 -201t-184 -121v-9q164 -37 259 -148.5t95 -280.5z","M1053 0h-187v119q-25 -17 -67.5 -47.5t-82.5 -48.5q-47 -23 -108 -38.5t-143 -15.5q-151 0 -256 100t-105 255q0 127 54.5 205.5t155.5 123.5q102 45 245 61t307 24v29q0 64 -22.5 106t-64.5 66q-40 23 -96 31t-117 8q-74 0 -165 -19.5t-188 -56.5h-10v191q55 15 159 33 t205 18q118 0 205.5 -19.5t151.5 -66.5q63 -46 96 -119t33 -181v-758zM866 275v311q-86 -5 -202.5 -15t-184.5 -29q-81 -23 -131 -71.5t-50 -133.5q0 -96 58 -144.5t177 -48.5q99 0 181 38.5t152 92.5zM738 1302h-149l-273 374h243z","M1053 0h-187v119q-25 -17 -67.5 -47.5t-82.5 -48.5q-47 -23 -108 -38.5t-143 -15.5q-151 0 -256 100t-105 255q0 127 54.5 205.5t155.5 123.5q102 45 245 61t307 24v29q0 64 -22.5 106t-64.5 66q-40 23 -96 31t-117 8q-74 0 -165 -19.5t-188 -56.5h-10v191q55 15 159 33 t205 18q118 0 205.5 -19.5t151.5 -66.5q63 -46 96 -119t33 -181v-758zM866 275v311q-86 -5 -202.5 -15t-184.5 -29q-81 -23 -131 -71.5t-50 -133.5q0 -96 58 -144.5t177 -48.5q99 0 181 38.5t152 92.5zM934 1676l-273 -374h-149l179 374h243z","M1053 0h-187v119q-25 -17 -67.5 -47.5t-82.5 -48.5q-47 -23 -108 -38.5t-143 -15.5q-151 0 -256 100t-105 255q0 127 54.5 205.5t155.5 123.5q102 45 245 61t307 24v29q0 64 -22.5 106t-64.5 66q-40 23 -96 31t-117 8q-74 0 -165 -19.5t-188 -56.5h-10v191q55 15 159 33 t205 18q118 0 205.5 -19.5t151.5 -66.5q63 -46 96 -119t33 -181v-758zM866 275v311q-86 -5 -202.5 -15t-184.5 -29q-81 -23 -131 -71.5t-50 -133.5q0 -96 58 -144.5t177 -48.5q99 0 181 38.5t152 92.5zM961 1297h-159l-185 256l-184 -256h-155l228 379h227z","M1053 0h-187v119q-25 -17 -67.5 -47.5t-82.5 -48.5q-47 -23 -108 -38.5t-143 -15.5q-151 0 -256 100t-105 255q0 127 54.5 205.5t155.5 123.5q102 45 245 61t307 24v29q0 64 -22.5 106t-64.5 66q-40 23 -96 31t-117 8q-74 0 -165 -19.5t-188 -56.5h-10v191q55 15 159 33 t205 18q118 0 205.5 -19.5t151.5 -66.5q63 -46 96 -119t33 -181v-758zM866 275v311q-86 -5 -202.5 -15t-184.5 -29q-81 -23 -131 -71.5t-50 -133.5q0 -96 58 -144.5t177 -48.5q99 0 181 38.5t152 92.5zM1038 1619q-11 -152 -77 -229t-177 -77q-54 0 -100 19.5t-87 56.5 q-47 43 -79.5 64.5t-71.5 21.5q-52 0 -78 -45t-30 -121h-131q8 151 79 228t174 77q50 0 96.5 -19.5t88.5 -55.5q47 -41 83.5 -61.5t69.5 -20.5q51 0 79.5 46t31.5 116h129z","M1053 0h-187v119q-25 -17 -67.5 -47.5t-82.5 -48.5q-47 -23 -108 -38.5t-143 -15.5q-151 0 -256 100t-105 255q0 127 54.5 205.5t155.5 123.5q102 45 245 61t307 24v29q0 64 -22.5 106t-64.5 66q-40 23 -96 31t-117 8q-74 0 -165 -19.5t-188 -56.5h-10v191q55 15 159 33 t205 18q118 0 205.5 -19.5t151.5 -66.5q63 -46 96 -119t33 -181v-758zM866 275v311q-86 -5 -202.5 -15t-184.5 -29q-81 -23 -131 -71.5t-50 -133.5q0 -96 58 -144.5t177 -48.5q99 0 181 38.5t152 92.5zM926 1304h-199v195h199v-195zM513 1304h-199v195h199v-195z","M1053 0h-187v119q-25 -17 -67.5 -47.5t-82.5 -48.5q-47 -23 -108 -38.5t-143 -15.5q-151 0 -256 100t-105 255q0 127 54.5 205.5t155.5 123.5q102 45 245 61t307 24v29q0 64 -22.5 106t-64.5 66q-40 23 -96 31t-117 8q-74 0 -165 -19.5t-188 -56.5h-10v191q55 15 159 33 t205 18q118 0 205.5 -19.5t151.5 -66.5q63 -46 96 -119t33 -181v-758zM866 275v311q-86 -5 -202.5 -15t-184.5 -29q-81 -23 -131 -71.5t-50 -133.5q0 -96 58 -144.5t177 -48.5q99 0 181 38.5t152 92.5zM956 1630q0 -143 -102 -242t-248 -99q-144 0 -247 98.5t-103 242.5 q0 143 102 241t248 98q147 0 248.5 -98t101.5 -241zM811 1630q0 86 -58.5 145.5t-146.5 59.5t-146.5 -59t-58.5 -146t59 -146t146 -59q88 0 146.5 59t58.5 146z","M1855 559h-819q0 -114 30 -195t85 -133q52 -48 123 -70.5t157 -22.5q111 0 217.5 41.5t172.5 93.5h12v-205q-78 -35 -184.5 -64.5t-215.5 -29.5q-166 0 -284.5 52t-194.5 155q-21 -19 -67 -59t-96 -68q-63 -36 -137 -59.5t-189 -23.5q-150 0 -255.5 97t-105.5 249 q0 124 54 200.5t155 118.5q95 39 241 53t308 17v61q0 65 -23 107.5t-64 65.5q-40 23 -96 31.5t-116 8.5q-79 0 -168.5 -21t-179.5 -57h-13v191q55 15 158 34t204 19q159 0 264.5 -46.5t162.5 -137.5q69 82 170 134t226 52q217 0 342.5 -128t125.5 -379v-82zM1673 703 q-5 68 -23.5 119t-50.5 88q-34 39 -88.5 61t-133.5 22q-133 0 -223 -75t-115 -215h634zM894 298q-20 53 -30.5 119t-10.5 141q-105 -3 -201 -7.5t-178 -25.5q-79 -20 -127.5 -65.5t-48.5 -128.5q0 -95 58 -141t176 -46q99 0 195.5 43t166.5 111z","M1011 70q-33 -15 -71.5 -30.5t-67.5 -24.5q3 -19 5.5 -47.5t2.5 -56.5q0 -162 -91.5 -248t-237.5 -86q-37 0 -95 7t-103 19v160h9q26 -10 70 -23t94 -13q104 0 153 39t49 127q0 22 -1.5 45t-3.5 43q-16 -2 -30.5 -4t-39.5 -2q-121 0 -222 35.5t-173 107.5 q-73 72 -113 182t-40 257q0 274 150.5 430t397.5 156q96 0 188.5 -27t169.5 -66v-209h-10q-86 67 -177.5 103t-178.5 36q-160 0 -252.5 -107.5t-92.5 -315.5q0 -202 90.5 -310.5t254.5 -108.5q57 0 116 15t106 39q41 21 77 44.5t57 40.5h10v-207z","M1120 539h-823q0 -103 31 -179.5t85 -125.5q52 -48 123.5 -72t157.5 -24q114 0 229.5 45.5t164.5 89.5h10v-205q-95 -40 -194 -67t-208 -27q-278 0 -434 150.5t-156 427.5q0 274 149.5 435t393.5 161q226 0 348.5 -132t122.5 -375v-102zM937 683q-1 148 -74.5 229 t-223.5 81q-151 0 -240.5 -89t-101.5 -221h640zM759 1302h-149l-273 374h243z","M1120 539h-823q0 -103 31 -179.5t85 -125.5q52 -48 123.5 -72t157.5 -24q114 0 229.5 45.5t164.5 89.5h10v-205q-95 -40 -194 -67t-208 -27q-278 0 -434 150.5t-156 427.5q0 274 149.5 435t393.5 161q226 0 348.5 -132t122.5 -375v-102zM937 683q-1 148 -74.5 229 t-223.5 81q-151 0 -240.5 -89t-101.5 -221h640zM960 1676l-273 -374h-149l179 374h243z","M1120 539h-823q0 -103 31 -179.5t85 -125.5q52 -48 123.5 -72t157.5 -24q114 0 229.5 45.5t164.5 89.5h10v-205q-95 -40 -194 -67t-208 -27q-278 0 -434 150.5t-156 427.5q0 274 149.5 435t393.5 161q226 0 348.5 -132t122.5 -375v-102zM937 683q-1 148 -74.5 229 t-223.5 81q-151 0 -240.5 -89t-101.5 -221h640zM986 1297h-159l-185 256l-184 -256h-155l228 379h227z","M1120 539h-823q0 -103 31 -179.5t85 -125.5q52 -48 123.5 -72t157.5 -24q114 0 229.5 45.5t164.5 89.5h10v-205q-95 -40 -194 -67t-208 -27q-278 0 -434 150.5t-156 427.5q0 274 149.5 435t393.5 161q226 0 348.5 -132t122.5 -375v-102zM937 683q-1 148 -74.5 229 t-223.5 81q-151 0 -240.5 -89t-101.5 -221h640zM951 1304h-199v195h199v-195zM538 1304h-199v195h199v-195z","M375 0h-188v1117h188v-1117zM401 1302h-149l-273 374h243z","M375 0h-188v1117h188v-1117zM582 1676l-273 -374h-149l179 374h243z","M572 1297h-151l-143 267l-142 -267h-147l178 379h227zM375 0h-188v1117h188v-1117z","M557 1304h-189v195h189v-195zM194 1304h-189v195h189v-195zM375 0h-188v1117h188v-1117z","M1137 637q0 -324 -142 -496t-383 -172q-229 0 -367.5 135t-138.5 380q0 226 137 358t339 132q108 0 185.5 -26.5t163.5 -79.5q-32 112 -99.5 219t-154.5 181l-264 -162l-66 97l237 142q-84 67 -156 107.5t-165 87.5v16h295q35 -25 84 -58.5t86 -59.5l210 128l66 -97 l-186 -109q153 -147 236 -325.5t83 -397.5zM847 226q49 59 75 143.5t26 234.5q0 32 -1.5 59.5t-3.5 57.5q-75 45 -157.5 66.5t-168.5 21.5q-147 0 -231.5 -87.5t-84.5 -239.5q0 -180 84.5 -267t227.5 -87q66 0 127.5 22t106.5 76z","M1119 0h-188v636q0 77 -9 144.5t-33 105.5q-25 42 -72 62.5t-122 20.5q-77 0 -161 -38t-161 -97v-834h-188v1117h188v-124q88 73 182 114t193 41q181 0 276 -109t95 -314v-725zM1075 1619q-11 -152 -77 -229t-177 -77q-54 0 -100 19.5t-87 56.5q-47 43 -79.5 64.5 t-71.5 21.5q-52 0 -78 -45t-30 -121h-131q8 151 79 228t174 77q50 0 96.5 -19.5t88.5 -55.5q47 -41 83.5 -61.5t69.5 -20.5q51 0 79.5 46t31.5 116h129z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z M732 1302h-149l-273 374h243z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z M933 1676l-273 -374h-149l179 374h243z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z M963 1297h-159l-185 256l-184 -256h-155l228 379h227z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z M1038 1619q-11 -152 -77 -229t-177 -77q-54 0 -100 19.5t-87 56.5q-47 43 -79.5 64.5t-71.5 21.5q-52 0 -78 -45t-30 -121h-131q8 151 79 228t174 77q50 0 96.5 -19.5t88.5 -55.5q47 -41 83.5 -61.5t69.5 -20.5q51 0 79.5 46t31.5 116h129z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z M928 1304h-199v195h199v-195zM515 1304h-199v195h199v-195z","M957 1022h-238v275h238v-275zM1466 572h-1256v160h1256v-160zM957 7h-238v275h238v-275z","M1137 558q0 -273 -140 -431t-375 -158q-84 0 -155.5 21t-130.5 60l-133 -198h-110l171 256q-75 77 -116.5 190t-41.5 260q0 273 139.5 431.5t376.5 158.5q87 0 158 -22t125 -57l116 172h111l-155 -231q76 -76 118 -188t42 -264zM813 930q-37 29 -86.5 43.5t-104.5 14.5 q-155 0 -240 -110t-85 -320q0 -97 17 -171t52 -128zM946 558q0 97 -17.5 173t-51.5 130l-448 -671q39 -31 86.5 -46t106.5 -15q150 0 237 108.5t87 320.5z","M1111 0h-188v124q-95 -75 -182 -115t-192 -40q-176 0 -274 107.5t-98 315.5v725h188v-636q0 -85 8 -145.5t34 -103.5q27 -44 70 -64t125 -20q73 0 159.5 38t161.5 97v834h188v-1117zM764 1302h-149l-273 374h243z","M1111 0h-188v124q-95 -75 -182 -115t-192 -40q-176 0 -274 107.5t-98 315.5v725h188v-636q0 -85 8 -145.5t34 -103.5q27 -44 70 -64t125 -20q73 0 159.5 38t161.5 97v834h188v-1117zM945 1676l-273 -374h-149l179 374h243z","M1111 0h-188v124q-95 -75 -182 -115t-192 -40q-176 0 -274 107.5t-98 315.5v725h188v-636q0 -85 8 -145.5t34 -103.5q27 -44 70 -64t125 -20q73 0 159.5 38t161.5 97v834h188v-1117zM985 1297h-159l-185 256l-184 -256h-155l228 379h227z","M1111 0h-188v124q-95 -75 -182 -115t-192 -40q-176 0 -274 107.5t-98 315.5v725h188v-636q0 -85 8 -145.5t34 -103.5q27 -44 70 -64t125 -20q73 0 159.5 38t161.5 97v834h188v-1117zM955 1304h-199v195h199v-195zM542 1304h-199v195h199v-195z","M1151 1117l-652 -1529h-201l208 466l-445 1063h204l343 -828l346 828h197zM928 1676l-273 -374h-149l179 374h243z","M1168 572q0 -136 -39 -248.5t-110 -190.5q-66 -74 -155.5 -114.5t-189.5 -40.5q-87 0 -157.5 19t-143.5 59v-468h-188v1968h188v-556q75 63 168.5 105.5t199.5 42.5q202 0 314.5 -152.5t112.5 -423.5zM974 567q0 202 -69 302t-212 100q-81 0 -163 -35t-157 -92v-633 q80 -36 137.5 -49t130.5 -13q157 0 245 106t88 314z","M585 832h-239v285h239v-285zM658 285l-282 -655h-146l174 655h254z","M773 1676l-49 -384h-145l-49 384h243z","M765 1676l-49 -384h-128l-49 384h226zM1048 1304h-191v195h191v-195zM447 1304h-191v195h191v-195z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523zM250 1489l-49 -384h-145l-49 384h243z","M585 832h-239v285h239v-285z","M1424 0h-981v1489h981v-176h-783v-408h783v-176h-783v-553h783v-176zM243 1489l-49 -384h-145l-49 384h243z","M1582 0h-198v729h-743v-729h-198v1489h198v-584h743v584h198v-1489zM243 1489l-49 -384h-145l-49 384h243z","M968 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152zM243 1489l-49 -384h-145l-49 384h243z","M1501 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1483 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5zM243 1489l-49 -384h-145l-49 384h243z","M1537 1489l-524 -836v-653h-198v632l-526 857h219l407 -666l411 666h211zM243 1489l-49 -384h-145l-49 384h243z","M1751 0h-576v387q60 38 119.5 82t103.5 101q45 59 71 138.5t26 185.5q0 206 -127 330.5t-347 124.5t-347 -124.5t-127 -330.5q0 -106 26 -185.5t71 -138.5q45 -57 104 -101t119 -82v-387h-576v174h410v124q-157 90 -258.5 246t-101.5 350q0 276 187.5 451t492.5 175 t492.5 -175t187.5 -451q0 -194 -101.5 -350t-258.5 -246v-124h410v-174zM243 1489l-49 -384h-145l-49 384h243z","M375 0h-188v1117h188v-1117zM379 1676l-56 -384h-84l-56 384h196zM615 1304h-171v195h171v-195zM118 1304h-171v195h171v-195z","M1374 0h-211l-146 415h-644l-146 -415h-201l542 1489h264zM956 585l-261 731l-262 -731h523z","M1323 458q0 -111 -42 -196t-113 -140q-84 -66 -184.5 -94t-255.5 -28h-528v1489h441q163 0 244 -12t155 -50q82 -43 119 -110.5t37 -161.5q0 -106 -54 -180.5t-144 -119.5v-8q151 -31 238 -132.5t87 -256.5zM990 1129q0 54 -18 91t-58 60q-47 27 -114 33.5t-166 6.5h-236 v-430h256q93 0 148 9.5t102 39.5t66.5 77.5t19.5 112.5zM1117 450q0 90 -27 143t-98 90q-48 25 -116.5 32.5t-166.5 7.5h-311v-554h262q130 0 213 13.5t136 49.5q56 39 82 89t26 129z","M1162 1313h-764v-1313h-198v1489h962v-176z","M1414 0h-1388l562 1489h264zM1147 168l-432 1147l-431 -1147h863z","M1181 0h-981v1489h981v-176h-783v-408h783v-176h-783v-553h783v-176z","M1288 0h-1162v184l913 1129h-879v176h1106v-179l-922 -1134h944v-176z","M1339 0h-198v729h-743v-729h-198v1489h198v-584h743v584h198v-1489z","M1310 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1292 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5zM1120 713h-627v179h627v-179z","M725 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152z","M1397 0h-257l-589 663l-148 -158v-505h-198v1489h198v-777l723 777h240l-665 -700z","M1378 0h-213l-468 1285l-468 -1285h-203l556 1489h240z","M1526 0h-198v1283l-414 -873h-118l-411 873v-1283h-185v1489h270l397 -829l384 829h275v-1489z","M1336 0h-245l-706 1332v-1332h-185v1489h307l644 -1216v1216h185v-1489z","M1215 1313h-1101v176h1101v-176zM1163 729h-997v176h997v-176zM1215 0h-1101v176h1101v-176z","M1310 1318q91 -100 139.5 -245t48.5 -329t-49.5 -329.5t-138.5 -242.5q-92 -101 -217.5 -152t-286.5 -51q-157 0 -285.5 52t-218.5 151t-138.5 243t-48.5 329q0 182 48 326.5t140 247.5q88 98 218.5 150t284.5 52q160 0 287.5 -52.5t216.5 -149.5zM1292 744 q0 290 -130 447.5t-355 157.5q-227 0 -356.5 -157.5t-129.5 -447.5q0 -293 132 -448.5t354 -155.5t353.5 155.5t131.5 448.5z","M1339 0h-198v1313h-743v-1313h-198v1489h1139v-1489z","M1174 1039q0 -99 -34.5 -183.5t-96.5 -146.5q-77 -77 -182 -115.5t-265 -38.5h-198v-555h-198v1489h404q134 0 227 -22.5t165 -70.5q85 -57 131.5 -142t46.5 -215zM968 1034q0 77 -27 134t-82 93q-48 31 -109.5 44.5t-155.5 13.5h-196v-595h167q120 0 195 21.5t122 68.5 q47 48 66.5 101t19.5 119z","M1280 0h-1162v184l620 600l-600 526v179h1096v-176h-832l586 -506v-26l-630 -605h922v-176z","M1262 1313h-532v-1313h-198v1313h-532v176h1262v-176z","M1254 1489l-524 -836v-653h-198v632l-526 857h219l407 -666l411 666h211z","M1572 755q0 -140 -44.5 -248.5t-123.5 -181.5q-85 -79 -207 -125.5t-260 -49.5v-166h-197v166q-134 3 -257 48t-210 127q-79 74 -123.5 182t-44.5 248q0 136 43 238t119 178q81 81 202.5 128t270.5 51v155h197v-155q148 -3 271 -52t202 -127q75 -73 118.5 -177t43.5 -239 zM1366 763q0 99 -32 182t-91 140q-58 56 -129 82t-177 28v-890q94 2 171 30.5t127 75.5q65 60 98 147t33 205zM740 305v890q-106 -1 -177 -28t-129 -82t-90.5 -140t-32.5 -182q0 -112 33.5 -203t97.5 -149q49 -45 126.5 -75t171.5 -31z","M1336 1489l-514 -736l513 -753h-229l-406 613l-416 -613h-216l519 744l-507 745h228l401 -605l410 605h217z","M1604 910q0 -157 -40.5 -264.5t-117.5 -174.5q-80 -69 -192.5 -104t-263.5 -45v-322h-197v322q-154 11 -267 47t-188 102q-78 69 -118.5 176t-40.5 263v579h198v-602q0 -109 29.5 -180t81.5 -115q53 -45 130 -68.5t175 -30.5v996h197v-996q97 8 175 30.5t131 68.5 q56 49 83 115.5t27 179.5v602h198v-579z","M1568 0h-576v387q60 38 119.5 82t103.5 101q45 59 71 138.5t26 185.5q0 206 -127 330.5t-347 124.5t-347 -124.5t-127 -330.5q0 -106 26 -185.5t71 -138.5q45 -57 104 -101t119 -82v-387h-576v174h410v124q-157 90 -258.5 246t-101.5 350q0 276 187.5 451t492.5 175 t492.5 -175t187.5 -451q0 -194 -101.5 -350t-258.5 -246v-124h410v-174z","M725 0h-588v152h195v1185h-195v152h588v-152h-195v-1185h195v-152zM738 1677h-199v195h199v-195zM325 1677h-199v195h199v-195z","M1254 1489l-524 -836v-653h-198v632l-526 857h219l407 -666l411 666h211zM939 1677h-199v195h199v-195zM526 1677h-199v195h199v-195z","M1091 0h-188v117q-81 -70 -169 -109t-191 -39q-200 0 -317.5 154t-117.5 427q0 142 40.5 253t109.5 189q68 76 158.5 116t187.5 40q88 0 156 -22t143 -61v52h188v-1117zM903 275v636q-76 34 -136 49.5t-131 15.5q-158 0 -246 -110t-88 -312q0 -199 68 -302.5t218 -103.5 q80 0 162 35.5t153 91.5zM743 1676l-49 -384h-145l-49 384h243z","M1006 64q-107 -48 -210 -69t-218 -21q-79 0 -161 16t-152 56q-69 39 -112.5 102.5t-43.5 157.5q0 96 56.5 168t177.5 110v7q-91 24 -145 90t-54 158q0 89 47.5 147.5t112.5 92.5q64 33 145 49t160 16q98 0 180 -16.5t172 -44.5v-207h-13q-66 51 -163.5 79t-197.5 28 q-45 0 -84 -5.5t-81 -25.5q-35 -15 -60.5 -48.5t-25.5 -77.5q0 -61 28 -95t76 -49q45 -14 97 -15.5t105 -1.5h111v-166h-158q-62 0 -112 -4.5t-92 -21.5q-41 -17 -65.5 -54t-24.5 -96q0 -53 26 -90t67 -58q37 -19 87.5 -29t106.5 -10q102 0 218 36t187 98h13v-206zM721 1676 l-49 -384h-145l-49 384h243z","M1119 -412h-188v1048q0 77 -9 144.5t-33 105.5q-25 42 -72 62.5t-122 20.5q-77 0 -161 -38t-161 -97v-834h-188v1117h188v-124q88 73 182 114t193 41q181 0 276 -109t95 -314v-1137zM802 1676l-49 -384h-145l-49 384h243z","M375 0h-188v1117h188v-1117zM403 1676l-49 -384h-145l-49 384h243z","M1116 407q0 -218 -122 -327.5t-348 -109.5q-223 0 -346 107.5t-123 329.5v710h188v-641q0 -93 10 -153t42 -106q31 -43 84.5 -64.5t145.5 -21.5q86 0 143.5 22t87.5 66q29 44 39.5 105.5t10.5 151.5v641h188v-710zM760 1676l-49 -384h-128l-49 384h226zM1043 1304h-191 v195h191v-195zM442 1304h-191v195h191v-195z","M1091 0h-188v117q-81 -70 -169 -109t-191 -39q-200 0 -317.5 154t-117.5 427q0 142 40.5 253t109.5 189q68 76 158.5 116t187.5 40q88 0 156 -22t143 -61v52h188v-1117zM903 275v636q-76 34 -136 49.5t-131 15.5q-158 0 -246 -110t-88 -312q0 -199 68 -302.5t218 -103.5 q80 0 162 35.5t153 91.5z","M1165 444q0 -202 -134.5 -334t-339.5 -132q-79 0 -167 22t-151 64v-476h-188v1490q0 224 126.5 351t349.5 127q90 0 164.5 -21.5t133.5 -67.5q57 -43 91 -112t34 -160q0 -127 -69.5 -221.5t-196.5 -131.5v-17q159 -26 253 -125.5t94 -255.5zM971 449q0 89 -34.5 144.5 t-92.5 86.5q-59 32 -132 43t-146 11h-36v160h36q66 0 131 14.5t104 44.5q46 34 68.5 83t22.5 134q0 112 -69 170t-178 58q-73 0 -125 -26.5t-85 -70.5q-32 -44 -47 -102.5t-15 -120.5v-862q66 -38 141 -53.5t147 -15.5q149 0 229.5 78.5t80.5 223.5z","M1151 1117l-457 -1061v-468h-188v468l-445 1061h204l343 -828l346 828h197z","M1139 551q0 -272 -138.5 -427t-376.5 -155q-241 0 -379.5 151.5t-138.5 413.5q0 141 43 239.5t107 162.5q69 72 159 113t182 58q-76 63 -166 130.5t-192 139.5v179h810v-158h-561v-10q68 -46 179 -124t204 -162q150 -136 209 -261.5t59 -289.5zM945 551q0 135 -55 249 t-165 200q-66 -8 -138.5 -32t-138.5 -77q-63 -50 -105.5 -137t-42.5 -214q0 -201 85 -305t241 -104q153 0 236 105.5t83 314.5z","M1006 64q-107 -48 -210 -69t-218 -21q-79 0 -161 16t-152 56q-69 39 -112.5 102.5t-43.5 157.5q0 96 56.5 168t177.5 110v7q-91 24 -145 90t-54 158q0 89 47.5 147.5t112.5 92.5q64 33 145 49t160 16q98 0 180 -16.5t172 -44.5v-207h-13q-66 51 -163.5 79t-197.5 28 q-45 0 -84 -5.5t-81 -25.5q-35 -15 -60.5 -48.5t-25.5 -77.5q0 -61 28 -95t76 -49q45 -14 97 -15.5t105 -1.5h111v-166h-158q-62 0 -112 -4.5t-92 -21.5q-41 -17 -65.5 -54t-24.5 -96q0 -53 26 -90t67 -58q37 -19 87.5 -29t106.5 -10q102 0 218 36t187 98h13v-206z","M922 75q32 -40 46 -85.5t14 -85.5q0 -84 -45 -168.5t-112 -147.5h-179v14q90 79 128 138.5t38 128.5q0 57 -30.5 95t-77.5 38h-145q-229 0 -340 116t-111 345q0 140 46 268t124 247q75 112 173.5 214.5t206.5 196.5v9h-460v158h744v-135q-117 -78 -231.5 -181 t-204.5 -223q-89 -117 -146 -257t-57 -283q0 -34 3 -70t15 -76q10 -38 34.5 -75.5t63.5 -61.5q36 -22 96.5 -24.5t116.5 -2.5h86q71 0 122 -26t82 -66z","M1119 -412h-188v1048q0 77 -9 144.5t-33 105.5q-25 42 -72 62.5t-122 20.5q-77 0 -161 -38t-161 -97v-834h-188v1117h188v-124q88 73 182 114t193 41q181 0 276 -109t95 -314v-1137z","M1141 768q0 -190 -23 -316.5t-59 -210.5q-58 -135 -163 -203.5t-257 -68.5t-257 68.5t-163 203.5q-37 84 -59.5 210.5t-22.5 316.5q0 174 22.5 305.5t60.5 214.5q57 130 162.5 199t256.5 69t256.5 -69t162.5 -199q37 -84 60 -215t23 -305zM952 858q-4 143 -28.5 250 t-56.5 161q-41 70 -95 98.5t-133 28.5t-133 -28.5t-95 -98.5q-34 -55 -57.5 -161.5t-27.5 -249.5h626zM952 697h-626q0 -142 23 -258.5t59 -178.5q40 -69 96 -100t135 -31t135 31t96 100q36 62 59 178.5t23 258.5z","M375 0h-188v1117h188v-1117z","M1192 0h-248l-451 489l-112 -109v-380h-188v1117h188v-550l384 417q72 79 135.5 107t126.5 28q28 0 58 -1t37 -1v-166h-11q-16 2 -39.5 3t-36.5 1q-47 0 -85.5 -23.5t-67.5 -56.5l-251 -271z","M1151 0h-205l-328 829l-361 -829h-196l465 1056l-215 500h211z","M1125 0h-186v118q-74 -78 -141.5 -108.5t-145.5 -30.5q-75 0 -135 27t-144 107v-525h-188v1529h188v-838q32 -39 111 -80t170 -41q93 0 161 33.5t122 93.5v832h188v-1117z","M1151 1117l-452 -1117h-189l-449 1117h204l346 -889l343 889h197z","M1041 -96q0 -85 -45.5 -169t-111.5 -147h-180v14q92 79 129.5 139t37.5 128q0 55 -29 94t-75 39h-140q-140 0 -232.5 27t-155.5 84q-66 60 -100.5 135.5t-34.5 163.5q0 78 25 144t73 119q44 49 112.5 83.5t144.5 53.5v11q-125 28 -200 110.5t-75 186.5q0 83 43.5 150.5 t133.5 125.5v6h-228v154h824v-158h-256q-68 0 -122.5 -14.5t-102.5 -48.5q-45 -32 -72 -83t-27 -118q0 -79 32.5 -128t83.5 -75q45 -23 104 -34t139 -11h170v-165h-295q-66 0 -118.5 -20t-99.5 -59q-43 -37 -68.5 -90t-25.5 -112q0 -102 37.5 -159t101.5 -82 q63 -25 139.5 -28.5t166.5 -3.5h28q68 0 119.5 -23.5t84.5 -60.5q31 -35 48 -82.5t17 -96.5z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z","M1120 0h-188v955h-559v-955h-188v1117h935v-1117z","M1172 577q0 -258 -138.5 -428.5t-360.5 -170.5q-65 0 -146.5 18t-153.5 61v-469h-188v1058q0 123 35.5 215.5t101.5 158.5q62 62 155.5 95t195.5 33q243 0 371 -147t128 -424zM978 565q0 218 -80 320t-226 102q-158 0 -228.5 -96t-70.5 -278v-403q73 -34 132.5 -48.5 t134.5 -14.5q162 0 250 111t88 307z","M1018 -96q0 -87 -47 -172t-109 -144h-177v14q86 75 124.5 135.5t38.5 131.5q0 54 -30 93.5t-75 39.5h-92q-117 0 -216 30t-174 97q-73 66 -114.5 170t-41.5 250q0 270 155.5 432t414.5 162q84 0 164 -18.5t147 -45.5v-211h-12q-94 62 -172.5 87t-146.5 25 q-166 0 -260.5 -119t-94.5 -312q0 -112 28.5 -183t78.5 -116q50 -44 114.5 -63.5t139.5 -19.5h100q115 0 186 -76.5t71 -186.5z","M1137 558q0 -281 -140.5 -435t-373.5 -154q-241 0 -379 158t-138 431q0 275 141 432.5t378 157.5q55 0 108 -11t82 -20h480v-165h-288q62 -73 96 -170t34 -224zM943 558q0 215 -82 322t-236 107q-161 0 -243 -112t-82 -317q0 -209 83.5 -318t239.5 -109q152 0 236 107.5 t84 319.5z","M1006 952h-404v-952h-188v952h-404v165h996v-165z","M1116 407q0 -218 -122 -327.5t-348 -109.5q-223 0 -346 107.5t-123 329.5v710h188v-641q0 -93 10 -153t42 -106q31 -43 84.5 -64.5t145.5 -21.5q86 0 143.5 22t87.5 66q29 44 39.5 105.5t10.5 151.5v641h188v-710z","M1514 576q0 -259 -171.5 -417t-440.5 -173v-398h-187v398q-130 6 -240.5 46.5t-191.5 109.5q-85 74 -132 172t-47 232q0 159 59 296t192 275h229v-17q-136 -99 -210 -232t-74 -300q0 -189 112.5 -304t301.5 -121v1000q33 2 70.5 2.5t76.5 0.5q304 0 478.5 -149.5 t174.5 -420.5zM1319 586q0 184 -112 293.5t-305 109.5v-846q206 10 311.5 126t105.5 317z","M1160 -412h-213l-346 619l-350 -619h-203l444 770l-433 759h213l335 -600l339 600h203l-433 -751z","M1507 446q0 -114 -48 -198t-127 -137q-82 -55 -182 -82.5t-215 -32.5v-408h-187v408q-115 6 -214.5 32t-182.5 83q-80 54 -127.5 137.5t-47.5 197.5v671h188v-612q0 -113 37.5 -180.5t89.5 -102.5q56 -38 123 -53t134 -19v967h187v-967q67 5 134 19t123 53 q59 40 93 101.5t34 181.5v612h188v-671z","M1553 503q0 -96 -23.5 -192.5t-74.5 -171.5q-55 -80 -133.5 -124.5t-193.5 -44.5q-96 0 -177 49.5t-118 116.5h-6q-39 -68 -113 -117t-176 -49q-113 0 -194.5 46.5t-132.5 122.5t-74.5 171.5t-23.5 192.5q0 170 57 308.5t201 305.5h228v-17q-135 -108 -214.5 -262 t-79.5 -337q0 -66 8 -122.5t38 -119.5q26 -55 72.5 -91.5t117.5 -36.5q51 0 86.5 12.5t55.5 29.5q22 18 36.5 40t20.5 37v584h186v-584q9 -17 23 -39t35 -39q24 -19 52.5 -30t86.5 -11q70 0 117 35.5t74 92.5q25 55 36 116t11 126q0 182 -78.5 336t-215.5 263v17h228 q144 -167 201 -305.5t57 -308.5z","M557 1304h-189v195h189v-195zM194 1304h-189v195h189v-195zM375 0h-188v1117h188v-1117z","M1116 407q0 -218 -122 -327.5t-348 -109.5q-223 0 -346 107.5t-123 329.5v710h188v-641q0 -93 10 -153t42 -106q31 -43 84.5 -64.5t145.5 -21.5q86 0 143.5 22t87.5 66q29 44 39.5 105.5t10.5 151.5v641h188v-710zM953 1304h-199v195h199v-195zM540 1304h-199v195h199 v-195z","M1137 558q0 -273 -140 -431t-375 -158q-237 0 -376.5 158t-139.5 431t139.5 431.5t376.5 158.5q235 0 375 -158.5t140 -431.5zM943 558q0 217 -85 322.5t-236 105.5q-153 0 -237.5 -105.5t-84.5 -322.5q0 -210 85 -318.5t237 -108.5q150 0 235.5 107.5t85.5 319.5z M743 1676l-49 -384h-145l-49 384h243z","M1116 407q0 -218 -122 -327.5t-348 -109.5q-223 0 -346 107.5t-123 329.5v710h188v-641q0 -93 10 -153t42 -106q31 -43 84.5 -64.5t145.5 -21.5q86 0 143.5 22t87.5 66q29 44 39.5 105.5t10.5 151.5v641h188v-710zM768 1676l-49 -384h-145l-49 384h243z","M1553 503q0 -96 -23.5 -192.5t-74.5 -171.5q-55 -80 -133.5 -124.5t-193.5 -44.5q-96 0 -177 49.5t-118 116.5h-6q-39 -68 -113 -117t-176 -49q-113 0 -194.5 46.5t-132.5 122.5t-74.5 171.5t-23.5 192.5q0 170 57 308.5t201 305.5h228v-17q-135 -108 -214.5 -262 t-79.5 -337q0 -66 8 -122.5t38 -119.5q26 -55 72.5 -91.5t117.5 -36.5q51 0 86.5 12.5t55.5 29.5q22 18 36.5 40t20.5 37v584h186v-584q9 -17 23 -39t35 -39q24 -19 52.5 -30t86.5 -11q70 0 117 35.5t74 92.5q25 55 36 116t11 126q0 182 -78.5 336t-215.5 263v17h228 q144 -167 201 -305.5t57 -308.5zM955 1676l-49 -384h-145l-49 384h243z","M1145 837q0 -164 -39 -344t-121 -303q-85 -124 -186.5 -173t-214.5 -49q-192 0 -313.5 126.5t-121.5 329.5q0 228 134.5 372.5t336.5 144.5q90 0 169.5 -26t158.5 -91q2 26 3 55.5t1 55.5q0 217 -79 318t-231 101q-78 0 -169.5 -31.5t-169.5 -86.5h-11v194 q81 44 181.5 66.5t196.5 22.5q137 0 239.5 -54.5t164.5 -178.5q42 -86 56.5 -189t14.5 -260zM942 678q-60 47 -136 74t-148 27q-141 0 -225 -91t-84 -261q0 -145 67.5 -221.5t179.5 -76.5q128 0 209.5 97t115.5 287q6 33 11.5 73t9.5 92z","M1438 0h-1388l562 1489h264zM1171 168l-432 1147l-431 -1147h863z","M1532 1315h-200v-1508h-198v1508h-592v-1508h-198v1508h-200v174h1388v-174z","M1369 -189h-1182v191l673 668l-663 631v188h1133v-176h-891l648 -601v-72l-666 -653h948v-176z","M1456 572h-1236v160h1236v-160z","M843 1489l-780 -1489h-165l780 1489h165z","M492 511h-239v283h239v-283z","M1737 1788l-880 -1939h-102l-384 993h-237v139h393l313 -821l730 1628h167z","M1887 663q0 -239 -122.5 -372.5t-329.5 -133.5q-133 0 -244 76.5t-180 222.5q-79 -151 -184.5 -225t-248.5 -74q-191 0 -304 135.5t-113 349.5q0 238 125 372t327 134q134 0 245 -77t179 -222q79 150 185.5 224.5t247.5 74.5q191 0 304 -135.5t113 -349.5zM967 729 q-63 117 -155 175.5t-188 58.5q-138 0 -216 -83.5t-78 -237.5q0 -133 63.5 -216t182.5 -83q110 0 172 48.5t119 142.5q34 57 52.5 92.5t47.5 102.5zM1718 663q0 134 -64 216.5t-182 82.5q-88 0 -152.5 -35.5t-138.5 -155.5q-30 -48 -55.5 -99.5t-44.5 -95.5 q60 -115 153.5 -174.5t189.5 -59.5q138 0 216 83t78 238z","M1168 1367h-10q-32 8 -89.5 18.5t-89.5 10.5q-129 0 -181 -61q-53 -61 -53 -210v-1123q0 -206 -104 -315q-105 -110 -293 -110q-52 0 -106.5 5.5t-103.5 15.5v178h10q33 -8 87 -18.5t88 -10.5q129 0 182 61q52 61 52 210v1123q0 204 104 315q104 110 293 110 q58 0 109 -5.5t105 -15.5v-178z","M1431 1104q-20 -194 -111 -293t-249 -99q-77 0 -147 37.5t-126 82.5q-65 52 -117 79.5t-96 27.5q-75 0 -117 -48t-70 -172h-155q23 182 112.5 280t248.5 98q72 0 143 -37t130 -83q61 -48 114.5 -77.5t98.5 -29.5q76 0 120.5 54.5t63.5 179.5h157zM1432 588 q-25 -184 -112 -281.5t-250 -97.5q-72 0 -144 37.5t-129 82.5q-39 31 -103 69t-110 38q-78 0 -121 -55t-63 -179h-157q19 192 110.5 292t249.5 100q77 0 146 -37t127 -83q35 -28 97 -67.5t116 -39.5q75 0 117 49.5t69 171.5h157z","M1431 362h-608l-104 -335h-153l104 335h-425v156h474l84 268h-558v156h606l105 335h153l-105 -335h427v-156h-476l-83 -268h559v-156z","M1408 303l-1154 483v124l1154 483v-183l-889 -362l889 -362v-183zM1408 0h-1154v160h1154v-160z","M1422 786l-1154 -483v183l889 362l-889 362v183l1154 -483v-124zM1422 0h-1154v160h1154v-160z"],this.OUTLINE_X=[[],[291,301,505,515],[168,211,729,772,554],[195,389,917,1364,1481,1481,1288,760,312,195],[155,604,722,1129.8,1160,1107,722,604,278.5,191.1,162,155],[149,172.3,242,630,1687,1844.3,1960,2031.3,2055,2031.8,1962,1575,517,359.8,244,172.8],[115,149.4,252.5,407.6,598,1555,1287,961.3,881,757.5,601,423.5,293,213.5,187],[164,207,343,386],[181,205.5,279,554,783,783,554,279,205.5],[147,376,651,724.5,749,724.5,651,376,147],[167,232,588,717,1073,1137,1137,1073,717,588,232,167],[210,755,921,1466,1466,921,755,210],[147,293,575,321],[153,777,777,153],[253,492,492,253],[-30,143,860,684],[137,167.9,260.5,420.1,652,881.4,1041.5,1135.6,1167,1136.1,1043.5,883.9,652,422,262,168.3],[278,1084,1084,780,625,278],[161,1169,1169,1106,1073.5,976,821.3,617,387.5,198,161],[167,364,608,830.5,1007,1111,1148,1117,1080,971,821,629,399.5,210,167],[77,790,982,1203,1203,982,798,77],[187,378,613,843.5,1015,1119,1157,1147,251,187],[137,183.5,316,475,675,875.1,1041.5,1153.6,1191,1046,965,866,542,315,179.5],[154,285,499,1173,1173,154],[122,157.9,265.5,433.6,651,859.6,1029.5,1142.4,1180,1140,1106.8,1007,851.5,651,456.8,300,196.5,162],[113,258,340,438,760,988,1122.5,1167,1121,990,829,629,429.5,263,150.5],[346,585,585,346],[230,376,658,585,346],[254,1408,1408,254],[245,1431,1431,245],[268,1422,1422,268],[160,406,610,970,1005,973.9,880.5,733.4,541,337.5,160],[176,240,419,692,1037,1210,1391,1714,1829.5,1870,1813.5,1651,1391,1041,701,426,243],[26,1374,832,568],[200,728,983.5,1168,1281,1323,1196,1159,1040,885,641,200],[115,169,319,549.5,844,1001.5,1134,1250.5,1350,1350,1084.5,845,546.5,317,167],[200,576,906.5,1134,1369.5,1458,1373,1136,918.5,572,200],[200,1181,1181,200],[200,398,1045,1151,1151,200],[115,171,330,577,896,1175.5,1442,1442,1441,1155.5,896,570.9,323.5,167.1],[200,1339,1339,200],[137,725,725,137],[44,178,306,486.6,626.5,716.1,746,746,233,44],[205,1397,1366,205],[200,1142,1142,398,200],[200,1526,1526,200],[200,1336,1336,200],[115,163.5,302,520.5,806,1092.5,1310,1448.5,1498,1449.5,1310,1093.5,806,521.5,303,163],[200,398,1043,1139.5,1174,1127.5,996,831,604,200],[115,163.5,302,520.5,1010.5,1133.1,1290,1409.5,1528,1528,1498,1449.5,1310,1093.5,806,521.5,303,163],[200,1432,1130.5,1004,842,617,200],[134,395.5,685,941.5,1128,1241.5,1282,1222,990,702,480.3,301,182.5,143,134],[0,532,730,1262,1262,0],[178,213.5,330,505,749,989,1169,1285.5,1321,1321,178],[26,568,832,1374,238],[92,486,1546,1933,295],[68,1335,1336,80],[6,532,730,1254,225],[126,1288,1288,1266,160,126],[239,759,759,239],[70,787,960,246],[171,691,691,171],[186,383,1490,901,775],[-4,1306,1306,-4],[340,613,762,583],[104,130.3,209,325.5,465,1053,1053,1020,924,772.5,567,362,203],[185,679,866,1022,1128.5,1168,1139.4,1053.5,918.1,373,185],[105,145,258,431,653,832.5,1011,1011,841.5,653,430.1,255.5,142.6],[108,137.4,225.5,363.6,543,1091,1091,903,258,148.5],[106,145,262,448.5,696,904,1098,1120,1120,1089.4,997.5,849.1,649,428.6,255.5,143.4],[68,195,383,716,786,786,693.5,580,415,294,68],[108,225,391.5,565,798.3,962,1058.8,1091,1091,602,417,259,148.5],[185,1119,1119,1095.3,1024,373,185],[175,187,375,387,387,175],[-62,47.5,153,304,421,496,521,533,533,321,100,-62],[193,1199,1161,381,193],[187,375,375,187],[185,1815,1815,1793.1,1727.5,1615.9,1456,735,185],[185,1119,1119,1095.3,1024,907.5,748,185],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1102,997,833.3,622,409.4,245.5,140.9],[185,373,1019,1129,1168,1139.9,1055.5,920.6,741,185],[108,137.6,226.5,365.1,903,1091,1091,602,414,259,149.5],[185,373,882,882,816,745,185],[110,283.5,511,706.9,856.5,951.4,983,939,768.5,566,372.5,230,143.5,115,110],[62,211.3,278,387.5,538,649.5,765,765,377,189,62],[177,201.5,275,392.5,549,1111,1111,177],[61,510,699,1151,265],[86,380,1299,1590,766],[60,1152,1152,64],[61,298,499,1151,265],[93,995,995,978,107,93],[173,588.9,672.5,800.9,963,1113,1113,963,800.9,672.5,588.9,173],[378,552,552,378],[187,337,499.1,627.5,711.1,1127,1127,711.1,627.5,499.1,337,187],[187,354,1125,1290,1401,1466.5,1489,1322,551,386,274,209.5],[],[291,515,505,301],[159,191.6,289.5,647,765,1120,1120,765,647,292.5,192.4],[137,1163,1163,1137,997,816,630.6,484.5,389.6,182,137],[138,247,1058,1168,1168,1055,249,138],[108,187,557,745,1115,1191,320],[378,552,552,378],[172,229,404.5,575,796,965,1063,1096,1128,1071,896,725,497.5,334,235,203],[346,958,958,346],[159,222.4,412.5,692.1,1024,1355.9,1635.5,1825.6,1889,1825.6,1635.5,1355.9,1024,692.1,412.5,222.4],[151,238.5,454,944,944,920.3,849,723.5,537,368,231],[166,716,1146,1146,716,166],[210,1285,1456,1456,210],[153,777,777,153],[159,222.4,412.5,692.1,1024,1355.9,1635.5,1825.6,1889,1825.6,1635.5,1355.9,1024,692.1,412.5,222.4],[-4,1,1306,1306],[154,183,270,399.3,555,710.8,840,927,956,927.1,840.5,711.4,555,399.3,270,183],[215,1461,1461,921,755,215],[207,967,967,911,887.6,817.5,544,369.5,211,207],[207,363.5,540,703,834,923,956,929,904.9,832.5,561,384.5,224,207],[541,690,963,720],[190,378,1124,1124,190],[137,168.5,595,1106,1106,640,425.3,267,169.5],[253,492,492,253],[353,456,551,788.5,857.1,880,877,872,719,353],[291,299,914,914,693,558,291],[121,150.6,239.5,378.6,559,734.3,874,965.5,996,965.5,874,734.3,559,378.6,239.5,150.6],[174,604,1154,1154,604,174],[171,465,1694,1857,1857,1694,1410,545,408,171],[171,465,1955,1955,1890,1805.5,1410,545,408,171],[140,555,1750,1913,1913,1750,1500,448,294,155,140],[113,144.1,237.5,384.6,577,782,958,958,712,508,147.5],[26,1374,862,683,440],[26,1374,955,712,533],[26,1374,1033,805,578,350],[26,1374,1119,990,541,367,288],[26,1374,1005,806,393],[26,1374,1049,1023.6,947.5,834.6,699,564,451,374.5,349],[14,1901,1901,608],[115,169,548,652.5,750,990.5,1350,1350,1084.5,845,546.5,317,167],[200,1181,1181,643,400,200],[200,1181,1181,993,750,200],[200,1181,1181,803,576,200],[200,1181,1181,1038,426,200],[137,725,725,389,146,137],[137,725,725,482,137],[93,137,725,776,548,321],[126,137,725,738,738,126],[14,210,586,916.5,1144,1379.5,1468,1383,1146,929,582,210,14],[200,1336,1336,1208,1079,630,456,200],[115,163.5,302,520.5,806,1092.5,1310,1448.5,1498,1449.5,1310,753,510,163],[115,163.5,302,520.5,806,1092.5,1310,1448.5,1498,1449.5,1083,840,303,163],[115,163.5,302,520.5,806,1092.5,1310,1448.5,1498,1449.5,1136,908,681,453,163],[115,163.5,302,520.5,806,1092.5,1310,1448.5,1498,1449.5,1207,1078,629,455,163],[112,160.5,299,517.5,803,1089.5,1307,1445.5,1495,1446.5,1108,909,496,160],[291,402,1274,1385,1385,1274,402,291],[115,120,252,1092.5,1310,1448.5,1498,1474,1342,806,521.5,303,163],[178,213.5,330,505,749,989,1169,1285.5,1321,1321,753,510,178],[178,213.5,330,505,749,989,1169,1285.5,1321,1321,1073,830,178],[178,213.5,330,505,749,989,1169,1285.5,1321,1321,856,629,178],[178,213.5,330,505,749,989,1169,1285.5,1321,1321,1056,444,178],[6,532,730,1254,935,692],[200,398,1044,1139,1174,1127,997,398,200],[185,675,873.1,1029.5,1131.1,1165,1066,1037.4,951.5,819.9,654,470.5,321,221,185],[104,130.3,209,325.5,465,1053,1053,1020,559,316,203],[104,130.3,209,325.5,465,1053,1053,934,691,203],[104,130.3,209,325.5,465,1053,1053,961,733,506,278,203],[104,130.3,209,325.5,465,1053,1053,1038,909,460,286,207],[104,130.3,209,325.5,465,1053,1053,926,314,203],[104,130.3,209,325.5,465,1053,1053,956,930.6,854.5,741.6,606,471,358,281.5,256],[104,130.4,209.5,326.1,465,1433,1648.5,1833,1855,1855,1823.6,1729.5,1581.1,1387,564,360,202],[105,145,353,456,551,788.5,857.1,1011,1011,841.5,653,430.1,255.5,142.6],[106,145,262,448.5,696,904,1098,1120,1120,1089.4,997.5,580,337,143.4],[106,145,262,448.5,696,904,1098,1120,1120,1089.4,960,717,255.5,143.4],[106,145,262,448.5,696,904,1098,1120,1120,1089.4,986,758,531,303,143.4],[106,145,262,448.5,696,904,1098,1120,1120,1089.4,951,339,143.4],[-21,187,375,401,222],[160,187,375,582,339],[-11,187,375,572,394,167],[5,187,375,557,557,5],[106,140.6,244.5,405.6,612,828.3,995,1101.5,1137,1004,938,263],[185,1119,1119,1075,946,497,323,244,185],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1102,997,553,310,140.9],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1102,933,690,245.5,140.9],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1102,963,735,508,280,140.9],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1038,909,460,286,207],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1102,928,729,316,140.9],[210,719,957,1466,1466,957,719,210],[93,203,833.3,997,1102,1137,1132,1021,409.4,245.5,140.9,106],[177,201.5,275,392.5,549,1111,1111,585,342,177],[177,201.5,275,392.5,549,1111,1111,945,702,177],[177,201.5,275,392.5,549,1111,1111,757,530,177],[177,201.5,275,392.5,549,1111,1111,955,343,177],[61,298,499,1151,928,685],[185,373,1019,1129,1168,1139.9,1055.5,920.6,373,185],[230,376,658,585,346],[530,579,724,773],[256,588,716,1048,1048,765,539,256],[7,26,1374,832],[346,585,585,346],[0,49,443,1424,1424,443],[0,49,443,1582,1582,443],[0,49,380,968,968,380],[0,49,354.5,493,711.5,997,1283.5,1501,1639.5,1689,1640.5,1501,1284.5,997],[0,49,815,1013,1537,289],[0,49,291,1751,1751,1701,1654.1,1513.5,1296.6,1021],[-53,187,375,615,615,379,183,-53],[26,1374,832,568],[200,728,983.5,1168,1281,1323,1196,1159,1040,885,641,200],[200,398,1162,1162,200],[26,1414,852,588],[200,1181,1181,200],[126,1288,1288,1266,160,126],[200,1339,1339,200],[115,163.5,302,520.5,806,1092.5,1310,1448.5,1498,1449.5,1310,1093.5,806,521.5,303,163],[137,725,725,137],[205,1397,1366,205],[26,1378,822,582],[200,1526,1526,200],[200,1336,1336,200],[114,1215,1215,114],[115,163.5,302,520.5,806,1092.5,1310,1448.5,1498,1449.5,1310,1093.5,806,521.5,303,163],[200,1339,1339,200],[200,398,1043,1139.5,1174,1127.5,996,831,604,200],[118,1280,1280,1234,138,118],[0,532,730,1262,1262,0],[6,532,730,1254,225],[105,149.5,273,740,937,1404,1527.5,1572,1528.5,1410,937,740,267,148],[68,1335,1336,80],[179,219.5,338,793,990,1446,1563.5,1604,1604,179],[108,1568,1568,1518,1471.1,1330.5,1113.6,838,562.4,345.5,204.9,158,108],[126,137,725,738,738,126],[6,532,730,1254,939,740,327],[108,137.4,225.5,363.6,543,1091,1091,743,500,148.5],[109,152.5,265,417,578,796,1006,1006,961,721,478,191.5,144],[185,931,1119,1119,1095.3,802,559,185],[160,187,375,403],[177,207.8,300,448,646,846,994,1085.5,1116,1116,1043,760,534,251,177],[108,137.4,225.5,363.6,543,1091,1091,604,416.5,258,148.5],[185,373,1030.5,1131.4,1165,1084,1050,959,825.5,661,462.1,311.5,216.6,185],[61,506,694,1151,265],[106,140.6,244.5,408.6,624,837.1,1000.5,1104.4,1139,1049,239],[109,152.5,265,417,578,796,1006,1006,961,789,609,449,304,191.5,144],[108,135.8,219,646,825,937,982,942,198],[185,931,1119,1119,1095.3,1024,907.5,748,185],[137,159.5,219,382,639,896,1059,1118,1141,1118,1058,895.5,639,382.5,220,159.5],[187,375,375,187],[193,1192,1122,1085,1027,193],[61,1151,522,311],[185,373,1125,1125,185],[61,510,699,1151,265],[104,138.5,239,704,884,995.5,1041,957,133],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1102,997,833.3,622,409.4,245.5,140.9],[185,1120,1120,185],[185,373,1033.5,1137.4,1172,1140,1044,887.3,673,477.5,322,220.5,185],[105,146.5,261,685,862,971,1018,986,839,675,441.9,260.5,143.9],[106,140.5,244,407.8,623,832.9,996.5,1101.9,1295,1295,625,412,247,141.3],[10,414,602,1006,1006,10],[177,207.8,300,448,646,846,994,1085.5,1116,1116,177],[104,151,283,715,902,1342.5,1471.1,1514,1470.4,1339.5,1132.6,861,784.5,714,355,163],[48,1160,1149,59],[176,223.5,748,935,1459,1507,1507,176],[113,136.5,211,343.5,538,1128,1321.5,1455,1529.5,1553,1496,1295,371,170],[5,187,375,557,557,5],[177,207.8,300,448,646,846,994,1085.5,1116,1116,953,341,177],[106,140.9,245.5,409.4,622,833.3,997,1102,1137,1102,743,500,140.9],[177,207.8,300,448,646,846,994,1085.5,1116,1116,768,525,177],[113,136.5,211,343.5,538,1128,1321.5,1455,1529.5,1553,1496,955,712,170],[149,179.4,270.5,409.6,584,798.5,985,1106,1145,1130.5,1074,909.5,670,473.5,292],[50,1438,876,612],[144,344,1332,1532,1532,144],[187,1369,1369,1330,197,187],[220,1456,1456,220],[-102,63,843,678],[253,492,492,253],[134,755,857,1737,1570,134],[161,189.3,274,406.5,578,1435,1620.9,1764.5,1856.4,1887,1858.8,1774,1641.5,1470,613,430.3,286,192.3],[138,241.5,348,515.3,641,719,1168,1168,1063,954,786.3,661,583,138],[243,400,1070,1214,1320,1432,1431,1274,604,462.4,355.5,243],[245,566,719,1431,1431,1109,956,245],[254,1408,1408,254],[268,1422,1422,268]],this.OUTLINE_Y=[[],[1489,0,0,1489],[1556,977,977,1556,1556],[421,0,0,421,932,1067,1489,1489,1067,556],[85,-361,-361,238.1,380,1231,1576,1576,1185,1071.5,935,283],[1075,880.5,743,0,-29,-1.8,80,217.8,413,607.5,745,1489,1517,1489.8,1408,1270.3],[409,230.9,90.5,-.6,-31,0,909,1333.4,1432.5,1498.1,1520,1490,1412,1301.5,1174],[1556,977,977,1556],[572,286.3,31,-412,-412,1556,1556,1113,857.8],[-412,-412,31,286.3,572,857.8,1113,1556,1556],[886,776,630,630,777,887,1299,1409,1556,1556,1410,1300],[572,27,27,572,732,1277,1277,732],[-370,-370,285,285],[561,561,742,742],[0,0,285,285],[-304,-304,1556,1556],[743,400,159,16.5,-31,15.9,156.5,397.4,745,1084.9,1326.5,1470.9,1519,1471.6,1329.5,1088.1],[0,0,152,1494,1494,1286],[0,0,171,1110,1279.4,1409.5,1492.4,1520,1491,1427,209],[63,-1.5,-31,2.5,106,254,441,1161,1320,1436,1500,1520,1490.5,1426,272],[419,0,0,419,579,1489,1489,649],[56,-5.5,-31,6.5,114,274,473,1489,1489,267],[654,324,104,3,-31,4.9,112.5,276.9,483,1494,1512,1517,1453.5,1277,1005],[1314,0,0,1266,1489,1489],[411,233.5,91,-2.8,-34,-2,94,238.3,415,1144,1294.5,1416,1496.3,1523,1495,1411,1285,1131],[1005,-6,-23.5,-29,33,209,480,834,1171.5,1385,1485.5,1519,1483.3,1376,1211.8],[0,0,1117,1117],[-370,-370,285,1117,1117],[590,77,1227,714],[362,362,942,942],[77,590,714,1227],[1245,0,0,964.5,1139,1293.4,1414.5,1492.9,1519,1497.5,1449],[647,291,15,-162.5,-226,-218.5,-190,157,394,663,1013.5,1283,1457,1519,1452,1268,991.5],[0,0,1489,1489],[0,0,28,122,262,458,1155,1316.5,1427,1477,1489,1489],[743,402.5,161,18.5,-27,-13.5,19,63,108,1385,1487,1516,1465,1317,1072],[0,0,28,119,375,743,1118,1371,1457.5,1489,1489],[0,0,1489,1489],[0,0,717,1313,1489,1489],[746,405.5,163,19,-29,12.5,110,749,1382,1485.5,1516,1464.4,1309.5,1065.4],[0,0,1489,1489],[0,0,1489,1489],[8,-12.5,-21,5.5,85,213.5,387,1489,1489,193],[0,0,1489,1489],[0,0,176,1489,1489],[0,0,1489,1489],[0,0,1489,1489],[744,415,172,21,-31,20,172,414.5,744,1073,1318,1467.5,1520,1468,1318,1070.5],[0,0,709,855.5,1039,1254,1396,1466.5,1489,1489],[744,415,172,21,-297.5,-369.1,-393,-386.5,-365,-183,744,1073,1318,1467.5,1520,1468,1318,1070.5],[0,0,1280.5,1409,1471.5,1489,1489],[92,3,-27,9,109,253,425,1412,1486,1516,1486.1,1396.5,1260.1,1090,340],[1313,0,0,1313,1489,1489],[598,313,115,6,-31,4,115,315.5,598,1489,1489],[1489,0,0,1489,1489],[1489,0,0,1489,1489],[0,0,1489,1489],[1489,0,0,1489,1489],[0,0,176,1489,1489,184],[-392,-392,1556,1556],[1556,-304,-304,1556],[-392,-392,1556,1556],[682,682,684,1489,1489],[-300,-300,-180,-180],[1676,1302,1302,1676],[324,182.8,69,-6,-31,0,758,939,1058,1124.5,1144,1126,1093],[0,-31,8.5,127,315,567,812.8,996,1110,1556,1556],[557,300,118,10.5,-25,0,70,1050,1116,1143,1104,987,801.5],[550,306.8,123,7.5,-31,0,1556,1556,992,803],[552,306.6,124.5,11.6,-26,1,68,539,641,856.3,1016,1115,1148,1107.8,987,797.8],[959,0,0,959,1374,1546,1560,1566,1539.4,1459.5,1117],[569,-375,-410.5,-423,-389.8,-290,-119.3,127,1117,1148,1108.5,998,817.5],[0,0,725,906,1039,1556,1556],[1304,0,0,1304,1499,1499],[-395,-415,-423,-398,-323,-199,-27,1304,1499,1499,1117,-216],[0,0,1117,1556,1556],[0,0,1556,1556],[0,0,725,902.9,1036.5,1120.1,1148,1148,1117],[0,0,725,906,1039,1120.8,1148,1117],[558,313.8,127,8.5,-31,8.5,127,313.8,558,802.4,989.5,1108.4,1148,1108.4,989.5,802.4],[-412,-412,133,323.5,572,813.4,995.5,1109.9,1148,1117],[555,314.1,131.5,16.4,-412,-412,1117,1148,1108,995,809.5],[0,0,912,1105,1114.5,1117,1117],[67,2.5,-27,-2.5,71,182.8,322,1060,1119.5,1144,1116.5,1042,933,803,278],[959,189.8,70,1,-22,-13,10,1117,1438,1438,1117],[392,209.1,76.5,-4.1,-31,0,1117,1117],[1117,0,0,1117,1117],[1117,0,0,1117,1117],[0,0,1117,1117],[1117,-412,-412,1117,1117],[0,0,159,1117,1117,139],[504,-170.9,-292.5,-367.1,-392,-392,1556,1556,1531.1,1456.5,1334.9,660],[-392,-392,1556,1556],[-392,-392,-367.1,-292.5,-170.9,504,660,1334.9,1456.5,1531.1,1556,1556],[395,395,396,440,561,732,927,927,926,880.5,761,589.5],[],[0,0,1489,1489],[557,333.5,163,-361,-361,74,1046,1475,1475,948.5,775.9],[0,0,171,1467,1501,1518,1485.9,1389.5,1243.1,751,207],[258,145,147,257,1067,1176,1176,1066],[1489,426,0,0,426,1489,1489],[-392,-392,1556,1556],[533,-327,-371.5,-385,-358,-275,-156,-10,601,1462,1505,1519,1490,1411,1293.5,1147],[1304,1304,1499,1499],[655,323.1,43.5,-146.6,-210,-146.6,43.5,323.1,655,986.9,1266.5,1456.6,1520,1456.6,1266.5,986.9],[833,616,531,554,1192,1332.4,1435.5,1498.9,1520,1504,1475],[608,162,191,1113,1142,697],[602,57,57,762,762],[561,561,742,742],[655,323.1,43.5,-146.6,-210,-146.6,43.5,323.1,655,986.9,1266.5,1456.6,1520,1456.6,1266.5,986.9],[1788,1668,1668,1788],[1116,960.4,831.5,744.9,716,745,832,961,1116,1271,1400,1487,1516,1487,1400,1271],[179,179,917,1462,1462,917],[566,566,711,1237,1350.4,1440.5,1519,1501.5,1458,722],[585,542,527,543.5,595,685.5,817,1278,1374.5,1452,1520,1502.5,1458,764],[1302,1302,1676,1676],[-412,-412,0,1117,1117],[1050,866,-363,-363,1489,1489,1460,1373,1234.3],[511,511,794,794],[-397,-416,-423,-337,-232,-89,-25,20,20,-237],[1256,566,566,688,1493,1493,1368],[1025,820.1,663.5,564.1,531,563.4,660.5,816.4,1025,1233.8,1390,1487.5,1520,1486.8,1387,1230],[191,162,608,697,1142,1113],[1246,0,0,220,353,944,1489,1493,1493,1363],[1246,0,0,139,664,865,1489,1493,1493,1363],[598,0,0,220,353,944,1489,1517,1500,1456,773],[350,195.6,74.5,-3.9,-30,-10,40,244,1489,1489,523],[0,0,1675,2049,2049],[0,0,2049,2049,1675],[0,0,1670,2049,2049,1670],[0,0,1992,1992,1987,1910,1682],[0,0,1872,1872,1872],[0,0,1712,1843.5,1952,2024.8,2049,2024.8,1952,1843.5,1712],[0,0,1489,1489],[743,402.5,-397,-416,-423,-337,108,1385,1487,1516,1465,1317,1072],[0,0,1489,2049,2049,1489],[0,0,1489,2049,2049,1489],[0,0,1489,2049,2049,1489],[0,0,1489,1872,1872,1489],[0,0,1489,2049,2049,1489],[0,0,2049,2049,1489],[1670,0,0,1670,2049,2049],[1677,0,0,1677,1872,1872],[740,0,0,28,119,375,743,1118,1371,1457.5,1489,1489,883],[0,0,1489,1992,1992,1987,1910,1489],[744,415,172,21,-31,20,172,414.5,744,1073,1318,2049,2049,1070.5],[744,415,172,21,-31,20,172,414.5,744,1073,2049,2049,1318,1070.5],[744,415,172,21,-31,20,172,414.5,744,1073,1670,2049,2049,1670,1070.5],[744,415,172,21,-31,20,172,414.5,744,1073,1992,1992,1987,1910,1070.5],[744,415,172,21,-31,20,172,414.5,744,1073,1872,1872,1872,1070.5],[216,105,105,216,1088,1199,1199,1088],[744,-146,-146,20,172,414.5,744,1611,1611,1520,1468,1318,1070.5],[598,313,115,6,-31,4,115,315.5,598,1489,2049,2049,1489],[598,313,115,6,-31,4,115,315.5,598,1489,2049,2049,1489],[598,313,115,6,-31,4,115,315.5,598,1489,2049,2049,1489],[598,313,115,6,-31,4,115,315.5,598,1489,1872,1872,1489],[1489,0,0,1489,2049,2049],[0,0,469,610.5,787,992,1130,1489,1489],[0,-24,12.4,121.5,284.1,481,1241,1376,1479,1544.3,1566,1536.5,1449,1295.5,1080],[324,182.8,69,-6,-31,0,758,939,1676,1676,1093],[324,182.8,69,-6,-31,0,758,1676,1676,1093],[324,182.8,69,-6,-31,0,758,1297,1676,1676,1297,1093],[324,182.8,69,-6,-31,0,758,1619,1619,1614,1537,1309],[324,182.8,69,-6,-31,0,758,1499,1499,1093],[324,182.8,69,-6,-31,0,758,1630,1761.8,1871,1944.5,1969,1944.5,1871,1761.8,1630],[317,178.8,68,-4.8,-29,-26,3.5,68,559,641,861.3,1020,1116,1148,1146,1127,1093],[557,300,-397,-416,-423,-337,-232,70,1050,1116,1143,1104,987,801.5],[552,306.6,124.5,11.6,-26,1,68,539,641,856.3,1016,1676,1676,797.8],[552,306.6,124.5,11.6,-26,1,68,539,641,856.3,1676,1676,987,797.8],[552,306.6,124.5,11.6,-26,1,68,539,641,856.3,1297,1676,1676,1297,797.8],[552,306.6,124.5,11.6,-26,1,68,539,641,856.3,1499,1499,797.8],[1676,0,0,1302,1676],[1302,0,0,1676,1676],[1297,0,0,1297,1676,1676],[1304,0,0,1304,1499,1499],[484,266.5,104,2.8,-31,12,141,351,637,1469,1566,1556],[0,0,725,1619,1619,1614,1537,1309,1117],[558,313.8,127,8.5,-31,8.5,127,313.8,558,802.4,989.5,1676,1676,802.4],[558,313.8,127,8.5,-31,8.5,127,313.8,558,802.4,1676,1676,989.5,802.4],[558,313.8,127,8.5,-31,8.5,127,313.8,558,802.4,1297,1676,1676,1297,802.4],[558,313.8,127,8.5,-31,8.5,127,313.8,558,1619,1619,1614,1537,1309],[558,313.8,127,8.5,-31,8.5,127,313.8,558,802.4,1499,1499,1499,802.4],[572,7,7,572,732,1297,1297,732],[-148,-148,8.5,127,313.8,558,1241,1241,1108.4,989.5,802.4,558],[392,209.1,76.5,-4.1,-31,0,1117,1676,1676,1117],[392,209.1,76.5,-4.1,-31,0,1117,1676,1676,1117],[392,209.1,76.5,-4.1,-31,0,1117,1676,1676,1117],[392,209.1,76.5,-4.1,-31,0,1117,1499,1499,1117],[1117,-412,-412,1117,1676,1676],[-412,-412,133,323.5,572,813.4,995.5,1109.9,1556,1556],[-370,-370,285,1117,1117],[1676,1292,1292,1676],[1304,1292,1292,1304,1499,1676,1676,1499],[1489,0,0,1489],[832,832,1117,1117],[1489,1105,0,0,1489,1489],[1489,1105,0,0,1489,1489],[1489,1105,0,0,1489,1489],[1489,1105,415,172,21,-31,20,172,414.5,744,1073,1318,1467.5,1520],[1489,1105,0,0,1489,1489],[1489,1105,0,0,174,894,1144.8,1345,1476.3,1520],[1304,0,0,1304,1499,1676,1676,1499],[0,0,1489,1489],[0,0,28,122,262,458,1155,1316.5,1427,1477,1489,1489],[0,0,1313,1489,1489],[0,0,1489,1489],[0,0,1489,1489],[0,0,176,1489,1489,184],[0,0,1489,1489],[744,415,172,21,-31,20,172,414.5,744,1073,1318,1467.5,1520,1468,1318,1070.5],[0,0,1489,1489],[0,0,1489,1489],[0,0,1489,1489],[0,0,1489,1489],[0,0,1489,1489],[0,0,1489,1489],[744,415,172,21,-31,20,172,414.5,744,1073,1318,1467.5,1520,1468,1318,1070.5],[0,0,1489,1489],[0,0,709,855.5,1039,1254,1396,1466.5,1489,1489],[0,0,176,1489,1489,184],[1313,0,0,1313,1489,1489],[1489,0,0,1489,1489],[755,507,325,-16,-16,325,506.5,755,994,1171,1505,1505,1171,993],[0,0,1489,1489],[910,647,471,0,0,471,645.5,910,1489,1489],[0,0,174,894,1144.8,1345,1476.3,1520,1476.3,1345,1144.8,894,174],[1677,0,0,1677,1872,1872],[1489,0,0,1489,1872,1872,1872],[550,306.8,123,7.5,-31,0,1117,1676,1676,803],[306,148.5,46,-10,-26,-5,64,270,1083,1676,1676,986.5,839],[0,-412,-412,725,906,1676,1676,1117],[1676,0,0,1676],[407,213.6,77.5,-3.1,-30,-2.6,79.5,216.1,407,1117,1499,1676,1676,1499,1117],[550,306.8,123,7.5,-31,0,1117,1148,1108,992,803],[-412,-412,110,259.5,444,1195,1355,1467,1534.5,1556,1524.3,1429,1277.8,1078],[1117,-412,-412,1117,1117],[534,299.6,120.5,6.9,-31,7.8,124,308.3,551,1556,1556],[306,148.5,46,-10,-26,-5,64,270,1083,1127.5,1144,1128,1079,986.5,839],[463,262.3,118,-412,-412,-264.5,-96,1556,1556],[0,-412,-412,725,906,1039,1120.8,1148,1117],[768,451.5,241,37.5,-31,37.5,241,451.5,768,1073,1288,1487,1556,1487,1288,1073.5],[0,0,1117,1117],[0,0,1117,1118,1119,1117],[0,0,1556,1556],[-412,-412,0,1117,1117],[1117,0,0,1117,1117],[412,248.5,113,-412,-412,-265,-96,1556,1556],[558,313.8,127,8.5,-31,8.5,127,313.8,558,802.4,989.5,1108.4,1148,1108.4,989.5,802.4],[0,0,1117,1117],[-412,-412,148.5,340.9,577,821.5,1001,1111.3,1148,1115,1020,861.5,646],[549,299,129,-412,-412,-268,-96,1079,1124.5,1143,1102.5,981,792],[558,313.8,127,8.5,-31,7.5,123,308.8,952,1117,1148,1108.6,990.5,803.6],[952,0,0,952,1117,1117],[407,213.6,77.5,-3.1,-30,-2.6,79.5,216.1,407,1117,1117],[546,314,142,-412,-412,159,342.3,576,816.6,996.5,1108.6,1146,1145.5,1143,1117,842],[-412,-412,1117,1117],[446,248.5,-412,-412,248,446,1117,1117],[503,310.5,139,16.5,-30,-30,14.5,139,310.5,503,811.5,1117,1117,811.5],[1304,0,0,1304,1499,1499],[407,213.6,77.5,-3.1,-30,-2.6,79.5,216.1,407,1117,1499,1499,1117],[558,313.8,127,8.5,-31,8.5,127,313.8,558,802.4,1676,1676,802.4],[407,213.6,77.5,-3.1,-30,-2.6,79.5,216.1,407,1117,1676,1676,1117],[503,310.5,139,16.5,-30,-30,14.5,139,310.5,503,811.5,1676,1676,811.5],[424,240.1,94.5,-.4,-32,17,190,493,837,1097,1286,1464.5,1519,1496.5,1430],[0,0,1489,1489],[1315,-193,-193,1315,1489,1489],[-189,-189,-13,1489,1489,2],[572,572,732,732],[0,0,1489,1489],[511,511,794,794],[842,-151,-151,1788,1788,981],[642,447.6,292.5,190.9,157,157,190.4,290.5,450.4,663,857.4,1012.5,1114.1,1148,1148,1114.5,1014,854],[-402,-417.5,-423,-395.5,-313,-179.8,1367,1545,1560.5,1566,1538.5,1456,1321.8,-224],[202,202,209,233.4,306.5,588,1104,1104,1097,1072.5,999,719],[362,27,27,362,942,1277,1277,942],[0,0,1393,910],[0,0,910,1393]],this.KERN_C1=["'","'","-","-","-","-","-","-","-","-","-","-","-","-","-","-","-","-","-","-",".",".","A","A","A","A","A","A","A","A","A","A","A","A","B","B","B","B","C","D","D","D","D","D","D","D","F","F","F","F","F","F","F","F","F","F","F","F","F","I","J","J","J","J","K","K","K","K","K","K","K","K","K","K","K","K","L","L","L","L","L","L","L","L","L","L","L","L","L","L","O","O","O","O","O","O","P","P","P","P","P","P","P","P","P","P","Q","Q","R","R","R","R","R","R","R","R","R","R","S","S","S","S","S","S","S","S","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","U","U","U","U","V","V","V","V","V","V","V","V","V","V","V","V","V","V","W","W","W","W","W","W","W","W","W","W","W","W","W","W","W","X","X","X","X","X","X","X","X","X","X","X","X","X","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Z","Z","Z","Z","Z","Z","Z","Z","Z","Z","Z","Z","Z","Z","a","a","a","b","b","b","c","c","e","f","f","f","f","f","f","f","f","f","f","f","f","h","h","h","k","k","k","k","m","m","m","n","n","n","o","o","o","o","o","p","p","p","r","r","r","r","r","t","t","v","v","v","v","v","v","v","v","w","w","w","w","w","x","x","x","x","x","x","x","x","y","y","y","y","y","y","y","y","y","y","y","y","y","z","z","z","z","z","z","z","z","z","","","","","","","","","","","","",""],this.KERN_C2=["","A","","","z","y","x","w","v","a","Z","Y","X","W","V","T","S","J","I","A","-",",","y","w","v","u","t","Y","W","V","U","T","S","-","T",".","-",",","-","Z","Y","X","W","T",".",",","","","","o","e","a","T","A","?",";",":",".",",","-","","A",".",",","","","","y","w","v","u","o","e","a","O","-","","","y","v","Y","W","V","T","O","J","G","C","-","'","Z","Y","X","T",".",",","","","","o","e","a","Y","A",".",",",".",",","","","y","u","o","e","a","Y","T","-","","y","w","v","S","A",".",",","","","","","","z","y","w","v","u","s","r","o","g","e","c","a","T","S","O","G","C","A","?",";",":",".","-",",","","A",".",",","","","","y","u","o","e","a","A",";",":",".","-",",","","","","y","u","r","o","e","a","A",";",":",".","-",",","","","","","y","u","o","e","a","O","G","C","-","","","","","v","u","s","r","q","p","o","n","m","g","e","d","a","O","A",";",":",".","-",",","","","","","y","w","o","e","a","Z","O","G","C","-","y","w","v","y",".",",","T","-","T","}","y","]","\\","?",".","-",",","*",")","'",'"',"y","w","v","","o","e","-","y","w","v","y","w","v","y","x","v",".",",","y",".",",","","a",".","-",",","y","-","","","o","e","a",".","-",",","","a",".","-",",","","","o","g","e","d","c","-","","","","q","o","g","e","d","c","a",".","-",",","","","q","o","g","e","d","c","-","-","-","Z","Y","X","T",".",",","y","x","v",".",","],this.KERN_K=[100,100,20,50,40,40,50,20,40,20,30,140,80,50,50,150,20,100,30,50,160,130,50,30,50,10,20,80,50,60,10,120,10,50,60,20,-10,20,50,20,20,10,20,50,50,50,50,100,110,50,50,100,-30,100,-60,60,60,300,300,30,10,10,20,20,70,60,20,80,70,80,50,70,70,60,20,110,20,20,110,110,160,100,110,170,20,-100,20,20,160,120,20,20,10,50,30,30,50,50,70,50,50,50,-20,50,300,300,30,30,50,50,55,20,50,50,40,20,60,100,20,30,20,30,22,20,20,20,220,240,50,130,40,170,200,200,200,200,180,200,220,210,220,220,240,70,12,50,40,40,120,-60,200,200,290,150,290,20,10,20,20,100,100,70,65,60,100,100,100,60,80,80,290,50,290,100,100,60,65,60,60,100,100,100,50,80,80,220,50,290,60,50,10,10,80,30,60,60,50,10,10,10,80,130,140,20,80,100,110,110,100,130,100,130,100,100,130,130,120,140,20,80,200,200,290,140,290,60,50,20,20,65,40,60,60,50,10,20,20,20,60,16,10,16,5,20,30,60,20,140,-100,10,-100,-100,-110,120,50,130,-50,-100,-60,-60,20,10,20,20,20,20,100,20,10,20,20,10,20,15,20,15,20,30,5,20,30,40,36,290,20,290,10,40,18,40,18,18,40,180,40,180,20,20,70,20,70,24,20,24,10,24,10,20,50,18,40,18,10,18,10,18,10,18,40,190,40,190,12,10,10,12,10,12,10,10,20,50,20,20,20,10,50,30,30,15,20,15,20,30],this.pathCache=[],this.pathMissing=null,this.ctxReference=null;for(let t=this.GLYPH_DATA.length-1;t>=0;t--)this.pathCache[t]=null}getKerning(t,e){const n=this.KERN_K.length;for(let i=0;i<n;i++)if(this.KERN_C1[i]==t&&this.KERN_C2[i]==e)return-this.KERN_K[i];return 0}static measureText(t,e){return this.main.measureText(t,e)}measureText(t,e){let n=en.main,i=e/n.UNITS_PER_EM,s=0;for(let e=0;e<t.length;e++){let i=t.charAt(e),o=this.getIndex(i);o<0?s+=n.MISSING_HORZ:(s+=n.HORIZ_ADV_X[o],e<t.length-1&&(s+=n.getKerning(i,t.charAt(e+1))))}return[s*i,n.ASCENT*i*n.ASCENT_FUDGE,-n.DESCENT*i]}static measureWidths(t,e){return this.main.measureWidths(t,e)}measureWidths(t,e){let n=en.main,i=e/n.UNITS_PER_EM,s=[0],o=0;for(let e=0;e<t.length;e++){let r=t.charAt(e),a=this.getIndex(r);a<0?(o+=n.MISSING_HORZ,s.push(o*i)):(o+=n.HORIZ_ADV_X[a],e<t.length-1&&(o+=n.getKerning(r,t.charAt(e+1))),s.push(o*i))}return s}getIndex(t){return this.UNICODE.indexOf(t)}getRawGlyph(t){return this.GLYPH_DATA[t]}getGlyphPath(t){let e=this.pathCache[t];return null!=e||(e=new Path2D(this.GLYPH_DATA[t]),this.pathCache[t]=e),e}getMissingPath(){return this.pathMissing||(this.pathMissing=new Path2D(this.MISSING_DATA)),this.pathMissing}getOutlineX(t){return this.OUTLINE_X[t].slice(0)}getOutlineY(t){return this.OUTLINE_Y[t].slice(0)}initNativeFont(t){if(null!=t||!this.ctxReference)if(null==t){let t=new OffscreenCanvas(256,256);this.ctxReference=t.getContext("2d")}else this.ctxReference=t}static measureTextNative(t,e,n,i={}){return this.main.measureTextNative(t,e,n,i)}measureTextNative(t,e,n,i={}){if(!this.ctxReference)throw"Calling measureTextNative without having called initNativeFont first";this.ctxReference.save();let s="";i.bold&&(s+="bold "),i.italic&&(s+="italic "),this.ctxReference.font=s+n+"px "+e;let o=this.ctxReference.measureText(t);this.ctxReference.restore();const r=this.ASCENT_FUDGE*this.ASCENT/this.UNITS_PER_EM;return[o.width,n*r,n*(-this.DESCENT/this.ASCENT)*r]}}en.main=new en;class nn{constructor(t){if(t)this.data=kt(t);else{t={name:"default",pointScale:20,resolutionDPI:100,fontSize:.65,lineSize:.075,bondSep:.2,defaultPadding:.2,foreground:0,background:16777215,atomCols:new Array(112)};for(let e=0;e<=111;e++)t.atomCols[e]=0;this.data=t}}clone(){return new nn(this.data)}static defaultBlackOnWhite(t){let e=new nn;return t&&(e.data.pointScale=t),e}static defaultWhiteOnBlack(t){let e=new nn;t&&(e.data.pointScale=t),e.data.foreground=16777215,e.data.background=0;for(let t=0;t<=111;t++)e.data.atomCols[t]=16777215;return e}static defaultColourOnWhite(t){let e=nn.defaultBlackOnWhite(t);return e.data.atomCols[0]=4210752,e.data.atomCols[1]=8421504,e.data.atomCols[6]=0,e.data.atomCols[7]=255,e.data.atomCols[8]=16711680,e.data.atomCols[9]=16744576,e.data.atomCols[15]=16744448,e.data.atomCols[16]=8421376,e.data.atomCols[17]=49152,e.data.atomCols[35]=12599296,e}static defaultColourOnBlack(t){let e=nn.defaultWhiteOnBlack(t);return e.data.atomCols[0]=10526880,e.data.atomCols[1]=8421504,e.data.atomCols[6]=16777215,e.data.atomCols[7]=4210943,e.data.atomCols[8]=16728128,e.data.atomCols[9]=16744576,e.data.atomCols[15]=16744448,e.data.atomCols[16]=16776960,e.data.atomCols[17]=4259648,e.data.atomCols[35]=16744512,e}static defaultPrintedPublication(){let t=nn.defaultBlackOnWhite(9.6);return t.data.resolutionDPI=600,t.data.fontSize=.8,t.data.bondSep=.27,t.data.lineSize=.0625,t}}class sn{constructor(){this.colAtom={},this.colBond={},this.dottedRectOutline={},this.dottedBondCross={},this.hideAtoms=new Set,this.hideBonds=new Set,this.atomFrameDotSz=[],this.atomFrameCol=[],this.atomCircleSz=[],this.atomCircleCol=[],this.atomDecoText=[],this.atomDecoCol=[],this.atomDecoSize=[],this.bondDecoText=[],this.bondDecoCol=[],this.bondDecoSize=[],this.overlapAtoms=[]}}!function(t){t.Atom="A",t.Bond="B",t.Artifact="R",t.Effect="E"}(Pe||(Pe={}));class on{constructor(t){this.items=[];let e=(t||"").split("&");for(let t of e){let e=t.split("|");if(3!=e.length)continue;let n={type:e[0],details:e[1],coords:e[2].split(",").map((t=>parseFloat(t)))};this.items.push(n)}}append(t,e,n){for(let t=e.length-1;t>=0;t--)"|"!=e[t]&&"&"!=e[t]||(e=e.substring(0,t)+e.substring(t+1));this.items.push({type:t,details:e,coords:n})}serialise(){var t;let e=[];for(let n of this.items){let i=(null!==(t=n.coords)&&void 0!==t?t:[]).map((t=>t.toFixed(1))).join(",");e.push(`${n.type}|${n.details}|${i}`)}return e.join("&")}packWithCoords(){return this.serialise()}packWithoutCoords(){return this.items.map((t=>`${t.type}|${t.details}`)).join("&")}}!function(t){t[t.Normal=1]="Normal",t[t.Inclined=2]="Inclined",t[t.Declined=3]="Declined",t[t.Unknown=4]="Unknown",t[t.Dotted=5]="Dotted",t[t.DotDir=6]="DotDir",t[t.IncDouble=7]="IncDouble",t[t.IncTriple=8]="IncTriple",t[t.IncQuadruple=9]="IncQuadruple"}(Fe||(Fe={}));class rn{static guestimateSize(t,e,n,i){let s=t.boundary(),o=s.minX(),r=s.minY(),a=s.maxX(),l=s.maxY(),d=e.data.fontSize*this.FONT_CORRECT;for(let e=1;e<=t.numAtoms;e++)if(t.atomExplicit(e)){let n=0;for(let i of t.atomElement(e))"|{}^".includes(i)||n++;let i=t.atomHydrogens(e)>0?1:0;const s=.35*d*(n+i),p=.75*d*(1+.2*i),h=t.atomX(e),c=t.atomY(e);o=Math.min(o,h-s),a=Math.max(a,h+s),r=Math.min(r,c-p),l=Math.max(l,c+p)}let p=Math.max(1,a-o)*e.data.pointScale,h=Math.max(1,l-r)*e.data.pointScale;return n>0&&p>n&&(h*=n/p,p=n),i>0&&h>i&&(p*=i/h,h=i),[p,h]}constructor(t,e,n,i=new sn){this.mol=t,this.measure=e,this.policy=n,this.effects=i,this.points=[],this.lines=[],this.rings=[],this.paths=[],this.space=[],this.unsplitLines=null,this.wantArtifacts=!0,this.wantCrossings=!0,this.artifacts=null,this.bondOrder=[],this.atomCharge=[],this.atomUnpaired=[],this.artifactCharge=new Map,this.artifactUnpaired=new Map,this.artifactFract=new Map}getMolecule(){return this.mol}getMeasure(){return this.measure}getPolicy(){return this.policy}getEffects(){return this.effects}getScale(){return this.scale}setWantArtifacts(t){this.wantArtifacts=t}getArtifacts(){return this.artifacts}setArtifacts(t){this.artifacts=t}setWantCrossings(t){this.wantCrossings=t}arrange(){const{mol:t,measure:e,policy:i,effects:s}=this;this.scale=e.scale(),this.bondSepPix=i.data.bondSep*e.scale(),this.lineSizePix=i.data.lineSize*e.scale(),this.fontSizePix=i.data.fontSize*e.scale()*rn.FONT_CORRECT,this.ymul=e.yIsUp()?-1:1;let o=null;if(this.wantArtifacts&&null==this.artifacts){this.artifacts=new Ft(t),o=n.booleanArray(!1,t.numAtoms);for(let t of this.artifacts.getResPaths())for(let e of t.atoms)o[e-1]=!0;for(let t of this.artifacts.getResRings())for(let e of t.atoms)o[e-1]=!0;for(let t of this.artifacts.getArenes()){o[t.centre-1]=!0;for(let e of t.atoms)o[e-1]=!0}}this.setupBondOrders();for(let e=1;e<=t.numAtoms;e++){if(t.atomElement(e).length>2&&0==t.atomHydrogens(e)){this.points.push(null),this.space.push(null);continue}let n={anum:e,text:t.atomExplicit(e)||Zt.atomIsWeirdLinear(t,e)?t.atomElement(e):null,fsz:this.fontSizePix,col:this.policy.data.atomCols[t.atomicNumber(e)],oval:new u(this.measure.angToX(t.atomX(e)),this.measure.angToY(t.atomY(e)),0,0)},i=this.effects.colAtom[e];if(i&&(n.col=i),o&&o[e-1]&&"C"==t.atomElement(e)&&(n.text=null),null!=n.text){let t=this.measure.measureText(n.text,n.fsz);const e=1.1;n.oval.rw=.5*t[0]*e,n.oval.rh=.5*t[1]*e}this.points.push(n),this.space.push(this.computeSpacePoint(n))}for(let e=1;e<=t.numAtoms;e++)null==this.points[e-1]&&this.processLabel(e);let r=n.booleanArray(!1,t.numBonds);for(let i=1;i<=t.numBonds;i++){let s=t.bondFrom(i),o=t.bondTo(i),a=t.bondType(i),l=this.bondOrder[i-1];if(l<0)continue;let d=this.effects.colBond[i];d||(d=this.policy.data.foreground),r[i-1]=2==l&&(a==ge.BONDTYPE_NORMAL||a==ge.BONDTYPE_UNKNOWN);let p=this.points[s-1],h=this.points[o-1],c=p.oval.cx,m=p.oval.cy,g=h.oval.cx,k=h.oval.cy;if(Math.abs(g-c)<=1&&Math.abs(k-m)<=1){r[i-1]=!1;continue}if(r[i-1])continue;let y=(1==l&&a==ge.BONDTYPE_NORMAL?.25:.5)*e.scale(),w=this.shrinkBond(c,m,g,k,this.backOffAtom(s,c,m,g,k,y)),x=this.shrinkBond(g,k,c,m,this.backOffAtom(o,g,k,c,m,y));this.ensureMinimumBondLength(w,x,c,m,g,k,y);let C=this.lineSizePix,v=0,b=te.queryBondOrders(t,i);if(n.notBlank(b)){n.sort(b),-1==b[0]&&(b.splice(0,1),b.push(-1));let t=n.equals(b,[0,1,2,3,-1])?"?":b.map((t=>-1==t?"A":t.toString())).join(""),e=this.orthogonalDelta(w[0],w[1],x[0],x[1],1.3*this.bondSepPix),r=-.5;for(let t=0;t<2;t++,r++){let t=w[0]+r*e[0],n=w[1]+r*e[1],a=x[0]+r*e[0],l=x[1]+r*e[1],p={bnum:i,bfr:s,bto:o,type:Fe.Dotted,line:new f(t,n,a,l),size:.5*C,head:v,col:16777215&d|2147483648};this.lines.push(p),this.space.push(this.computeSpaceLine(p))}let a=Math.atan2(x[1]-w[1],x[0]-w[0])*et;(a<-90||a>90)&&(a+=180);let l={anum:0,text:t,fsz:.35*this.fontSizePix,col:d,oval:new u(.5*(w[0]+x[0]),.5*(w[1]+x[1]),0,0),rotation:a};this.points.push(l),this.space.push(this.computeSpacePoint(l));continue}let A=Fe.Normal;if(1==l&&a==ge.BONDTYPE_INCLINED?(A=Fe.Inclined,v=.15*e.scale()):1==l&&a==ge.BONDTYPE_DECLINED?(A=Fe.Declined,v=.15*e.scale()):a==ge.BONDTYPE_UNKNOWN?(A=Fe.Unknown,v=.2*e.scale()):0==l?A=a==ge.BONDTYPE_INCLINED||a==ge.BONDTYPE_DECLINED?Fe.DotDir:Fe.Dotted:2!=l&&3!=l&&4!=l||a!=ge.BONDTYPE_INCLINED&&a!=ge.BONDTYPE_DECLINED||(A=2==l?Fe.IncDouble:3==l?Fe.IncTriple:Fe.IncQuadruple,v=(2==l?.2:.25)*e.scale()),0==l){let e=x[0]-w[0],n=x[1]-w[1],i=1/U(e,n),r=.5*e*i*this.bondSepPix,a=.5*n*i*this.bondSepPix;t.atomAdjCount(s)>1&&(w[0]+=r,w[1]+=a),t.atomAdjCount(o)>1&&(x[0]-=r,x[1]-=a)}if(1!=l&&a==ge.BONDTYPE_DECLINED&&([w,x]=[x,w]),l>1&&(a==ge.BONDTYPE_NORMAL||a==ge.BONDTYPE_UNKNOWN)){let t=this.orthogonalDelta(w[0],w[1],x[0],x[1],this.bondSepPix),e=1,n=1;for(let n=0,i=-.5*(l-1);n<l;n++,i++){let n=w[0]+i*t[0],o=w[1]+i*t[1],r=x[0]+i*t[0],a=x[1]+i*t[1];e=Math.min(e,this.backOffAtom(s,n,o,r,a,y))}w=this.shrinkBond(w[0],w[1],x[0],x[1],e);for(let e=0,i=-.5*(l-1);e<l;e++,i++){let e=w[0]+i*t[0],s=w[1]+i*t[1],r=x[0]+i*t[0],a=x[1]+i*t[1];n=Math.min(n,this.backOffAtom(o,r,a,e,s,y))}x=this.shrinkBond(x[0],x[1],w[0],w[1],n);for(let e=0,n=-.5*(l-1);e<l;e++,n++){let e=w[0]+n*t[0],r=w[1]+n*t[1],a=x[0]+n*t[0],l=x[1]+n*t[1],p={bnum:i,bfr:s,bto:o,type:A,line:new f(e,r,a,l),size:C,head:v,col:d};this.lines.push(p),this.space.push(this.computeSpaceLine(p))}}else{let t={bnum:i,bfr:s,bto:o,type:A,line:new f(w[0],w[1],x[0],x[1]),size:C,head:v,col:d};this.lines.push(t),this.space.push(this.computeSpaceLine(t))}}let a=this.orderedRingList();for(let e=0;e<a.length;e++)for(let n=0;n<a[e].length;n++){let i=t.findBond(a[e][n],a[e][n<a[e].length-1?n+1:0]);r[i-1]&&(this.processDoubleBond(i,a[e]),r[i-1]=!1)}for(let e=1;e<=t.numBonds;e++)r[e-1]&&this.processDoubleBond(e,this.priorityDoubleSubstit(e));let l=n.numberArray(0,t.numAtoms);for(let e=1;e<=t.numAtoms;e++)l[e-1]=null==this.points[e-1].text?0:t.atomHydrogens(e);for(let e=0;e<t.numAtoms;e++)l[e]>0&&this.placeHydrogen(e,l[e],!0)&&(l[e]=0);for(let e=0;e<t.numAtoms;e++)l[e]>0&&this.placeHydrogen(e,l[e],!1);for(let e=1;e<=t.numAtoms;e++)if(t.atomIsotope(e)!=ge.ISOTOPE_NATURAL){let n=t.atomIsotope(e).toString(),s=i.data.atomCols[t.atomicNumber(e)];this.placeAdjunct(e,n,.6*this.fontSizePix,s,150*tt)}for(let e=1;e<=t.numAtoms;e++){let n="",s=this.atomCharge[e-1];-1==s?n="-":1==s?n="+":s<-1?n=Math.abs(s)+"-":s>1&&(n=s+"+");for(let t=this.atomUnpaired[e-1];t>0;t--)n+=".";if(0==n.length)continue;let o=i.data.atomCols[t.atomicNumber(e)];this.placeAdjunct(e,n,1==n.length?.8*this.fontSizePix:.6*this.fontSizePix,o,30*tt)}for(let t=0;t<s.atomDecoText.length;t++){let e=s.atomDecoText[t];e&&this.annotateAtom(t+1,e,s.atomDecoCol[t],s.atomDecoSize[t]*this.scale*rn.FONT_CORRECT)}for(let t=0;t<s.bondDecoText.length;t++){let e=s.bondDecoText[t];e&&this.annotateBond(t+1,e,s.bondDecoCol[t],s.bondDecoSize[t]*this.scale*rn.FONT_CORRECT)}for(let e=0;e<Math.min(s.atomCircleSz.length,t.numAtoms);e++)if(s.atomCircleSz[e]>0){let t=s.atomCircleSz[e]*this.scale,n=this.points[e],i=new m(n.oval.cx-t,n.oval.cy-t,2*t,2*t),o={anum:0,bnum:0,box:i,px:[i.minX(),i.maxX(),i.maxX(),i.minX()],py:[i.minY(),i.minY(),i.maxY(),i.maxY()]};this.space.push(o)}if(null!=this.artifacts){for(let t of this.artifacts.getResPaths())this.createCurvedPath(t.atoms,this.artifactFract.get(t),0),this.delocalisedAnnotation(t.atoms,this.artifactCharge.get(t),this.artifactUnpaired.get(t));for(let t of this.artifacts.getResRings())this.createCircularRing(t.atoms),this.delocalisedAnnotation(t.atoms,this.artifactCharge.get(t),this.artifactUnpaired.get(t));for(let e of this.artifacts.getArenes()){let n=e.atoms.length>2;if(n)for(let i=0;i<e.atoms.length;i++){let s=i<e.atoms.length-1?i+1:0;if(0==t.findBond(e.atoms[i],e.atoms[s])){n=!1;break}}let i=2==e.atoms.length;this.createBondCentroid(e.centre,e.atoms),i||(n?this.createCircularRing(e.atoms):this.createCurvedPath(e.atoms,!1,e.centre)),this.delocalisedAnnotation(e.atoms,this.artifactCharge.get(e),this.artifactUnpaired.get(e))}}if(this.wantCrossings){let e=new Je(t);e.calculateCrossings();for(let t of e.crossings)1==t.higher?this.resolveLineCrossings(t.bond1,t.bond2):2==t.higher&&this.resolveLineCrossings(t.bond2,t.bond1)}let d=new $t(t);for(let t of d.getIDList())this.processPolymerUnit(d.getUnit(t),d.getUnits())}numPoints(){return this.points.length}getPoint(t){return this.points[t]}getPoints(){return this.points}numLines(){return this.lines.length}getLine(t){return this.lines[t]}getLines(){return this.lines}getUnsplitLines(){return this.unsplitLines}numRings(){return this.rings.length}getRing(t){return this.rings[t]}getRings(){return this.rings}numPaths(){return this.paths.length}getPath(t){return this.paths[t]}getPaths(){return this.paths}numSpace(){return this.space.length}getSpace(t){return this.space[t]}getSpaces(){return this.space}offsetEverything(t,e){var i;for(let n of this.points)n.oval.offsetBy(t,e);for(let n of[...this.lines,...null!==(i=this.unsplitLines)&&void 0!==i?i:[]])n.line.offsetBy(t,e);for(let n of this.rings)n.cx+=t,n.cy+=e;for(let i of this.paths)n.addTo(i.px,t),n.addTo(i.py,e);for(let i of this.space)i.box.offsetBy(t,e),n.addTo(i.px,t),n.addTo(i.py,e)}offsetOrigin(){let t=this.determineBoundary();0==t[0]&&0==t[1]||this.offsetEverything(-t[0],-t[1])}scaleEverything(t){var e;if(1!=t){this.scale*=t;for(let e of this.points)e.oval.scaleBy(t),e.fsz*=t;for(let n of[...this.lines,...null!==(e=this.unsplitLines)&&void 0!==e?e:[]])n.line.scaleBy(t),n.size*=t,n.head*=t;for(let e of this.rings)e.cx*=t,e.cy*=t,e.rw*=t,e.rh*=t,e.size*=t;for(let e of this.paths)n.mulBy(e.px,t),n.mulBy(e.py,t),e.size*=t;for(let e of this.space)e.box.scaleBy(t),n.mulBy(e.px,t),n.mulBy(e.py,t)}}determineBoundary(t){if(null==t&&(t=0),0==this.space.length)return[0,0,2*t,2*t];let e=n.numberArray(0,4),i=this.space[0];e[0]=i.box.x,e[1]=i.box.y,e[2]=i.box.x+i.box.w,e[3]=i.box.y+i.box.h;for(let t=this.space.length-1;t>0;t--)i=this.space[t],e[0]=Math.min(e[0],i.box.x),e[1]=Math.min(e[1],i.box.y),e[2]=Math.max(e[2],i.box.x+i.box.w),e[3]=Math.max(e[3],i.box.y+i.box.h);return e}determineBoundaryBox(){let[t,e,n,i]=this.determineBoundary();return new m(t,e,n-t,i-e)}squeezeInto(t,e,i,s,o){null!=o&&o>0&&(t+=o,e+=o,i-=2*o,s-=2*o);let r=this.determineBoundary(0),a=r[2]-r[0],l=r[3]-r[1];if(a>i||l>s){let t=1;a>i&&(t=i/a),l>s&&(t=Math.min(t,s/l)),this.scaleEverything(t),n.mulBy(r,t)}this.offsetEverything(t-r[0]+.5*(i-r[2]+r[0]),e-r[1]+.5*(s-r[3]+r[1]))}limitBounds(t,e){let n=this.determineBoundary(0);if(n[0]==n[2]&&n[1]==n[3])return;let i=Math.min(1,Math.min(t/(n[2]-n[0]),e/(n[3]-n[1])));this.offsetEverything(-n[0],-n[1]),this.scaleEverything(i)}monochromate(t){for(let e of this.points)e.col=t;for(let e of this.lines)e.col=t}spatialCongestion(t,e,n){null==n&&(n=.001);let i=0;for(let s=0;s<this.points.length;s++){let o=this.points[s];if(null==o)continue;let r=o.oval.cx-t,a=o.oval.cy-e;i+=1/(r*r+a*a+n)}return i}clone(){let t=new rn(this.mol,this.measure,this.policy,this.effects);t.scale=this.scale,t.bondSepPix=this.bondSepPix,t.lineSizePix=this.lineSizePix,t.fontSizePix=this.fontSizePix,t.ymul=this.ymul;for(let e of this.points)t.points.push(kt(e));for(let e of this.lines)t.lines.push(kt(e));for(let e of this.space)t.space.push(kt(e));return t}setupBondOrders(){const t=this.mol;for(let e=0;e<t.numBonds;e++)this.bondOrder[e]=t.bondOrder(e+1);for(let e=0;e<t.numAtoms;e++)this.atomCharge[e]=t.atomCharge(e+1),this.atomUnpaired[e]=t.atomUnpaired(e+1);let e=(e,n)=>{let i=0,s=0;for(let t of n)i+=this.atomCharge[t-1],s+=this.atomUnpaired[t-1],this.atomCharge[t-1]=this.atomUnpaired[t-1]=0;this.artifactCharge.set(e,i),this.artifactUnpaired.set(e,s);for(let e of n)for(let i of t.atomAdjList(e))if(!n.includes(i)){let n=t.findBond(e,i);this.bondOrder[n-1]>=0&&(this.bondOrder[n-1]=1)}};if(null!=this.artifacts){for(let n of this.artifacts.getResPaths()){let i=0,s=0,o=0;for(let e=0;e<n.atoms.length;e++){i+=t.atomCharge(n.atoms[e]),s+=t.atomUnpaired(n.atoms[e]);let r=t.findBond(n.atoms[e],n.atoms[e<n.atoms.length-1?e+1:0]);r>0&&(o+=t.bondOrder(r))}let r=(2*o-i+s)/n.atoms.length<1;this.artifactFract.set(n,r);for(let e=0;e<n.atoms.length-1;e++){let i=t.findBond(n.atoms[e],n.atoms[e+1]);i>0&&(this.bondOrder[i-1]=r?-1:1)}e(n,n.atoms)}for(let n of this.artifacts.getResRings()){for(let e=0;e<n.atoms.length;e++){let i=t.findBond(n.atoms[e],n.atoms[e<n.atoms.length-1?e+1:0]);i>0&&(this.bondOrder[i-1]=1)}e(n,n.atoms)}for(let n of this.artifacts.getArenes()){let i=2==n.atoms.length;for(let e=0;e<n.atoms.length;e++){if(!i){let i=t.findBond(n.atoms[e],n.atoms[e<n.atoms.length-1?e+1:0]);i>0&&(this.bondOrder[i-1]=1)}let s=t.findBond(n.centre,n.atoms[e]);s>0&&(this.bondOrder[s-1]=-1)}e(n,n.atoms)}}}placeAdjunct(t,e,i,s,o){let r=this.measure.measureText(e,i),a=this.points[t-1],l=a.oval.cx,d=a.oval.cy,p=.55*r[0],h=.55*r[1];if(".."==e){let e=this.mol.atomAdjBonds(t).filter((t=>0==this.mol.bondOrder(t)));if(1==e.length){let n=this.getPoint(this.mol.bondOther(e[0],t)-1),o=n.oval.cx-l,r=n.oval.cy-d,a=1/U(o,r),c=.15*i,m=r*a*2.5*c,f=-o*a*2.5*c,g=1.2*(p+h)*a;return[o,r]=[o*g,r*g],this.points.push({anum:0,text:".",fsz:i,col:s,oval:new u(l+o+m,d+r+f,c,c)}),void this.points.push({anum:0,text:".",fsz:i,col:s,oval:new u(l+o-m,d+r-f,c,c)})}}let c=0,f=0,g=0,k=n.numberArray(0,4),y=n.numberArray(0,4),w=10,x=!1;for(let t=.5*(a.oval.rw+a.oval.rh);!x&&t<1.5*this.measure.scale();t+=.1*this.measure.scale()){const e=5*tt;for(let n=0;!x&&n<Math.PI-1e-4;n+=e)for(let i=-1;i<=1;i+=2){let s=n*i+(i>0?e:0),r=o+s,a=t*Math.cos(r),m=t*Math.sin(r)*-this.ymul,u=l+a-p,C=l+a+p,v=d+m-h,b=d+m+h;k[0]=u,y[0]=v,k[1]=C,y[1]=v,k[2]=C,y[2]=b,k[3]=u,y[3]=b;let A=this.countPolyViolations(k,y,null,!1),T=10*A+Math.abs(s)+10*t,M=0==A&&Math.abs(s)<(w+1)*tt;if((0==c||M||T<c)&&(c=T,f=a,g=m),M){x=!0;break}}w+=5}a={anum:0,text:e,fsz:i,col:s,oval:new u(l+f,d+g,p,h)},this.points.push(a);let C={anum:0,bnum:0,box:new m(a.oval.cx-p,a.oval.cy-h,2*p,2*h),px:[a.oval.cx-p,a.oval.cx+p,a.oval.cx+p,a.oval.cx-p],py:[a.oval.cy-h,a.oval.cy-h,a.oval.cy+h,a.oval.cy+h]};this.space.push(C)}processLabel(t){let e=this.mol.atomX(t),i=this.mol.atomY(t),s=0,o=0,r=this.mol.atomAdjList(t);for(let t=0;t<r.length;t++){let n=Math.atan2(this.mol.atomY(r[t])-i,this.mol.atomX(r[t])-e)*et;n>=-15&&n<=15?o+=3:n>=-85&&n<=85?o++:n>85&&n<95||n<-85&&n>-95||(n>165||n<-165?s+=3:s++)}let a=this.mol.atomElement(t),l=a.indexOf("|"),d=a.indexOf("{"),p=0;0==s&&0==o&&l<0&&d<0||(p=s<o?-1:o<s?1:Zt.congestionPoint(this.mol,e-1,i)<.5*Zt.congestionPoint(this.mol,e+1,i)?-1:1);let h=null,c=null,m=null,f=0;if(l<0&&d<0)0==p?h=[a]:p<0?(h=[a.substring(0,a.length-1),a.substring(a.length-1)],f=1):h=[a.substring(0,1),a.substring(1)];else{let t=[],e=[],i=[],s=a.split("|");p<0&&(s=n.reverse(s));let o="";for(let n=0;n<s.length;n++){let r=p>=0&&0==n||p<0&&n==s.length-1;p<0&&0==f&&n==s.length-1&&(f=t.length);let a=0;o="";for(let l=0;l<s[n].length;l++){let d=s[n].charAt(l);"{"==d||"}"==d?(o.length>0&&(t.push(o.toString()),e.push(a),i.push(r)),o="",a="{"==d?-1:0):"^"==d&&-1==a&&0==o.length?a=1:o+=d}o.length>0&&(t.push(o.toString()),e.push(a),i.push(r))}for(h=t,c=e,m=i;f<h.length-1&&0!=c[f];)f++}let g=n.numberArray(0,h.length),k=0;for(let t=0;t<h.length;t++)g[t]=this.measure.measureText(h[t],this.fontSizePix)[0],null!=c&&0!=c[t]&&(g[t]*=.6),k+=g[t];let y=this.measure.angToX(e),w=this.measure.angToY(i);for(let t=0;t<f;t++)y-=g[t];y-=.5*g[f];for(let e=0;e<h.length;e++){let n={anum:e==f||null!=m&&m[e]?t:0,text:h[e],fsz:this.fontSizePix,col:this.policy.data.atomCols[this.mol.atomicNumber(t)],oval:new u(y+.5*g[e],w,.5*g[e]*1.1,.5*this.fontSizePix*1.1)};null!=c&&0!=c[e]&&(n.fsz*=.6,c[e]<0?n.oval.cy+=.7*n.fsz*(this.measure.yIsUp()?-1:1):n.oval.cy-=.3*n.fsz*(this.measure.yIsUp()?-1:1)),e==f?(this.points[t-1]=n,this.space[t-1]=this.computeSpacePoint(n)):(this.points.push(n),this.space.push(this.computeSpacePoint(n))),y+=g[e]}}backOffAtom(t,e,n,i,s,o){if(e==i&&n==s)return 1;let r=e-i,a=n-s,d=U(r,a),p=1/d;const h=.1*this.measure.scale();let c=e+2*h*r*p,m=n+2*h*a*p,u=d,f=!1;for(let o of this.space)if(o.anum==t){const t=o.px.length;if(0==t)continue;for(let r=0;r<t;r++){let a=r<t-1?r+1:0,d=o.px[r],p=o.py[r],h=o.px[a],g=o.py[a];if(!l.doLineSegsIntersect(c,m,i,s,d,p,h,g))continue;let k=l.lineIntersect(e,n,i,s,d,p,h,g);f=!0,u=Math.min(u,U(k[0]-i,k[1]-s))}}return f?(u=Math.max(o,u-h),u/d):1}backOffAtomDelta(t,e,n,i,s,o){let r=this.backOffAtom(t,e,n,i,s,o);if(r>=1)return null;r=1-r;let a=(i-e)*r,l=(s-n)*r;return[Y(a,l),a,l]}shrinkBond(t,e,n,i,s){return 1==s?[t,e]:[n+s*(t-n),i+s*(e-i)]}ensureMinimumBondLength(t,e,n,i,s,o,r){let a=e[0]-t[0],l=e[1]-t[1],d=Y(a,l);if(d>=G((r=Math.min(r,U(s-n,o-i)))-1e-4))return;let p=Math.sqrt(d),h=U(t[0]-n,t[1]-i),c=U(s-e[0],o-e[1]),m=1-r/p,u=1/(h+c),f=h*m*u,g=c*m*u;t[0]-=a*f,t[1]-=l*f,e[0]+=a*g,e[1]+=l*g}orderedRingList(){let t=[],e=[6,5,7,4,3];for(let n=0;n<e.length;n++){let i=this.mol.findRingsOfSize(e[n]);for(let e=0;e<i.length;e++)t.push(i[e])}let i=t.length,s=n.numberArray(0,this.mol.numAtoms);for(let e=0;e<i;e++){let n=t[e];for(let t=0;t<n.length;t++)s[n[t]-1]++}let o=n.numberArray(0,i);for(let e=0;e<i;e++){let n=t[e];for(let t=0;t<n.length;t++)o[e]+=s[n[t]-1]}let r=n.idxSort(o),a=n.numberArray(0,i),l=0;for(let e=0;e<i;e++){let n=t[r[e]];for(let t=0;t<n.length;t++){let i=this.mol.findBond(n[t],n[t+1<n.length?t+1:0]);2==this.mol.bondOrder(i)&&a[e]++}l=Math.max(l,a[e])}let d=[];for(let e=l;e>=0;e--)for(let n=0;n<i;n++)a[n]==e&&d.push(t[r[n]]);return d}orthogonalDelta(t,e,n,i,s){let o=e-i,r=n-t,a=Y(o,r),l=a>0?s/Math.sqrt(a):1;return[o*l,r*l]}processDoubleBond(t,e){let n=this.mol.bondFrom(t),i=this.mol.bondTo(t),s=this.mol.atomAdjList(n),o=this.mol.atomAdjList(i),r=this.points[n-1],a=this.points[i-1],l=r.oval.cx,d=r.oval.cy,p=a.oval.cx,h=a.oval.cy,c=this.orthogonalDelta(l,d,p,h,this.bondSepPix);const m=.5*this.measure.scale();let u=p-l,g=h-d,k=Math.atan2(g,u),y=0,w=0,x=0,C=0,v=0,b=0,A=0,T=0,M=!1;for(let t=0;t<s.length;t++)if(s[t]!=i){let i=this.mol.bondOrder(this.mol.findBond(n,s[t]));if(0==i)continue;if(i>1){M=!0;break}let o=!1;for(let n=0;n<(null==e?0:e.length);n++)e[n]==s[t]&&(o=!0);let r=it(Math.atan2(this.points[s[t]-1].oval.cy-d,this.points[s[t]-1].oval.cx-l),k);if(Math.abs(r)*et>175){M=!0;break}r>0?(o&&y++,v=s[t]):(o&&w++,b=s[t])}for(let t=0;t<o.length;t++)if(o[t]!=n){let n=this.mol.bondOrder(this.mol.findBond(i,o[t]));if(0==n)continue;if(n>1){M=!0;break}let s=!1;for(let n=0;n<(null==e?0:e.length);n++)e[n]==o[t]&&(s=!0);let r=it(Math.atan2(this.points[o[t]-1].oval.cy-h,this.points[o[t]-1].oval.cx-p),k);if(Math.abs(r)*et>175){M=!0;break}r>0?(s&&x++,A=o[t]):(s&&C++,T=o[t])}let E=0;M||y>1||w>1||x>1||C>1||y>0&&w>0||x>0&&C>0||(y>0||x>0?E=1:(w>0||C>0)&&(E=-1));let S=this.lineSizePix,N=l,D=d,R=p,O=h,L=0,B=0,q=0,_=0;0==E?(N=l+.5*c[0],D=d+.5*c[1],R=p+.5*c[0],O=h+.5*c[1],L=l-.5*c[0],B=d-.5*c[1],q=p-.5*c[0],_=h-.5*c[1]):E>0?(L=l+c[0],B=d+c[1],q=p+c[0],_=h+c[1],s.length>1&&null==this.points[n-1].text&&(L+=c[1],B-=c[0]),o.length>1&&null==this.points[i-1].text&&(q-=c[1],_+=c[0])):E<0&&(L=l-c[0],B=d-c[1],q=p-c[0],_=h-c[1],s.length>1&&null==this.points[n-1].text&&(L+=c[1],B-=c[0]),o.length>1&&null==this.points[i-1].text&&(q-=c[1],_+=c[0])),0!=E&&(this.mol.atomElement(n).length<=2&&1==this.mol.atomAdjCount(n)&&null!=this.points[n-1].text&&this.bumpAtomPosition(n,.5*c[0]*E,.5*c[1]*E),this.mol.atomElement(i).length<=2&&1==this.mol.atomAdjCount(i)&&null!=this.points[i-1].text&&this.bumpAtomPosition(i,.5*c[0]*E,.5*c[1]*E));let I=this.backOffAtomDelta(n,N,D,R,O,m),z=this.backOffAtomDelta(n,L,B,q,_,m);if(null!=I||null!=z){let t=(null==I?0:I[0])>(null==z?0:z[0])?I:z;N+=t[1],D+=t[2],L+=t[1],B+=t[2]}let P=this.backOffAtomDelta(i,R,O,N,D,m),F=this.backOffAtomDelta(i,q,_,L,B,m);if(null!=P||null!=F){let t=(null==P?0:P[0])>(null==F?0:F[0])?P:F;R+=t[1],O+=t[2],q+=t[1],_+=t[2]}if(0==E&&!M){let e=null;null!=this.points[n-1].text||this.mol.bondInRing(t)||(e=this.adjustBondPosition(v,n,N,D,R,O),null!=e&&(N=e[0],D=e[1]),e=this.adjustBondPosition(b,n,L,B,q,_),null!=e&&(L=e[0],B=e[1])),null!=this.points[i-1].text||this.mol.bondInRing(t)||(e=this.adjustBondPosition(A,i,R,O,N,D),null!=e&&(R=e[0],O=e[1]),e=this.adjustBondPosition(T,i,q,_,L,B),null!=e&&(q=e[0],_=e[1]))}let j=this.mol.bondType(t)==ge.BONDTYPE_UNKNOWN?Fe.Unknown:Fe.Normal,U=j==Fe.Unknown?.1*this.scale:0,X=this.effects.colBond[t];X||(X=this.policy.data.foreground);let Y={bnum:t,bfr:n,bto:i,type:j,line:new f(N,D,R,O),size:S,head:U,col:X},W={bnum:t,bfr:n,bto:i,type:j,line:new f(L,B,q,_),size:S,head:U,col:X};this.lines.push(Y),this.lines.push(W),this.space.push(this.computeSpaceLine(Y)),this.space.push(this.computeSpaceLine(W))}placeHydrogen(t,e,i){let s=en.main;const o=.6,r=s.getIndex("H");let a=this.points[t],l=a.fsz*s.INV_UNITS_PER_EM,p=e>=2?e.toString():"",h=s.getOutlineX(r),c=s.getOutlineY(r),f=s.HORIZ_ADV_X[r],g=f;for(let t=0;t<p.length;t++){let e=p.charAt(t),i=s.getIndex(e);if(0==t)g+=s.getKerning("H",e);else{let n=p.charAt(t-1);g+=s.getKerning(n,e)*o}let r=s.getOutlineX(i),a=s.getOutlineY(i);n.addTo(r,g/o),n.addTo(a,-.4*s.ASCENT*1.3),n.mulBy(r,o),n.mulBy(a,o),h=h.concat(r),c=c.concat(a),g+=s.HORIZ_ADV_X[i]*o}if(p.length>0){let t=new d(h,c,0);h=t.hullX,c=t.hullY}let k=-.5*f,y=.5*s.ASCENT*s.ASCENT_FUDGE;for(let t=0;t<h.length;t++)h[t]=a.oval.cx+(k+h[t])*l,c[t]=a.oval.cy+(y-c[t])*l*this.ymul;let w=0,x=0,C=this.measure.measureText(a.text,a.fsz);if(i){let t=[0,1,2,3],e=[1,0,2,3],i=[2,3,0,1],s=[3,2,0,1],o=t,r=this.mol.atomAdjList(a.anum);if(0==r.length){let n=["O","S","F","Cl","Br","I"];o=0==this.mol.atomCharge(a.anum)&&0==this.mol.atomUnpaired(a.anum)&&n.indexOf(this.mol.atomElement(a.anum))>=0?e:t}else{let t=!0,n=!0,l=!0,d=!0;const p=this.mol.atomX(a.anum),h=this.mol.atomY(a.anum);for(let e=0;e<r.length;e++){const i=this.mol.atomX(r[e]),s=this.mol.atomY(r[e]);i>p+.01&&(t=!1),i<p-.01&&(n=!1),s<h-.01&&(l=!1),s>h+.01&&(d=!1)}t||(n?o=e:l?o=s:d&&(o=i))}for(let t=0;t<4;t++){let e=0,i=0;0==o[t]?e=.5*C[0]+.5*f*l:1==o[t]?e=-.5*C[0]-(g-.5*f)*l:2==o[t]?i=(1.1*C[1]+.5*C[2])*-this.ymul:3==o[t]&&(i=(1.1*C[1]+.5*C[2])*this.ymul),n.addTo(h,e),n.addTo(c,i);let s=this.countPolyViolations(h,c,null,!0);if(n.addTo(h,-e),n.addTo(c,-i),0==s){w=e,x=i;break}}if(0==w&&0==x)return!1}else{const t=n.min(c),e=n.max(h),i=n.min(c),s=n.max(c),o=.5*(t+e),r=.5*(i+s),l=1+this.measure.scale()*this.policy.data.fontSize*rn.FONT_CORRECT*.1/Math.max(e-o,s-r),d=h.length;let p=h.slice(0),m=c.slice(0);for(let t=0;t<d;t++)p[t]=(p[t]-o)*l+o,m[t]=(m[t]-r)*l+r;let u=0,f=0,g=0;for(let t=.5*(a.oval.rw+a.oval.rh);t<1.5*this.measure.scale();t+=.1*this.measure.scale()){let e=!1;for(let i=0;i<2*Math.PI;i+=5*tt){let s=t*Math.cos(i),o=t*Math.sin(i);n.addTo(p,s),n.addTo(m,o);let r=this.countPolyViolations(p,m,null,!1);n.addTo(p,-s),n.addTo(m,-o),0==r&&(e=!0);let l=10*r+this.spatialCongestion(a.oval.cx+s,a.oval.cy+o,.5)+2*t;(0==u||l<u)&&(u=l,f=t,g=i,w=s,x=o)}if(e)break}}let v=this.measure.measureText("H",a.fsz);const b=1.1;let A={anum:0,text:"H",fsz:a.fsz,col:a.col,oval:new u(a.oval.cx+w,a.oval.cy+x,.5*v[0]*b,.5*v[1]*b)};if(this.points.push(A),p.length>0){const t=o*a.fsz;v=this.measure.measureText(p,t);let e={anum:0,text:p,fsz:t,col:a.col,oval:new u(A.oval.cx+.5*f*a.fsz*s.INV_UNITS_PER_EM+.5*v[0],A.oval.cy+.4*a.fsz,.5*v[0]*b,.5*v[1]*b)};this.points.push(e)}n.addTo(h,w),n.addTo(c,x);let T=n.min(h),M=n.min(c),E={anum:0,bnum:0,box:new m(T,M,n.max(h)-T,n.max(c)-M),px:h,py:c};return this.space.push(E),!0}computeSpacePoint(t){let e={anum:t.anum,bnum:0,box:new m,px:[],py:[]};const i=en.main;let s=[],o=[],r=0,a=0;if(null!=t.text)for(let e=0;e<t.text.length;e++){let l=t.text.charAt(e),d=i.getIndex(l);if(d>=0){if(0==r)s=i.getOutlineX(d),o=i.getOutlineY(d),a=1;else{let t=i.getOutlineX(d),e=i.getOutlineY(d);t.length>0&&(n.addTo(t,r),s=s.concat(t),o=o.concat(e),a++)}r+=i.HORIZ_ADV_X[d]}else r+=i.MISSING_HORZ;if(e<t.text.length-1){let n=t.text.charAt(e+1);r+=i.getKerning(l,n)}}if(s.length>0){if(a>1){let t=new d(s,o,0);s=t.hullX,o=t.hullY}let l=-.5*r,p=.5*i.ASCENT*i.ASCENT_FUDGE,h=t.fsz*i.INV_UNITS_PER_EM;for(let e=0;e<s.length;e++)s[e]=t.oval.cx+(l+s[e])*h,o[e]=t.oval.cy+(p-o[e])*h*this.ymul;e.px=s,e.py=o;let c=n.min(s),u=n.min(o);e.box=new m(c,u,n.max(s)-c,n.max(o)-u)}else e.box=m.fromOval(t.oval),e.box.w>0&&e.box.h>0&&(e.px=[e.box.minX(),e.box.maxX(),e.box.maxX(),e.box.minX()],e.py=[e.box.minY(),e.box.minY(),e.box.maxY(),e.box.maxY()]);return e}computeSpaceLine(t){let e={anum:0,bnum:t.bnum,box:new m,px:[],py:[]};if(t.type==Fe.Normal||t.type==Fe.Dotted||t.type==Fe.DotDir)e.px=[t.line.x1,t.line.x2],e.py=[t.line.y1,t.line.y2];else{const n=t.line.x2-t.line.x1,i=t.line.y2-t.line.y1,s=t.head/Math.sqrt(n*n+i*i),o=s*i,r=-s*n;t.type==Fe.Unknown?(e.px=[t.line.x1+o,t.line.x1-o,t.line.x2-o,t.line.x2+o],e.py=[t.line.y1+r,t.line.y1-r,t.line.y2-r,t.line.y2+r]):(e.px=[t.line.x1,t.line.x2-o,t.line.x2+o],e.py=[t.line.y1,t.line.y2-r,t.line.y2+r])}return e.box.x=n.min(e.px)-t.size,e.box.y=n.min(e.py)-t.size,e.box.w=n.max(e.px)-e.box.x+t.size,e.box.h=n.max(e.py)-e.box.y+t.size,e}bumpAtomPosition(t,e,i){let s=this.points[t-1];s.oval.cx+=e,s.oval.cy+=i;for(let s=this.space.length-1;s>=0;s--){let o=this.space[s-1];null!=o&&o.anum==t&&(o.box.x+=e,o.box.y+=i,n.addTo(o.px,e),n.addTo(o.py,i))}}spaceSubset(t,e,n,i){let s=[];for(let o of this.space)l.rectsIntersect(t,e,n,i,o.box.x,o.box.y,o.box.w,o.box.h)&&s.push(o);return s}countPolyViolations(t,e,i,s){null==i&&(i=this.space);let o=0;const r=t.length,a=i.length;let d=new m,p=new m;for(let n=0;n<r;n++){let h=n<r-1?n+1:0;d.x=Math.min(t[n],t[h])-1,d.y=Math.min(e[n],e[h])-1,d.w=Math.max(t[n],t[h])-d.x+2,d.h=Math.max(e[n],e[h])-d.y+2;for(let r=0;r<a;r++){let a=i[r];if(null==a.px)continue;if(p.x=a.box.x-1,p.y=a.box.y-1,p.w=a.box.w+1,p.h=a.box.h+1,!d.intersects(p))continue;let c=a.px.length;for(let i=0;i<c;i++){let r=i<c-1?i+1:0;if(p.x=Math.min(a.px[i],a.px[r])-1,p.y=Math.min(a.py[i],a.py[r])-1,p.w=Math.max(a.px[i],a.px[r])-p.x+2,p.h=Math.max(a.py[i],a.py[r])-p.y+2,d.intersects(p)){if(l.doLineSegsIntersect(t[n],e[n],t[h],e[h],a.px[i],a.py[i],a.px[r],a.py[r])){if(s)return 1;o++;break}if(1==c)break}}}}d.x=n.min(t),d.y=n.min(e),d.w=n.max(t)-d.x,d.h=n.max(e)-d.y;for(let n=a-1;n>=0;n--){let a=i[n];if(p.x=a.box.x,p.y=a.box.y,p.w=a.box.w,p.h=a.box.h,d.intersects(p)){for(let n=a.px.length-1;n>=0;n--)if(l.pointInPolygon(a.px[n],a.py[n],t,e)){if(s)return 1;o++;break}for(let n=0;n<r;n++)if(l.pointInPolygon(t[n],e[n],a.px,a.py)){if(s)return 1;o++;break}}}return o}adjustBondPosition(t,e,n,i,s,o){if(0==t||0==e)return null;for(let r=0;r<this.lines.length;r++){let a=this.lines[r];if(1!=this.mol.bondOrder(a.bnum)||this.mol.bondType(a.bnum)!=ge.BONDTYPE_NORMAL)continue;let d=!1;if(this.mol.bondFrom(a.bnum)==t&&this.mol.bondTo(a.bnum)==e);else{if(this.mol.bondFrom(a.bnum)!=e||this.mol.bondTo(a.bnum)!=t)continue;d=!0}let p=it(Math.atan2(a.line.y2-a.line.y1,a.line.x2-a.line.x1),Math.atan2(o-i,s-n))*et;if(p>-5&&p<5||p>175||p<-175)continue;let h=l.lineIntersect(a.line.x1,a.line.y1,a.line.x2,a.line.y2,n,i,s,o);return 0==this.mol.atomRingBlock(e)&&(d?(a.line.x1=h[0],a.line.y1=h[1]):(a.line.x2=h[0],a.line.y2=h[1])),h}return null}priorityDoubleSubstit(t){let e=this.mol.bondFrom(t),n=this.mol.bondTo(t),i=this.mol.atomAdjList(e),s=this.mol.atomAdjList(n),o=this.points[e-1],r=this.points[n-1],a=o.oval.cx,l=o.oval.cy,d=r.oval.cx,p=r.oval.cy,h=d-a,c=p-l,m=Math.atan2(c,h),u=0,f=0,g=0,k=0;for(let t=0;t<i.length;t++)if(i[t]!=n)if(it(Math.atan2(this.points[i[t]-1].oval.cy-l,this.points[i[t]-1].oval.cx-a),m)>0){if(0!=u)return null;u=i[t]}else{if(0!=f)return null;f=i[t]}for(let t=0;t<s.length;t++)if(s[t]!=e)if(it(Math.atan2(this.points[s[t]-1].oval.cy-p,this.points[s[t]-1].oval.cx-d),m)>0){if(0!=g)return null;g=s[t]}else{if(0!=k)return null;k=s[t]}let y=(u>0?1:0)+(f>0?1:0),w=(g>0?1:0)+(k>0?1:0);if(1==y&&0==w)return[u>0?u:f];if(0==y&&1==w)return[g>0?g:k];if(1==y&&1==w){if(u>0&&g>0)return[u,g];if(f>0&&k>0)return[f,k];let t=this.orthogonalDelta(a,l,d,p,this.bondSepPix);return this.spatialCongestion(.5*(a+d)+t[0],.5*(l+p)+t[1])<this.spatialCongestion(.5*(a+d)-t[0],.5*(l+p)-t[1])?[u>0?u:g]:[f>0?f:k]}return 2==y&&1==w?0==g?[f,k]:[u,g]:1==y&&2==w?0==u?[f,k]:[u,g]:null}annotateAtom(t,e,n,i){let[s,o]=this.measure.measureText(e,i),r=this.points[t-1],a=r.oval.cx,l=r.oval.cy,d=.6*s,p=.6*o,h=[];for(let e of this.mol.atomAdjList(t)){let t=this.points[e-1].oval.cx-a,n=this.points[e-1].oval.cy-l;h.push(Math.atan2(n,t))}let c=.5*(r.oval.rw+r.oval.rh),f=.1*this.scale,g=Z/36,k=Number.POSITIVE_INFINITY,y=0,w=0,x=[0,0,0,0],C=[0,0,0,0],v=d+c+8*f,b=p+c+8*f,A=this.spaceSubset(a-v,l-b,2*v,2*b);for(let t=0;t<8;t++){let e=c+t*f;for(let t=0;t<36;t++){let n=g*t,i=e*Math.cos(n),s=e*Math.sin(n),o=a+i-d,r=a+i+d,c=l+s-p,m=l+s+p;x[0]=o,C[0]=c,x[1]=r,C[1]=c,x[2]=r,C[2]=m,x[3]=o,C[3]=m;let u=1e3*this.countPolyViolations(x,C,A,!1);for(let t of h)u-=Math.abs(it(n,t));u<k&&(k=u,y=i,w=s)}if(k<500)break}let T=a+y,M=l+w,E={anum:0,text:e,fsz:i,col:n,oval:new u(T,M,d,p)};this.points.push(E);let S={anum:0,bnum:0,box:new m(T-d,M-p,2*d,2*p),px:[T-d,T+d,T+d,T-d],py:[M-p,M-p,M+p,M+p]};this.space.push(S)}annotateBond(t,e,n,i){let[s,o]=this.measure.measureText(e,i),r=this.mol.bondFrom(t),a=this.mol.bondTo(t),l=this.points[r-1],d=this.points[a-1],p=.5*(l.oval.cx+d.oval.cx),h=.5*(l.oval.cy+d.oval.cy),c=.6*s,f=.6*o,g=Math.atan2(d.oval.cy-l.oval.cy,d.oval.cx-l.oval.cx),k=[g,g+Math.PI];for(let t of this.mol.atomAdjList(r))if(t!=a){let e=this.points[t-1].oval.cx-this.points[r-1].oval.cx,n=this.points[t-1].oval.cy-this.points[r-1].oval.cy;k.push(Math.atan2(n,e))}for(let t of this.mol.atomAdjList(a))if(t!=r){let e=this.points[t-1].oval.cx-this.points[a-1].oval.cx,n=this.points[t-1].oval.cy-this.points[a-1].oval.cy;k.push(Math.atan2(n,e))}let y=.2*this.scale*this.bondOrder[t-1],w=.1*this.scale,x=Z/36,C=Number.POSITIVE_INFINITY,v=0,b=0,A=[0,0,0,0],T=[0,0,0,0],M=c+y+8*w,E=f+y+8*w,S=this.spaceSubset(p-M,h-E,2*M,2*E);for(let t=0;t<8;t++){let e=y+t*w;for(let t=0;t<36;t++){let n=x*t,i=e*Math.cos(n),s=e*Math.sin(n),o=p+i-c,r=p+i+c,a=h+s-f,l=h+s+f;A[0]=o,T[0]=a,A[1]=r,T[1]=a,A[2]=r,T[2]=l,A[3]=o,T[3]=l;let d=1e3*this.countPolyViolations(A,T,S,!1);for(let t of k)d-=Math.abs(it(n,t));d<C&&(C=d,v=i,b=s)}if(C<500)break}let N=p+v,D=h+b,R={anum:0,text:e,fsz:i,col:n,oval:new u(N,D,c,f)};this.points.push(R);let O={anum:0,bnum:0,box:new m(N-c,D-f,2*c,2*f),px:[N-c,N+c,N+c,N-c],py:[D-f,D-f,D+f,D+f]};this.space.push(O)}boxOverlaps(t,e,n,i,s,o){let r=t,a=e,d=t+n,p=e+i;for(let t=0;t<this.points.length;t++){if(null!=s&&!s[t])continue;let e=this.points[t],n=e.oval.cx-e.oval.rw,i=e.oval.cy-e.oval.rh,o=e.oval.cx+e.oval.rw,l=e.oval.cy+e.oval.rh;if(!(d<n||r>o||p<i||a>l))return!0}for(let t=0;t<this.lines.length;t++){if(null!=o&&!o[t])continue;let e=this.lines[t],n=e.line.x1,i=e.line.y1,s=e.line.x2,h=e.line.y2;if(!(d<Math.min(n,s)||r>Math.max(n,s)||p<Math.min(i,h)||a>Math.max(i,h))){if(n>=r&&n<=d&&i>=a&&i<=p)return!0;if(s>=r&&s<=d&&h>=a&&h<=p)return!0;if(l.doLineSegsIntersect(n,i,s,h,r,a,d,a))return!0;if(l.doLineSegsIntersect(n,i,s,h,r,p,d,p))return!0;if(l.doLineSegsIntersect(n,i,s,h,r,a,r,p))return!0;if(l.doLineSegsIntersect(n,i,s,h,d,a,d,p))return!0}}return!1}resolveLineCrossings(t,e){const n=[Fe.Normal,Fe.Dotted,Fe.DotDir],i=()=>{this.unsplitLines||(this.unsplitLines=this.lines.map((t=>Object.assign(Object.assign({},t),{line:t.line.clone()}))))};for(let s=10;s>0;s--){let s=!1,o=this.lines.filter((e=>e.bnum==t&&n.includes(e.type))),r=this.lines.filter((t=>t.bnum==e&&n.includes(t.type)));for(let t of o)for(let e of r){if(t.bfr==e.bfr||t.bfr==e.bto||t.bto==e.bfr||t.bto==e.bto)continue;if(e.type==Fe.DotDir&&(e.type=Fe.Dotted),!l.doLineSegsIntersect(t.line.x1,t.line.y1,t.line.x2,t.line.y2,e.line.x1,e.line.y1,e.line.x2,e.line.y2))continue;let[n,o]=l.lineIntersect(t.line.x1,t.line.y1,t.line.x2,t.line.y2,e.line.x1,e.line.y1,e.line.x2,e.line.y2),r=e.line.x2-e.line.x1,a=e.line.y2-e.line.y1,d=Math.abs(r)>Math.abs(a)?(n-e.line.x1)/r:(o-e.line.y1)/a,p=U(r,a),h=e.size/p*(e.type==Fe.Normal?2:4);if(d>h&&d<1-h){i();let t={bnum:e.bnum,bfr:e.bfr,bto:e.bto,type:e.type,line:e.line.clone(),size:e.size,head:e.head,col:e.col};this.lines.push(t),e.line.x2=e.line.x1+r*(d-h),e.line.y2=e.line.y1+a*(d-h),t.line.x1=t.line.x1+r*(d+h),t.line.y1=t.line.y1+a*(d+h),s=!0}else d>h?(i(),e.line.x2=e.line.x1+r*(d-h),e.line.y2=e.line.y1+a*(d-h),s=!0):d<1-h&&(i(),e.line.x1=e.line.x1+r*(d+h),e.line.y1=e.line.y1+a*(d+h),s=!0)}if(!s)break}}createCircularRing(t){let e=new Array(t.length),i=new Array(t.length);for(let n=0;n<t.length;n++){let s=this.points[t[n]-1];e[n]=s.oval.cx,i[n]=s.oval.cy}let s=n.sum(e)/t.length,o=n.sum(i)/t.length,r=[],a=[],d=!0,p=Number.NaN;const h=.7;for(let e of t){let n=this.points[e-1],i=n.oval.cx-s,l=n.oval.cy-o,c=i-n.oval.rw,m=i+n.oval.rw,u=l-n.oval.rh,f=l+n.oval.rh;r.push(c),a.push(l),r.push(c),a.push(u),r.push(c),a.push(f),r.push(i),a.push(u),r.push(i),a.push(f),r.push(m),a.push(l),r.push(m),a.push(u),r.push(m),a.push(f);let g=U(i,l),k=Math.atan2(l,i);r.push(h*g*Math.cos(k)),a.push(h*g*Math.sin(k));for(let i of this.mol.atomAdjList(e))if(t.indexOf(i)>=0){let t=this.points[i-1],e=.5*(n.oval.cx+t.oval.cx)-s,l=.5*(n.oval.cy+t.oval.cy)-o,d=U(e,l),p=Math.atan2(l,e);r.push(h*d*Math.cos(p)),a.push(h*d*Math.sin(p))}d&&(Number.isFinite(p)?Math.abs(p-g)>1&&(d=!1):p=g)}let c={atoms:t,cx:s,cy:o,rw:0,rh:0,theta:0,size:0};if(d)c.rw=c.rh=l.fitCircle(r,a);else{let n=0;for(let r=0;r<t.length;r++)n+=U(e[r]-s,i[r]-o);let r=n/t.length*(1-h);var m=new tn(e,i,r);m.calculate(),c.cx=m.cx,c.cy=m.cy,c.rw=m.rw,c.rh=m.rh,c.theta=m.theta}c.size=this.lineSizePix,this.rings.push(c)}createCurvedPath(t,e,i){const s=t.length;let o=[],r=[],a=[];for(let e=0;e<s;e++){let n=this.points[t[e]-1];o.push(n.oval.cx),r.push(n.oval.cy),a.push(null!=n.text)}let l=[],d=[];const p=.25*ge.IDEALBOND*this.scale;for(let t=0;t<s-1;t++){let e=o[t+1]-o[t],n=r[t+1]-r[t],i=p*V(U(e,n));l.push(n*i),d.push(-e*i)}let h=n.numberArray(0,s),c=n.numberArray(0,s),m=n.numberArray(0,s),u=n.numberArray(0,s);const f=a[0]?1.2:.7;if(e){const t=-d[0],e=l[0];h[0]=o[0]+t*f,c[0]=r[0]+e*f,m[0]=o[0]+t*f,u[0]=r[0]+e*f}else h[0]=o[0]+l[0]*f,c[0]=r[0]+d[0]*f,m[0]=o[0]-l[0]*f,u[0]=r[0]-d[0]*f;let g=0,k=0;for(let e=1;e<s-1;e++){const n=a[e]?1.2:.7,s=n;h[e]=o[e]+n*(l[e-1]+l[e]),c[e]=r[e]+n*(d[e-1]+d[e]),m[e]=o[e]-s*(l[e-1]+l[e]),u[e]=r[e]-s*(d[e-1]+d[e]);for(let n of this.mol.atomAdjList(t[e]))if(t.indexOf(n)<0&&n!=i){let t=this.points[n-1],i=t.oval.cx-o[e],s=t.oval.cy-r[e];i*(h[e]-o[e])+s*(c[e]-o[e])>s*(m[e]-o[e])+s*(u[e]-o[e])?g++:k++}}let y=s-1,w=a[y]?1.2:.7;if(e){let t=-d[y-1],e=l[y-1];h[y]=o[y]-t*w,c[y]=r[y]-e*w,m[y]=o[y]-t*w,u[y]=r[y]-e*w}else h[y]=o[y]+l[y-1]*w,c[y]=r[y]+d[y-1]*w,m[y]=o[y]-l[y-1]*w,u[y]=r[y]-d[y-1]*w;let x=0,C=0;for(let t=0;t<s-1;t++)x+=U(h[t+1]-h[t],c[t+1]-c[t]),C+=U(m[t+1]-m[t],u[t+1]-u[t]);x*=g+1,C*=k+1;let v=x<C?h:m,b=x<C?c:u,A={atoms:t,px:null,py:null,ctrl:null,size:this.lineSizePix};this.splineInterpolate(A,v,b),this.paths.push(A)}createBondCentroid(t,e){let n=this.points[t-1],i=n.oval.cx,s=n.oval.cy,o=0,r=0;for(let t of e)n=this.points[t-1],o+=n.oval.cx,r+=n.oval.cy;o/=e.length,r/=e.length,e.length<=2&&(o-=.1*(o-i),r-=.1*(r-s));const a=.25*this.measure.scale();let l=this.shrinkBond(i,s,o,r,this.backOffAtom(t,i,s,o,r,a));this.ensureMinimumBondLength(l,[o,r],i,s,o,r,a);let d={bnum:0,bfr:t,bto:0,type:Fe.Normal,line:new f(l[0],l[1],o,r),size:this.lineSizePix,head:0,col:this.policy.data.foreground};this.lines.push(d),this.space.push(this.computeSpaceLine(d))}splineInterpolate(t,e,i){const s=e.length,o=.25;for(let r=0;r<s;r++)if(0==r){let s=e[r+1]-e[r],a=i[r+1]-i[r],l=e[r]+o*s,d=i[r]+o*a;t.px=n.append(t.px,e[r]),t.py=n.append(t.py,i[r]),t.ctrl=n.append(t.ctrl,!1),t.px=n.append(t.px,l),t.py=n.append(t.py,d),t.ctrl=n.append(t.ctrl,!0)}else if(r==s-1){let s=e[r]-e[r-1],a=i[r]-i[r-1],l=e[r]-o*s,d=i[r]-o*a;t.px=n.append(t.px,l),t.py=n.append(t.py,d),t.ctrl=n.append(t.ctrl,!0),t.px=n.append(t.px,e[r]),t.py=n.append(t.py,i[r]),t.ctrl=n.append(t.ctrl,!1)}else{let s=e[r+1]-e[r-1],a=i[r+1]-i[r-1],l=V(U(s,a));s*=l,a*=l;let d=o*U(e[r]-e[r-1],i[r]-i[r-1]),p=o*U(e[r+1]-e[r],i[r+1]-i[r]),h=e[r]-s*d,c=i[r]-a*d,m=e[r]+s*p,u=i[r]+a*p;t.px=n.append(t.px,h),t.py=n.append(t.py,c),t.ctrl=n.append(t.ctrl,!0),t.px=n.append(t.px,e[r]),t.py=n.append(t.py,i[r]),t.ctrl=n.append(t.ctrl,!1),t.px=n.append(t.px,m),t.py=n.append(t.py,u),t.ctrl=n.append(t.ctrl,!0)}}delocalisedAnnotation(t,e,n){const i=this.mol;let s="";if(-1==e?s="-":1==e?s="+":e<-1?s=Math.abs(e)+"-":e>1&&(s=e+"+"),n>0)for(let t=0;t<n;t++)s+=".";if(0==s.length)return;const o=t.length;let r=0,a=0;for(let e of t)r+=i.atomX(e),a+=i.atomY(e);r/=o,a/=o;let l=Zt.congestionPoint(i,r,a);for(let e=1;e<o-1;e++){let n=.5*(i.atomX(t[e-1])+i.atomX(t[e+1])),s=.5*(i.atomY(t[e-1])+i.atomY(t[e+1])),o=Zt.congestionPoint(i,n,s);o<l&&(l=o,r=n,a=s)}let d=.8*this.fontSizePix,p=this.measure.measureText(s,d),h=.55*p[0],c=.55*p[1],f={anum:0,text:s,fsz:d,col:this.policy.data.foreground,oval:new u(this.measure.angToX(r),this.measure.angToY(a),h,c)};this.points.push(f);let g={anum:0,bnum:0,box:new m(f.oval.cx-h,f.oval.cy-c,2*h,2*c),px:[f.oval.cx-h,f.oval.cx+h,f.oval.cx+h,f.oval.cx-h],py:[f.oval.cy-c,f.oval.cy-c,f.oval.cy+c,f.oval.cy+c]};this.space.push(g)}processPolymerUnit(t,e){if(4==n.len(t.bondConn))return void this.processPolymerUnitPair(t);let i=[];const{mol:s,measure:o}=this;for(let n=1;n<=s.numBonds;n++){let o=s.bondFrom(n),r=s.bondTo(n),a=t.atoms.indexOf(o)>=0,l=t.atoms.indexOf(r)>=0,d=null;if(a&&!l)d={a1:o,a2:r};else{if(!l||a)continue;d={a1:r,a2:o}}d.x1=s.atomX(d.a1),d.y1=s.atomY(d.a1),d.x2=s.atomX(d.a2),d.y2=s.atomY(d.a2),d.shared=!1;for(let n of e)if(t!==n&&n.atoms.includes(d.a2)){d.shared=!0;break}let p=e.filter((e=>e===t||e.atoms.includes(d.a1)&&!e.atoms.includes(d.a2)));if(p.length>1){p.sort(((t,e)=>t.atoms.length-e.atoms.length));for(let e=0;e<p.length;e++)p[e]===t&&(d.nestOrder=e);d.nestCount=p.length}i.push(d)}let r=0,a=t.atoms.map((t=>s.atomX(t))),l=t.atoms.map((t=>s.atomY(t))),d=n.min(a),p=n.min(l),h=n.max(a),c=n.max(l);for(let t=1;t<i.length;t++){let e=i[r],n=i[t],s=e.x2-d-e.y2+p;n.x2-d-n.y2+p>s&&(r=t)}let m=!1,g=!1;if(2==i.length){let t=i[0==r?1:0],e=i[r],n=Math.atan2(t.y2-t.y1,t.x2-t.x1),s=Math.atan2(e.y2-e.y1,e.x2-e.x1);m=(n>145*tt||n<-145*tt)&&s<35*tt&&s>-35*tt}else if(0==i.length){let t=.5*(p+c);i.push({x1:d,y1:t,x2:d-1,y2:t}),i.push({x1:h,y1:t,x2:h+1,y2:t}),r=1,g=!0}let k=(g?.5*(c-p+1):m?1:.5)*this.scale,y=.2*this.scale;const w={bnum:0,bfr:0,bto:0,type:Fe.Normal,size:this.lineSizePix,head:0,col:this.policy.data.foreground},x={anum:0,fsz:.7*this.fontSizePix,bold:!1,col:this.policy.data.foreground};for(let e=0;e<i.length;e++){let n=i[e],s=o.angToX(n.x1),a=o.angToY(n.y1),l=o.angToX(n.x2),d=o.angToY(n.y2);if(n.shared&&(l-=.1*(l-s),d-=.1*(d-a)),n.nestCount>1){let t=l-s,e=d-a,i=(n.nestOrder+1)/n.nestCount;l=s+t*i,d=a+e*i}let p=.5*(s+l),h=.5*(a+d);m&&(s=l=p,a=d=h,e==r?(s--,l++):(s++,l--));let c=V(U(l-s,d-a)),g=(l-s)*c,C=(d-a)*c,v=C,b=-g,A=p-k*v,T=h-k*b,M=p+k*v,E=h+k*b,S=A-y*g,N=T-y*C,D=M-y*g,R=E-y*C,O=Object.assign(Object.assign({},w),{line:new f(S,N,A,T)}),L=Object.assign(Object.assign({},w),{line:new f(A,T,M,E)}),B=Object.assign(Object.assign({},w),{line:new f(M,E,D,R)});if(this.lines.push(O),this.lines.push(L),this.lines.push(B),this.space.push(this.computeSpaceLine(O)),this.space.push(this.computeSpaceLine(L)),this.space.push(this.computeSpaceLine(B)),e==r){let e,i;n.shared?[e,i]=[A-.5*this.scale*v,T-.5*this.scale*b]:[e,i]=[A+2*y*g,T+2*y*C];let s=Object.assign(Object.assign({},x),{text:"n",oval:new u(e,i,0,0)});if(this.points.push(s),this.space.push(this.computeSpacePoint(s)),null!=t.connect){let s="?";t.connect==Xt.HeadToTail?s="ht":t.connect==Xt.HeadToHead?s="hh":t.connect==Xt.Random&&(s="eu"),n.shared?[e,i]=[M+.5*this.scale*v,E+.5*this.scale*b]:[e,i]=[M+2.5*y*g,E+2.5*y*C];let o=Object.assign(Object.assign({},x),{text:s,oval:new u(e,i,0,0)});this.points.push(o),this.space.push(this.computeSpacePoint(o))}}}}processPolymerUnitPair(t){const{mol:e,measure:i}=this;let s=[],o=[];for(let n of t.bondConn){let t=e.bondFrom(n),r=e.bondTo(n);s.push(i.angToX(.5*(e.atomX(t)+e.atomX(r)))),o.push(i.angToY(.5*(e.atomY(t)+e.atomY(r))))}let r=.25*n.sum(s),a=.25*n.sum(o),l=.5*this.scale,d=[],p=[];for(let[t,e]of[[0,1],[2,3]]){let n=s[e]-s[t],i=o[e]-o[t],h=l*V(U(n,i)+.001);[n,i]=[n*h,i*h],s[t]-=2*n,o[t]-=2*i,s[e]+=2*n,o[e]+=2*i;let c=i,m=-n,u=Y(.5*(s[t]+s[e])+c-r,.5*(o[t]+o[e])+m-a);Y(.5*(s[t]+s[e])-c-r,.5*(o[t]+o[e])-m-a)<u&&([c,m]=[-c,-m]),d.push(c,c),p.push(m,m)}const h={bnum:0,bfr:0,bto:0,type:Fe.Normal,size:this.lineSizePix,head:0,col:this.policy.data.foreground},c={anum:0,fsz:.7*this.fontSizePix,bold:!1,col:this.policy.data.foreground};let m=(t,e,n,i)=>{let s=Object.assign(Object.assign({},h),{line:new f(t,e,n,i)});this.lines.push(s),this.space.push(this.computeSpaceLine(s))},g=(t,e,n)=>{let i=Object.assign(Object.assign({},c),{text:n,oval:new u(t,e,0,0)});this.points.push(i),this.space.push(this.computeSpacePoint(i))};m(s[0],o[0],s[1],o[1]),m(s[0],o[0],s[0]+d[0],o[0]+p[0]),m(s[1],o[1],s[1]+d[1],o[1]+p[1]),m(s[2],o[2],s[3],o[3]),m(s[2],o[2],s[2]+d[2],o[2]+p[2]),m(s[3],o[3],s[3]+d[3],o[3]+p[3]);let k=n.min(s),y=n.min(o),w=[];for(let t=0;t<4;t++)w.push(s[t]-k+o[t]-y);let x=n.idxMax(w);g(s[x]-d[x],o[x]-p[x],"n");let C=x+(x%2==1?-1:1),v=(C+2)%4;g(s[v]-.5*d[v],o[v]-.5*p[v],"*"),g(s[C]-.5*d[C],o[C]-.5*p[C],"*")}}rn.FONT_CORRECT=1.5,function(t){t[t.Arrow=1]="Arrow",t[t.Plus=2]="Plus",t[t.Reactant=3]="Reactant",t[t.Reagent=4]="Reagent",t[t.Product=5]="Product",t[t.StepNote=6]="StepNote"}(je||(je={})),function(t){t[t.None=0]="None",t[t.Primary=1]="Primary",t[t.Waste=2]="Waste",t[t.Implied=3]="Implied"}(Ue||(Ue={}));class an{constructor(){this.text=[],this.annot=Ue.None,this.monochromeColour=null,this.metaInfo=null,this.box=new m}clone(){let t=new an;return t.type=this.type,t.srcIdx=this.srcIdx,t.step=this.step,t.side=this.side,t.mol=this.mol,t.text=this.text,t.leftNumer=this.leftNumer,t.leftDenom=this.leftDenom,t.fszText=this.fszText,t.fszLeft=this.fszLeft,t.annot=this.annot,t.monochromeColour=this.monochromeColour,t.metaInfo=this.metaInfo,t.box=this.box.clone(),t.padding=this.padding,t}}class ln{constructor(t,e,n){this.entry=t,this.measure=e,this.policy=n,this.width=0,this.height=0,this.components=[],this.limitTotalW=1e3,this.limitTotalH=1e3,this.limitStructW=0,this.limitStructH=0,this.includeReagents=!0,this.includeNames=!1,this.includeStoich=!0,this.includeAnnot=!1,this.includeBlank=!1,this.includeDetails=!1,this.includeAtomMap=!1,this.colourAtomMap=10295926,this.allowVertical=!0,this.padding=0,this.fauxComponents=[],this.extraText={},this.scale=n.data.pointScale,this.limitStructW=this.limitStructH=10*this.scale,this.padding=.25*this.scale}includeExtraText(t,e,i,s){if(!s)return;let o=`${t}:${e}:${i}`;this.extraText[o]=n.append(this.extraText[o],s)}arrange(){this.createComponents();let t=this.scale*this.policy.data.fontSize,e=this.scale*this.policy.data.fontSize*1.5;for(let i of this.components){if(i.type==je.Plus)i.box=new m(0,0,.5*this.scale,.5*this.scale);else if(i.type==je.Arrow);else{let s=0,o=0;if(Qt.notBlank(i.mol)){let t=c.fromArray(rn.guestimateSize(i.mol,this.policy));if(i.type==je.Reagent&&t.scaleBy(.7),i.leftNumer){i.fszLeft=e;let n=this.measure.measureText(i.leftNumer,e),s=n[0],o=n[1]+n[2];i.leftDenom&&(s=Math.max(s,this.measure.measureText(i.leftDenom,e)[0])),t.w+=s+ln.COMP_GAP_LEFT*o,t.h=Math.max(t.h,o*(i.leftDenom?2:1))}t.fitInto(this.limitStructW,this.limitStructH),s=t.w,o=t.h}if(n.notBlank(i.text)){Qt.notBlank(i.mol)&&(o+=.5*t);for(let e of i.text){i.fszText=t;let n=this.measure.measureText(e,t);s=Math.max(s,n[0]),o+=n[1]+n[2]}}0!=i.annot&&(s+=ln.COMP_ANNOT_SIZE*this.scale),(Qt.isBlank(i.mol)&&!i.text&&this.includeBlank||0==s||0==o)&&(s=Math.max(s,2*this.scale),o=Math.max(o,2*this.scale)),i.box=new m(0,0,s,o)}i.padding=this.padding,i.box=new m(0,0,i.box.w+2*this.padding,i.box.h+2*this.padding)}if(this.allowVertical){let t=null,e=0;for(let n=this.entry.steps.length+1;n>=1;n--)for(let i=0;i<=1;i++){let s=[];for(let t of this.components)s.push(t.clone());this.arrangeComponents(s,n,i>0);let o=this.scoreArrangement(s);(null==t||o>e)&&(t=s,e=o)}this.components=t}else this.arrangeComponents(this.components,this.entry.steps.length+1,!1);this.width=this.height=0;for(let t of this.components)this.width=Math.max(this.width,t.box.maxX()),this.height=Math.max(this.height,t.box.maxY())}get numComponents(){return this.components.length}getComponent(t){return this.components[t]}getComponents(){return this.components}scaleComponents(t){if(1!=t){this.scale*=t,this.width*=t,this.height*=t;for(let e of this.components)e.box.scaleBy(t),e.fszText*=t,e.fszLeft*=t,e.padding*=t}}static toExpType(t){return t==je.Reactant?We.Reactant:t==je.Reagent?We.Reagent:t==je.Product?We.Product:null}createComponents(){for(let t=0;t<this.entry.steps[0].reactants.length;t++)t>0&&this.createSegregator(je.Plus,0,-1),this.createReactant(t,0);0==this.components.length&&this.includeBlank&&this.createBlank(je.Reactant,0);for(let t=0;t<this.entry.steps.length;t++){if(this.createSegregator(je.Arrow,t,0),this.includeReagents){let e=!1;for(let n=0;n<this.entry.steps[t].reagents.length;n++)this.createReagent(n,t),e=!0;!e&&this.includeBlank&&this.createBlank(je.Reagent,t)}this.includeDetails&&this.createStepMeta(t);let e=!1;for(let n=0;n<this.entry.steps[t].products.length;n++)n>0&&this.createSegregator(je.Plus,t,1),this.createProduct(n,t),e=!0;!e&&this.includeBlank&&this.createBlank(je.Product,t)}for(let t of this.fauxComponents)t.type==je.Reactant?this.createSegregator(je.Plus,t.step,-1):t.type==je.Product&&this.createSegregator(je.Plus,t.step,1),this.createFauxComponent(t)}createReactant(t,e){var n;let i=this.entry.steps[e].reactants[t],s=new an;if(s.type=je.Reactant,s.srcIdx=t,s.step=e,s.side=-1,Qt.notBlank(i.mol)&&(s.mol=i.mol),i.name&&(this.includeNames||Qt.isBlank(i.mol))&&(s.text=this.wordWrapName(i.name,s.mol)),this.includeDetails&&this.supplementText(s,i),Qt.notBlank(i.mol)&&this.includeStoich&&!Ze.isStoichZero(i.stoich)&&!Ze.isStoichUnity(i.stoich)){let t=i.stoich.indexOf("/");t>=0?(s.leftNumer=i.stoich.substring(0,t),s.leftDenom=i.stoich.substring(t+1)):s.leftNumer=i.stoich}this.includeAnnot&&Qt.notBlank(i.mol)&&i.primary&&(s.annot=Ue.Primary);let o=`${e}:${We.Reactant}:${t}`;s.text.push(...null!==(n=this.extraText[o])&&void 0!==n?n:[]),this.components.push(s)}createReagent(t,e){var n;let i=this.entry.steps[e].reagents[t],s=new an;if(s.type=je.Reagent,s.srcIdx=t,s.step=e,s.side=0,Qt.notBlank(i.mol)&&(s.mol=i.mol),i.name&&(this.includeNames||Qt.isBlank(i.mol))&&(s.text=this.wordWrapName(i.name,s.mol)),this.includeDetails&&this.supplementText(s,i),this.includeAnnot){let t=Ze.impliedReagentStoich(i,this.entry.steps[e].products);t>0&&(s.annot=Ue.Implied),t>0&&1!=t&&(K(t,Math.round(t))?s.leftNumer=Math.round(t).toString():s.leftNumer=t.toString())}let o=`${e}:${We.Reagent}:${t}`;s.text.push(...null!==(n=this.extraText[o])&&void 0!==n?n:[]),this.components.push(s)}createProduct(t,e){var n;let i=this.entry.steps[e].products[t],s=new an;if(s.type=je.Product,s.srcIdx=t,s.step=e,s.side=1,Qt.notBlank(i.mol)&&(s.mol=i.mol),i.name&&(this.includeNames||Qt.isBlank(i.mol))&&(s.text=this.wordWrapName(i.name,s.mol)),this.includeDetails&&this.supplementText(s,i),this.includeStoich&&!Ze.isStoichZero(i.stoich)&&!Ze.isStoichUnity(i.stoich)){let t=i.stoich.indexOf("/");t>=0?(s.leftNumer=i.stoich.substring(0,t),s.leftDenom=i.stoich.substring(t+1)):s.leftNumer=i.stoich}this.includeAnnot&&Qt.notBlank(i.mol)&&i.waste&&(s.annot=Ue.Waste);let o=`${e}:${We.Product}:${t}`;s.text.push(...null!==(n=this.extraText[o])&&void 0!==n?n:[]),this.components.push(s)}createSegregator(t,e,n){let i=new an;i.type=t,i.step=e,i.side=n,this.components.push(i)}createStepMeta(t){let e=[];for(let[i,s]of $e.unpackMeta(this.entry.steps[t].meta)){if(!n.safeArray($e.APPLICABILITY[i]).includes(Be.Step))continue;let t=$e.describeMeta(i,s);null!=t&&e.push(t)}if(0==e.length)return;let i=new an;i.type=je.StepNote,i.step=t,i.side=0,i.text=e,this.components.push(i)}createBlank(t,e){let n=new an;n.type=t,n.step=e,n.side=t==je.Reactant?-1:t==je.Product?1:0,n.srcIdx=-1,this.components.push(n)}createFauxComponent(t){let e=new an;e.type=t.type,e.srcIdx=-1,e.step=t.step,e.side=t.type==je.Reactant?-1:t.type==je.Product?1:0,e.mol=t.mol,t.name&&(e.text=[t.name]),t.annot&&(e.annot=t.annot),e.monochromeColour=t.colour,e.metaInfo=t.metaInfo,this.components.push(e)}arrangeComponents(t,e,n){let i=[],s=[],o=[],r=[],a=[],l=[];i.push(this.gatherBlock(t,0,-1)),o.push(this.arrangeMainBlock(i[0],n)),a.push(this.findMidBlock(i[0],o[0]));for(let d=0;d<this.entry.steps.length;d++){let p=d+1>=e;i.push(this.gatherBlock(t,d,1)),o.push(this.arrangeMainBlock(i[d+1],n&&!p)),a.push(this.findMidBlock(i[d+1],o[d+1])),s.push(this.gatherBlock(t,d,0)),p?r.push(this.arrangeVerticalArrowBlock(s[d])):r.push(this.arrangeHorizontalArrowBlock(s[d])),l.push(this.findMidBlock(s[d],r[d]))}let d=0;for(let t=0;t<e;t++)d=Math.max(d,a[t].y),t>0&&(d=Math.max(d,l[t-1].y));let p=c.zero();for(let t=0;t<e;t++)p.w+=o[t].w,p.h=Math.max(p.h,d+(o[t].h-a[t].y)),t>0&&(p.w+=r[t-1].w,p.h=Math.max(p.h,d+(r[t-1].h-l[t-1].y)));let h=0,m=0;for(let t=0;t<e;t++)t>0&&(this.originateBlock(s[t-1],h,d-l[t-1].y),h+=r[t-1].w),this.originateBlock(i[t],h,d-a[t].y),m=h+a[t].x,h+=o[t].w;let u=p.h,f=0;for(let t=e;t<=this.entry.steps.length;t++)h=m-l[t-1].x,f=Math.min(f,h),this.originateBlock(s[t-1],h,u),u+=r[t-1].h,p.w=Math.max(p.w,h+r[t-1].w),h=m-a[t].x,f=Math.min(f,h),this.originateBlock(i[t],h,u),u+=o[t].h,p.w=Math.max(p.w,h+o[t].w);if(f<0)for(let e of t)e.box.x-=f}gatherBlock(t,e,n){let i=[];for(let s of t)s.side==n&&s.step==e&&i.push(s);return i}arrangeMainBlock(t,e){let n=c.zero();if(e)for(let e of t)n.w=Math.max(n.w,e.box.w),n.h+=e.box.h;else for(let e of t)n.w+=e.box.w,n.h=Math.max(n.h,e.box.h);if(n.w=Math.max(n.w,2*this.scale),n.h=Math.max(n.h,2*this.scale),e){let e=0;for(let i of t)i.box.x=.5*(n.w-i.box.w),i.box.y=e,e+=i.box.h}else{let e=0;for(let i of t)i.box.x=e,i.box.y=.5*(n.h-i.box.h),e+=i.box.w}return n}arrangeHorizontalArrowBlock(t){let e=null;for(let n of t)n.type==je.Arrow&&(e=n,n.box.w=2*this.scale+2*n.padding,n.box.h=.5*this.scale+2*n.padding);let n=t.length>>1;for(let n of t)e.box.w=Math.max(n.box.w,e.box.w);let i=c.zero(),s=0,o=0,r=!1;for(let i of t)i.type!=je.Arrow&&(i.box.x=.5*(e.box.w-i.box.w),i.box.y=o,o+=i.box.h,s++,s==n&&(e.box.x=0,e.box.y=o,o+=e.box.h,r=!0));return r||(e.box.x=0,e.box.y=o,o+=e.box.h),i.w=e.box.w,i.h=o,i}arrangeVerticalArrowBlock(t){let e=null;for(let n of t)n.type==je.Arrow&&(e=n,n.box.w=.5*this.scale+2*n.padding,n.box.h=2*this.scale+2*n.padding);let n=t.length>>1,i=c.zero(),s=c.zero(),o=0;for(let e of t)e.type!=je.Arrow&&(o<n?(i.w=Math.max(i.w,e.box.w),i.h+=e.box.h):(s.w=Math.max(s.w,e.box.w),s.h+=e.box.h),o++);let r=new c(i.w+s.w+e.box.w,Math.max(e.box.h,Math.max(i.h,s.h)));e.box=new m(i.w,0,e.box.w,r.h);let a=.5*(r.h-i.h),l=.5*(r.h-s.h);o=0;for(let e of t)e.type!=je.Arrow&&(o<n?(e.box.x=i.w-e.box.w,e.box.y=a,a+=e.box.h):(e.box.x=r.w-s.w,e.box.y=l,l+=e.box.h),o++);return r}findMidBlock(t,e){let n=0,i=h.zero();for(let e of t)e.type!=je.Plus&&e.type!=je.Arrow||(i.x+=e.box.midX(),i.y+=e.box.midY(),n++);if(0==n)i.x=.5*e.w,i.y=.5*e.h;else if(n>1){let t=1/n;i.x*=t,i.y*=t}return i}scoreArrangement(t){let e=0,n=0;for(let i of t)e=Math.max(e,i.box.maxX()),n=Math.max(n,i.box.maxY());let i=0;return i-=Math.max(0,Math.abs(e-this.limitTotalW)),i}originateBlock(t,e,n){for(let i of t)i.box.x+=e,i.box.y+=n}supplementText(t,e){e.mass>0&&t.text.push(Ze.formatMass(e.mass)),e.volume>0&&t.text.push(Ze.formatVolume(e.volume)),e.moles>0&&t.text.push(Ze.formatMoles(e.moles)),e.conc>0&&t.text.push(Ze.formatConc(e.conc)),null!=e.yield&&e.yield>=0&&t.text.push(Ze.formatPercent(e.yield)),e.equiv>0&&t.text.push(Ze.formatEquiv(e.equiv));for(let[n,i]of $e.unpackMeta(e.meta)){let e=$e.describeMeta(n,i);e&&t.text.push(e)}}wordWrapName(t,e){let n=0;Qt.notBlank(e)&&(n=(e.boundary().w+2)*this.scale);let i=Math.max(n,10*this.scale),s=this.scale*this.policy.data.fontSize;if(this.measure.measureText(t,s)[0]<i)return[t];let o=()=>{let e=[],n=t,o=0;for(;n.length>0;){let t=en.measureWidths(n,s),r=0;for(;r<t.length&&t[r]<i;)r++;for(let e=r;e>5;e--){if(" "==n[e]){r=e,o++;break}if(t[e]<.8*i)break}e.push(n.substring(0,r)),n=n.substring(r).trimLeft()}return[e,o]},[r,a]=o();for(;i>50;i-=s){let[t,e]=o();if(t.length>r.length)break;e>=a&&([r,a]=[t,e])}return r}}ln.COMP_GAP_LEFT=.5,ln.COMP_ANNOT_SIZE=1;class dn{constructor(t,e,n){this.offsetX=t,this.offsetY=e,this.pointScale=n,this.invScale=1/n}scale(){return this.pointScale}angToX(t){return t*this.pointScale+this.offsetX}angToY(t){return t*-this.pointScale+this.offsetY}xToAng(t){return(t-this.offsetX)*this.invScale}yToAng(t){return(t-this.offsetY)*-this.invScale}yIsUp(){return!1}measureText(t,e){return en.main.measureText(t,e)}}function pn(t){var e;let n=t.toFixed(4),i=null!==(e=/^(.*\.\d*?[1-9]+)0+$/.exec(n))&&void 0!==e?e:/^(.*)\.0+$/.exec(n);return i&&(n=i[1]),n}!function(t){t[t.Centre=0]="Centre",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Baseline=0]="Baseline",t[t.Middle=4]="Middle",t[t.Top=8]="Top",t[t.Bottom=16]="Bottom"}(Xe||(Xe={})),function(t){t[t.Line=1]="Line",t[t.Rect=2]="Rect",t[t.Oval=3]="Oval",t[t.Path=4]="Path",t[t.Text=5]="Text",t[t.TextNative=6]="TextNative"}(Ye||(Ye={}));class hn{constructor(t){this.prettyPrint=t,this.lines=[],this.depth=0}spool(t){(null==t?void 0:t.length)>0&&this.lines.push(t)}start(t){this.prettyPrint&&this.depth>0&&this.lines.push("  ".repeat(this.depth)),this.spool(t)}stop(t){this.spool(t),this.prettyPrint&&this.lines.push("\n")}whole(t){this.prettyPrint&&this.depth>0&&this.lines.push("  ".repeat(this.depth)),this.spool(t),this.prettyPrint&&this.lines.push("\n")}attr(t,e){"number"==typeof e&&(e=pn(e)),this.spool(` ${t}="${e}"`)}inc(){this.depth++}dec(){this.depth--}toString(){return this.lines.join("")}}class cn{constructor(t){this.types=[],this.prims=[],this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.scale=1,this.density=1,this.charMissing=!1,this.lowX=null,this.lowY=null,this.highX=null,this.highY=null;const e=en.main;if(this.charMask=n.booleanArray(!1,e.UNICODE.length),null!=t){null!=t.size&&(this.width=t.size[0],this.height=t.size[1]),null!=t.types&&(this.types=t.types),null!=t.prims&&(this.prims=t.prims);for(let t of this.prims)if(t.primClass==Ye.Text){let{txt:n}=t;for(let t=0;t<n.length;t++){let i=e.getIndex(n.charAt(t));i>=0?this.charMask[i]=!0:this.charMissing=!0}}}}drawLine(t,e,n,i,s,o){null==o&&(o=1);let r=this.findOrCreateType({primClass:Ye.Line,thickness:o,colour:s});const a=.5*o;this.updateBounds(Math.min(t,n)-a,Math.min(e,i)-a),this.updateBounds(Math.max(t,n)+a,Math.max(e,i)+a),this.prims.push({primClass:Ye.Line,typeidx:r,x1:t,y1:e,x2:n,y2:i})}drawRect(t,e,n,i,s,o,r){null==s&&(s=cn.NOCOLOUR),null==r&&(r=cn.NOCOLOUR),null==o&&(o=1);let a=this.findOrCreateType({primClass:Ye.Rect,edgeCol:s,fillCol:r,thickness:o});const l=.5*o;this.updateBounds(t-l,e-l),this.updateBounds(t+n+l,e+i+l),this.prims.push({primClass:Ye.Rect,typeidx:a,x:t,y:e,w:n,h:i})}drawOval(t,e,n,i,s,o,r){null==s&&(s=cn.NOCOLOUR),null==r&&(r=cn.NOCOLOUR),null==o&&(o=1);const a=.5*o;this.updateBounds(t-n-a,e-i-a),this.updateBounds(t+n+a,e+i+a);let l=this.findOrCreateType({primClass:Ye.Oval,edgeCol:s,fillCol:r,thickness:o});this.prims.push({primClass:Ye.Oval,typeidx:l,cx:t,cy:e,rw:n,rh:i})}drawPath(t,e,i,s,o,r,a,l){null==o&&(o=cn.NOCOLOUR),null==a&&(a=cn.NOCOLOUR),null==r&&(r=1),null==l&&(l=!1);const d=.5*r;for(let n=0;n<t.length;n++)this.updateBounds(t[n]-d,e[n]-d),0!=d&&this.updateBounds(t[n]+d,e[n]+d);let p=this.findOrCreateType({primClass:Ye.Path,edgeCol:o,fillCol:a,thickness:r,hardEdge:l});this.prims.push({primClass:Ye.Path,typeidx:p,count:t.length,x:n.duplicate(t),y:n.duplicate(e),ctrl:i&&[...i],closed:s})}drawPoly(t,e,n,i,s,o){this.drawPath(t,e,null,!0,n,i,s,o)}drawText(t,e,i,s,o,r,a){null==r&&(r=Xe.Left|Xe.Baseline),null==a&&(a=0);let l=1,d=0;0!=a&&([l,d]=[Math.cos(a*tt),Math.sin(a*tt)]);const p=en.main;for(let t=0;t<i.length;t++){let e=p.getIndex(i.charAt(t));e>=0?this.charMask[e]=!0:this.charMissing=!0}let h=p.measureText(i,s),c=0,m=0,u=0;r&Xe.Left||(u=r&Xe.Right?-h[0]:-.5*h[0]),0!=u&&(c+=u*l,m+=u*d);let f=0;r&Xe.Middle?f=.5*h[1]:r&Xe.Top?f=h[1]:r&Xe.Bottom&&(f=-h[2]),0!=f&&(c-=f*d,m+=f*l);let g=0,k=0,y=0,w=0,x=0;for(let t=0;t<i.length;t++){let e=i.charAt(t),s=p.getIndex(e);if(s>=0){let o=p.getOutlineX(s),r=p.getOutlineY(s);g=Math.min(g,x+n.min(o)),y=Math.max(y,x+n.max(o)),k=Math.min(k,-n.max(r)),w=Math.max(w,-n.min(r)),x+=p.HORIZ_ADV_X[s],t<i.length-1&&(x+=p.getKerning(e,i.charAt(t+1)))}else x+=p.MISSING_HORZ}const C=s*p.INV_UNITS_PER_EM;if(0==a)this.updateBounds(t+c+g*C,e+m+k*C),this.updateBounds(t+c+y*C,e+m+w*C);else{let n=g*C,i=k*C,s=y*C,o=w*C;this.updateBounds(t+c+n*l-i*d,e+m+n*d+i*l),this.updateBounds(t+c+s*l-i*d,e+m+s*d+i*l),this.updateBounds(t+c+s*l-o*d,e+m+s*d+o*l),this.updateBounds(t+c+n*l-o*d,e+m+n*d+o*l)}let v=this.findOrCreateType({primClass:Ye.Text,size:s,colour:o});this.prims.push({primClass:Ye.Text,typeidx:v,x:t+c,y:e+m,txt:i,direction:a})}drawTextNative(t,e,n,i,s,o,r,a){a||(a={}),null==r&&(r=Xe.Left|Xe.Baseline);let l=en.main.measureTextNative(n,i,s,a);r&Xe.Left||(r&Xe.Right?t-=l[0]:t-=.5*l[0]),r&Xe.Middle?e+=.5*l[1]:r&Xe.Top?e+=l[1]:r&Xe.Bottom&&(e-=l[2]),this.updateBounds(t,e-l[1]),this.updateBounds(t+l[0],e+l[2]);let d=this.findOrCreateType({primClass:Ye.TextNative,family:i,size:s,colour:o,opt:a});this.prims.push({primClass:Ye.TextNative,typeidx:d,x:t,y:e,txt:n})}boundLowX(){return this.lowX}boundLowY(){return this.lowY}boundHighX(){return this.highX}boundHighY(){return this.highY}getBounds(){return new m(this.lowX,this.lowY,this.highX-this.lowX,this.highY-this.lowY)}measure(){this.width=Math.ceil(this.highX-this.lowX),this.height=Math.ceil(this.highY-this.lowY)}normalise(){0==this.lowX&&0==this.lowY||this.transformPrimitives(-this.lowX,-this.lowY,1,1),this.width=Math.ceil(this.highX-this.lowX),this.height=Math.ceil(this.highY-this.lowY)}setSize(t,e){this.width=t,this.height=e}transformIntoBox(t){this.transformPrimitives(-this.lowX,-this.lowY,1,1);let e=Math.ceil(this.highX-this.lowX),n=Math.ceil(this.highY-this.lowY),i=1;if(e>t.w){let s=t.w/e;e=t.w,n*=s,i*=s}if(n>t.h){let s=t.h/n;n=t.h,e*=s,i*=s}let s=.5*(t.w-e),o=.5*(t.h-n);this.transformPrimitives(t.x+s,t.y+o,i,i)}scaleExtent(t,e){let n=this.highX-this.lowX,i=this.highY-this.lowY;if(n<=t&&i<=e)return;let s=Math.min(t/n,e/i);this.transformPrimitives(0,0,s,s)}transformPrimitives(t,e,n,i){if(0==t&&0==e&&1==n&&1==i)return;for(let s of this.prims){const o=s.primClass;if(o==Ye.Line){let o=s;o.x1=t+o.x1*n,o.y1=e+o.y1*i,o.x2=t+o.x2*n,o.y2=e+o.y2*i}else if(o==Ye.Rect){let o=s;o.x=t+o.x*n,o.y=e+o.y*i,o.w=o.w*n,o.h=o.h*i}else if(o==Ye.Oval){let o=s;o.cx=t+o.cx*n,o.cy=e+o.cy*i,o.rw*=n,o.rh*=i}else if(o==Ye.Path){let o=s,r=o.count,a=o.x,l=o.y;for(let s=0;s<r;s++)a[s]=t+a[s]*n,l[s]=e+l[s]*i}else if(o==Ye.Text||o==Ye.TextNative){let o=s;o.x=t+o.x*n,o.y=e+o.y*i}}let s=.5*(n+i);if(1!=s)for(let t of this.types){const e=t.primClass;e==Ye.Line||e==Ye.Rect||e==Ye.Oval||e==Ye.Path?t.thickness*=s:(e==Ye.Text||e==Ye.TextNative)&&(t.size*=s)}this.lowX=t+this.lowX*n,this.lowY=e+this.lowY*i,this.highX=t+this.highX*n,this.highY=e+this.highY*i}renderInto(t){let e=b(t,"canvas",{width:this.width,height:this.height});return this.renderCanvas(e),e}renderCanvas(t,e){let n=t.getContext("2d");e&&n.clearRect(0,0,t.width,t.height);let i=this.width,s=this.height;this.density=gt(),t.style.width=i+"px",t.style.height=s+"px",t.width=i*this.density,t.height=s*this.density,this.renderContext(n)}renderContext(t){t.save(),t.scale(this.density,this.density),this.typeObj=[];for(let t=0;t<this.types.length;t++){let e=this.types[t];e.primClass==Ye.Line?this.typeObj[t]=this.setupTypeLine(e):e.primClass==Ye.Rect?this.typeObj[t]=this.setupTypeRect(e):e.primClass==Ye.Oval?this.typeObj[t]=this.setupTypeOval(e):e.primClass==Ye.Path?this.typeObj[t]=this.setupTypePath(e):e.primClass==Ye.Text?this.typeObj[t]=this.setupTypeText(e):e.primClass==Ye.TextNative&&(this.typeObj[t]=this.setupTypeTextNative(e))}for(let e=0;e<this.prims.length;e++){let n=this.prims[e];n.primClass==Ye.Line?this.renderLine(t,n):n.primClass==Ye.Rect?this.renderRect(t,n):n.primClass==Ye.Oval?this.renderOval(t,n):n.primClass==Ye.Path?this.renderPath(t,n):n.primClass==Ye.Text?this.renderText(t,n):n.primClass==Ye.TextNative&&this.renderTextNative(t,n)}t.restore()}createSVG(t=!1,e=!1){let n=new hn(t);return n.start('<svg xmlns="http://www.w3.org/2000/svg"'),e&&n.attr("xmlns:xlink","http://www.w3.org/1999/xlink"),n.attr("width",this.width),n.attr("height",this.height),n.attr("viewBox",`0 0 ${this.width} ${this.height}`),n.stop(">"),n.inc(),this.renderSVG(n,e),n.dec(),n.whole("</svg>"),n.toString()}renderSVG(t,e=!1){this.typeObj=[];const n=en.main;t.whole("<defs>"),t.inc(),this.charMissing&&(t.start("<path"),t.attr("id","missing"),t.attr("d",n.MISSING_DATA),t.attr("edge","none"),t.stop("/>"));for(let e=0;e<n.UNICODE.length;e++)this.charMask[e]&&(t.start("<path"),t.attr("id","char"+e),t.attr("d",n.GLYPH_DATA[e]),t.attr("edge","none"),t.stop("/>"));t.dec(),t.whole("</defs>");for(let t=0;t<this.types.length;t++){let e=this.types[t];e.primClass==Ye.Line?this.typeObj[t]=this.setupTypeLine(e):e.primClass==Ye.Rect?this.typeObj[t]=this.setupTypeRect(e):e.primClass==Ye.Oval?this.typeObj[t]=this.setupTypeOval(e):e.primClass==Ye.Path?this.typeObj[t]=this.setupTypePath(e):e.primClass==Ye.Text?this.typeObj[t]=this.setupTypeText(e):e.primClass==Ye.TextNative&&(this.typeObj[t]=this.setupTypeTextNative(e))}for(let n=0;n<this.prims.length;){let i=this.prims[n],s=1;if(i.primClass!=Ye.Path&&i.primClass!=Ye.Text&&i.primClass!=Ye.TextNative)for(;n+s<this.prims.length&&this.prims[n+s].primClass==i.primClass&&this.prims[n+s].typeidx==i.typeidx;s++);i.primClass==Ye.Line?1==s?this.svgLine1(t,i):this.svgLineN(t,this.prims.slice(n,n+s)):i.primClass==Ye.Rect?1==s?this.svgRect1(t,i):this.svgRectN(t,this.prims.slice(n,n+s)):i.primClass==Ye.Oval?1==s?this.svgOval1(t,i):this.svgOvalN(t,this.prims.slice(n,n+s)):i.primClass==Ye.Path?this.svgPath(t,i):i.primClass==Ye.Text?this.svgText(t,i,e):i.primClass==Ye.TextNative&&this.svgTextNative(t,i),n+=s}}spool(t){for(let e of this.prims)if(e.primClass==Ye.Line){let{typeidx:n,x1:i,y1:s,x2:o,y2:r}=e,{thickness:a,colour:l}=this.types[n];t.drawLine(i,s,o,r,l,a)}else if(e.primClass==Ye.Rect){let{typeidx:n,x:i,y:s,w:o,h:r}=e,{edgeCol:a,fillCol:l,thickness:d}=this.types[n];t.drawRect(i,s,o,r,a,d,l)}else if(e.primClass==Ye.Oval){let{typeidx:n,cx:i,cy:s,rw:o,rh:r}=e,{edgeCol:a,fillCol:l,thickness:d}=this.types[n];t.drawOval(i,s,o,r,a,d,l)}else if(e.primClass==Ye.Path){let{typeidx:n,count:i,x:s,y:o,ctrl:r,closed:a}=e,{edgeCol:l,fillCol:d,thickness:p,hardEdge:h}=this.types[n];t.drawPath(s,o,r,a,l,p,d,h)}else if(e.primClass==Ye.Text){let{typeidx:n,x:i,y:s,txt:o,direction:r}=e,{size:a,colour:l}=this.types[n];t.drawText(i,s,o,a,l,null,r)}else if(e.primClass==Ye.TextNative){let{typeidx:n,x:i,y:s,txt:o}=e,{family:r,size:a,colour:l}=this.types[n];t.drawTextNative(i,s,o,r,a,l)}}setupTypeLine(t){let e=t.thickness*this.scale,n=t.colour;return{primClass:t.primClass,thickness:e,colour:n}}setupTypeRect(t){let e=t.edgeCol,n=t.fillCol,i=t.thickness*this.scale;return{primClass:t.primClass,edgeCol:e,fillCol:n,thickness:i}}setupTypeOval(t){let e=t.edgeCol,n=t.fillCol,i=t.thickness*this.scale;return{primClass:t.primClass,edgeCol:e,fillCol:n,thickness:i}}setupTypePath(t){let e=t.edgeCol,n=t.fillCol,i=t.thickness*this.scale,s=t.hardEdge;return{primClass:t.primClass,edgeCol:e,fillCol:n,thickness:i,hardEdge:s}}setupTypeText(t){let e=t.size*this.scale,n=t.colour;return{primClass:t.primClass,colour:n,size:e}}setupTypeTextNative(t){let e=t.family,n=t.size*this.scale,i=t.colour,s=t.opt;return{primClass:t.primClass,colour:i,family:e,size:n,opt:s}}renderLine(t,e){let{x1:n,y1:i,x2:s,y2:o}=e,{colour:r,thickness:a}=this.typeObj[e.typeidx];n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i,s=this.offsetX+this.scale*s,o=this.offsetY+this.scale*o,null!=r&&(t.beginPath(),t.moveTo(n,i),t.lineTo(s,o),t.strokeStyle=R(r),t.lineWidth=a,t.lineCap="round",t.stroke())}renderRect(t,e){let{x:n,y:i,w:s,h:o}=e,{edgeCol:r,fillCol:a,thickness:l}=this.typeObj[e.typeidx];n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i,s*=this.scale,o*=this.scale,a!=cn.NOCOLOUR&&(t.fillStyle=R(a),t.fillRect(n,i,s,o)),r!=cn.NOCOLOUR&&(t.strokeStyle=R(r),t.lineWidth=l,t.lineCap="square",t.strokeRect(n,i,s,o))}renderOval(t,e){let{cx:n,cy:i,rw:s,rh:o}=e,{edgeCol:r,fillCol:a,thickness:l}=this.typeObj[e.typeidx];n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i,s*=this.scale,o*=this.scale,a!=cn.NOCOLOUR&&(t.fillStyle=R(a),t.beginPath(),t.ellipse(n,i,s,o,0,0,2*Math.PI,!0),t.fill()),r!=cn.NOCOLOUR&&(t.strokeStyle=R(r),t.lineWidth=l,t.beginPath(),t.ellipse(n,i,s,o,0,0,2*Math.PI,!0),t.stroke())}renderPath(t,e){let{count:n,x:i,y:s,ctrl:o,closed:r}=e,{edgeCol:a,fillCol:l,thickness:d,hardEdge:p}=this.typeObj[e.typeidx];i=[...i],s=[...s];for(let t=0;t<n;t++)i[t]=this.offsetX+this.scale*i[t],s[t]=this.offsetY+this.scale*s[t];for(let e=1;e<=2;e++)if(!(1==e&&l==cn.NOCOLOUR||2==e&&a==cn.NOCOLOUR)){t.beginPath(),t.moveTo(i[0],s[0]);for(let e=1;e<n;e++)o&&o[e]?e<n-1&&!o[e+1]?(t.quadraticCurveTo(i[e],s[e],i[e+1],s[e+1]),e++):e<n-1&&!o[e+2]&&(t.bezierCurveTo(i[e],s[e],i[e+1],s[e+1],i[e+2],s[e+2]),e+=2):t.lineTo(i[e],s[e]);r&&t.closePath(),1==e?(t.fillStyle=R(l),t.fill()):(t.strokeStyle=R(a),t.lineWidth=d,t.lineCap=p?"square":"round",t.lineJoin=p?"miter":"round",t.stroke())}}renderText(t,e){let{x:n,y:i,txt:s,direction:o}=e,{size:r,colour:a}=this.typeObj[e.typeidx],l=R(a);n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i;let d=en.main,p=r*this.scale/d.UNITS_PER_EM,h=0;for(let e=0;e<s.length;e++){let r=s.charAt(e),a=d.getIndex(r),c=null;if(a<0?(h+=d.MISSING_HORZ,c=d.getMissingPath()):c=d.getGlyphPath(a),c){t.save();let e=0!=o?o*tt:0;0==e?t.translate(n+h*p,i):t.translate(n+Math.cos(e)*h*p,i+Math.sin(e)*h*p),t.scale(p,-p),0!=e&&t.rotate(-e),t.fillStyle=l,t.fill(c),t.restore()}h+=d.HORIZ_ADV_X[a],e<s.length-1&&(h+=d.getKerning(r,s.charAt(e+1)))}}renderTextNative(t,e){let{x:n,y:i,txt:s}=e,{size:o,colour:r,family:a,opt:l}=this.typeObj[e.typeidx],d=R(r);n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i,t.save();let p="";l.bold&&(p+="bold "),l.italic&&(p+="italic "),t.font=p+o*this.scale+"px "+a,t.fillStyle=d,t.fillText(s,n,i),t.restore()}svgLine1(t,e){let{x1:n,y1:i,x2:s,y2:o}=e,{colour:r,thickness:a}=this.typeObj[e.typeidx];n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i,s=this.offsetX+this.scale*s,o=this.offsetY+this.scale*o,r!=cn.NOCOLOUR&&(t.start("<line"),t.attr("x1",n),t.attr("y1",i),t.attr("x2",s),t.attr("y2",o),this.defineSVGStroke(t,r),t.attr("stroke-width",a),t.attr("stroke-linecap","round"),t.stop("/>"))}svgLineN(t,e){let{colour:n,thickness:i}=this.typeObj[e[0].typeidx];t.start("<g"),this.defineSVGStroke(t,n),t.attr("stroke-width",i),t.attr("stroke-linecap","round"),t.stop(">"),t.inc();for(let n of e){let{x1:e,y1:i,x2:s,y2:o}=n;e=this.offsetX+this.scale*e,i=this.offsetY+this.scale*i,s=this.offsetX+this.scale*s,o=this.offsetY+this.scale*o,t.start("<line"),t.attr("x1",e),t.attr("y1",i),t.attr("x2",s),t.attr("y2",o),t.stop("/>")}t.dec(),t.whole("</g>")}svgRect1(t,e){let{x:n,y:i,w:s,h:o}=e,{edgeCol:r,fillCol:a,thickness:l}=this.typeObj[e.typeidx];n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i,s*=this.scale,o*=this.scale,t.start("<rect"),t.attr("x",n),t.attr("y",i),t.attr("width",s),t.attr("height",o),this.defineSVGStroke(t,r),r!=cn.NOCOLOUR&&(t.attr("stroke-width",l),t.attr("stroke-linecap","square")),this.defineSVGFill(t,a),t.stop("/>")}svgRectN(t,e){let{edgeCol:n,fillCol:i,thickness:s}=this.typeObj[e[0].typeidx];t.start("<g"),this.defineSVGStroke(t,n),n!=cn.NOCOLOUR&&(t.attr("stroke-width",s),t.attr("stroke-linecap","square")),this.defineSVGFill(t,i),t.stop(">"),t.inc();for(let n of e){let{x:e,y:i,w:s,h:o}=n;e=this.offsetX+this.scale*e,i=this.offsetY+this.scale*i,s*=this.scale,o*=this.scale,t.start("<rect"),t.attr("x",e),t.attr("y",i),t.attr("width",s),t.attr("height",o),t.stop("/>")}t.dec(),t.whole("</g>")}svgOval1(t,e){let{cx:n,cy:i,rw:s,rh:o}=e,{edgeCol:r,fillCol:a,thickness:l}=this.typeObj[e.typeidx];n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i,s*=this.scale,o*=this.scale,t.start("<ellipse"),t.attr("cx",n),t.attr("cy",i),t.attr("rx",s),t.attr("ry",o),this.defineSVGStroke(t,r),r!=cn.NOCOLOUR&&t.attr("stroke-width",l),this.defineSVGFill(t,a),t.stop("/>")}svgOvalN(t,e){let{edgeCol:n,fillCol:i,thickness:s}=this.typeObj[e[0].typeidx];t.start("<g"),this.defineSVGStroke(t,n),n!=cn.NOCOLOUR&&t.attr("stroke-width",s),this.defineSVGFill(t,i),t.stop(">"),t.inc();for(let n of e){let{cx:e,cy:i,rw:s,rh:o}=n;e=this.offsetX+this.scale*e,i=this.offsetY+this.scale*i,s*=this.scale,o*=this.scale,t.start("<ellipse"),t.attr("cx",e),t.attr("cy",i),t.attr("rx",s),t.attr("ry",o),t.stop("/>")}t.dec(),t.whole("</g>")}svgPath(t,e){let{count:n,x:i,y:s,ctrl:o,closed:r}=e,{edgeCol:a,fillCol:l,thickness:d,hardEdge:p}=this.typeObj[e.typeidx];i=[...i],s=[...s];for(let t=0;t<n;t++)i[t]=this.offsetX+this.scale*i[t],s[t]=this.offsetY+this.scale*s[t];let h="M "+pn(i[0])+" "+pn(s[0]),c=1;for(;c<n;)o&&o[c]?o[c]&&c<n-1&&!o[c+1]?(h+=" Q "+pn(i[c])+" "+pn(s[c])+" "+pn(i[c+1])+" "+pn(s[c+1]),c+=2):o[c]&&c<n-2&&o[c+1]&&!o[c+2]?(h+=" C "+pn(i[c])+" "+pn(s[c])+" "+pn(i[c+1])+" "+pn(s[c+1])+" "+pn(i[c+2])+" "+pn(s[c+2]),c+=3):c++:(h+=" L "+pn(i[c])+" "+pn(s[c]),c++);r&&(h+=" Z"),t.start("<path"),t.attr("d",h),this.defineSVGStroke(t,a),a!=cn.NOCOLOUR&&(t.attr("stroke-width",d),t.attr("stroke-linejoin",p?"miter":"round"),t.attr("stroke-linecap",p?"square":"round")),this.defineSVGFill(t,l),t.stop("/>")}svgText(t,e,n=!0){let{x:i,y:s,txt:o,direction:r}=e,{size:a,colour:l}=this.typeObj[e.typeidx];i=this.offsetX+this.scale*i,s=this.offsetY+this.scale*s;let d=en.main,p=a*this.scale/d.UNITS_PER_EM;0!=r&&(t.start("<g"),t.attr("transform",`rotate(${r},${pn(i)},${pn(s)})`),t.stop(">"),t.inc()),t.start("<g"),t.attr("transform",`translate(${pn(i)},${pn(s)})`),this.defineSVGFill(t,l),t.stop(">"),t.inc(),t.start("<g"),t.attr("transform",`scale(${pn(p)},${pn(-p)})`),t.stop(">"),t.inc();let h=0;for(let e=0;e<o.length;e++){let i=o.charAt(e),s=d.getIndex(i);t.start("<use");let r=s<0?"#missing":"#char"+s;n?t.attr("xlink:href",r):t.attr("href",r),t.attr("x",h),t.stop("/>"),s>=0?(h+=d.HORIZ_ADV_X[s],e<o.length-1&&(h+=d.getKerning(i,o.charAt(e+1)))):h+=d.MISSING_HORZ}t.dec(),t.whole("</g>"),t.dec(),t.whole("</g>"),0!=r&&(t.dec(),t.whole("</g>"))}svgTextNative(t,e){let{x:n,y:i,txt:s}=e,{size:o,colour:r,family:a,opt:l}=this.typeObj[e.typeidx];n=this.offsetX+this.scale*n,i=this.offsetY+this.scale*i;let d=`fill: ${R(r)}; font-family: ${a}; font-size: ${o*this.scale};`;l.bold&&(d+=" font-weight: bold;"),l.italic&&(d+=" font-style: italic;"),t.start("<text"),t.attr("xml:space","preserve"),t.attr("x",n),t.attr("y",i),t.attr("style",d),t.stop(">"+s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")+"</text>")}defineSVGStroke(t,e){if(e==cn.NOCOLOUR)return void t.attr("stroke-opacity","0");t.attr("stroke",S(e));let n=N(e);1!=n&&t.attr("stroke-opacity",n)}defineSVGFill(t,e){if(e==cn.NOCOLOUR)return void t.attr("fill-opacity","0");t.attr("fill",S(e));let n=N(e);1!=n&&t.attr("fill-opacity",n)}findOrCreateType(t){for(let e=0;e<this.types.length;e++)if(this.types[e].primClass==t.primClass&&Object.keys(t).every((n=>t[n]==this.types[e][n])))return e;return this.types.push(t),this.types.length-1}updateBounds(t,e){if(null==this.lowX)return this.lowX=t,this.lowY=e,this.highX=t,void(this.highY=e);this.lowX=Math.min(this.lowX,t),this.lowY=Math.min(this.lowY,e),this.highX=Math.max(this.highX,t),this.highY=Math.max(this.highY,e)}}cn.NOCOLOUR=-1;class mn{constructor(t,e){this.layout=t,this.vg=e,this.mnemonics=null,this.mol=t.getMolecule(),this.policy=t.getPolicy(),this.effects=t.getEffects(),this.scale=t.getScale(),this.invScale=1/this.scale}getMolecule(){return this.mol}getMetaVector(){return this.vg}getLayout(){return this.layout}getPolicy(){return this.policy}getEffects(){return this.effects}draw(){var t,e,n,i,s,o,r,a,d,p,h,c,m;this.drawUnderEffects();let{mol:u,layout:f,effects:g,policy:k,vg:y}=this,w=new Set(g.hideBonds);for(let e=1;e<=u.numBonds;e++)if(u.bondType(e)==ge.BONDTYPE_INCLINED&&!w.has(e)){let n=u.bondTo(e);if(f.getPoint(n-1).text)continue;for(let i of u.atomAdjBonds(n))if(i!=e&&u.bondType(i)==ge.BONDTYPE_INCLINED&&u.bondTo(i)==n&&!w.has(i)){let n=f.getLines().find((t=>t.bnum==e)),s=f.getLines().find((t=>t.bnum==i)),o=Math.atan2(n.line.y1-n.line.y2,n.line.x1-n.line.x2),r=Math.atan2(s.line.y1-s.line.y2,s.line.x1-s.line.x2);if(Math.abs(it(o,r))<170*tt){this.drawFusedWedge(n,s),null===(t=this.mnemonics)||void 0===t||t.append(Pe.Artifact,"Fused",[n.line.x1,n.line.y1,n.line.x2,n.line.y2,s.line.x1,s.line.y1,s.line.x2,s.line.y2]),w.add(e),w.add(i);break}}}for(let t=0;t<f.numLines();t++){let a=f.getLine(t);w.has(a.bnum)||(a.type==Fe.Normal?(y.drawLine(a.line.x1,a.line.y1,a.line.x2,a.line.y2,a.col,a.size),null===(e=this.mnemonics)||void 0===e||e.append(Pe.Bond,"L",[a.line.x1,a.line.y1,a.line.x2,a.line.y2])):a.type==Fe.Inclined?(this.drawBondInclined(a),null===(n=this.mnemonics)||void 0===n||n.append(Pe.Bond,"I",[a.line.x1,a.line.y1,a.line.x2,a.line.y2])):a.type==Fe.Declined?(this.drawBondDeclined(a),null===(i=this.mnemonics)||void 0===i||i.append(Pe.Bond,"D",[a.line.x1,a.line.y1,a.line.x2,a.line.y2])):a.type==Fe.Unknown?(this.drawBondUnknown(a),null===(s=this.mnemonics)||void 0===s||s.append(Pe.Bond,"U",[a.line.x1,a.line.y1,a.line.x2,a.line.y2])):a.type==Fe.Dotted||a.type==Fe.DotDir?(this.drawBondDotted(a),null===(o=this.mnemonics)||void 0===o||o.append(Pe.Bond,"O",[a.line.x1,a.line.y1,a.line.x2,a.line.y2])):a.type!=Fe.IncDouble&&a.type!=Fe.IncTriple&&a.type!=Fe.IncQuadruple||(this.drawBondIncMulti(a),null===(r=this.mnemonics)||void 0===r||r.append(Pe.Bond,"M",[a.line.x1,a.line.y1,a.line.x2,a.line.y2])))}let x=k.data.foreground;for(let t of f.getRings())if(0!=t.theta){var C=l.createBezierEllipse(t.cx,t.cy,t.rw,t.rh,t.theta);y.drawPath(C.px,C.py,C.ctrl,!0,x,t.size,cn.NOCOLOUR,!1),null===(a=this.mnemonics)||void 0===a||a.append(Pe.Artifact,"Ring",[t.cx,t.cy,t.rw,t.rh,t.theta])}else y.drawOval(t.cx,t.cy,t.rw,t.rh,x,t.size,cn.NOCOLOUR),null===(d=this.mnemonics)||void 0===d||d.append(Pe.Artifact,"Ring",[t.cx,t.cy,t.rw,t.rh]);for(let t of f.getPaths())y.drawPath(t.px,t.py,t.ctrl,!1,x,t.size,cn.NOCOLOUR,!1),null===(p=this.mnemonics)||void 0===p||p.append(Pe.Artifact,"Path",[...t.px,...t.py]);for(let t=0;t<f.numPoints();t++){let e=f.getPoint(t);if(g.hideAtoms.has(e.anum))continue;let n=e.text,i=e.oval.cx,s=e.oval.cy,o=e.oval.rw;if(null==n){null===(h=this.mnemonics)||void 0===h||h.append(Pe.Atom,".",[i,s]);continue}let r=e.fsz,a=e.col;for(;n.endsWith(".");){let t=o/n.length,e=.15*r;y.drawOval(i+o-t,s,e,e,cn.NOCOLOUR,0,a),i-=t,o-=t,n=n.substring(0,n.length-1)}for(;n.startsWith("+");){let t=o/n.length,e=i-o+t,l=s,d=.18*r,p=.1*r;y.drawLine(e-d,l,e+d,l,a,p),y.drawLine(e,l-d,e,l+d,a,p),i+=t,o-=t,n=n.substring(1,n.length)}for(;n.startsWith("-");){let t=o/n.length,e=i-o+t,l=s,d=.18*r,p=.1*r;y.drawLine(e-d,l,e+d,l,a,p),i+=t,o-=t,n=n.substring(1,n.length)}n.length>0?(y.drawText(i,s,n,r,a,Xe.Centre|Xe.Middle,e.rotation||0),null===(c=this.mnemonics)||void 0===c||c.append(Pe.Atom,n,[i,s])):null===(m=this.mnemonics)||void 0===m||m.append(Pe.Atom,".",[i,s])}this.drawOverEffects()}drawUnderEffects(){var t,e,n;let i=this.mol,s=(this.policy,this.effects),o=this.layout,r=this.scale,a=this.vg;for(let e=0,n=Math.min(s.atomFrameDotSz.length,i.numAtoms);e<n;e++){if(s.hideAtoms.has(e+1))continue;let n=s.atomFrameDotSz[e]*r,i=s.atomFrameCol[e],l=o.getPoint(e),d=l.oval.rw+.1*r,p=l.oval.rh+.1*r,h=Math.ceil(2*d/(3*n)),c=Math.ceil(2*p/(3*n)),m=2*d/h,u=2*p/c;for(let t=0;t<=h;t++){let e=l.oval.cx-d+t*m;a.drawOval(e,l.oval.cy-p,n,n,cn.NOCOLOUR,0,i),a.drawOval(e,l.oval.cy+p,n,n,cn.NOCOLOUR,0,i)}for(let t=1;t<c;t++){let e=l.oval.cy-p+t*u;a.drawOval(l.oval.cx-d,e,n,n,cn.NOCOLOUR,0,i),a.drawOval(l.oval.cx+d,e,n,n,cn.NOCOLOUR,0,i)}null===(t=this.mnemonics)||void 0===t||t.append(Pe.Effect,"Dot",[l.oval.cx,l.oval.cy,l.oval.rw,l.oval.rh])}for(let t in s.dottedRectOutline){let n=parseInt(t),i=s.dottedRectOutline[t],l=o.getPoint(n-1),d=Math.max(l.oval.rw,.2*r),p=Math.max(l.oval.rh,.2*r),h=.05*r,c=Math.max(1,Math.round(d/(2*h))),m=Math.max(1,Math.round(p/(2*h))),u=2*d/c,f=2*p/m;for(let t=0;t<=c;t++){let e=l.oval.cx-d+t*u;a.drawOval(e,l.oval.cy-p,h,h,cn.NOCOLOUR,0,i),a.drawOval(e,l.oval.cy+p,h,h,cn.NOCOLOUR,0,i)}for(let t=1;t<m;t++){let e=l.oval.cy-p+t*f;a.drawOval(l.oval.cx-d,e,h,h,cn.NOCOLOUR,0,i),a.drawOval(l.oval.cx+d,e,h,h,cn.NOCOLOUR,0,i)}null===(e=this.mnemonics)||void 0===e||e.append(Pe.Effect,"Rect",[l.oval.cx,l.oval.cy,l.oval.rw,l.oval.rh])}for(let t in s.dottedBondCross){let e=parseInt(t),i=s.dottedBondCross[t],l=0,d=0,p=0,h=0,c=0;for(let t=0;t<o.numLines();t++){let n=o.getLine(t);n.bnum==e&&(l+=n.line.x1,d+=n.line.y1,p+=n.line.x2,h+=n.line.y2,c+=1)}if(c>1){let t=1/c;[l,d,p,h]=[l*t,d*t,p*t,h*t]}let m=p-l,u=h-d,f=.2*r*V(U(m,u)),g=u*f,k=-m*f,y=.5*(l+p),w=.5*(d+h),x=.05*r;for(let t of[-2,-1,1,2]){let e=y+t*g,n=w+t*k;a.drawOval(e,n,x,x,cn.NOCOLOUR,0,i)}null===(n=this.mnemonics)||void 0===n||n.append(Pe.Effect,"Crossing",[l,d,p,h])}}drawOverEffects(){var t,e;let n=this.mol,i=(this.policy,this.effects),s=this.layout,o=this.scale,r=this.vg;for(let e of i.overlapAtoms){let n=s.getPoint(e-1),i=.2*o;r.drawLine(n.oval.cx-i,n.oval.cy-i,n.oval.cx+i,n.oval.cy+i,16711680,1),r.drawLine(n.oval.cx+i,n.oval.cy-i,n.oval.cx-i,n.oval.cy+i,16711680,1),null===(t=this.mnemonics)||void 0===t||t.append(Pe.Effect,"Overlap",[n.oval.cx,n.oval.cy,n.oval.rw,n.oval.rh])}for(let t=0,a=Math.min(i.atomCircleSz.length,n.numAtoms);t<a;t++)if(i.atomCircleSz[t]>0){let n=i.atomCircleSz[t]*o,a=i.atomCircleCol[t],l=s.getPoint(t);r.drawOval(l.oval.cx,l.oval.cy,n,n,cn.NOCOLOUR,0,a),null===(e=this.mnemonics)||void 0===e||e.append(Pe.Effect,"Circle",[l.oval.cx,l.oval.cy,l.oval.rw,l.oval.rh])}}drawBondInclined(t){let e=t.line.x1,n=t.line.y1,i=t.line.x2,s=t.line.y2,o=i-e,r=s-n,a=t.col,d=(t.size,t.head/Math.sqrt(o*o+r*r)),p=d*r,h=-d*o,c=[e,i-p,i+p],m=[n,s-h,s+h];if(null==this.layout.getPoint(t.bto-1).text&&2==this.mol.atomAdjCount(t.bto)){let o=null;for(let e=0;e<this.layout.numLines();e++){let n=this.layout.getLine(e);if(n.type==Fe.Normal&&(n.bfr==t.bto||n.bto==t.bto)){if(null!=o){o=null;break}o=n}}if(null!=o){let r=Math.atan2(n-s,e-i),a=Math.atan2(o.line.y1-o.line.y2,o.line.x1-o.line.x2);t.bto==o.bfr&&(a+=Math.PI);let d=Math.abs(it(r,a));if(d>105*tt&&d<135*tt){let t=l.lineIntersect(c[0],m[0],c[1],m[1],o.line.x1,o.line.y1,o.line.x2,o.line.y2),e=l.lineIntersect(c[0],m[0],c[2],m[2],o.line.x1,o.line.y1,o.line.x2,o.line.y2);c[1]=t[0],m[1]=t[1],c[2]=e[0],m[2]=e[1];let n=c[1]-c[0],i=m[1]-m[0],s=.5*o.size/U(n,i);c[1]+=n*s,m[1]+=i*s;let r=c[2]-c[0],a=m[2]-m[0];o.size,U(r,a),c[2]+=r*s,m[2]+=a*s}}}if(null==this.layout.getPoint(t.bto-1).text&&3==this.mol.atomAdjCount(t.bto)){let o=null,r=null;for(let e=0;e<this.layout.numLines();e++){let n=this.layout.getLine(e);if(n.type==Fe.Normal&&(n.bfr==t.bto||n.bto==t.bto))if(null==o)o=n;else{if(null!=r){o=r=null;break}r=n}}if(null!=o&&null!=r){let a=Math.atan2(n-s,e-i),d=Math.atan2(o.line.y1-o.line.y2,o.line.x1-o.line.x2),p=Math.atan2(r.line.y1-r.line.y2,r.line.x1-r.line.x2);t.bto==o.bfr&&(d+=Math.PI),t.bto==r.bfr&&(p+=Math.PI);let h=it(a,d),u=Math.abs(h),f=it(a,p),g=Math.abs(f),k=Math.abs(it(d,p));if(u>105*tt&&u<135*tt||g>105*tt&&g<135*tt||k>105*tt&&k<135*tt){h<0&&([o,r]=[r,o]);let t=l.lineIntersect(c[0],m[0],c[1],m[1],o.line.x1,o.line.y1,o.line.x2,o.line.y2),a=l.lineIntersect(c[0],m[0],c[2],m[2],r.line.x1,r.line.y1,r.line.x2,r.line.y2);c=[e,t[0],i,a[0]],m=[n,t[1],s,a[1]]}}}this.vg.drawPoly(c,m,cn.NOCOLOUR,0,a,!0)}drawFusedWedge(t,e){const n=(t,e)=>{let n=t.line.x1,i=t.line.y1,s=t.line.x2,o=t.line.y2,r=s-n,a=o-i,l=t.head/Math.sqrt(r*r+a*a),d=l*a,p=-l*r,h=s-d,c=o-p,m=s+d,u=o+p;return Y(h-e.line.x1,c-e.line.y1)>Y(m-e.line.x1,u-e.line.y1)?{outerX:h,outerY:c,innerX:m,innerY:u}:{outerX:m,outerY:u,innerX:h,innerY:c}};let i=n(t,e),s=n(e,t),[o,r]=l.lineIntersect(t.line.x1,t.line.y1,i.innerX,i.innerY,e.line.x1,e.line.y1,s.innerX,s.innerY),a=[t.line.x1,i.outerX,s.outerX,e.line.x1,o],d=[t.line.y1,i.outerY,s.outerY,e.line.y1,r];this.vg.drawPoly(a,d,cn.NOCOLOUR,0,t.col,!0)}drawBondDeclined(t){let e=t.line.x1,n=t.line.y1,i=t.line.x2-e,s=t.line.y2-n,o=t.col,r=t.size,a=t.head,l=Math.sqrt(i*i+s*s),d=Math.ceil(2.5*l*this.invScale),p=a/l,h=p*s,c=-p*i,m=1/(d+1),u=1==this.mol.atomAdjCount(t.bto)&&null==this.layout.getPoint(t.bto-1).text?1:1-.15*this.scale/l;for(let t=0;t<=d+1;t++){let a=e+t*i*m*u,l=n+t*s*m*u,d=h*t*m,p=c*t*m;this.vg.drawLine(a-d,l-p,a+d,l+p,o,r)}}drawBondUnknown(t){let e=t.line.x1,i=t.line.y1,s=t.line.x2-e,o=t.line.y2-i,r=t.col,a=t.size,l=t.head,d=Math.sqrt(s*s+o*o),p=Math.ceil(3.5*d*this.invScale),h=l/d,c=h*o,m=-h*s,u=1+3*(p+1),f=n.numberArray(0,u),g=n.numberArray(0,u),k=n.booleanArray(!1,u);f[0]=e,g[0]=i,k[0]=!1;for(let t=0,n=1;t<=p;t++,n+=3){let r=e+t*s/(p+1),a=i+t*o/(p+1),l=e+(t+1)*s/(p+1),d=i+(t+1)*o/(p+1),h=(r+l)/2,u=(a+d)/2,y=t%2==0?1:-1;f[n]=r,f[n+1]=h+y*c,f[n+2]=l,g[n]=a,g[n+1]=u+y*m,g[n+2]=d,k[n]=!0,k[n+1]=!0,k[n+2]=!1}this.vg.drawPath(f,g,k,!1,r,a,cn.NOCOLOUR,!1)}drawBondDotted(t){let e=t.line.x1,n=t.line.y1,i=t.line.x2,s=t.line.y2,o=i-e,r=s-n,a=t.col,l=t.size,d=l,p=U(o,r);if(p<.01)return;let h=.5*l/p;e+=h*o,n+=h*r,i-=h*o,s-=h*r,o=i-e,r=s-n;let c=Math.ceil(.2*p/d),m=1/(c+1);for(let i=0;i<=c+1;i++){let s=d;t.type==Fe.DotDir&&(s*=i*(1/(c+2))-.5+1);let l=e+i*o*m,p=n+i*r*m;this.vg.drawOval(l,p,s,s,cn.NOCOLOUR,0,a)}}drawBondIncMulti(t){let e=t.line.x1,n=t.line.y1,i=t.line.x2,s=t.line.y2,o=i-e,r=s-n,a=t.col,l=(t.size,t.head/Math.sqrt(o*o+r*r)),d=l*r,p=-l*o;this.vg.drawPoly([e,i-d,i+d],[n,s-p,s+p],a,.05*this.scale,cn.NOCOLOUR,!0),t.type==Fe.IncDouble?this.vg.drawLine(e,n,i,s,a,.03*this.scale):(this.vg.drawLine(e,n,i+.33*d,s+.33*p,a,.03*this.scale),this.vg.drawLine(e,n,i-.33*d,s-.33*p,a,.03*this.scale))}}class un{constructor(t,e){this.layout=t,this.vg=e,this.preDrawComponent=null,this.preDrawMolecule=null,this.postDrawMolecule=null,this.molDrawn=[],this.entry=t.entry,this.measure=t.measure,this.policy=t.policy,this.scale=t.scale,this.invScale=1/this.scale}draw(){this.molDrawn=n.anyArray(null,this.layout.components.length);for(let t=0;t<this.layout.components.length;t++){let e=this.layout.components[t];e.type==je.Arrow?this.drawSymbolArrow(e):e.type==je.Plus?this.drawSymbolPlus(e):this.drawComponent(t,e)}}drawComponent(t,e){var i;let s=this.vg,o=this.policy,r=e.box.x+e.padding,a=e.box.y+e.padding,l=e.box.w-2*e.padding,d=e.box.h-2*e.padding;if(this.preDrawComponent&&this.preDrawComponent(s,t,e),e.srcIdx<0&&Qt.isBlank(e.mol)&&n.isBlank(e.text)){let t=.5*d;return void s.drawText(r+.5*l,a+.5*d,"?",t,o.data.foreground,Xe.Centre|Xe.Middle)}if(n.notBlank(e.text)){let t=this.measure.measureText("!",e.fszText),n=t[1]+t[2],i=n*e.text.length,p=a+d-n*(e.text.length-1);for(let t of e.text)this.measure.measureText(t,e.fszText),s.drawText(r+.5*l,p,t,e.fszText,o.data.foreground,Xe.Centre|Xe.Baseline),p+=n;d-=i+.5*e.fszText}let p={};if(e.leftNumer){let t=this.measure.measureText(e.leftNumer,e.fszLeft);if(e.leftDenom){let n=this.measure.measureText(e.leftDenom,e.fszLeft),i=Math.max(t[0],n[0]),s=r+.5*i;p.tx=s,p.th=t[2],p.lx=r,p.lw=i;let o=i+ln.COMP_GAP_LEFT*(t[1]+t[2]);r+=o,l-=o}else{p.tx=r;let e=t[0]+ln.COMP_GAP_LEFT*(t[1]+t[2]);r+=e,l-=e}}if(0!=e.annot){let t=ln.COMP_ANNOT_SIZE*this.scale;l-=t,this.drawAnnotation(e.annot,r+l,a,t,d)}let h=a+.5*d;if(Qt.notBlank(e.mol)){let p=new sn;if(this.layout.includeAtomMap){p.atomDecoText=n.stringArray("",e.mol.numAtoms),p.atomDecoCol=n.numberArray(this.layout.colourAtomMap,e.mol.numAtoms),p.atomDecoSize=n.numberArray(.3,e.mol.numAtoms);for(let t=1;t<=e.mol.numAtoms;t++)e.mol.atomMapNum(t)>0&&(p.atomDecoText[t-1]=e.mol.atomMapNum(t).toString())}let c=o;null!=e.monochromeColour&&(c=c.clone(),c.data.foreground=e.monochromeColour,c.data.atomCols=n.numberArray(e.monochromeColour,c.data.atomCols.length));let m=new rn(e.mol,this.layout.measure,c,p);m.arrange(),m.squeezeInto(r,a,l,d,0),h=null!==(i=this.calculateMoleculeBaseline(m))&&void 0!==i?i:h,this.preDrawMolecule&&this.preDrawMolecule(s,t,e,m),new mn(m,s).draw(),this.postDrawMolecule&&this.postDrawMolecule(s,t,e,m),this.molDrawn[t]=m}e.leftNumer&&!e.leftDenom?s.drawText(p.tx,h,e.leftNumer,e.fszLeft,o.data.foreground,Xe.Left|Xe.Middle):e.leftNumer&&e.leftDenom&&(s.drawText(p.tx,h,e.leftNumer,e.fszLeft,o.data.foreground,Xe.Centre|Xe.Bottom),s.drawText(p.tx,h+p.th,e.leftDenom,e.fszLeft,o.data.foreground,Xe.Centre|Xe.Top),s.drawLine(p.lx,h,p.lx+p.lw,h,o.data.foreground,.03*this.scale))}drawSymbolArrow(t){let e=t.box.x+t.padding,n=t.box.y+t.padding,i=t.box.w-2*t.padding,s=t.box.h-2*t.padding;i>s?this.drawArrow(e,n+.5*s,e+i,n+.5*s,s,this.policy.data.foreground,.05*this.scale):this.drawArrow(e+.5*i,n,e+.5*i,n+s,i,this.policy.data.foreground,.05*this.scale)}drawSymbolPlus(t){let e=this.vg,n=this.policy,i=t.box.x+t.padding,s=t.box.y+t.padding,o=i+t.box.w-2*t.padding,r=s+t.box.h-2*t.padding,a=.5*(i+o),l=.5*(s+r),d=.1*(o-i+r-s);e.drawLine(i,l,o,l,n.data.foreground,d),e.drawLine(a,s,a,r,n.data.foreground,d)}drawAnnotation(t,e,n,i,s){let o=this.vg,r=this.policy,a=i,l=e+i,d=n+s,p=l-a,h=n;if(t==Ue.Primary?d=h+a:t==Ue.Waste&&(h=d-a),t==Ue.Primary){let t=.5*(p+l),e=.5*(h+d),n=.25*a,i=[t,t+.866*n,t+.866*n,t,t-.866*n,t-.866*n],s=[e-n,e-.5*n,e+.5*n,e+n,e+.5*n,e-.5*n],c=.05*this.scale;o.drawLine(i[0],s[0],i[3],s[3],r.data.foreground,c),o.drawLine(i[1],s[1],i[4],s[4],r.data.foreground,c),o.drawLine(i[2],s[2],i[5],s[5],r.data.foreground,c);let m=.1*a;o.drawOval(p+.5*a,h+.5*a,.5*a-m,.5*a-m,r.data.foreground,c,cn.NOCOLOUR)}else if(t==Ue.Waste){let t=p+.7*a,e=.5*(h+d),n=.25*a,i=.05*this.scale,s=[p+.1*a,t-n,t,t,t],l=[h,h,h,e-n,e],c=[!1,!1,!0,!1,!1];o.drawPath(s,l,c,!1,r.data.foreground,i,cn.NOCOLOUR,!1);for(let n=0;n<4;n++){let s=e+.45*n*a*(1/3),l=.1*(3.1-n)*a;o.drawLine(t-l,s,t+l,s,r.data.foreground,i)}}else if(t==Ue.Implied){let t=.5*a,e=.75*a,n=l-.5*t,i=h+.5*e,s=h+.25*e,d=.1*a*.5,p=.05*this.scale,c=r.data.foreground;o.drawLine(n,h,n,h+e,c,p),o.drawLine(l-t,s,l,s,c,p),o.drawLine(l-t,i,l,i,c,p),o.drawOval(l-t+d,h+e-d,d,d,0,0,c),o.drawOval(l-d,h+e-d,d,d,0,0,c)}}drawArrow(t,e,n,i,s,o,r){let a=n-t,l=i-e,d=V(U(a,l));a*=d,l*=d;let p=-a,h=n-a*s,c=i-l*s,m=[t+.5*l*r,h+.5*l*r,h+.5*l*s,n,h-.5*l*s,h-.5*l*r,t-.5*l*r],u=[e+.5*p*r,c+.5*p*r,c+.5*p*s,i,c-.5*p*s,c-.5*p*r,e-.5*p*r];this.vg.drawPoly(m,u,cn.NOCOLOUR,0,o,!0)}calculateMoleculeBaseline(t){let e=t.getMolecule(),n=e.boundary().midY(),i=Number.POSITIVE_INFINITY,s=null,o=null;for(let r=1;r<=e.numAtoms;r++){let a=e.atomX(r),l=e.atomY(r);Math.abs(l-n)<.1&&a<i&&([i,s]=[a,l],o=t.getPoint(r-1).oval.cy)}return o}}!function(t){t[t.Reactant=0]="Reactant",t[t.Reagent=1]="Reagent",t[t.Product=2]="Product"}(We||(We={}));class fn{constructor(t,e){this.mol=null,this.name="",this.stoich="",this.mass=null,this.volume=null,this.moles=null,this.density=null,this.conc=null,this.yield=null,this.primary=!1,this.waste=!1,this.equiv=null,this.meta="",this.mol=t,e&&(this.name=e)}clone(){let t=new fn(this.mol,this.name);return t.stoich=this.stoich,t.mass=this.mass,t.volume=this.volume,t.moles=this.moles,t.density=this.density,t.conc=this.conc,t.yield=this.yield,t.primary=this.primary,t.waste=this.waste,t.equiv=this.equiv,t.meta=this.meta,t}equals(t){return this.name==t.name&&this.stoich==t.stoich&&this.mass==t.mass&&this.volume==t.volume&&this.moles==t.moles&&this.density==t.density&&this.conc==t.conc&&this.yield==t.yield&&this.primary==t.primary&&this.waste==t.waste&&this.equiv==t.equiv&&this.meta==t.meta&&(this.mol===t.mol||null!=this.mol&&null!=t.mol&&0==this.mol.compareTo(t.mol))}isBlank(){return Qt.isBlank(this.mol)&&!this.name}}class gn{constructor(){this.reactants=[],this.reagents=[],this.products=[],this.meta=""}clone(){let t=new gn;for(let e of this.reactants)t.reactants.push(e.clone());for(let e of this.reagents)t.reagents.push(e.clone());for(let e of this.products)t.products.push(e.clone());return t.meta=this.meta,t}equals(t){if(this.reactants.length!=t.reactants.length)return!1;if(this.reagents.length!=t.reagents.length)return!1;if(this.products.length!=t.products.length)return!1;if(this.meta!=t.meta)return!1;for(let e=0;e<this.reactants.length;e++)if(!this.reactants[e].equals(t.reactants[e]))return!1;for(let e=0;e<this.reagents.length;e++)if(!this.reagents[e].equals(t.reagents[e]))return!1;for(let e=0;e<this.products.length;e++)if(!this.products[e].equals(t.products[e]))return!1;return!0}}class kn{constructor(){this.title="",this.createDate=null,this.modifyDate=null,this.doi="",this.meta="",this.steps=[]}clone(){let t=new kn;t.title=this.title,t.createDate=this.createDate,t.modifyDate=this.modifyDate,t.doi=this.doi,t.meta=this.meta;for(let e of this.steps)t.steps.push(e.clone());return t}deepClone(){let t=this.clone();for(let e of t.steps){for(let t of e.reactants)null!=t.mol&&(t.mol=t.mol.clone());for(let t of e.reagents)null!=t.mol&&(t.mol=t.mol.clone());for(let t of e.products)null!=t.mol&&(t.mol=t.mol.clone())}return t}equals(t){if(this.title!=t.title)return!1;if((null==this.createDate?0:this.createDate.getTime())!=(null==t.createDate?0:t.createDate.getTime()))return!1;if((null==this.modifyDate?0:this.modifyDate.getTime())!=(null==t.modifyDate?0:t.modifyDate.getTime()))return!1;if(this.doi!=t.doi||this.meta!=t.meta)return!1;if(this.steps.length!=t.steps.length)return!1;for(let e=0;e<this.steps.length;e++)if(!this.steps[e].equals(t.steps[e]))return!1;return!0}getComponent(t,e,n){return e==We.Reactant?this.steps[t].reactants[n]:e==We.Reagent?this.steps[t].reagents[n]:e==We.Product?this.steps[t].products[n]:new fn}}class yn extends we{static isExperiment(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==yn.CODE)return!0;return!1}constructor(t,e){if(super(yn.CODE,t,e),this.subordinateCodes=[yn.CODE_RXN,yn.CODE_YLD],0==Object.keys(yn.COLUMN_DESCRIPTIONS).length){let t=yn.COLUMN_DESCRIPTIONS;t[yn.COLNAME_EXPERIMENT_TITLE]="Title description for the experiment",t[yn.COLNAME_EXPERIMENT_CREATEDATE]="Date the experiment was created (seconds since 1970)",t[yn.COLNAME_EXPERIMENT_MODIFYDATE]="Date the experiment was last modified (seconds since 1970)",t[yn.COLNAME_EXPERIMENT_DOI]="Digital object identifiers (DOI) for the experiment (whitespace separated)",t[yn.COLNAME_EXPERIMENT_META]="Additional experiment metadata",t[yn.COLNAME_STEP_META]="Additional step metadata",t[yn.COLNAME_REACTANT_MOL]="Molecular structure of reactant",t[yn.COLNAME_REACTANT_NAME]="Name of reactant",t[yn.COLNAME_REACTANT_STOICH]="Stoichiometry of reactant",t[yn.COLNAME_REACTANT_MASS]="Mass quantity of reactant (g)",t[yn.COLNAME_REACTANT_VOLUME]="Volume quantity of reactant (mL)",t[yn.COLNAME_REACTANT_MOLES]="Molar quantity of reactant (mol)",t[yn.COLNAME_REACTANT_DENSITY]="Density of reactant (g/mL)",t[yn.COLNAME_REACTANT_CONC]="Concentration of reactant (mol/L)",t[yn.COLNAME_REACTANT_PRIMARY]="Whether the reactant is used for yield calculation",t[yn.COLNAME_REACTANT_META]="Additional reactant metadata",t[yn.COLNAME_REAGENT_MOL]="Molecular structure of reagent",t[yn.COLNAME_REAGENT_NAME]="Name of reagent",t[yn.COLNAME_REAGENT_EQUIV]="Molar equivalents of reagent",t[yn.COLNAME_REAGENT_MASS]="Mass quantity of reagent (g)",t[yn.COLNAME_REAGENT_VOLUME]="Volume quantity of reagent (mL)",t[yn.COLNAME_REAGENT_MOLES]="Molar quantity of reagent (mol)",t[yn.COLNAME_REAGENT_DENSITY]="Density of reagent (g/mL)",t[yn.COLNAME_REAGENT_CONC]="Concentration of reagent (mol/L)",t[yn.COLNAME_REAGENT_META]="Additional reagent metadata",t[yn.COLNAME_PRODUCT_MOL]="Molecular structure of product",t[yn.COLNAME_PRODUCT_NAME]="Name of product",t[yn.COLNAME_PRODUCT_STOICH]="Stoichiometry of product",t[yn.COLNAME_PRODUCT_MASS]="Mass quantity of reactant (g)",t[yn.COLNAME_PRODUCT_VOLUME]="Volume quantity of reactant (mL)",t[yn.COLNAME_PRODUCT_MOLES]="Molar quantity of reactant (mol)",t[yn.COLNAME_PRODUCT_DENSITY]="Density of reactant (g/mL)",t[yn.COLNAME_PRODUCT_CONC]="Concentration of reactant (mol/L)",t[yn.COLNAME_PRODUCT_YIELD]="Yield of product (%)",t[yn.COLNAME_PRODUCT_WASTE]="Whether the product is an unwanted byproduct",t[yn.COLNAME_PRODUCT_META]="Additional product metadata"}this.setup()}isFirstStep(t){if(this.ds.notNull(t,yn.COLNAME_EXPERIMENT_CREATEDATE))return!0;let e=this.ds.getMolecule(t,yn.COLNAME_REACTANT_MOL+"1");return!!Qt.notBlank(e)||!!this.ds.getString(t,yn.COLNAME_REACTANT_NAME+"1")}numberOfSteps(t){if(t>=this.ds.numRows)return 0;let e=1;for(;t+e<this.ds.numRows&&!this.isFirstStep(t+e);)e++;return e}getEntry(t){let e=new kn,n=this.ds.getString(t,yn.COLNAME_EXPERIMENT_TITLE);n&&(e.title=n);let i=this.ds.getReal(t,yn.COLNAME_EXPERIMENT_CREATEDATE);i&&(e.createDate=new Date(1e3*i));let s=this.ds.getReal(t,yn.COLNAME_EXPERIMENT_MODIFYDATE);s&&(e.modifyDate=new Date(1e3*s));let o=this.ds.getString(t,yn.COLNAME_EXPERIMENT_DOI);o&&(e.doi=o);let r=this.ds.getString(t,yn.COLNAME_EXPERIMENT_META);r&&(e.meta=r);let[a,l,d]=this.countComponents();for(let n=t;n<this.ds.numRows&&!(n>t&&this.isFirstStep(n));n++){let i=new gn;if(n==t)for(let t=1;t<=a;t++){let e=this.fetchReactant(n,t);if(null==e)break;i.reactants.push(e)}for(let t=1;t<=l;t++){let e=this.fetchProduct(n,t);if(null==e)break;i.products.push(e)}for(let t=1;t<=d;t++){let e=this.fetchReagent(n,t);if(null==e)break;i.reagents.push(e)}i.meta=this.ds.getString(n,yn.COLNAME_STEP_META),e.steps.push(i)}return e}setEntry(t,e){this.putEntry(t,e,!0)}addEntry(t){this.putEntry(this.ds.numRows,t,!1)}insertEntry(t,e){this.putEntry(t,e,!1)}deleteEntry(t){for(let e=t+this.numberOfSteps(t)-1;e>=t;e--)this.ds.deleteRow(e)}setup(){this.parseAndCorrect()}parseAndCorrect(){let t=this.ds,e=-1,n=-1,i=-1,s="",o="",r="";for(let a=0;a<t.numExtensions;a++)t.getExtType(a)==yn.CODE_RXN?(e=a,s=t.getExtData(a)):t.getExtType(a)==yn.CODE_YLD?(n=a,o=t.getExtData(a)):t.getExtType(a)==yn.CODE&&(i=a,r=t.getExtData(a));let[a,l,d]=this.parseReactionMetaData(s),p=`nreactants=${a}\nnproducts=${l}\nnreagents=${d}\n`;e>=0?t.setExtData(e,p):t.appendExtension(yn.NAME_RXN,yn.CODE_RXN,p),n>=0?t.setExtData(n,""):t.appendExtension(yn.NAME_YLD,yn.CODE_YLD,""),i>=0?t.setExtData(i,""):t.appendExtension(yn.NAME,yn.CODE,""),this.forceColumn(yn.COLNAME_EXPERIMENT_TITLE,"string"),this.forceColumn(yn.COLNAME_EXPERIMENT_CREATEDATE,"real"),this.forceColumn(yn.COLNAME_EXPERIMENT_MODIFYDATE,"real"),this.forceColumn(yn.COLNAME_EXPERIMENT_DOI,"string"),this.forceColumn(yn.COLNAME_EXPERIMENT_META,"string"),this.forceColumn(yn.COLNAME_STEP_META,"string");for(let t=1;t<=a;t++)this.forceReactantColumns(t);for(let t=1;t<=d;t++)this.forceReagentColumns(t);for(let t=1;t<=l;t++)this.forceProductColumns(t)}forceColumn(t,e,n){let i=t+(null==n?"":n);this.ds.ensureColumn(i,e,yn.COLUMN_DESCRIPTIONS[t])}forceReactantColumns(t){this.forceColumn(yn.COLNAME_REACTANT_MOL,"molecule",t),this.forceColumn(yn.COLNAME_REACTANT_NAME,"string",t),this.forceColumn(yn.COLNAME_REACTANT_STOICH,"string",t),this.forceColumn(yn.COLNAME_REACTANT_MASS,"real",t),this.forceColumn(yn.COLNAME_REACTANT_VOLUME,"real",t),this.forceColumn(yn.COLNAME_REACTANT_MOLES,"real",t),this.forceColumn(yn.COLNAME_REACTANT_DENSITY,"real",t),this.forceColumn(yn.COLNAME_REACTANT_CONC,"real",t),this.forceColumn(yn.COLNAME_REACTANT_PRIMARY,"boolean",t),this.forceColumn(yn.COLNAME_REACTANT_META,"string",t)}forceReagentColumns(t){this.forceColumn(yn.COLNAME_REAGENT_MOL,"molecule",t),this.forceColumn(yn.COLNAME_REAGENT_NAME,"string",t),this.forceColumn(yn.COLNAME_REAGENT_EQUIV,"real",t),this.forceColumn(yn.COLNAME_REAGENT_MASS,"real",t),this.forceColumn(yn.COLNAME_REAGENT_VOLUME,"real",t),this.forceColumn(yn.COLNAME_REAGENT_MOLES,"real",t),this.forceColumn(yn.COLNAME_REAGENT_DENSITY,"real",t),this.forceColumn(yn.COLNAME_REAGENT_CONC,"real",t),this.forceColumn(yn.COLNAME_REAGENT_META,"string",t)}forceProductColumns(t){this.forceColumn(yn.COLNAME_PRODUCT_MOL,"molecule",t),this.forceColumn(yn.COLNAME_PRODUCT_NAME,"string",t),this.forceColumn(yn.COLNAME_PRODUCT_STOICH,"string",t),this.forceColumn(yn.COLNAME_PRODUCT_MASS,"real",t),this.forceColumn(yn.COLNAME_PRODUCT_VOLUME,"real",t),this.forceColumn(yn.COLNAME_PRODUCT_MOLES,"real",t),this.forceColumn(yn.COLNAME_PRODUCT_DENSITY,"real",t),this.forceColumn(yn.COLNAME_PRODUCT_CONC,"real",t),this.forceColumn(yn.COLNAME_PRODUCT_YIELD,"real",t),this.forceColumn(yn.COLNAME_PRODUCT_WASTE,"boolean",t),this.forceColumn(yn.COLNAME_PRODUCT_META,"string",t)}parseReactionMetaData(t){let e=1,n=1,i=0;for(let s of t.split(/\r?\n/))s.startsWith("nreactants=")?e=Math.max(e,Math.min(100,parseInt(s.substring(11)))):s.startsWith("nproducts=")?n=Math.max(n,Math.min(100,parseInt(s.substring(10)))):s.startsWith("nreagents=")&&(i=Math.max(i,Math.min(100,parseInt(s.substring(10)))));return[e,n,i]}countComponents(){let t=0,e=0,n=0;for(let i=0;i<this.ds.numExtensions;i++)if(this.ds.getExtType(i)==yn.CODE_RXN){[t,e,n]=this.parseReactionMetaData(this.ds.getExtData(i));break}return[t,e,n]}fetchReactant(t,e){let n=this.ds.getMoleculeClone(t,`${yn.COLNAME_REACTANT_MOL}${e}`),i=this.ds.getString(t,`${yn.COLNAME_REACTANT_NAME}${e}`);if(Qt.isBlank(n)&&!i)return null;let s=new fn(n,i),o=this.ds.getString(t,`${yn.COLNAME_REACTANT_STOICH}${e}`);o&&(s.stoich=o),s.mass=this.ds.getReal(t,`${yn.COLNAME_REACTANT_MASS}${e}`),s.volume=this.ds.getReal(t,`${yn.COLNAME_REACTANT_VOLUME}${e}`),s.moles=this.ds.getReal(t,`${yn.COLNAME_REACTANT_MOLES}${e}`),s.density=this.ds.getReal(t,`${yn.COLNAME_REACTANT_DENSITY}${e}`),s.conc=this.ds.getReal(t,`${yn.COLNAME_REACTANT_CONC}${e}`);let r=this.ds.getBoolean(t,`${yn.COLNAME_REACTANT_PRIMARY}${e}`);return null!=r&&(s.primary=r),s.meta=this.ds.getString(t,`${yn.COLNAME_REACTANT_META}${e}`),s}fetchProduct(t,e){let n=this.ds.getMoleculeClone(t,`${yn.COLNAME_PRODUCT_MOL}${e}`),i=this.ds.getString(t,`${yn.COLNAME_PRODUCT_NAME}${e}`);if(Qt.isBlank(n)&&!i)return null;let s=new fn(n,i),o=this.ds.getString(t,`${yn.COLNAME_PRODUCT_STOICH}${e}`);o&&(s.stoich=o),s.mass=this.ds.getReal(t,`${yn.COLNAME_PRODUCT_MASS}${e}`),s.volume=this.ds.getReal(t,`${yn.COLNAME_PRODUCT_VOLUME}${e}`),s.moles=this.ds.getReal(t,`${yn.COLNAME_PRODUCT_MOLES}${e}`),s.density=this.ds.getReal(t,`${yn.COLNAME_PRODUCT_DENSITY}${e}`),s.conc=this.ds.getReal(t,`${yn.COLNAME_PRODUCT_CONC}${e}`),s.yield=this.ds.getReal(t,`${yn.COLNAME_PRODUCT_YIELD}${e}`);let r=this.ds.getBoolean(t,`${yn.COLNAME_PRODUCT_WASTE}${e}`);return null!=r&&(s.waste=r),s.meta=this.ds.getString(t,`${yn.COLNAME_PRODUCT_META}${e}`),s}fetchReagent(t,e){let n=this.ds.getMoleculeClone(t,`${yn.COLNAME_REAGENT_MOL}${e}`),i=this.ds.getString(t,`${yn.COLNAME_REAGENT_NAME}${e}`);if(Qt.isBlank(n)&&!i)return null;let s=new fn(n,i);return s.mass=this.ds.getReal(t,`${yn.COLNAME_REAGENT_MASS}${e}`),s.volume=this.ds.getReal(t,`${yn.COLNAME_REAGENT_VOLUME}${e}`),s.moles=this.ds.getReal(t,`${yn.COLNAME_REAGENT_MOLES}${e}`),s.density=this.ds.getReal(t,`${yn.COLNAME_REAGENT_DENSITY}${e}`),s.conc=this.ds.getReal(t,`${yn.COLNAME_REAGENT_CONC}${e}`),s.equiv=this.ds.getReal(t,`${yn.COLNAME_REAGENT_EQUIV}${e}`),s.meta=this.ds.getString(t,`${yn.COLNAME_REAGENT_META}${e}`),s}putEntry(t,e,n){let[i,s,o]=this.countComponents(),[r,a,l]=[i,s,o];for(let t of e.steps)r=Math.max(r,t.reactants.length),a=Math.max(a,t.products.length),l=Math.max(l,t.reagents.length);if(r!=i||a!=s||l!=o){let t=`nreactants=${r}\nnproducts=${a}\nnreagents=${l}`,e=!1;for(let n=0;n<this.ds.numExtensions;n++)if(this.ds.getExtType(n)==yn.CODE_RXN){this.ds.setExtData(n,t),e=!0;break}e||this.ds.appendExtension(yn.NAME_RXN,yn.CODE_RXN,t)}for(let t=1;t<=r;t++)this.forceReactantColumns(t);for(let t=1;t<=l;t++)this.forceReagentColumns(t);for(let t=1;t<=a;t++)this.forceProductColumns(t);let d=n?this.numberOfSteps(t):0,p=e.steps.length;if(d>p)for(let e=p;e<d;e++)this.ds.deleteRow(t+p-1);else if(p>d)for(let e=d;e<p;e++)this.ds.insertRow(t+d);this.ds.setString(t,yn.COLNAME_EXPERIMENT_TITLE,e.title),this.ds.setReal(t,yn.COLNAME_EXPERIMENT_CREATEDATE,null==e.createDate?null:.001*e.createDate.getTime()),this.ds.setReal(t,yn.COLNAME_EXPERIMENT_MODIFYDATE,null==e.modifyDate?null:.001*e.modifyDate.getTime()),this.ds.setString(t,yn.COLNAME_EXPERIMENT_DOI,e.doi),this.ds.setString(t,yn.COLNAME_EXPERIMENT_META,e.meta);for(let n=0;n<e.steps.length;n++){let i=t+n,s=e.steps[n];if(0==n)for(let t=0;t<s.reactants.length;t++){let e=s.reactants[t],n=t+1;this.ds.setMolecule(i,`${yn.COLNAME_REACTANT_MOL}${n}`,e.mol),this.ds.setString(i,`${yn.COLNAME_REACTANT_NAME}${n}`,e.name),this.ds.setString(i,`${yn.COLNAME_REACTANT_STOICH}${n}`,e.stoich),this.ds.setReal(i,`${yn.COLNAME_REACTANT_MASS}${n}`,e.mass),this.ds.setReal(i,`${yn.COLNAME_REACTANT_VOLUME}${n}`,e.volume),this.ds.setReal(i,`${yn.COLNAME_REACTANT_MOLES}${n}`,e.moles),this.ds.setReal(i,`${yn.COLNAME_REACTANT_DENSITY}${n}`,e.density),this.ds.setReal(i,`${yn.COLNAME_REACTANT_CONC}${n}`,e.conc),this.ds.setBoolean(i,`${yn.COLNAME_REACTANT_PRIMARY}${n}`,e.primary),this.ds.setString(i,`${yn.COLNAME_REACTANT_META}${n}`,e.meta)}for(let t=0;t<s.reagents.length;t++){let e=s.reagents[t],n=t+1;this.ds.setMolecule(i,`${yn.COLNAME_REAGENT_MOL}${n}`,e.mol),this.ds.setString(i,`${yn.COLNAME_REAGENT_NAME}${n}`,e.name),this.ds.setReal(i,`${yn.COLNAME_REAGENT_EQUIV}${n}`,e.equiv),this.ds.setReal(i,`${yn.COLNAME_REAGENT_MASS}${n}`,e.mass),this.ds.setReal(i,`${yn.COLNAME_REAGENT_VOLUME}${n}`,e.volume),this.ds.setReal(i,`${yn.COLNAME_REAGENT_MOLES}${n}`,e.moles),this.ds.setReal(i,`${yn.COLNAME_REAGENT_DENSITY}${n}`,e.density),this.ds.setReal(i,`${yn.COLNAME_REAGENT_CONC}${n}`,e.conc),this.ds.setString(i,`${yn.COLNAME_REAGENT_META}${n}`,e.meta)}for(let t=0;t<s.products.length;t++){let e=s.products[t],n=t+1;this.ds.setMolecule(i,`${yn.COLNAME_PRODUCT_MOL}${n}`,e.mol),this.ds.setString(i,`${yn.COLNAME_PRODUCT_NAME}${n}`,e.name),this.ds.setString(i,`${yn.COLNAME_PRODUCT_STOICH}${n}`,e.stoich),this.ds.setReal(i,`${yn.COLNAME_PRODUCT_MASS}${n}`,e.mass),this.ds.setReal(i,`${yn.COLNAME_PRODUCT_VOLUME}${n}`,e.volume),this.ds.setReal(i,`${yn.COLNAME_PRODUCT_MOLES}${n}`,e.moles),this.ds.setReal(i,`${yn.COLNAME_PRODUCT_DENSITY}${n}`,e.density),this.ds.setReal(i,`${yn.COLNAME_PRODUCT_CONC}${n}`,e.conc),this.ds.setReal(i,`${yn.COLNAME_PRODUCT_YIELD}${n}`,e.yield),this.ds.setBoolean(i,`${yn.COLNAME_PRODUCT_WASTE}${n}`,e.waste),this.ds.setString(i,`${yn.COLNAME_PRODUCT_META}${n}`,e.meta)}this.ds.setString(i,yn.COLNAME_STEP_META,s.meta)}for(let n=0;n<e.steps.length;n++){let i=t+n;for(let t=n>0?0:e.steps[n].reactants.length;t<r;t++){let e=t+1;this.ds.setToNull(i,`${yn.COLNAME_REACTANT_MOL}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_NAME}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_STOICH}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_MASS}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_VOLUME}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_MOLES}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_DENSITY}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_CONC}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_PRIMARY}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REACTANT_META}${e}`)}for(let t=e.steps[n].reagents.length;t<l;t++){let e=t+1;this.ds.setToNull(i,`${yn.COLNAME_REAGENT_MOL}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_NAME}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_EQUIV}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_MASS}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_VOLUME}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_MOLES}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_DENSITY}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_CONC}${e}`),this.ds.setToNull(i,`${yn.COLNAME_REAGENT_META}${e}`)}for(let t=e.steps[n].products.length;t<a;t++){let e=t+1;this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_MOL}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_NAME}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_STOICH}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_MASS}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_VOLUME}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_MOLES}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_DENSITY}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_CONC}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_WASTE}${e}`),this.ds.setToNull(i,`${yn.COLNAME_PRODUCT_META}${e}`)}}}plainHeading(){return yn.NAME}rowFirstBlock(t){return this.isFirstStep(t)}rowBlockCount(t){return this.numberOfSteps(t)}initiateNewRow(t){let e=.001*(new Date).getTime();this.ds.setReal(t,yn.COLNAME_EXPERIMENT_CREATEDATE,e)}columnEffectivelyBlank(t){return[yn.COLNAME_EXPERIMENT_CREATEDATE]}isColumnReserved(t){return this.areColumnsReserved([t])[0]}areColumnsReserved(t){let e=n.booleanArray(!1,t.length);for(let n=0;n<t.length;n++){let i=t[n];if(yn.ALL_COLUMN_LITERALS.indexOf(i)>=0)e[n]=!0;else for(let t of yn.ALL_COLUMN_PREFIXES)if(i.startsWith(t)){e[n]=!0;break}}return e}numGraphicRenderings(t){return 1}produceGraphicRendering(t,e,n){let i=new dn(0,0,n.data.pointScale),s=new ln(this.getEntry(t),i,n);s.limitTotalW=50*n.data.pointScale,s.limitTotalH=50*n.data.pointScale,s.includeStoich=!0,s.includeAnnot=!1,s.arrange();let o=new cn;return new un(s,o).draw(),o.normalise(),{name:"Scheme",metavec:o}}}yn.CODE="org.mmi.aspect.Experiment",yn.CODE_RXN="org.mmi.aspect.Reaction",yn.CODE_YLD="org.mmi.aspect.Yield",yn.NAME="Experiment",yn.NAME_RXN="Reaction",yn.NAME_YLD="Yield",yn.COLNAME_EXPERIMENT_TITLE="ExperimentTitle",yn.COLNAME_EXPERIMENT_CREATEDATE="ExperimentCreateDate",yn.COLNAME_EXPERIMENT_MODIFYDATE="ExperimentModifyDate",yn.COLNAME_EXPERIMENT_DOI="ExperimentDOI",yn.COLNAME_EXPERIMENT_META="ExperimentMeta",yn.COLNAME_STEP_META="ExperimentStepMeta",yn.COLNAME_REACTANT_MOL="ReactantMol",yn.COLNAME_REACTANT_NAME="ReactantName",yn.COLNAME_REACTANT_STOICH="ReactantStoich",yn.COLNAME_REACTANT_MASS="ReactantMass",yn.COLNAME_REACTANT_VOLUME="ReactantVolume",yn.COLNAME_REACTANT_MOLES="ReactantMoles",yn.COLNAME_REACTANT_DENSITY="ReactantDensity",yn.COLNAME_REACTANT_CONC="ReactantConc",yn.COLNAME_REACTANT_PRIMARY="ReactantPrimary",yn.COLNAME_REACTANT_META="ReactantMeta",yn.COLNAME_REAGENT_MOL="ReagentMol",yn.COLNAME_REAGENT_NAME="ReagentName",yn.COLNAME_REAGENT_EQUIV="ReagentEquiv",yn.COLNAME_REAGENT_MASS="ReagentMass",yn.COLNAME_REAGENT_VOLUME="ReagentVolume",yn.COLNAME_REAGENT_MOLES="ReagentMoles",yn.COLNAME_REAGENT_DENSITY="ReagentDensity",yn.COLNAME_REAGENT_CONC="ReagentConc",yn.COLNAME_REAGENT_META="ReagentMeta",yn.COLNAME_PRODUCT_MOL="ProductMol",yn.COLNAME_PRODUCT_NAME="ProductName",yn.COLNAME_PRODUCT_STOICH="ProductStoich",yn.COLNAME_PRODUCT_MASS="ProductMass",yn.COLNAME_PRODUCT_VOLUME="ProductVolume",yn.COLNAME_PRODUCT_MOLES="ProductMoles",yn.COLNAME_PRODUCT_DENSITY="ProductDensity",yn.COLNAME_PRODUCT_CONC="ProductConc",yn.COLNAME_PRODUCT_YIELD="ProductYield",yn.COLNAME_PRODUCT_WASTE="ProductWaste",yn.COLNAME_PRODUCT_META="ProductMeta",yn.COLUMN_DESCRIPTIONS={},yn.ALL_COLUMN_LITERALS=[yn.COLNAME_EXPERIMENT_TITLE,yn.COLNAME_EXPERIMENT_CREATEDATE,yn.COLNAME_EXPERIMENT_MODIFYDATE,yn.COLNAME_EXPERIMENT_DOI,yn.COLNAME_EXPERIMENT_META,yn.COLNAME_STEP_META],yn.ALL_COLUMN_PREFIXES=[yn.COLNAME_REACTANT_MOL,yn.COLNAME_REACTANT_NAME,yn.COLNAME_REACTANT_STOICH,yn.COLNAME_REACTANT_MASS,yn.COLNAME_REACTANT_VOLUME,yn.COLNAME_REACTANT_MOLES,yn.COLNAME_REACTANT_DENSITY,yn.COLNAME_REACTANT_CONC,yn.COLNAME_REACTANT_PRIMARY,yn.COLNAME_REACTANT_META,yn.COLNAME_REAGENT_MOL,yn.COLNAME_REAGENT_NAME,yn.COLNAME_REAGENT_EQUIV,yn.COLNAME_REAGENT_MASS,yn.COLNAME_REAGENT_VOLUME,yn.COLNAME_REAGENT_MOLES,yn.COLNAME_REAGENT_DENSITY,yn.COLNAME_REAGENT_CONC,yn.COLNAME_REAGENT_META,yn.COLNAME_PRODUCT_MOL,yn.COLNAME_PRODUCT_NAME,yn.COLNAME_PRODUCT_STOICH,yn.COLNAME_PRODUCT_MASS,yn.COLNAME_PRODUCT_VOLUME,yn.COLNAME_PRODUCT_MOLES,yn.COLNAME_PRODUCT_DENSITY,yn.COLNAME_PRODUCT_CONC,yn.COLNAME_PRODUCT_YIELD,yn.COLNAME_PRODUCT_WASTE,yn.COLNAME_PRODUCT_META],Ce(yn),function(t){t.Structure="structure",t.Name="name",t.Quantity="quantity",t.Bound="bound",t.Error="error",t.Ratio="ratio",t.Units="units",t.Relation="relation",t.Identifier="identifier",t.Link="link",t.Property="property"}(He||(He={}));class wn extends we{static isMixture(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==wn.CODE)return!0;return!1}constructor(t,e){super(wn.CODE,t,e),this.header={attributes:[]},this.setup()}getHeader(){return this.header}setHeader(t){this.header=t;let e=this.formatMetaData(t);for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==wn.CODE)return void this.ds.setExtData(t,e);this.ds.appendExtension(wn.NAME,wn.CODE,e)}setup(){this.parseAndCorrect()}parseAndCorrect(){this.header={attributes:[]};let t=!1;for(let e=0;e<this.ds.numExtensions;e++)if(this.ds.getExtType(e)==wn.CODE){this.header=this.parseMetaData(this.ds.getExtData(e)),t=!0;break}if(!t&&this.allowModify){let t=this.formatMetaData(this.header);this.ds.appendExtension(wn.NAME,wn.CODE,t)}}parseMetaData(t){let e={attributes:[]};for(let n of t.split(/\r?\n/)){let t=n.indexOf("=");if(!(t<0)&&n.startsWith("attr=")){let i=n.substring(t+1).split(",");if(i.length<3)continue;let s=me.skUnescape(i[0]),o=[];"0"!=i[1]&&(o=i[1].split(".").map((t=>parseInt(t))));let r=i[2],a=[];for(let t=3;t<i.length;t++)a.push(me.skUnescape(i[t]));e.attributes.push({column:s,position:o,type:r,info:a})}}return e}formatMetaData(t){let e=[];for(let i of t.attributes){let t=[me.skEscape(i.column)];if(n.isBlank(i.position)?t.push("0"):t.push(i.position.join(".")),t.push(i.type),i.info)for(let e of i.info)t.push(me.skEscape(e));e.push("attr="+t.join(","))}return e.join("\n")}plainHeading(){return De.NAME}isColumnReserved(t){return this.areColumnsReserved([t])[0]}areColumnsReserved(t){let e=new Set;for(let t of this.header.attributes)e.add(t.column);let n=[];for(let i of t)n.push(e.has(i));return n}}wn.CODE="org.mmi.aspect.Mixture",wn.NAME="Mixture",wn.SUFFIX_VALUE="",Ce(wn);class xn extends we{static isSARTable(t){for(let e=0;e<t.numExtensions;e++)if(t.getExtType(e)==xn.CODE)return!0;return!1}constructor(t,e){super(xn.CODE,t,e),this.setup()}getFields(){for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==xn.CODE)return this.parseMetaData(this.ds.getExtData(t));return null}setFields(t){let e=this.formatMetaData(t);for(let t=0;t<this.ds.numExtensions;t++)if(this.ds.getExtType(t)==xn.CODE)return void this.ds.setExtData(t,e);this.ds.appendExtension(xn.NAME,xn.CODE,e)}getEntry(t){let e=this.getFields(),n={construct:this.ds.getMolecule(t,e.construct),locked:!!this.ds.getBoolean(t,e.locked),scaffold:this.ds.getMolecule(t,e.scaffold),substNames:[],substituents:[]};for(let i of e.substituents)n.substNames.push(i),n.substituents.push(this.ds.getMolecule(t,i));return n}setEntry(t,e){let n=this.getFields(),i=this.ds.findColByName(n.construct,"molecule");i>=0&&this.ds.setMolecule(t,i,e.construct);let s=this.ds.findColByName(n.locked,"boolean");s>=0&&this.ds.setBoolean(t,s,e.locked);let o=this.ds.findColByName(n.scaffold,"molecule");o>=0&&this.ds.setMolecule(t,o,e.scaffold);for(let i=0;i<n.substituents.length;i++){let s=this.ds.findColByName(n.substituents[i],"molecule");s>=0&&this.ds.setMolecule(t,s,e.substituents[i])}}createSubstituents(t){if(0==t.length)return;let e=this.getFields(),n=!1;for(let i of t)e.substituents.indexOf(i)<0&&(e.substituents.push(i),this.ds.ensureColumn(i,"molecule",xn.DESCR_SUBSTITUENT),n=!0);n&&this.setFields(e)}static isAttachment(t,e){return 0==t.atomicNumber(e)&&!Qt.hasAbbrev(t,e)&&1==t.atomAdjCount(e)}setup(){this.parseAndCorrect()}parseAndCorrect(){let t={construct:"Molecule",locked:"Molecule_locked",scaffold:"Scaffold",substituents:[],metadata:[]},e=!1;for(let n=0;n<this.ds.numExtensions;n++)if(this.ds.getExtType(n)==xn.CODE){t=this.parseMetaData(this.ds.getExtData(n)),e=!0;break}this.ds.ensureColumn(t.construct,"molecule",xn.DESCR_CONSTRUCT),this.ds.ensureColumn(t.locked,"boolean",xn.DESCR_LOCKED),this.ds.ensureColumn(t.scaffold,"molecule",xn.DESCR_SCAFFOLD);for(let e of t.substituents)this.ds.ensureColumn(e,"molecule",xn.DESCR_SUBSTITUENT);if(!e){let e=this.formatMetaData(t);this.ds.appendExtension(xn.NAME,xn.CODE,e)}}parseMetaData(t){let e={construct:null,locked:null,scaffold:null,substituents:[],metadata:[]};for(let n of t.split(/\r?\n/)){let t=n.indexOf("=");if(t<0)continue;let i=n.substring(0,t),s=n.substring(t+1);if("field"==i){let t=s.split(",");if(t.length>=3){let n=t[0],i=me.skUnescape(t[1]);if("construct"==n){e.construct=i,e.locked=i+"_locked";continue}if("scaffold"==n){e.scaffold=i;continue}if("substituent"==n){e.substituents.push(i);continue}}}e.metadata.push(n)}return e}formatMetaData(t){let e="";e+="field=construct,"+me.skEscape(t.construct)+",\n",e+="field=scaffold,"+me.skEscape(t.scaffold)+",\n";for(let n of t.substituents)e+="field=substituent,"+me.skEscape(n)+",\n";for(let n of t.metadata)e+=n+"\n";return e}plainHeading(){return xn.NAME}isColumnReserved(t){return this.areColumnsReserved([t])[0]}areColumnsReserved(t){let e=this.getFields(),i=new Set;i.add(e.construct),i.add(e.locked),i.add(e.scaffold);for(let t of e.substituents)i.add(t);let s=n.booleanArray(!1,t.length);for(let e=0;e<t.length;e++)s[e]=i.has(t[e]);return s}numGraphicRenderings(t){return 2+this.getFields().substituents.length}produceGraphicRendering(t,e,n){let i=this.getFields(),s=this.ds;if(e==xn.RENDER_CONSTRUCT){let e=s.getMolecule(t,i.construct),o=new cn;if(Qt.notBlank(e)){let t=new sn;for(let n=1;n<=e.numAtoms;n++)e.atomMapNum(n)>0&&(t.colAtom[n]=618095);for(let n=1;n<=e.numBonds;n++){let i=e.atomMapNum(e.bondFrom(n)),s=e.atomMapNum(e.bondTo(n));i>0&&s>0?t.colBond[n]=618095:(i>0||s>0)&&(t.dottedBondCross[n]=6316128)}let i=new dn(0,0,n.data.pointScale),s=new rn(e,i,n,t);s.arrange(),new mn(s,o).draw()}else o.drawText(0,0,"?",15,0);return o.normalise(),{name:i.construct,metavec:o}}if(e==xn.RENDER_SCAFFOLD){let e=s.getMolecule(t,i.scaffold),o=new cn;if(Qt.notBlank(e)){let r=new sn;for(let n=1;n<=e.numAtoms;n++)if(xn.isAttachment(e,n)){let o=!1,a=e.atomElement(n);t:for(let e of i.substituents){let n=s.getMolecule(t,e);if(null!=n)for(let t=1;t<=n.numAtoms;t++)if(n.atomElement(t)==a||"R"==n.atomElement(t)&&a==e){o=!0;break t}}r.colAtom[n]=o?618095:16711680,r.dottedRectOutline[n]=o?8421504:16711680}let a=new dn(0,0,n.data.pointScale),l=new rn(e,a,n,r);l.arrange(),new mn(l,o).draw()}else o.drawText(0,0,"?",15,0);return o.normalise(),{name:i.scaffold,metavec:o}}if(e>=xn.RENDER_SUBSTITUENT&&e<xn.RENDER_SUBSTITUENT+i.substituents.length){let o=e-xn.RENDER_SUBSTITUENT,r=i.substituents[o],a=s.getMolecule(t,r),l=new cn;if(Qt.notBlank(a)){let t=new sn;for(let e=1;e<=a.numAtoms;e++)xn.isAttachment(a,e)&&(t.colAtom[e]=618095,t.dottedRectOutline[e]=8421504);let e=new dn(0,0,n.data.pointScale),i=new rn(a,e,n,t);i.arrange(),new mn(i,l).draw()}else{let e="?",n=s.getMolecule(t,i.scaffold);if(Qt.notBlank(n)){e="n/a";for(let t=1;t<=n.numAtoms;t++)if(n.atomElement(t)==r){e="?";break}if("?"==e)for(let n=0;n<i.substituents.length;n++)if(n!=o){let o=s.getMolecule(t,i.substituents[n]);if(Qt.notBlank(o))for(let t=1;t<=o.numAtoms;t++)if(o.atomElement(t)==r){e="n/a";break}}}l.drawText(0,0,e,15,0)}return l.normalise(),{name:r,metavec:l}}return null}}xn.CODE="org.mmi.aspect.SARTable",xn.NAME="SAR Table",xn.DESCR_CONSTRUCT="Structure of constructed molecule",xn.DESCR_LOCKED="Whether constructed molecule should be rebuilt",xn.DESCR_SCAFFOLD="Decorated core scaffold of molecule",xn.DESCR_SUBSTITUENT="Substituent fragment to be attached to scaffold",xn.RENDER_CONSTRUCT=0,xn.RENDER_SCAFFOLD=1,xn.RENDER_SUBSTITUENT=2,Ce(xn),function(t){t[t.O0=0]="O0",t[t.O01=1]="O01",t[t.O1=2]="O1",t[t.O12=3]="O12",t[t.O2=4]="O2",t[t.O23=5]="O23",t[t.O3=6]="O3",t[t.O3X=7]="O3X"}(Ge||(Ge={})),function(t){t[t.N1X=-3]="N1X",t[t.N1=-2]="N1",t[t.N01=-1]="N01",t[t.Z0=0]="Z0",t[t.P01=1]="P01",t[t.P1=2]="P1",t[t.P1X=3]="P1X"}(Ve||(Ve={}));class Cn{constructor(t){this.mol=t,this.paths=[],t&&this.calculate()}clone(){let t=new Cn(null);return t.mol=this.mol,t.maskBlock=this.maskBlock,t.paths=this.paths.slice(0),t}getBondOrders(){const t=this.mol;let e=[];for(let n=1;n<=t.numBonds;n++)e.push(t.bondOrder(n));for(let t of this.paths){let n=t.numer/t.denom;for(let t=1;t<=5;t++)$(n,t)&&(n=t);for(let i of t.bonds)e[i-1]=n}return e}getBondClasses(){const t=this.mol;let e=[];for(let n=1;n<=t.numBonds;n++){let i=t.bondOrder(n);e.push(0==i?0:1==i?2:2==i?4:3==i?6:7)}for(let t of this.paths){let n=t.numer/t.denom,i=$(n,0)?0:$(n,1)?2:$(n,2)?4:$(n,3)?6:n<1?1:n<2?3:n<3?5:7;for(let n of t.bonds)e[n-1]=i}return e}getChargeClasses(){const t=this.mol;let e=[];for(let n=1;n<=t.numAtoms;n++){let i=t.atomCharge(n);e.push(0==i?0:-1==i?-2:1==i?2:i<-1?-3:3)}for(let n of this.paths){let i=0;for(let e of n.atoms)i+=t.atomCharge(e);i/=n.atoms.length;let s=$(i,0)?0:$(i,-1)?-2:$(i,1)?2:i>-1&&i<0?-1:i>0&&i<1?1:i<-1?-3:3;for(let t of n.atoms)e[t-1]=s}return e}getAggregateCharges(){const t=this.mol;let e=[];for(let n=1;n<=t.numAtoms;n++)e[n-1]=t.atomCharge(n);for(let t of this.paths){let n=0;for(let i of t.atoms)n+=e[i-1];for(let i of t.atoms)e[i-1]=n}return e}toString(){let t="blocking="+JSON.stringify(this.maskBlock)+"; paths="+this.paths.length;for(let e of this.paths)t+=" ["+e.numer+"/"+e.denom+";a="+JSON.stringify(e.atoms)+";b="+JSON.stringify(e.bonds)+"]";return t}calculate(){const t=this.mol,e=t.numAtoms,i=t.numBonds;let s=n.booleanArray(!1,e),o=n.booleanArray(!1,e),r=n.booleanArray(!1,e),a=n.numberArray(0,e);for(let n=0;n<e;n++)a[n]=t.atomHydrogens(n+1);for(let e=1;e<=i;e++){let n=t.bondOrder(e),i=t.bondFrom(e),l=t.bondTo(e);if(1!=n&&(s[i-1]=!0,s[l-1]=!0),n>=2)o[i-1]=!0,o[l-1]=!0;else{let e=Bt.ELEMENT_BLOCKS[t.atomicNumber(i)],n=Bt.ELEMENT_BLOCKS[t.atomicNumber(l)];(e>=3||n>=3)&&(r[i-1]=!0,r[l-1]=!0)}a[i-1]+=n,a[l-1]+=n,t.bondTransient(e).indexOf(Wt.BondAromatic)>=0&&(o[i-1]=!0,o[l-1]=!0)}let l=n.booleanArray(!1,e);for(let n=1;n<=e;n++)if(!o[n-1]){let e=0;for(let i of t.atomAdjList(n))(o[i-1]||r[i-1])&&e++;e>=2&&(l[n-1]=!0)}for(let t=0;t<e;t++)l[t]&&(o[t]=!0);this.maskBlock=n.booleanArray(!1,e);let d=n.booleanArray(!1,e);const p=[Bt.ELEMENT_H,Bt.ELEMENT_B,Bt.ELEMENT_C,Bt.ELEMENT_N,Bt.ELEMENT_O,Bt.ELEMENT_F,Bt.ELEMENT_Al,Bt.ELEMENT_Si,Bt.ELEMENT_P,Bt.ELEMENT_S,Bt.ELEMENT_Cl,Bt.ELEMENT_Ga,Bt.ELEMENT_Ge,Bt.ELEMENT_As,Bt.ELEMENT_Se,Bt.ELEMENT_Br,Bt.ELEMENT_In,Bt.ELEMENT_Sn,Bt.ELEMENT_Sb,Bt.ELEMENT_Te,Bt.ELEMENT_I,Bt.ELEMENT_Tl,Bt.ELEMENT_Pb,Bt.ELEMENT_Bi,Bt.ELEMENT_Po,Bt.ELEMENT_At],h=[Bt.ELEMENT_B,Bt.ELEMENT_Al,Bt.ELEMENT_Si,Bt.ELEMENT_Ga,Bt.ELEMENT_Ge,Bt.ELEMENT_In,Bt.ELEMENT_Sn,Bt.ELEMENT_Tl,Bt.ELEMENT_Pb],c=[Bt.ELEMENT_N,Bt.ELEMENT_O,Bt.ELEMENT_F,Bt.ELEMENT_P,Bt.ELEMENT_S,Bt.ELEMENT_Cl,Bt.ELEMENT_As,Bt.ELEMENT_Se,Bt.ELEMENT_Br,Bt.ELEMENT_Sb,Bt.ELEMENT_Te,Bt.ELEMENT_I,Bt.ELEMENT_Bi,Bt.ELEMENT_Po,Bt.ELEMENT_At];t:for(let n=0;n<e;n++){const e=n+1;if(s[n]||o[n])continue;if(0!=t.atomCharge(e)||0!=t.atomUnpaired(e))continue;const i=t.atomicNumber(e);if(0!=i){if(!(p.indexOf(i)<0)&&a[n]==Bt.ELEMENT_BONDING[i]){if(h.indexOf(i)>=0)for(let n of t.atomAdjList(e))if(c.indexOf(t.atomicNumber(n))>=0)continue t;if(c.indexOf(i)>=0)for(let n of t.atomAdjList(e))if(h.indexOf(t.atomicNumber(n))>=0)continue t;if(d[n]=!0,i==Bt.ELEMENT_C){let i=!1;for(let n of t.atomAdjList(e))p.indexOf(t.atomicNumber(n))<0&&(i=!0);i||(this.maskBlock[n]=!0)}else i==Bt.ELEMENT_H&&(this.maskBlock[n]=!0)}}else this.maskBlock[n]=!0}t:for(let n=0;n<e;n++)if(d[n]&&!this.maskBlock[n]){for(let e of t.atomAdjList(n+1))if(!d[e-1])continue t;this.maskBlock[n]=!0}let m=qt.fromMolecule(t);for(let t=0;t<e;t++)this.maskBlock[t]&&m.isolateNode(t);for(let s of m.calculateComponentGroups()){if(1==s.length)continue;let o=n.idxMask(s,e);n.addTo(s,1);let r={atoms:s,bonds:[],numer:0,denom:0};for(let e=1;e<=i;e++)o[t.bondFrom(e)-1]&&o[t.bondTo(e)-1]&&r.bonds.push(e);let a=0,l=0;for(let e of r.atoms){let n=t.atomHydrogens(e);for(let i of t.atomAdjList(e))o[i-1]||n++;let i=t.atomicNumber(e);a+=Bt.ELEMENT_VALENCE[i]-t.atomCharge(e)-n,l+=Bt.ELEMENT_SHELL[i]-Bt.ELEMENT_VALENCE[i]-n}let d=Math.min(a,l);r.numer=d,r.denom=2*r.bonds.length,this.paths.push(r)}}}class vn{constructor(t){this.meta=t,this.mol=t.mol,this.priority=n.numberArray(0,this.mol.numAtoms),this.chiralTetra=n.numberArray(vn.STEREO_NONE,this.mol.numAtoms),this.cistransBond=n.numberArray(vn.STEREO_NONE,this.mol.numBonds),this.squarePlanar=n.numberArray(vn.STEREO_NONE,this.mol.numAtoms)}calculate(){this.isH=n.booleanArray(!1,this.mol.numAtoms);for(let t=this.mol.numAtoms;t>=1;t--)this.isH[t-1]="H"==this.mol.atomElement(t);this.buildPriority(),this.buildTetraChirality(),this.buildBondCisTrans(),this.buildPlanarCisTrans(),this.buildOctaChirality()}atomPriority(t){return this.priority[t-1]}atomTetraChirality(t){return this.chiralTetra[t-1]}bondSideStereo(t){return this.cistransBond[t-1]}atomPlanarStereo(t){return this.squarePlanar[t-1]}getPriorities(){return this.priority.slice(0)}getAtomTetraChiral(){return this.chiralTetra.slice(0)}getBondSideStereo(){return this.cistransBond.slice(0)}static create(t){let e=new vn(t);return e.calculate(),e}static rubricTetrahedral(t,e){if(t.atomAdjCount(e)<3||t.atomAdjCount(e)+t.atomHydrogens(e)!=4)return null;let i=t.atomAdjBonds(e),s=!1;for(let n=0;n<i.length;n++){let o=t.bondType(i[n]);if(o==ge.BONDTYPE_UNKNOWN)return null;t.bondFrom(i[n])==e&&(o!=ge.BONDTYPE_INCLINED&&o!=ge.BONDTYPE_DECLINED||(s=!0))}if(!s&&!t.is3D())return null;let o=t.atomAdjList(e),r=[0,0,0,0],a=[0,0,0,0],l=[0,0,0,0],d=0,p=0;for(let n=0;n<i.length;n++){const s=t.bondFrom(i[n]),h=t.bondType(i[n]);if(r[n]=t.atomX(o[n])-t.atomX(e),a[n]=t.atomY(o[n])-t.atomY(e),t.is3D()?l[n]=t.atomZ(o[n])-t.atomZ(e):s==e&&(h==ge.BONDTYPE_INCLINED?(l[n]=1,p++):h==ge.BONDTYPE_DECLINED&&(l[n]=-1,p++)),X(r[n],a[n],l[n])<1e-4&&(d++,d>1))return null}if(3==i.length)if(o.push(0),t.is3D()||1!=p){r[3]=-(r[0]+r[1]+r[2]),a[3]=-(a[0]+a[1]+a[2]),l[3]=-(l[0]+l[1]+l[2]);let t=W(r[3],a[3],l[3]);if(t<1e-4)return null;let e=1/Math.sqrt(t);r[3]*=e,a[3]*=e,l[3]*=e}else{let t=Math.atan2(a[0],r[0]),e=Math.atan2(a[1],r[1]),n=Math.atan2(a[2],r[2]),i=1,s=2;st(e,t)>st(n,t)&&(s=1,i=2),r[0]=1.5,a[0]=0,r[1]=-.75,a[i]=1.3,r[2]=-.75,a[s]=-1.3}let h=0,c=0;for(let t=1;t<=6;t++){let e=0,n=0;1==t?(e=1,n=2):2==t?(e=2,n=3):3==t?(e=3,n=1):4==t?(e=2,n=1):5==t?(e=3,n=2):6==t&&(e=1,n=3);let i=a[e]*l[n]-a[n]*l[e]-r[0],s=l[e]*r[n]-l[n]*r[e]-a[0],o=r[e]*a[n]-r[n]*a[e]-l[0];t<=3?h+=i*i+s*s+o*o:c+=i*i+s*s+o*o}return c>h&&n.swap(o,2,3),o}static rubricSquarePlanar(t,e){if(4!=t.atomAdjCount(e))return null;if(!t.is3D()){let n=0,i=0;for(let s of t.atomAdjBonds(e)){let e=t.bondType(s);e==ge.BONDTYPE_INCLINED?n++:e==ge.BONDTYPE_DECLINED&&i++}if(2==n&&2==i);else if(2==n&&0==i);else if(0!=n||2!=i)return null}let i=t.atomAdjList(e),s=Qt.atomVec3(t,e),o=n.sub(Qt.atomVec3(t,i[0]),s),r=n.sub(Qt.atomVec3(t,i[1]),s),a=n.sub(Qt.atomVec3(t,i[2]),s),d=n.sub(Qt.atomVec3(t,i[3]),s);for(let t of[o,r,a,d]){let e=W(t[0],t[1],t[2]);if(e<1e-4)continue;let n=1/Math.sqrt(e);t[0]*=n,t[1]*=n,t[2]*=n}let p=l.dist2(o,r),h=l.dist2(o,a),c=l.dist2(o,d);p>h&&p>=c?(n.swap(i,1,2),[r,a]=[a,r]):c>h&&(n.swap(i,3,2),[a,d]=[d,a]);const m=(t.is3D()?80:45)*tt,u=(t.is3D()?100:135)*tt,f=l.acuteAngle(o,r);if(f<m||f>u)return null;const g=l.acuteAngle(r,a);if(g<m||g>u)return null;const k=l.acuteAngle(a,d);if(k<m||k>u)return null;const y=l.acuteAngle(d,o);return y<m||y>u?null:i}static rubricBipyrimidal(t,e){const i=t.atomAdjCount(e);if(4!=i&&5!=i)return null;let s=0,o=0,r=t.atomAdjList(e),a=t.atomAdjBonds(e);if(!t.is3D()){for(let e=0;e<r.length;e++)if(t.bondType(a[e])==ge.BONDTYPE_INCLINED){if(s>0)return null;s=r[e]}else if(t.bondType(a[e])==ge.BONDTYPE_DECLINED){if(o>0)return null;o=r[e]}if(0==s||0==o)return null;let n=Math.atan2(t.atomY(s)-t.atomY(e),t.atomX(s)-t.atomX(e)),i=Math.atan2(t.atomY(o)-t.atomY(e),t.atomX(o)-t.atomX(e));if(Math.abs(it(n,i))>160*tt)return null}let d=Qt.atomVec3(t,e),p=[[],[],[],[],[]];for(let e=0;e<i;e++){p[e]=n.sub(Qt.atomVec3(t,r[e]),d);const i=l.magnitude(p[e]);if(i<.1)return null;n.mulBy(p[e],1/i),r[e]==s?p[e][2]+=1:r[e]==o&&(p[e][2]-=1)}let h=0,c=0;const m=175*tt;for(let t=0;t<i-1;t++)if(r[t]!=s&&r[t]!=o)for(let e=t+1;e<i;e++)if(r[e]!=s&&r[e]!=o&&l.acuteAngle(p[t],p[e])>m){if(0!=h)return null;h=r[t],c=r[e]}if(t.is3D())for(let t of r)t!=h&&t!=c&&(0==s?s=t:0==o&&(o=t));if(!h||!c)return null;let u=null,f=p[r.indexOf(s)],g=p[r.indexOf(o)],k=p[r.indexOf(h)],y=p[r.indexOf(c)],w=0;if(5==i){for(let t=0;t<i;t++)if(r[t]!=s&&r[t]!=o&&r[t]!=h&&r[t]!=c){w=r[t],u=p[t];break}}else{u=[0,0,0],u=n.sub(u,f),u=n.sub(u,g);const t=l.magnitude(u);if(t<.1)return null;n.mulBy(u,1/t)}let x=n.sub(y,k),C=l.crossProduct(x,u);return l.dist2(C,f)<l.dist2(C,g)?[w,s,o,h,c]:[w,s,o,c,h]}static rubricOctahedral(t,e){const i=t.atomAdjCount(e);if(5!=i&&6!=i)return null;let s=t.atomAdjList(e),o=t.atomAdjBonds(e);if(5==i&&(s.push(0),o.push(0)),!t.is3D()){let e=0;for(let n of o)if(n>0){const i=t.bondType(n);i!=ge.BONDTYPE_INCLINED&&i!=ge.BONDTYPE_DECLINED||e++}if(5==i&&e<1||6==i&&e<2)return null}let r=Qt.atomVec3(t,e),a=[[],[],[],[],[],[]];for(let d=0;d<i;d++){a[d]=Qt.atomVec3(t,s[d]),n.subFromArray(a[d],r);let i=l.magnitude(a[d]);if(i<.1)return null;n.mulBy(a[d],1/i);let p=t.bondType(o[d]);p==ge.BONDTYPE_INCLINED?t.bondFrom(o[d])==e?a[d][2]+=1:a[d][2]-=1:p==ge.BONDTYPE_DECLINED&&(t.bondFrom(o[d])==e?a[d][2]-=1:a[d][2]+=1)}if(5==i){a[5]=[0,0,0];for(let t=0;t<5;t++)n.subFromArray(a[5],a[t]);let t=l.magnitude(a[5]);if(t<.1)return null;n.mulBy(a[5],1/t)}let d=[-1,-1,-1,-1,0,1],p=l.acuteAngle(a[0],a[1]);for(let t=0;t<5;t++)for(let e=0==t?2:t+1;e<6;e++){let n=l.acuteAngle(a[t],a[e]);n>p&&(d[4]=t,d[5]=e,p=n)}let h=n.sub(a[d[5]],a[d[4]]),c=Number.POSITIVE_INFINITY;for(let t=0;t<6;t++)if(t!=d[4]&&t!=d[5]){let e=Math.abs(90*tt-l.acuteAngle(a[t],h));e<c&&(d[0]=t,c=e)}for(let t=1;t<=2;t++){let e=l.crossProduct(h,a[d[t-1]]),n=Number.POSITIVE_INFINITY;for(let i=0;i<6;i++){if(i==d[4]||i==d[5]||i==d[0]||i==d[1])continue;let s=l.acuteAngle(a[i],e);s<n&&(d[t]=i,n=s)}}for(let t=0;t<6;t++)if(d.indexOf(t)<0){d[3]=t;break}let m=[0,0,0,0,0,0];for(let t=0;t<6;t++)m[t]=d[t]<0?0:s[d[t]];return m}static rubricBondSides(t,e){const i=t.bondFrom(e),s=t.bondTo(e),o=t.atomAdjCount(i),r=t.atomAdjCount(s);if(o<2||o>3||r<2||r>3)return null;let a=t.atomAdjList(i),d=t.atomAdjList(s),p=0,h=0,c=0,m=0;for(let t=0;t<a.length;t++)a[t]!=s&&(0==p?p=a[t]:h=a[t]);for(let t=0;t<d.length;t++)d[t]!=i&&(0==c?c=d[t]:m=d[t]);if(p>0&&h>0&&"H"==t.atomElement(p)){let t=p;p=h,h=t}if(c>0&&m>0&&"H"==t.atomElement(c)){let t=c;c=m,m=t}let u=Qt.atomVec3(t,i),f=Qt.atomVec3(t,s),g=n.sub(f,u),k=n.sub(Qt.atomVec3(t,p),u),y=n.sub(Qt.atomVec3(t,c),f);const w=.1*.1;let x=l.crossProduct(k,g);if(l.magnitude2(x)<w)return null;let C=l.crossProduct(y,g);if(l.magnitude2(C)<w)return null;let v=n.neg(x),b=l.dist2(x,C)<l.dist2(v,C),A=b,T=b,M=b,E=null,S=null,N=null,D=null,R=null;if(h>0)if(E=n.sub(Qt.atomVec3(t,h),u),l.magnitude2(E)<w){if("H"!=t.atomElement(h))return null}else{if(N=l.crossProduct(E,g),l.magnitude2(N)<w)return null;R=n.neg(N),A=l.dist2(N,C)>l.dist2(R,C)}if(m>0)if(S=n.sub(Qt.atomVec3(t,m),f),l.magnitude2(S)<w){if("H"!=t.atomElement(m))return null}else{if(D=l.crossProduct(S,g),l.magnitude2(D)<w)return null;T=l.dist2(x,D)>l.dist2(v,D)}return null!=N&&null!=D&&(M=l.dist2(N,D)<l.dist2(R,D)),b&&A&&T&&M?[p,h,c,m]:b||A||T||M?null:[p,h,m,c]}buildTetraChirality(){const t=this.mol,e=t.numAtoms,s=t.numBonds;let o=n.booleanArray(!1,e);for(let e=1;e<=s;e++)t.bondType(e)!=ge.BONDTYPE_INCLINED&&t.bondType(e)!=ge.BONDTYPE_DECLINED||(o[t.bondFrom(e)-1]=!0);t:for(let s=1;s<=e;s++){this.chiralTetra[s-1]=vn.STEREO_NONE;let e=t.atomAdjList(s);if(4!=e.length&&(3!=e.length||1!=t.atomHydrogens(s)))continue;if(3==e.length&&(this.isH[e[0]-1]||this.isH[e[1]-1]||this.isH[e[2]-1]))continue;for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++)if(this.priority[e[t]-1]==this.priority[e[n]-1])continue t;if(!o[s-1]&&!t.is3D()){this.chiralTetra[s-1]=vn.STEREO_UNKNOWN;continue}let r=vn.rubricTetrahedral(t,s);if(null==r)continue;let a=[0==r[0]?0:this.priority[r[0]-1],0==r[1]?0:this.priority[r[1]-1],0==r[2]?0:this.priority[r[2]-1],0==r[3]?0:this.priority[r[3]-1]];a=n.idxSort(a);let l=i.parityIdentity(a);this.chiralTetra[s-1]=1&l?vn.STEREO_NEG:vn.STEREO_POS}}buildBondCisTrans(){const t=this.mol,e=(t.numAtoms,t.numBonds);let i=n.booleanArray(!1,e);for(let e=3;e<=7;e++)for(let n of t.findRingsOfSize(e))for(let e=0;e<n.length;e++)i[t.findBond(n[e],n[e<n.length-1?e+1:0])-1]=!0;t:for(let n=1;n<=e;n++){if(this.cistransBond[n-1]=vn.STEREO_NONE,2!=t.bondOrder(n)||this.meta.isBondAromatic(n)||i[n-1])continue;let e=t.bondFrom(n),s=t.bondTo(n),o=t.atomAdjList(e),r=t.atomAdjList(s);if(o.length<=1||r.length<=1||o.length>3||r.length>3)continue;if(2==o.length&&(this.isH[o[0]-1]||this.isH[o[1]-1]))continue;if(2==r.length&&(this.isH[r[0]-1]||this.isH[r[1]-1]))continue;for(let t=0;t<o.length-1;t++)if(o[t]!=e)for(let n=t+1;n<o.length;n++)if(o[n]!=e&&this.priority[o[t]-1]==this.priority[o[n]-1])continue t;for(let t=0;t<r.length-1;t++)if(r[t]!=s)for(let e=t+1;e<r.length;e++)if(r[e]!=s&&this.priority[r[t]-1]==this.priority[r[e]-1])continue t;if(t.bondType(n)==ge.BONDTYPE_UNKNOWN){this.cistransBond[n-1]=vn.STEREO_UNKNOWN;continue}let a=vn.rubricBondSides(t,n);if(null==a)continue;let l=0==a[0]?0:this.priority[a[0]-1],d=0==a[1]?0:this.priority[a[1]-1],p=0==a[2]?0:this.priority[a[2]-1],h=0==a[3]?0:this.priority[a[3]-1];this.cistransBond[n-1]=l<d==p<h?vn.STEREO_POS:vn.STEREO_NEG}}buildPlanarCisTrans(){const t=this.mol,e=t.numAtoms;t.numBonds;t:for(let n=1;n<=e;n++){if(this.squarePlanar[n-1]=vn.STEREO_NONE,4!=t.atomAdjCount(n))continue;if(Bt.ELEMENT_BLOCKS[t.atomicNumber(n)]<3)continue;let e=t.atomAdjList(n);for(let t=0;t<e.length;t++){let n=0;for(let i=0;i<e.length;i++)this.priority[e[t]-1]==this.priority[e[i]-1]&&n++;if(n>=3)continue t}let s=vn.rubricSquarePlanar(t,n);if(null==s)continue;let o=[0==s[0]?0:this.priority[s[0]-1],0==s[1]?0:this.priority[s[1]-1],0==s[2]?0:this.priority[s[2]-1],0==s[3]?0:this.priority[s[3]-1]],r=i.parityOrder(o);this.squarePlanar[n-1]=1&r?vn.STEREO_NEG:vn.STEREO_POS}}buildOctaChirality(){}buildPriority(){const t=this.mol,e=t.numAtoms,i=t.numBonds;let s=[];for(let i=0;i<e;i++)s.push(n.numberArray(-1,t.atomHydrogens(i+1)));for(let e=1;e<=i;e++){let n=t.bondFrom(e)-1,i=t.bondTo(e)-1,o=t.bondOrder(e);if(this.meta.isBondAromatic(e)&&(o=2),n!=i)for(let t=0;t<o;t++)s[n].push(i),s[i].push(n)}this.priority=n.numberArray(0,e);let o=!1;for(let n=0;n<e;n++)this.priority[n]=t.atomicNumber(n+1),1==this.priority[n]&&(o=!0);let r=[];for(let t=0;t<e;t++)r.push([]);for(;;){for(let t=0;t<e;t++){let e=s[t],i=[];for(let t=0;t<e.length;t++)i.push(e[t]<0?1:this.priority[e[t]]);n.sort(i),r[t]=i}let t=this.sortAndGroup(this.priority),i=o?0:1,a=!1;for(let e=0;e<t.length;e++){let n=t[e];for(let t=0;t<n.length-1;){const e=n[t],i=n[t+1];let s=0,o=Math.max(r[e].length,r[i].length);for(let t=0;t<o;t++){let n=t<r[e].length?r[e][t]:0,o=t<r[i].length?r[i][t]:0;if(n<o){s=-1;break}if(n>o){s=1;break}}s>0?(n[t]=i,n[t+1]=e,t>0&&t--):t++}for(let t=0;t<n.length;t++){if(0==t)i++;else if(r[n[t]].length!=r[n[t-1]].length)i++,a=!0;else for(let e=0;e<r[n[t]].length;e++)if(r[n[t]][e]!=r[n[t-1]][e]){i++,a=!0;break}this.priority[n[t]]=i}}if(!a)break}}sortAndGroup(t){let e=new Set;for(let n of t)e.add(n);let i=Array.from(e);n.sort(i);let s=[];for(let t=0;t<i.length;t++)s.push([]);for(let e=0;e<t.length;e++)s[i.indexOf(t[e])].push(e);return s}}vn.STEREO_NONE=0,vn.STEREO_POS=1,vn.STEREO_NEG=2,vn.STEREO_UNKNOWN=3,vn.STEREO_BROKEN=4,vn.RUBRIC_EQUIV_TETRA=[[0,1,2,3],[0,2,3,1],[0,3,1,2],[1,0,3,2],[1,2,0,3],[1,3,2,0],[2,0,1,3],[2,1,3,0],[2,3,0,1],[3,0,2,1],[3,1,0,2],[3,2,1,0]],vn.RUBRIC_EQUIV_SIDES=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]],vn.RUBRIC_EQUIV_SQUARE=[[0,1,2,3],[0,3,2,1],[1,2,3,0],[1,0,3,2],[2,1,0,3],[2,3,0,1],[3,2,1,0],[3,0,1,2]],vn.RUBRIC_EQUIV_BIPY=[[0,1,2,3,4],[1,2,0,3,4],[2,0,1,3,4],[0,2,1,4,3],[1,0,2,4,3],[2,1,0,4,3]],vn.RUBRIC_EQUIV_OCTA=[[0,1,2,3,4,5],[0,3,2,1,5,4],[0,4,2,5,3,1],[0,5,2,4,1,3],[1,0,3,2,5,4],[1,2,3,0,4,5],[1,4,3,5,0,2],[1,5,3,4,2,0],[2,1,0,3,5,4],[2,3,0,1,4,5],[2,4,0,5,1,3],[2,5,0,4,3,1],[3,0,1,2,4,5],[3,2,1,0,5,4],[3,4,1,5,2,0],[3,5,1,4,0,2],[4,0,5,2,1,3],[4,1,5,3,2,0],[4,2,5,0,3,1],[4,3,5,1,0,2],[5,0,4,2,3,1],[5,1,4,3,0,2],[5,2,4,0,1,3],[5,3,4,1,2,0]];class bn{constructor(t){this.mol=t,this.atomArom=null,this.bondArom=null,this.rubricTetra=null,this.rubricSquare=null,this.rubricBipy=null,this.rubricOcta=null,this.rubricSides=null,this.hash=null,this.heavyHash=null,this.uniqueElements=null,this.dots=null,this.piAtom=null}calculateStrictAromaticity(){let t=this.mol;this.atomArom=n.booleanArray(!1,t.numAtoms),this.bondArom=n.booleanArray(!1,t.numBonds);let e=t.findRingsOfSize(6);const i=e.length;if(0==i)return;this.ensurePiAtoms();let s=n.booleanArray(!1,i);for(let n=0;n<i;n++)for(let i=0;i<e[n].length;i++){let o=e[n][i];if(!this.piAtom[o-1]){s[n]=!0;break}let r=t.findBond(o,e[n][i==e[n].length-1?0:i+1]),a=t.bondOrder(r);if(1!=a&&2!=a){s[n]=!0;break}}for(;;){let n=!1;for(let o=0;o<i;o++)if(!s[o]){let i=!0,r=!0;for(let n=0;n<e[o].length;n++){let s=t.findBond(e[o][n],e[o][n==e[o].length-1?0:n+1]);if(this.bondArom[s-1])continue;let a=t.bondOrder(s);i=i&&a==2-(1&n),r=r&&a==1+(1&n)}if(!i&&!r)continue;for(let n=0;n<e[o].length;n++){let i=t.findBond(e[o][n],e[o][n==e[o].length-1?0:n+1]);this.bondArom[i-1]=!0}s[o]=!0,n=!0}if(!n)break}for(let e=0;e<this.bondArom.length;e++)this.bondArom[e]&&(this.atomArom[t.bondFrom(e+1)-1]=!0,this.atomArom[t.bondTo(e+1)-1]=!0)}calculateRelaxedAromaticity(){let t=this.mol;this.atomArom=n.booleanArray(!1,t.numAtoms),this.bondArom=n.booleanArray(!1,t.numBonds),this.ensurePiAtoms();const e=t.numAtoms,i=t.numBonds;let s=n.numberArray(0,e),o=n.booleanArray(!1,e);for(let n=1;n<=e;n++){let e=t.atomicNumber(n);s[n-1]=(2==Bt.ELEMENT_BLOCKS[e]?Bt.ELEMENT_VALENCE[e]:0)-t.atomCharge(n)-t.atomHydrogens(n)-t.atomUnpaired(n)}for(let e=1;e<=i;e++){const n=t.bondFrom(e),i=t.bondTo(e),r=t.bondOrder(e);if(s[n-1]-=r,s[i-1]-=r,2==r){const e=t.atomRingBlock(n),s=t.atomRingBlock(i);e>0&&e!=s&&(o[n-1]=!0),s>0&&s!=e&&(o[i-1]=!0)}}let r=[];for(let e=3;e<=7;e++)for(let n of t.findRingsOfSize(e)){let i=!0;for(let r=0;r<e;r++){const a=n[r];if(!this.piAtom[a-1]&&s[a-1]<2&&!o[a-1]){i=!1;break}let l=t.findBond(a,n[r<e-1?r+1:0]),d=t.bondOrder(l);if(1!=d&&2!=d){i=!1;break}}i&&r.push(n)}for(;r.length>0;){let e=!1;for(let i=0;i<r.length;i++){let o=r[i],a=[0];for(let e=0;e<o.length;e++){const i=o[e],r=t.findBond(i,o[e<o.length-1?e+1:0]),l=t.findBond(i,o[e>0?e-1:o.length-1]);if(this.bondArom[r-1])for(let t=a.length-1;t>=0;t--){const e=a[t]+2;a.indexOf(e)<0&&(a=n.append(a,e))}else(2==t.bondOrder(r)||s[i-1]>=2&&1==t.bondOrder(r)&&1==t.bondOrder(l))&&n.addTo(a,2)}let l=!1;for(let t of a){if(2==t&&3==o.length){l=!0;break}if(6==t){l=!0;break}}if(l){for(let e=0;e<o.length;e++){let n=o[e],i=t.findBond(n,o[e<o.length-1?e+1:0]);this.atomArom[n-1]=!0,this.bondArom[i-1]=!0}r.splice(i,1),i--,e=!0}}if(!e)break}}calculateStereoRubric(){const t=this.mol,e=t.numAtoms,n=t.numBonds;this.rubricTetra=new Array(e),this.rubricSquare=new Array(e),this.rubricBipy=new Array(e),this.rubricOcta=new Array(e),this.rubricSides=new Array(n);for(let n=1;n<=e;n++){let e=Bt.ELEMENT_BLOCKS[t.atomicNumber(n)],i=t.atomAdjCount(n),s=t.atomHydrogens(n),o=0,r=0;for(let e of t.atomAdjBonds(n))t.bondType(e)==ge.BONDTYPE_INCLINED&&t.bondFrom(e)==n?o++:t.bondType(e)==ge.BONDTYPE_DECLINED&&t.bondFrom(e)==n&&r++;(2==e&&(3==i&&1==s||4==i&&0==s)||e>=3&&4==i&&1==o&&1==r)&&(this.rubricTetra[n-1]=vn.rubricTetrahedral(t,n)),e>=3&&4==i&&0==s&&(this.rubricSquare[n-1]=vn.rubricSquarePlanar(t,n)),e>=3&&(4==i||5==i)&&0==s&&(this.rubricBipy[n-1]=vn.rubricBipyrimidal(t,n)),(e>=3&&(5==i||6==i)&&0==s||2==e&&6==i&&0==s)&&(this.rubricOcta[n-1]=vn.rubricOctahedral(t,n))}for(let e=1;e<=t.numBonds;e++){if(2!=t.bondOrder(e)||t.bondType(e)==ge.BONDTYPE_UNKNOWN||this.isBondAromatic(e))continue;let n=t.bondFrom(e),i=t.bondTo(e),s=Bt.ELEMENT_BLOCKS[t.atomicNumber(n)],o=Bt.ELEMENT_BLOCKS[t.atomicNumber(i)],r=t.atomAdjCount(n),a=t.atomHydrogens(n),l=t.atomAdjCount(i),d=t.atomHydrogens(i);2==s&&2==o&&r+a==3&&a<=1&&l+d==3&&d<=1&&(this.rubricSides[e-1]=vn.rubricBondSides(t,e))}}removeHydrogens(){let t=this.mol,e=t.numAtoms,i=t.numBonds,s=n.booleanArray(!0,e),o=n.booleanArray(!0,i);for(let n=1;n<=e;n++)Qt.boringHydrogen(t,n)&&(s[n-1]=!1,o[t.atomAdjBonds(n)[0]-1]=!1);if(!n.allTrue(s)&&(t=Qt.subgraphMask(t,s),this.atomArom&&(this.atomArom=n.maskGet(this.atomArom,s)),this.bondArom&&(this.bondArom=n.maskGet(this.bondArom,o)),this.rubricTetra||this.rubricSquare||this.rubricBipy||this.rubricOcta||this.rubricSides)){this.rubricTetra&&(this.rubricTetra=n.maskGet(this.rubricTetra,s)),this.rubricSquare&&(this.rubricSquare=n.maskGet(this.rubricSquare,s)),this.rubricBipy&&(this.rubricBipy=n.maskGet(this.rubricBipy,s)),this.rubricOcta&&(this.rubricOcta=n.maskGet(this.rubricOcta,s)),this.rubricSides&&(this.rubricSides=n.maskGet(this.rubricSides,o));let t=n.prepend(n.add(n.maskMap(s),1),0);for(let e=0;e<n.len(this.rubricTetra);e++)this.rubricTetra[e]&&(this.rubricTetra[e]=n.idxGet(t,this.rubricTetra[e]));for(let e=0;e<n.len(this.rubricSquare);e++)this.rubricSquare[e]&&(this.rubricSquare[e]=n.idxGet(t,this.rubricSquare[e]));for(let e=0;e<n.len(this.rubricBipy);e++)this.rubricBipy[e]&&(this.rubricBipy[e]=n.idxGet(t,this.rubricBipy[e]));for(let e=0;e<n.len(this.rubricOcta);e++)this.rubricOcta[e]&&(this.rubricOcta[e]=n.idxGet(t,this.rubricOcta[e]));for(let e=0;e<n.len(this.rubricSides);e++)this.rubricSides[e]&&(this.rubricSides[e]=n.idxGet(t,this.rubricSides[e]))}}calculateSkeletonHash(){if(null==bn.skeletonHash)throw"Skeleton hash not available.";this.hash=bn.skeletonHash(this.mol)}calculateHeavyHash(){let t=!1;for(let e=1;e<=this.mol.numAtoms;e++)if("H"==this.mol.atomElement(e)){t=!0;break}if(!t)return void(this.heavyHash=this.getSkeletonHash());let e=this.mol.clone();for(let t=e.numAtoms;t>=1;t--)"H"==e.atomElement(t)&&e.deleteAtomAndBonds(t);this.heavyHash=bn.skeletonHash(e)}isAtomAromatic(t){return null!=this.atomArom&&this.atomArom[t-1]}isBondAromatic(t){return null!=this.bondArom&&this.bondArom[t-1]}bondOrderArom(t){return null!=this.bondArom&&this.bondArom[t-1]?-1:this.mol.bondOrder(t)}getAtomAromaticity(){return null==this.atomArom?null:this.atomArom.slice(0)}getBondAromaticity(){return null==this.bondArom?null:this.bondArom.slice(0)}getSkeletonHash(){return null==this.hash&&this.calculateSkeletonHash(),this.hash}getHeavyHash(){return null==this.heavyHash&&this.calculateHeavyHash(),this.heavyHash}getDotPath(){return null==this.dots&&(this.dots=new Cn(this.mol)),this.dots}getUniqueElements(){if(null==this.uniqueElements){this.uniqueElements=[];for(let t=1;t<=this.mol.numAtoms;t++){let e=this.mol.atomElement(t);this.uniqueElements.indexOf(e)<0&&this.uniqueElements.push(e)}}return this.uniqueElements}equivalentTo(t,e=1e3){if(null==bn.isomorphMatch)throw"Isomorph search unavailable.";if(this.mol.numAtoms!=t.mol.numAtoms||this.mol.numBonds!=t.mol.numBonds)return!1;if(null==this.hash&&this.calculateSkeletonHash(),null==t.hash&&t.calculateSkeletonHash(),this.hash!=t.hash)return!1;if(0==this.mol.compareTo(t.mol))return!0;let n=this.getUniqueElements(),i=t.getUniqueElements();for(let t=0;t<n.length;t++)if(!i.includes(n[t]))return!1;return bn.isomorphMatch(this,t,e)}static createRubric(t){if(null==t)return null;let e=new bn(t);return e.calculateStereoRubric(),e}static createStrict(t){if(null==t)return null;let e=new bn(t);return e.calculateStrictAromaticity(),e}static createStrictRubric(t){if(null==t)return null;let e=new bn(t);return e.calculateStrictAromaticity(),e.calculateStereoRubric(),e}static createRelaxed(t){if(null==t)return null;let e=new bn(t);return e.calculateRelaxedAromaticity(),e}static createRelaxedRubric(t){if(null==t)return null;let e=new bn(t);return e.calculateRelaxedAromaticity(),e.calculateStereoRubric(),e}ensurePiAtoms(){if(null==this.piAtom){this.piAtom=n.booleanArray(!1,this.mol.numAtoms);for(let t=1;t<=this.mol.numBonds;t++)2==this.mol.bondOrder(t)&&(this.piAtom[this.mol.bondFrom(t)-1]=!0,this.piAtom[this.mol.bondTo(t)-1]=!0)}}}bn.skeletonHash=null,bn.isomorphMatch=null;let An=[];const Tn=4294967295;function Mn(){return Tn}function En(t,e){return An[255&(t^e)]^t>>>8}function Sn(t){return t^Tn}class Nn{constructor(t,e){this.meta=t,this.kind=e,this.hookApplyNewFP=null,this.hookConsiderNewFP=null,this.identity=[],this.resolvedChiral=[],this.atomGroup=[],this.fplist=[],this.amask=[],this.atomAdj=[],this.bondAdj=[],function(){if(!(An.length>0))for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;An.push(e)}}()}calculate(){let t=this.meta.mol,e=t.numAtoms;this.identity=n.numberArray(0,e),this.resolvedChiral=n.booleanArray(!1,e);for(let t=0;t<e;t++)this.atomGroup.push([]);this.amask=n.booleanArray(!1,e);for(let n=0;n<e;n++)this.amask[n]=t.atomicNumber(n+1)>=2&&!Qt.hasAbbrev(t,n+1),this.atomAdj.push([]),this.bondAdj.push([]);for(let n=0;n<e;n++)if(this.amask[n]){this.atomAdj[n]=t.atomAdjList(n+1),this.bondAdj[n]=t.atomAdjBonds(n+1);for(let t=this.atomAdj[n].length-1;t>=0;t--)this.amask[this.atomAdj[n][t]-1]||(this.atomAdj[n].splice(t,1),this.bondAdj[n].splice(t,1))}for(let t=0;t<e;t++)this.amask[t]&&(this.identity[t]=this.initialIdentityECFP(t+1),this.atomGroup[t]=[t+1],this.applyNewFP({hashCode:this.identity[t],iteration:0,atoms:this.atomGroup[t],centralAtom:t+1}));let i=this.kind;for(let t=1;t<=i;t++){let i=n.numberArray(0,e);for(let n=0;n<e;n++)this.amask[n]&&(i[n]=this.circularIterate(t,n+1));this.identity=i;for(let n=0;n<e;n++)this.amask[n]&&(this.atomGroup[n]=this.growAtoms(this.atomGroup[n]),this.considerNewFP({hashCode:this.identity[n],iteration:t,atoms:this.atomGroup[n],centralAtom:n+1}))}}static create(t,e){t instanceof ge&&(t=bn.createStrictRubric(t));let n=new Nn(t,e);return n.calculate(),n}getMolecule(){return this.meta.mol}get numFP(){return this.fplist.length}getFP(t){return this.fplist[t]}getFingerprints(){return this.fplist.slice(0)}getUniqueHashes(){let t=new Set;for(let e of this.fplist)t.add(e.hashCode);return n.sorted(Array.from(t))}getFoldedHashes(t){let e=t-1,i=new Set;for(let t of this.fplist)i.add(t.hashCode&e);return n.sorted(Array.from(i))}static tanimoto(t,e){let n=0,i=0,s=t.length,o=e.length;if(0==s&&0==o)return 0;let r=0,a=0;for(;r<s||a<o;){if(r==s){i+=o-a;break}if(a==o){i+=s-r;break}let l=t[r],d=e[a];l==d?(n+=1,r+=1,a+=1):l<d?r+=1:a+=1,i+=1}return n/i}initialIdentityECFP(t){const e=this.meta.mol;let n=e.atomAdjList(t),i=0,s=e.atomHydrogens(t);for(let t of n)"H"==e.atomElement(t)?s++:i++;let o=e.atomicNumber(t),r=Math.max(0,Bt.ELEMENT_BONDING[o]-s),a=e.atomCharge(t),l=e.atomRingBlock(t)>0?1:0,d=Mn();return d=En(d,i<<4|r),d=En(d,o),d=En(d,a+128),d=En(d,s<<4|l),Sn(d)}circularIterate(t,e){let s=this.atomAdj[e-1],o=this.bondAdj[e-1],r=n.numberArray(0,2+2*s.length);r[0]=t,r[1]=this.identity[e-1];for(let t=0;t<s.length;t++)r[2*t+2]=this.meta.isBondAromatic(o[t])?15:this.meta.mol.bondOrder(o[t]),r[2*t+3]=this.identity[s[t]-1];let a=0;for(;a<s.length-1;){let t=2+2*a;r[t]>r[t+2]||r[t]==r[t+2]&&r[t+1]>r[t+3]?(n.swap(r,t,t+2),n.swap(r,t+1,t+3),a>0&&a--):a++}let l=Mn();for(let t=0;t<r.length;t+=2){l=En(l,r[t]);let e=r[t+1];l=En(l,e>>24),l=En(l,e>>16&255),l=En(l,e>>8&255),l=En(l,255&e)}if(!this.resolvedChiral[e-1]&&n.len(this.meta.rubricTetra)>0&&null!=this.meta.rubricTetra[e-1]){let t=this.meta.rubricTetra[e-1],n=[0==t[0]?0:this.identity[t[0]-1],0==t[1]?0:this.identity[t[1]-1],0==t[2]?0:this.identity[t[2]-1],0==t[3]?0:this.identity[t[3]-1]];n[0]!=n[1]&&n[0]!=n[2]&&n[0]!=n[3]&&n[1]!=n[2]&&n[1]!=n[3]&&n[2]!=n[3]&&(l=En(l,i.parityOrder(n)+1),this.resolvedChiral[e-1]=!0)}return Sn(l)}growAtoms(t){let e=n.booleanArray(!1,this.meta.mol.numAtoms);for(let n=0;n<t.length;n++){e[t[n]-1]=!0;for(let i of this.atomAdj[t[n]-1])e[i-1]=!0}return n.add(n.maskIdx(e),1)}applyNewFP(t){this.hookConsiderNewFP&&this.hookConsiderNewFP(t),this.hookApplyNewFP&&this.hookApplyNewFP(t),this.fplist.push(t)}considerNewFP(t){this.hookConsiderNewFP&&this.hookConsiderNewFP(t);let e=-1,i=null;for(let s=0;s<this.fplist.length;s++){let o=this.fplist[s];if(n.equals(o.atoms,t.atoms)){i=o,e=s;break}}e<0?this.fplist.push(t):i.iteration<t.iteration||i.hashCode<t.hashCode||(this.fplist[e]=t,this.hookApplyNewFP&&this.hookApplyNewFP(t))}}Nn.CLASS_ECFP0=0,Nn.CLASS_ECFP2=1,Nn.CLASS_ECFP4=2,Nn.CLASS_ECFP6=3;class Dn{constructor(t,e){this.classType=t,this.folding=e,this.numActive=0,this.inHash={},this.training=[],this.activity=[],this.contribs={},this.lowThresh=0,this.highThresh=0,this.range=0,this.invRange=0,this.estimates=null,this.rocX=null,this.rocY=null,this.rocType=null,this.rocAUC=Number.NaN,this.trainingSize=0,this.trainingActives=0,this.atomicSlopeA=Number.NaN,this.atomicInterceptB=Number.NaN,this.truthTP=0,this.truthFP=0,this.truthTN=0,this.truthFN=0,this.precision=Number.NaN,this.recall=Number.NaN,this.specificity=Number.NaN,this.statF1=Number.NaN,this.statKappa=Number.NaN,this.statMCC=Number.NaN,this.noteTitle=null,this.noteOrigin=null,this.noteField=null,this.noteComments=null,null==this.folding&&(this.folding=0)}addMolecule(t,e,n){if(Qt.isBlank(t)&&null==n)throw"Molecule cannot be blank or null.";if(null==n){let e=bn.createStrictRubric(t),i=new Nn(e,this.classType);i.calculate(),n=0==this.folding?i.getUniqueHashes():i.getFoldedHashes(this.folding)}e&&this.numActive++,this.training.push(n),this.activity.push(e);for(let t of n){let n=this.inHash[t];null==n&&(n=[0,0]),e&&n[0]++,n[1]++,this.inHash[t]=n}}build(){this.trainingSize=this.training.length,this.trainingActives=this.numActive,this.contribs=[];const t=1/this.training.length,e=this.numActive*t;for(let t in this.inHash){let n=parseInt(t);const i=this.inHash[n],s=(i[0]+1)/(i[1]*e+1),o=Math.log(s);this.contribs[n]=o}this.lowThresh=Number.POSITIVE_INFINITY,this.highThresh=Number.NEGATIVE_INFINITY;for(let t of this.training){let e=0;for(let n of t)e+=this.contribs[n];this.lowThresh=Math.min(this.lowThresh,e),this.highThresh=Math.max(this.highThresh,e)}this.range=this.highThresh-this.lowThresh,this.invRange=this.range>0?1/this.range:0}predictMolecule(t){if(Qt.isBlank(t))throw"Molecule cannot be blank or null.";let e=bn.createStrictRubric(t),n=new Nn(e,this.classType);n.calculate();let i=0==this.folding?n.getUniqueHashes():n.getFoldedHashes(this.folding);return this.predictFP(i)}predictFP(t){let e=0;for(let n of t){let t=this.contribs[n];null!=t&&(e+=t)}return e}scalePredictor(t){return 0==this.range?t>=this.highThresh?1:0:(t-this.lowThresh)*this.invRange}scaleArcTan(t){const e=1/Math.PI;return Math.atan(2*t-1)*e+.5}calculateOverlap(t){if(Qt.isBlank(t))throw"Molecule cannot be blank or null.";let e=bn.createStrictRubric(t),n=new Nn(e,this.classType);n.calculate();let i=0==this.folding?n.getUniqueHashes():n.getFoldedHashes(this.folding);return this.calculateOverlapFP(i)}calculateOverlapFP(t){if(0==t.length)return 0;let e=0;for(let n of t)null!=this.contribs[n]&&e++;return 1==t.length?e:e/t.length}calculateAtomPredictors(t){const e=t.numAtoms;let i=n.numberArray(0,e),s=new Set,o=this.determineCoverage(t,s);for(let t in o){let s=this.contribs[t];if(null==s)continue;let r=o[t],a=1/n.maskCount(r);for(let t=0;t<e;t++)r[t]&&(i[t]+=s*a)}if(!isNaN(this.atomicSlopeA)){for(let t=0;t<e;t++)i[t]=this.atomicSlopeA*i[t]+this.atomicInterceptB;return i}let r=0;for(let t of s){let e=this.contribs[t];null!=e&&(r+=e)}const a=1/e;n.addTo(i,-n.sum(i)*a);let l=0;for(let t of i)l+=t*t;l=Math.sqrt(l*a),l>.001&&n.mulBy(i,.25/l);let d=2*(this.scalePredictor(r)-.5);return d<-1?d=-1:d>1&&(d=1),n.addTo(i,d),i}validateLeaveOneOut(){const t=this.training.length;this.estimates=[];for(let e=0;e<t;e++)this.estimates.push(this.singleLeaveOneOut(e));this.calculateROC(),this.calculateTruth(),this.rocType="leave-one-out"}validateFiveFold(){this.rocType="five-fold",this.validateNfold(5)}validateThreeFold(){this.rocType="three-fold",this.validateNfold(3)}clearTraining(){this.training=[],this.activity=[]}serialise(){let t=[],e=this.classType==Nn.CLASS_ECFP0?"ECFP0":this.classType==Nn.CLASS_ECFP2?"ECFP2":this.classType==Nn.CLASS_ECFP4?"ECFP4":this.classType==Nn.CLASS_ECFP6?"ECFP6":"?";t.push("Bayesian!("+e+","+this.folding+","+this.lowThresh+","+this.highThresh+")");let i=[];for(let t in this.contribs)i.push(parseInt(t));n.sort(i);for(let e of i){const n=this.contribs[e];t.push(e+"="+n)}if(t.push("training:size="+this.trainingSize),t.push("training:actives="+this.trainingActives),Number.isNaN(this.rocAUC)||t.push("roc:auc="+this.rocAUC),null!=this.rocType&&t.push("roc:type="+this.rocType),null!=this.rocX&&null!=this.rocY){let e="roc:x=";for(let t=0;t<this.rocX.length;t++)e+=(0==t?"":",")+this.rocX[t];t.push(e);let n="roc:y=";for(let t=0;t<this.rocY.length;t++)n+=(0==t?"":",")+this.rocY[t];t.push(n)}if((this.truthTP>0||this.truthFP>0||this.truthTN>0||this.truthFP>0)&&(t.push("truth:TP="+this.truthTP),t.push("truth:FP="+this.truthFP),t.push("truth:TN="+this.truthTN),t.push("truth:FN="+this.truthFN),t.push("truth:precision="+this.precision),t.push("truth:recall="+this.recall),t.push("truth:specificity="+this.specificity),t.push("truth:F1="+this.statF1),t.push("truth:kappa="+this.statKappa),t.push("truth:MCC="+this.statMCC)),isNaN(this.atomicSlopeA)||isNaN(this.atomicInterceptB)||(t.push("atomic:slope="+this.atomicSlopeA),t.push("atomic:intercept="+this.atomicInterceptB)),this.noteTitle&&t.push("note:title="+this.noteTitle),this.noteOrigin&&t.push("note:origin="+this.noteOrigin),this.noteField&&t.push("note:field="+this.noteField),this.noteComments)for(let e of this.noteComments)t.push("note:comment="+e);return t.push("!End"),t.join("\n")}static deserialise(t){let e=t.split("\n"),n=0;function i(){return n>=e.length?null:e[n++].trim()}let s=i();if(null==s||!s.startsWith("Bayesian!(")||!s.endsWith(")"))throw"Not a serialised Bayesian model.";let o=s.substring(10,s.length-1).split(",");if(o.length<4)throw"Invalid header content";let r="ECFP0"==o[0]?Nn.CLASS_ECFP0:"ECFP2"==o[0]?Nn.CLASS_ECFP2:"ECFP4"==o[0]?Nn.CLASS_ECFP4:"ECFP6"==o[0]?Nn.CLASS_ECFP6:0;if(0==r)throw"Unknown fingerprint type: "+o[0];let a=parseInt(o[1]);if(a>0)for(let t=a;t>0;t>>=1)if(!(1&~t)&&1!=t){a=-1;break}if(a<0)throw"Fingerprint folding "+o[1]+" invalid: must be 0 or power of 2.";let l=new Dn(r,a);l.lowThresh=parseFloat(o[2]),l.highThresh=parseFloat(o[3]),l.range=l.highThresh-l.lowThresh,l.invRange=l.range>0?1/l.range:0;const d=new RegExp("^(-?\\d+)=([\\d\\.Ee-]+)");for(;;){if(s=i(),null==s)throw"Missing correct terminator line.";if("!End"==s)break;let t=d.exec(s);if(null!=t){let e=parseInt(t[1]),n=parseFloat(t[2]);l.contribs[e]=n}else if(s.startsWith("training:size="))l.trainingSize=parseInt(s.substring(14));else if(s.startsWith("training:actives="))l.trainingActives=parseInt(s.substring(17));else if(s.startsWith("roc:auc="))l.rocAUC=parseFloat(s.substring(8));else if(s.startsWith("roc:type="))l.rocType=s.substring(9);else if(s.startsWith("roc:x=")){l.rocX=[];for(let t of s.substring(6).split(","))l.rocX.push(parseFloat(t))}else if(s.startsWith("roc:y=")){l.rocY=[];for(let t of s.substring(6).split(","))l.rocY.push(parseFloat(t))}else s.startsWith("truth:TP=")?l.truthTP=parseInt(s.substring(9),0):s.startsWith("truth:FP=")?l.truthFP=parseInt(s.substring(9),0):s.startsWith("truth:TN=")?l.truthTN=parseInt(s.substring(9),0):s.startsWith("truth:FN=")?l.truthFN=parseInt(s.substring(9),0):s.startsWith("truth:precision=")?l.precision=parseFloat(s.substring(16)):s.startsWith("truth:recall=")?l.recall=parseFloat(s.substring(13)):s.startsWith("truth:specificity=")?l.specificity=parseFloat(s.substring(18)):s.startsWith("truth:F1=")?l.statF1=parseFloat(s.substring(9)):s.startsWith("truth:kappa=")?l.statKappa=parseFloat(s.substring(12)):s.startsWith("truth:MCC=")?l.statMCC=parseFloat(s.substring(10)):s.startsWith("atomic:slope=")?l.atomicSlopeA=parseFloat(s.substring(13)):s.startsWith("atomic:intercept=")?l.atomicInterceptB=parseFloat(s.substring(17)):s.startsWith("note:title=")?l.noteTitle=s.substring(11):s.startsWith("note:origin=")?l.noteOrigin=s.substring(12):s.startsWith("note:field=")?l.noteField=s.substring(11):s.startsWith("note:comment=")&&(null==l.noteComments&&(l.noteComments=[]),l.noteComments.push(s.substring(13)))}return l}singleLeaveOneOut(t){let e=this.activity[t],n=new Set;for(let e of this.training[t])n.add(e);const i=1/(this.training.length-1),s=(e?this.numActive-1:this.numActive)*i;let o=0;for(let t in this.inHash){const i=parseInt(t);if(!n.has(i))continue;const r=this.inHash[i],a=(r[0]-(e?1:0)+1)/((r[1]-1)*s+1);o+=Math.log(a)}return o}validateNfold(t){const e=this.training.length;let i=n.numberArray(0,e),s=0;for(let t=0;t<e;t++)this.activity[t]&&(i[s++]=t);for(let t=0;t<e;t++)this.activity[t]||(i[s++]=t);let o=[];for(let e=0;e<t;e++)o.push(this.buildPartial(i,e,t));this.estimates=n.numberArray(0,e);for(let n=0;n<e;n++)this.estimates[i[n]]=this.estimatePartial(i,n,o[n%t]);this.calculateROC(),this.calculateTruth()}buildPartial(t,e,n){const i=this.training.length;let s=0,o=0,r={};for(let a=0;a<i;a++)if(a%n!=e){const e=this.activity[t[a]];e&&s++,o++;for(let n of this.training[t[a]]){let t=r[n];null==t&&(t=[0,0]),e&&t[0]++,t[1]++,r[n]=t}}let a={};const l=s*(1/o);for(let t in r){let e=parseInt(t);const n=r[e],i=(n[0]+1)/(n[1]*l+1),s=Math.log(i);a[e]=s}return a}estimatePartial(t,e,n){let i=0;for(let s of this.training[t[e]]){let t=n[s];null!=t&&(i+=t)}return i}calculateROC(){const t=this.training.length;let e=n.idxSort(this.estimates),i=[];i.push(this.lowThresh-.01*this.range);for(let n=0;n<t-1;n++){const t=this.estimates[e[n]],s=this.estimates[e[n+1]];t!=s&&i.push(.5*(t+s))}i.push(this.highThresh+.01*this.range),this.rocX=[],this.rocY=[];let s=[],o=0,r=0,a=0,l=1/this.numActive,d=1/(t-this.numActive);for(let n=0;n<i.length;n++){const p=i[n];for(;a<t&&!(p<this.estimates[e[a]]);a++)this.activity[e[a]]?o++:r++;const h=r*d,c=o*l,m=s.length;m>0&&h==this.rocX[m-1]&&c==this.rocY[m-1]||(this.rocX[m]=1-h,this.rocY[m]=1-c,s[m]=p)}this.rocX=n.reverse(this.rocX),this.rocY=n.reverse(this.rocY),s=n.reverse(s),this.calibrateThresholds(this.rocX,this.rocY,s),this.rocAUC=0;for(let t=0;t<s.length-1;t++){const e=this.rocX[t+1]-this.rocX[t],n=.5*(this.rocY[t]+this.rocY[t+1]);this.rocAUC+=e*n}let p=[],h=[];p.push(this.rocX[0]),h.push(this.rocY[0]);for(let t=1;t<s.length-1;t++)Y(this.rocX[t]-p[p.length-1],this.rocY[t]-h[h.length-1])<4e-6||(p.push(this.rocX[t]),h.push(this.rocY[t]));p.push(this.rocX[s.length-1]),h.push(this.rocY[s.length-1])}calculateTruth(){let t=.5*(this.lowThresh+this.highThresh);this.truthTP=this.truthFP=this.truthTN=this.truthFN=0;for(let e=0;e<this.activity.length;e++){let n=this.activity[e],i=this.estimates[e]>=t;n&&i?this.truthTP++:!n&&i?this.truthFP++:n&&!i?this.truthFN++:n||i||this.truthTN++}const e=this.truthTP,n=this.truthFP,i=this.truthTN,s=this.truthFN;let o=1/this.activity.length;this.precision=e/(e+n),this.recall=e/(e+s),this.specificity=i/(i+n),this.statF1=this.precision*this.recall*2/(this.precision+this.recall);let r=(e+i)*o,a=(e+n)*o*(e+s)*o+(n+i)*o*(s+i)*o;this.statKappa=(r-a)/(1-a);let l=e*i-n*s,d=(e+n)*(e+s)*(i+n)*(i+s);this.statMCC=l/Math.sqrt(d)}calibrateThresholds(t,e,n){const i=n.length;let s=0;for(let n=1;n<i;n++)e[n]-t[n]>e[s]-t[s]&&(s=n);const o=n[s];let r=0,a=i-1;for(;r<s-1&&!(t[r]>0);r++);for(;a>s+1&&!(e[a]<1);a--);let l=Math.min(n[r]-o,o-n[a]);this.lowThresh=o-l,this.highThresh=o+l,this.range=2*l,this.invRange=this.range>0?1/this.range:0}determineCoverage(t,e){const i=t.numAtoms;let s={};const o=0==this.folding?4294967295:this.folding-1;let r=bn.createStrictRubric(t),a=new Nn(r,this.classType),l=t=>{let e=t.hashCode&o;if(null==this.contribs[e])return;let r=s[e];null==r&&(r=n.booleanArray(!1,i),s[e]=r);for(let e of t.atoms)r[e-1]=!0};if(a.hookApplyNewFP=l,a.hookConsiderNewFP=l,a.calculate(),null!=e){let t=0==this.folding?a.getUniqueHashes():a.getFoldedHashes(this.folding);for(let n of t)e.add(n)}return s}}class Rn{constructor(t,e=null){this.mol=t,this.pri=e}generate(){return 0==this.mol.numAtoms?"":(this.walkSequence(),this.findLinks(),this.assemble())}walkSequence(){const t=this.mol,e=t.numAtoms,i=this.pri;this.seq=[];let s=n.booleanArray(!1,e),o=1;null!=i&&(o=n.idxMin(i)+1);for(let n=0;n<e&&(this.seq.push(o),s[o-1]=!0,n!=e-1);n++){let n=t.atomAdjList(o),r=t.atomConnComp(o);o=0;for(let t=0;t<n.length;t++)if(!s[n[t]-1]){if(null==i){o=n[t];break}(0==o||i[n[t]-1]<i[o-1])&&(o=n[t])}if(!(o>0)){for(let n=1;n<=e;n++)if(!s[n-1]&&t.atomConnComp(n)==r){if(null==i){o=n;break}(0==o||i[n-1]<i[o-1])&&(o=n)}if(!(o>0)){for(let t=1;t<=e;t++)if(!s[t-1]){if(null==i){o=t;break}(0==o||i[t-1]<i[o-1])&&(o=t)}if(0==o)throw"Walk sequence failed."}}}}findLinks(){const t=this.mol,e=t.numAtoms,i=this.pri,s=this.seq;this.link=[],this.conn=[];for(let t=0;t<e;t++)this.link.push([]),this.conn.push([]);let o=n.numberArray(0,e);for(let t=0;t<e;t++)o[s[t]-1]=t;let r=n.numberArray(-1,e+1);for(let a=0;a<e;a++){let l=a>0?s[a-1]:0,d=s[a],p=a<e-1?s[a+1]:0;for(let t=1;t<=e;t++)r[t]>=0&&a>r[t]&&(r[t]=-1);let h=t.atomAdjList(d);if(null!=i)for(let t=0;t<h.length-1;)o[h[t]-1]>o[h[t+1]-1]?(n.swap(h,t,t+1),t>0&&t--):t++;for(let t=0;t<h.length;t++){if(h[t]==l||h[t]==p)continue;let n=h[t];if(o[d-1]>o[n-1])continue;let i=-1;for(let t=1;t<=e;t++)if(r[t]<0){i=t,r[t]=Math.max(o[d-1],o[n-1]);break}this.link[d-1].push(i),this.conn[d-1].push(n),this.link[n-1].push(i),this.conn[n-1].push(d)}}}assemble(){const t=this.mol,e=t.numAtoms,n=this.seq,i=this.link,s=this.conn;let o="";const r=["C","N","O","P","S"];for(let a=0;a<e;a++){let e=a>0?n[a-1]:0,l=n[a],d=e>0?t.findBond(e,l):0;if(e>0&&0==d&&(o+="."),d>0){let e=t.bondOrder(d);2==e?o+="=":3==e&&(o+="#")}let p=t.atomElement(l);Bt.ELEMENTS.indexOf(p)<0&&(p="*");let h=t.atomCharge(l);r.indexOf(p)>=0&&0==h?o+=p:(o+="["+p,h>0&&(o+="+"+h),h<0&&(o+=h),o+="]");let c=i[l-1];if(null!=c)for(let e=0;e<c.length;e++){d=t.findBond(l,s[l-1][e]);let n=t.bondOrder(d);2==n?o+="=":3==n&&(o+="#"),c[e]<10?o+=c[e]:o+="%"+c[e]}}return o}}class On{static readXML(t){let e;if(e=g.customParser?(new g.customParser).parseFromString(t,"application/xml"):(new DOMParser).parseFromString(t,"application/xml"),null==e)return null;let n=e.documentElement;if(null==n)return null;let i=new ye,s=dt(n,"Summary");if(null==s)return null;i.title=B(dt(s,"Title")),i.description=B(dt(s,"Description"));let o=dt(n,"Extension");if(null!=o){let t=pt(o,"Ext");for(let e=0;e<t.length;e++){let n=t[e];i.appendExtension(n.getAttribute("name"),n.getAttribute("type"),B(n))}}let r=dt(n,"Header"),a=parseInt(r.getAttribute("ncols")),l=pt(r,"Column");if(l.length!=a)return null;for(let t=0;t<a;t++){let e=l[t];if(parseInt(e.getAttribute("id"))!=t+1)return null;i.appendColumn(e.getAttribute("name"),e.getAttribute("type"),B(e))}let d=0;for(let t of pt(dt(n,"Content"),"Row")){if(parseInt(t.getAttribute("id"))!=d+1)return null;i.appendRow();for(let e of pt(t,"Cell")){let t=parseInt(e.getAttribute("id"))-1,n=i.colType(t),s=B(e);""==s||("molecule"==n?i.setObject(d,t,s):"string"==n?i.setString(d,t,s):"real"==n?i.setReal(d,t,parseFloat(s)):"integer"==n?i.setInteger(d,t,parseInt(s)):"boolean"==n?i.setBoolean(d,t,"true"==s||"false"!=s&&null):"extend"==n&&i.setExtend(d,t,s)),e=e.nextElementSibling,t++}t=t.nextElementSibling,d++}return i}static readJSON(t){if(!t.colData||!t.rowData)throw"Not a JSON-formatted datasheet.";return new ye(yt(t))}static writeXML(t){let e;e=g.customParser?(new g.customParser).parseFromString("<DataSheet/>","application/xml"):(new DOMParser).parseFromString("<DataSheet/>","application/xml");let n=e.createElement("Summary");e.documentElement.appendChild(n);let i=e.createElement("Title"),s=e.createElement("Description");n.appendChild(i),i.appendChild(e.createTextNode(t.title)),n.appendChild(s),s.appendChild(e.createCDATASection(t.description));let o=e.createElement("Extension");e.documentElement.appendChild(o);for(let n=0;n<t.numExtensions;n++){let i=e.createElement("Ext");o.appendChild(i),i.setAttribute("name",t.getExtName(n)),i.setAttribute("type",t.getExtType(n)),i.appendChild(e.createCDATASection(t.getExtData(n)))}let r=e.createElement("Header");e.documentElement.appendChild(r),r.setAttribute("nrows",t.numRows.toString()),r.setAttribute("ncols",t.numCols.toString());for(let n=0;n<t.numCols;n++){let i=e.createElement("Column");r.appendChild(i),i.setAttribute("id",(n+1).toString()),i.setAttribute("name",t.colName(n)),i.setAttribute("type",t.colType(n)),i.appendChild(e.createTextNode(t.colDescr(n)))}let a=e.createElement("Content");e.documentElement.appendChild(a);for(let n=0;n<t.numRows;n++){let i=e.createElement("Row");i.setAttribute("id",(n+1).toString()),a.appendChild(i);for(let s=0;s<t.numCols;s++){let o=e.createElement("Cell");o.setAttribute("id",(s+1).toString()),i.appendChild(o);let r=t.colType(s),a=null;if(t.isNull(n,s));else if("molecule"==r){let i=t.getObject(n,s);i instanceof ge&&(i=me.writeNative(i)),a=e.createCDATASection(i)}else"string"==r?a=e.createCDATASection(t.getString(n,s)):"real"==r?a=e.createTextNode(t.getReal(n,s).toString()):"integer"==r?a=e.createTextNode(t.getInteger(n,s).toString()):"boolean"==r?a=e.createTextNode(t.getBoolean(n,s).toString()):"extend"==r&&(a=e.createCDATASection(t.getExtend(n,s)));null!=a&&o.appendChild(a)}}return g.customSerial?(new g.customSerial).serializeToString(e.documentElement):(new XMLSerializer).serializeToString(e.documentElement)}static writeJSON(t){let e=t.data,n=t.numRows,i=t.numCols,s=new Array(n);for(let t=0;t<n;t++)s[t]=new Array(i);for(let o=0;o<i;o++){let i="molecule"==t.colType(o);for(let t=0;t<n;t++){let n=e.rowData[t][o];null!=n&&i&&(n=n.toString()),s[t][o]=n}}return{title:e.title,description:e.description,colData:yt(e.colData),rowData:s,extData:yt(e.extData)}}}const Ln={rings:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n <Summary>\n  <Title>Small Rings</Title>\n  <Description><![CDATA[]]></Description>\n </Summary>\n <Header nrows="24" ncols="3">\n  <Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n  <Column name="Name" type="string" id="2">Template Name</Column>\n  <Column name="Abbrev" type="string" id="3">Abbreviation Code</Column>\n </Header>\n <Content>\n  <Row id="1">\n   <Cell id="1"><![CDATA[SketchEl!(3,3)\nC=1.7500,-6.1500;0,0,i2\nC=2.5000,-7.4490;0,0,i2\nC=1.0000,-7.4490;0,0,i2\n1-2=1,0\n1-3=1,0\n3-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclopropane]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="2">\n   <Cell id="1"><![CDATA[SketchEl!(4,4)\nC=3.6500,-0.9500;0,0,i2\nC=3.6500,-2.4500;0,0,i2\nC=5.1500,-2.4500;0,0,i2\nC=5.1500,-0.9500;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n1-4=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclobutane]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="3">\n   <Cell id="1"><![CDATA[SketchEl!(5,5)\nC=0.7500,2.3100;0,0,i2\nC=-0.4600,1.4300;0,0,i2\nC=0.0000,0.0000;0,0,i2\nC=1.9600,1.4300;0,0,i2\nC=1.5000,0.0000;0,0,i2\n3-2=1,0\n2-1=1,0\n1-4=1,0\n4-5=1,0\n5-3=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclopentane]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="4">\n   <Cell id="1"><![CDATA[SketchEl!(5,5)\nC=4.3700,-7.8550;0,0,i2\nC=3.6200,-10.1650;0,0,i1\nC=3.1600,-8.7350;0,0,i1\nC=5.5800,-8.7350;0,0,i1\nC=5.1200,-10.1650;0,0,i1\n2-3=2,0\n3-1=1,0\n1-4=1,0\n4-5=2,0\n5-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclopentadiene]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="5">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=3.9490,-2.3000;0,0,i2\nC=2.6500,-3.0500;0,0,i2\nC=2.6500,-4.5500;0,0,i2\nC=3.9490,-5.3000;0,0,i2\nC=5.2481,-4.5500;0,0,i2\nC=5.2481,-3.0500;0,0,i2\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-1=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclohexane1]]></Cell>\n   <Cell id="3"><![CDATA[Cy]]></Cell>\n  </Row>\n  <Row id="6">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=1.5000,-3.6500;0,0,i2\nC=2.7990,-3.2500;0,0,i2\nC=2.2500,-2.3510;0,0,i2\nC=4.0981,-4.0000;0,0,i2\nC=3.5490,-3.1010;0,0,i2\nC=4.8481,-2.3510;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n6-5=1,0\n4-6=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclohexane2]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="7">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=-0.2500,-2.1490;0,0,i2\nC=0.6000,-1.2500;0,0,i2\nC=2.1500,-1.2500;0,0,i2\nC=3.0000,-2.1490;0,0,i2\nC=2.2500,-0.4990;0,0,i2\nC=0.4500,-0.4990;0,0,i2\n1-2=1,0\n3-2=1,0\n3-4=1,0\n4-5=1,0\n1-6=1,0\n6-5=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclohexane3]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="8">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=6.1000,0.2500;0,0,i1\nC=4.8010,-0.5000;0,0,i1\nC=7.3990,-0.5000;0,0,i1\nC=4.8010,-2.0000;0,0,i1\nC=6.1000,-2.7500;0,0,i1\nC=7.3990,-2.0000;0,0,i1\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[benzene]]></Cell>\n   <Cell id="3"><![CDATA[Ph]]></Cell>\n  </Row>\n  <Row id="9">\n   <Cell id="1"><![CDATA[SketchEl!(7,7)\nC=0.7400,3.2800;0,0,i2\nC=0.0000,0.0000;0,0,i2\nC=-0.9400,1.1700;0,0,i2\nC=-0.6100,2.6300;0,0,i2\nC=2.0900,2.6300;0,0,i2\nC=2.4200,1.1700;0,0,i2\nC=1.4800,0.0000;0,0,i2\n3-2=1,0\n3-4=1,0\n4-1=1,0\n5-1=1,0\n5-6=1,0\n6-7=1,0\n7-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cycloheptane]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="10">\n   <Cell id="1"><![CDATA[SketchEl!(8,8)\nC=0.0000,3.6200;0,0,i2\nC=0.0000,0.0000;0,0,i2\nC=-1.0600,1.0600;0,0,i2\nC=-1.0600,2.5600;0,0,i2\nC=1.5000,3.6200;0,0,i2\nC=2.5600,2.5600;0,0,i2\nC=2.5600,1.0600;0,0,i2\nC=1.5000,0.0000;0,0,i2\n2-3=1,0\n3-4=1,0\n4-1=1,0\n1-5=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n8-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cyclooctane]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="11">\n   <Cell id="1"><![CDATA[SketchEl!(9,10)\nC=1.2510,-1.4500;0,0,i1\nC=-0.0481,-2.2000;0,0,i1\nC=2.5500,-2.2000;0,0,i0\nC=-0.0481,-3.7000;0,0,i1\nC=1.2510,-4.4500;0,0,i1\nC=2.5500,-3.7000;0,0,i0\nC=3.9713,-1.7306;0,0,i2\nC=4.8537,-2.9389;0,0,i2\nC=3.9779,-4.1593;0,0,i2\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n3-7=1,0\n7-8=1,0\n8-9=1,0\n9-6=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[dihydroindene]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="12">\n   <Cell id="1"><![CDATA[SketchEl!(10,11)\nC=2.5990,-2.5500;0,0,i1\nC=1.3000,-3.3000;0,0,i1\nC=1.3000,-4.8000;0,0,i1\nC=2.5990,-5.5500;0,0,i1\nC=3.8981,-4.8000;0,0,i0\nC=3.8981,-3.3000;0,0,i0\nC=5.1971,-2.5500;0,0,i1\nC=5.1971,-5.5500;0,0,i1\nC=6.4962,-4.8000;0,0,i1\nC=6.4962,-3.3000;0,0,i1\n2-3=2,0\n2-1=1,0\n3-4=1,0\n4-5=2,0\n5-6=1,0\n6-1=2,0\n7-6=1,0\n5-8=1,0\n8-9=2,0\n9-10=1,0\n10-7=2,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[napthalene]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="13">\n   <Cell id="1"><![CDATA[SketchEl!(13,15)\nC=-0.1824,-4.7254;0,0,i1\nC=-1.2065,-5.8214;0,0,i1\nC=1.2788,-5.0643;0,0,i0\nC=-0.7693,-7.2563;0,0,i1\nC=0.6919,-7.5952;0,0,i1\nC=1.7160,-6.4992;0,0,i0\nC=2.5017,-4.2011;0,0,i2\nC=3.6979,-5.0997;0,0,i0\nC=3.2158,-6.5224;0,0,i0\nC=5.1689,-4.8063;0,0,i1\nC=6.1585,-5.9336;0,0,i1\nC=4.2061,-7.6477;0,0,i1\nC=5.6772,-7.3542;0,0,i1\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n3-7=1,0\n7-8=1,0\n8-9=1,0\n9-6=1,0\n10-11=1,0\n10-8=2,0\n9-12=2,0\n12-13=1,0\n13-11=2,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[fluoroscene]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="14">\n   <Cell id="1"><![CDATA[SketchEl!(14,16)\nC=2.5990,-2.5500;0,0,i1\nC=1.3000,-3.3000;0,0,i1\nC=1.3000,-4.8000;0,0,i1\nC=2.5990,-5.5500;0,0,i1\nC=3.8981,-4.8000;0,0,i0\nC=3.8981,-3.3000;0,0,i0\nC=5.1971,-2.5500;0,0,i1\nC=5.1971,-5.5500;0,0,i1\nC=6.4962,-4.8000;0,0,i0\nC=6.4962,-3.3000;0,0,i0\nC=7.7952,-2.5500;0,0,i1\nC=7.7952,-5.5500;0,0,i1\nC=9.0943,-4.8000;0,0,i1\nC=9.0943,-3.3000;0,0,i1\n2-3=1,0\n2-1=2,0\n3-4=2,0\n4-5=1,0\n5-6=2,0\n6-1=1,0\n7-6=1,0\n5-8=1,0\n8-9=2,0\n9-10=1,0\n10-7=2,0\n10-11=1,0\n9-12=1,0\n12-13=2,0\n13-14=1,0\n14-11=2,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[anthracene]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="15">\n   <Cell id="1"><![CDATA[SketchEl!(14,16)\nC=5.4911,-0.2789;0,0,i1\nC=4.7411,-1.5780;0,0,i1\nC=6.9910,-0.2789;0,0,i1\nC=5.4910,-2.8770;0,0,i1\nC=6.9911,-2.8770;0,0,i0\nC=7.7411,-1.5780;0,0,i0\nC=9.2410,-1.5780;0,0,i0\nC=7.7410,-4.1760;0,0,i1\nC=9.2411,-4.1761;0,0,i1\nC=9.9911,-2.8770;0,0,i0\nC=9.9910,-0.2789;0,0,i1\nC=11.4911,-2.8770;0,0,i1\nC=12.2411,-1.5780;0,0,i1\nC=11.4911,-0.2790;0,0,i1\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n7-6=1,0\n5-8=1,0\n8-9=2,0\n9-10=1,0\n10-7=2,0\n7-11=1,0\n10-12=1,0\n12-13=2,0\n13-14=1,0\n14-11=2,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[phenanthrene]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="16">\n   <Cell id="1"><![CDATA[SketchEl!(5,5)\nN=3.3300,-1.7050;0,0,i1\nC=2.5800,-4.0150;0,0,i2\nC=2.1200,-2.5850;0,0,i2\nC=4.5400,-2.5850;0,0,i2\nC=4.0800,-4.0150;0,0,i2\n2-3=1,0\n3-1=1,0\n1-4=1,0\n4-5=1,0\n5-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[pyrrolidine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="17">\n   <Cell id="1"><![CDATA[SketchEl!(5,5)\nC=1.3200,-2.2350;0,0,i2\nC=1.7800,-3.6650;0,0,i2\nO=2.5300,-1.3550;0,0,i0\nC=3.7400,-2.2350;0,0,i2\nC=3.2800,-3.6650;0,0,i2\n2-1=1,0\n1-3=1,0\n3-4=1,0\n4-5=1,0\n5-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[tetrahydrofuran]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="18">\n   <Cell id="1"><![CDATA[SketchEl!(5,5)\nC=1.3200,-2.2350;0,0,i1\nC=1.7800,-3.6650;0,0,i1\nO=2.5300,-1.3550;0,0,i0\nC=3.7400,-2.2350;0,0,i1\nC=3.2800,-3.6650;0,0,i1\n2-1=2,0\n1-3=1,0\n3-4=1,0\n4-5=2,0\n5-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[furan]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="19">\n   <Cell id="1"><![CDATA[SketchEl!(5,5)\nC=1.3200,-2.2350;0,0,i1\nC=1.7800,-3.6650;0,0,i1\nS=2.5300,-1.3550;0,0,i0\nC=3.7400,-2.2350;0,0,i1\nC=3.2800,-3.6650;0,0,i1\n2-1=2,0\n1-3=1,0\n3-4=1,0\n4-5=2,0\n5-2=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[thiofuran]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="20">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=1.6000,-3.0000;0,0,i1\nN=2.8990,-2.2500;0,0,i0\nC=4.1981,-3.0000;0,0,i1\nC=1.6000,-4.5000;0,0,i1\nC=2.8990,-5.2500;0,0,i1\nC=4.1981,-4.5000;0,0,i1\n2-1=1,0\n2-3=2,0\n1-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[pyridine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="21">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=0.7019,-2.1000;0,0,i2\nC=0.7019,-3.6000;0,0,i2\nO=2.0009,-1.3500;0,0,i0\nO=2.0009,-4.3500;0,0,i0\nC=3.3000,-3.6000;0,0,i2\nC=3.3000,-2.1000;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n4-5=1,0\n5-6=1,0\n6-3=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[dioxane]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="22">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=2.1519,-2.1000;0,0,i2\nC=2.1519,-3.6000;0,0,i2\nO=3.4509,-1.3500;0,0,i0\nN=3.4509,-4.3500;0,0,i1\nC=4.7500,-3.6000;0,0,i2\nC=4.7500,-2.1000;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n4-5=1,0\n5-6=1,0\n6-3=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[morpholine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="23">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nN=2.6490,-2.3000;0,0,i1\nC=1.3500,-3.0500;0,0,i2\nC=1.3500,-4.5500;0,0,i2\nC=2.6490,-5.3000;0,0,i2\nC=3.9481,-4.5500;0,0,i2\nC=3.9481,-3.0500;0,0,i2\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-1=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[piperidine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="24">\n   <Cell id="1"><![CDATA[SketchEl!(6,6)\nC=1.3500,-3.0500;0,0,i2\nC=1.3500,-4.5500;0,0,i2\nO=2.6490,-2.3000;0,0,i0\nC=2.6490,-5.3000;0,0,i2\nC=3.9481,-4.5500;0,0,i2\nC=3.9481,-3.0500;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n4-5=1,0\n5-6=1,0\n6-3=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[pyran]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n </Content>\n</DataSheet>\n',termgrp:'<DataSheet><Summary><Title>Terminal Groups</Title><Description><![CDATA[]]></Description></Summary><Extension/><Header nrows="11" ncols="3"><Column id="1" name="Molecule" type="molecule">Molecular structure</Column><Column id="2" name="Name" type="string">Template name</Column><Column id="3" name="Abbrev" type="string">Optional abbreviation</Column></Header><Content><Row id="1"><Cell id="1"><![CDATA[SketchEl!(3,2)\nX=-0.6500,-1.4000;0,0,i0\nC=0.6490,-0.6500;0,0,i2\nC=1.9481,-1.4000;0,0,i3\n1-2=1,0\n2-3=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[ethyl]]></Cell><Cell id="3"><![CDATA[Et]]></Cell></Row><Row id="2"><Cell id="1"><![CDATA[SketchEl!(4,3)\nC=-5.1000,3.4000;0,0,i2\nC=-3.8010,4.1500;0,0,i2\nC=-2.5019,3.4000;0,0,i3\nX=-6.3990,4.1500;0,0,i0\n1-2=1,0\n2-3=1,0\n1-4=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[n-propyl]]></Cell><Cell id="3"><![CDATA[Pr]]></Cell></Row><Row id="3"><Cell id="1"><![CDATA[SketchEl!(4,3)\nC=-4.9450,2.0214;0,0,i1\nC=-4.1950,3.3204;0,0,i3\nC=-4.1950,0.7224;0,0,i3\nX=-6.4450,2.0214;0,0,i0\n1-2=1,0\n1-3=1,0\n1-4=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[i-propyl]]></Cell><Cell id="3"><![CDATA[{^i}Pr]]></Cell></Row><Row id="4"><Cell id="1"><![CDATA[SketchEl!(5,4)\nC=-4.6500,2.9000;0,0,i2\nC=-3.3510,3.6500;0,0,i2\nC=-2.0519,2.9000;0,0,i2\nC=-0.7529,3.6500;0,0,i3\nX=-5.9490,3.6500;0,0,i0\n1-2=1,0\n2-3=1,0\n3-4=1,0\n1-5=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[n-butyl]]></Cell><Cell id="3"><![CDATA[Bu]]></Cell></Row><Row id="5"><Cell id="1"><![CDATA[SketchEl!(5,4)\nC=-3.2000,0.9000;0,0,i0\nC=-3.2000,2.4000;0,0,i3\nC=-3.2000,-0.6000;0,0,i3\nC=-1.7000,0.9000;0,0,i3\nX=-4.7000,0.9000;0,0,i0\n1-2=1,0\n1-3=1,0\n1-4=1,0\n1-5=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[t-butyl]]></Cell><Cell id="3"><![CDATA[{^t}Bu]]></Cell></Row><Row id="6"><Cell id="1"><![CDATA[SketchEl!(3,2)\nX=-7.4188,-4.7944;0,0,i0\nO=-6.1198,-4.0444;0,0,i0\nC=-4.8207,-4.7944;0,0,i3\n1-2=1,0\n2-3=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[methoxy]]></Cell><Cell id="3"><![CDATA[O|Me]]></Cell></Row><Row id="7"><Cell id="1"><![CDATA[SketchEl!(4,3)\nX=-7.4188,-4.7944;0,0,i0\nO=-6.1198,-4.0444;0,0,i0\nC=-4.8207,-4.7944;0,0,i2\nC=-3.5217,-4.0444;0,0,i3\n1-2=1,0\n2-3=1,0\n3-4=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[ethoxy]]></Cell><Cell id="3"><![CDATA[O|Et]]></Cell></Row><Row id="8"><Cell id="1"><![CDATA[SketchEl!(7,7)\nX=-6.5500,1.6000;0,0,i0\nC=-5.0500,1.6000;0,0,i0\nC=-4.3000,2.8990;0,0,i1\nC=-2.8000,2.8990;0,0,i1\nC=-4.3000,0.3010;0,0,i1\nC=-2.8000,0.3010;0,0,i1\nC=-2.0500,1.6000;0,0,i1\n1-2=1,0\n3-2=1,0\n3-4=2,0\n2-5=2,0\n5-6=1,0\n6-7=2,0\n7-4=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[phenyl]]></Cell><Cell id="3"><![CDATA[Ph]]></Cell></Row><Row id="9"><Cell id="1"><![CDATA[SketchEl!(7,7)\nX=-6.5500,1.6000;0,0,i0\nC=-5.0500,1.6000;0,0,i1\nC=-4.3000,2.8990;0,0,i2\nC=-2.8000,2.8990;0,0,i2\nC=-4.3000,0.3010;0,0,i2\nC=-2.8000,0.3010;0,0,i2\nC=-2.0500,1.6000;0,0,i2\n1-2=1,0\n3-2=1,0\n3-4=1,0\n2-5=1,0\n5-6=1,0\n6-7=1,0\n7-4=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[cyclopentyl]]></Cell><Cell id="3"><![CDATA[Cy]]></Cell></Row><Row id="10"><Cell id="1"><![CDATA[SketchEl!(8,8)\nX=0.0500,2.9500;0,0,i0\nC=1.3490,3.7000;0,0,i2\nC=2.6481,2.9500;0,0,i0\nC=2.6481,1.4500;0,0,i1\nC=3.9471,3.7000;0,0,i1\nC=3.9471,0.7000;0,0,i1\nC=5.2461,1.4500;0,0,i1\nC=5.2461,2.9500;0,0,i1\n1-2=1,0\n2-3=1,0\n3-4=1,0\n3-5=2,0\n4-6=2,0\n6-7=1,0\n7-8=2,0\n8-5=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[benzyl]]></Cell><Cell id="3"><![CDATA[Bz]]></Cell></Row><Row id="11"><Cell id="1"><![CDATA[SketchEl!(10,10)\nX=-1.6000,1.6571;0,0,i0\nC=-0.1000,1.6571;0,0,i0\nC=0.6500,0.3581;0,0,i0\nC=0.6500,2.9561;0,0,i0\nC=2.1500,0.3581;0,0,i1\nC=2.9000,1.6571;0,0,i0\nC=2.1500,2.9561;0,0,i1\nC=-0.1000,4.2551;0,0,i3\nC=4.4000,1.6571;0,0,i3\nC=-0.1000,-0.9409;0,0,i3\n1-2=1,0\n2-3=1,0\n2-4=2,0\n3-5=2,0\n5-6=1,0\n6-7=2,0\n7-4=1,0\n4-8=1,0\n6-9=1,0\n3-10=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[mesityl]]></Cell><Cell id="3"><![CDATA[Mes]]></Cell></Row></Content></DataSheet>',funcgrp:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n<Summary>\n<Title>Functional Groups</Title>\n<Description><![CDATA[]]></Description>\n</Summary>\n<Header nrows="18" ncols="3">\n<Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n<Column name="Name" type="string" id="2">Template name</Column>\n<Column name="Abbrev" type="string" id="3">Optional abbreviation</Column>\n</Header>\n<Content>\n<Row id="1">\n<Cell id="1"><![CDATA[SketchEl!(4,3)\nN=-6.6000,4.4000;1,0,i0\nO=-5.8500,5.6990;0,0,i0\nO=-5.8500,3.1010;-1,0,i0\nX=-8.1000,4.4000;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[nitro]]></Cell>\n<Cell id="3"><![CDATA[N|O{2}]]></Cell>\n</Row>\n<Row id="2">\n<Cell id="1"><![CDATA[SketchEl!(4,3)\nC=-7.8000,3.2500;0,0,i0\nO=-7.0500,4.5490;0,0,i0\nO=-7.0500,1.9510;0,0,i1\nX=-9.3000,3.2500;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[carboxyl]]></Cell>\n<Cell id="3"><![CDATA[C|O{2}|H]]></Cell>\n</Row>\n<Row id="3">\n<Cell id="1"><![CDATA[SketchEl!(5,4)\nC=-7.8000,3.2500;0,0,i0\nO=-7.0500,4.5490;0,0,i0\nO=-7.0500,1.9510;0,0,i0\nX=-9.3000,3.2500;0,0,i0\nC=-5.5500,1.9510;0,0,i3\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[methyl carboxylate]]></Cell>\n<Cell id="3"><![CDATA[C|O{2}|Me]]></Cell>\n</Row>\n<Row id="4">\n<Cell id="1"><![CDATA[SketchEl!(6,5)\nC=-7.8000,3.2500;0,0,i0\nO=-7.0500,4.5490;0,0,i0\nO=-7.0500,1.9510;0,0,i0\nX=-9.3000,3.2500;0,0,i0\nC=-5.5500,1.9510;0,0,i2\nC=-4.8000,0.6520;0,0,i3\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n5-6=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[ethyl carboxylate]]></Cell>\n<Cell id="3"><![CDATA[C|O{2}|Et]]></Cell>\n</Row>\n<Row id="5">\n<Cell id="1"><![CDATA[SketchEl!(4,3)\nC=-7.8000,3.2500;0,0,i0\nO=-7.0500,4.5490;0,0,i0\nN=-7.0500,1.9510;0,0,i2\nX=-9.3000,3.2500;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[amide]]></Cell>\n<Cell id="3"><![CDATA[C|O|NH{2}]]></Cell>\n</Row>\n<Row id="6">\n<Cell id="1"><![CDATA[SketchEl!(4,3)\nC=-7.8000,3.2500;0,0,i0\nO=-7.0500,4.5490;0,0,i0\nC=-7.0500,1.9510;0,0,i3\nX=-9.3000,3.2500;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[acetyl]]></Cell>\n<Cell id="3"><![CDATA[Ac]]></Cell>\n</Row>\n<Row id="7">\n<Cell id="1"><![CDATA[SketchEl!(5,4)\nO=-8.0010,2.5000;0,0,i0\nC=-6.7019,3.2500;0,0,i0\nX=-9.3000,3.2500;0,0,i0\nC=-5.4029,2.5000;0,0,i3\nO=-6.7019,4.7500;0,0,i0\n1-2=1,0\n1-3=1,0\n2-4=1,0\n2-5=2,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[acetoxy]]></Cell>\n<Cell id="3"><![CDATA[O|Ac]]></Cell>\n</Row>\n<Row id="8">\n<Cell id="1"><![CDATA[SketchEl!(3,2)\nX=-5.9500,5.0500;0,0,i0\nC=-4.4500,5.0500;0,0,i0\nN=-2.9500,5.0500;0,0,i0\n1-2=1,0\n2-3=3,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyano]]></Cell>\n<Cell id="3"><![CDATA[C|N]]></Cell>\n</Row>\n<Row id="9">\n<Cell id="1"><![CDATA[SketchEl!(5,4)\nC=0.0000,0.0000;0,0,i0\nF=0.0000,1.5000;0,0,i0\nF=-0.0000,-1.5000;0,0,i0\nF=1.5000,-0.0000;0,0,i0\nX=-1.5000,0.0000;0,0,i0\n1-2=1,0\n1-3=1,0\n1-4=1,0\n1-5=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[trifluoromethyl]]></Cell>\n<Cell id="3"><![CDATA[C|F{3}]]></Cell>\n</Row>\n<Row id="10">\n<Cell id="1"><![CDATA[SketchEl!(6,5)\nO=0.0000,0.0000;0,0,i0\nC=1.5000,0.0000;0,0,i0\nF=3.0000,0.0000;0,0,i0\nF=1.5000,-1.5000;0,0,i0\nF=1.5000,1.5000;0,0,i0\nX=-0.7500,1.2990;0,0,i0\n1-2=1,0\n2-3=1,0\n2-4=1,0\n2-5=1,0\n1-6=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[trifluoromethoxy]]></Cell>\n<Cell id="3"><![CDATA[O|CF{3}]]></Cell>\n</Row>\n<Row id="11">\n<Cell id="1"><![CDATA[SketchEl!(5,4)\nP=-1.2500,0.8500;0,0,i0\nO=-1.2500,2.3500;0,0,i0\nO=-1.2500,-0.6500;0,0,i1\nO=0.2500,0.8500;0,0,i1\nX=-2.7500,0.8500;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n1-5=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[phosphoric]]></Cell>\n<Cell id="3"><![CDATA[P|O{3}|H{2}]]></Cell>\n</Row>\n<Row id="12">\n<Cell id="1"><![CDATA[SketchEl!(6,5)\nO=-2.7500,0.8500;0,0,i0\nP=-1.2500,0.8500;0,0,i0\nO=-1.2500,2.3500;0,0,i0\nO=-1.2500,-0.6500;0,0,i1\nO=0.2500,0.8500;0,0,i1\nX=-3.5000,2.1490;0,0,i0\n2-3=2,0\n2-4=1,0\n2-5=1,0\n2-1=1,0\n1-6=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[phosphoric]]></Cell>\n<Cell id="3"><![CDATA[P|O{4}|H{2}]]></Cell>\n</Row>\n<Row id="13">\n<Cell id="1"><![CDATA[SketchEl!(4,3)\nS=-1.2500,0.8500;0,0,i0\nO=-1.2500,2.3500;0,0,i0\nO=-1.2500,-0.6500;0,0,i0\nX=-2.7500,0.8500;0,0,i0\n1-2=2,0\n1-3=2,0\n1-4=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[sulphonyl]]></Cell>\n<Cell id="3"><![CDATA[S|O{2}|H]]></Cell>\n</Row>\n<Row id="14">\n<Cell id="1"><![CDATA[SketchEl!(5,4)\nS=-1.2500,0.8500;0,0,i0\nO=-1.2500,2.3500;0,0,i0\nO=-1.2500,-0.6500;0,0,i0\nO=0.2500,0.8500;0,0,i1\nX=-2.7500,0.8500;0,0,i0\n1-2=2,0\n1-3=2,0\n1-4=1,0\n1-5=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[sulphonic]]></Cell>\n<Cell id="3"><![CDATA[S|O{3}|H]]></Cell>\n</Row>\n<Row id="15">\n<Cell id="1"><![CDATA[SketchEl!(6,5)\nO=-2.7500,0.8500;0,0,i0\nS=-1.2500,0.8500;0,0,i0\nO=-1.2500,2.3500;0,0,i0\nO=-1.2500,-0.6500;0,0,i0\nO=0.2500,0.8500;0,0,i1\nX=-3.5000,2.1490;0,0,i0\n2-3=2,0\n2-4=2,0\n2-5=1,0\n2-1=1,0\n1-6=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[sulphonic]]></Cell>\n<Cell id="3"><![CDATA[S|O{4}|H]]></Cell>\n</Row>\n<Row id="16">\n<Cell id="1"><![CDATA[SketchEl!(5,4)\nX=0.0000,0.0000;0,0,i0\nSi=1.5000,0.0000;0,0,i0\nC=3.0000,0.0000;0,0,i3\nC=1.5000,-1.5000;0,0,i3\nC=1.5000,1.5000;0,0,i3\n1-2=1,0\n2-3=1,0\n2-4=1,0\n2-5=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[trimethylsilane]]></Cell>\n<Cell id="3"><![CDATA[TMS]]></Cell>\n</Row>\n<Row id="17">\n<Cell id="1"><![CDATA[SketchEl!(12,22)\nC=5.6600,-2.2950;0,0,i1\nC=4.6100,-3.9050;0,0,i1\nC=4.1500,-2.6750;0,0,i1\nC=7.1700,-2.6750;0,0,i1\nC=6.7100,-3.9050;0,0,i1\nC=5.6300,-0.5870;0,0,i1\nC=4.5800,0.7230;0,0,i1\nC=4.1200,-0.2070;0,0,i0\nC=7.1400,-0.2070;0,0,i1\nC=6.6800,0.7230;0,0,i1\nFe=5.6700,-1.6610;0,0,i0\nX=2.6200,-0.2137;0,0,i0\n2-3=2,0\n3-1=1,0\n1-4=1,0\n4-5=2,0\n5-2=1,0\n7-8=2,0\n8-6=1,0\n6-9=1,0\n9-10=2,0\n10-7=1,0\n11-6=1,0\n11-1=1,0\n3-11=0,0\n4-11=0,0\n2-11=0,0\n5-11=0,0\n8-11=0,0\n9-11=0,0\n10-11=0,0\n7-11=0,0\n9-9=1,0\n8-12=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[ferrocenyl]]></Cell>\n<Cell id="3"><![CDATA[Fc]]></Cell>\n</Row>\n<Row id="18">\n<Cell id="1"><![CDATA[SketchEl!(11,15)\nX=-1.8965,0.7175;0,0,i0\nFe=0.1000,0.7175;0,0,i0\nC=0.3931,1.7515;0,0,i1\nC=1.7233,2.7758;0,0,i1\nC=1.9501,1.7633;0,0,i1\nC=-0.9841,2.4781;0,0,i1\nC=-0.3171,3.2728;0,0,i1\nC=0.1000,-0.7825;0,0,e0\nO=0.1000,-2.2825;0,0,i0\nC=1.5289,-0.1075;0,0,e0\nO=2.8280,-0.8575;0,0,i0\n1-2=1,0\n4-5=2,0\n5-3=1,0\n3-6=1,0\n6-7=2,0\n7-4=1,0\n2-3=1,0\n5-2=0,0\n6-2=0,0\n7-2=0,0\n4-2=0,0\n2-8=0,0\n8-9=2,0\n2-10=0,0\n10-11=2,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[bis(carbonyl)cyclopentadienyl iron]]></Cell>\n<Cell id="3"><![CDATA[Fp]]></Cell>\n</Row>\n</Content>\n</DataSheet>\n',protgrp:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n<Summary>\n<Title>Functional Groups</Title>\n<Description><![CDATA[]]></Description>\n</Summary>\n<Header nrows="11" ncols="3">\n<Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n<Column name="Name" type="string" id="2">Template name</Column>\n<Column name="Abbrev" type="string" id="3">Optional abbreviation</Column>\n</Header>\n<Content>\n<Row id="1">\n<Cell id="1"><![CDATA[SketchEl!(8,7)\nX=0.0000,0.0000;0,0,i0\nC=1.5000,0.0000;0,0,i0\nO=2.2500,1.2990;0,0,i0\nO=2.2500,-1.2990;0,0,i0\nC=3.7500,1.2990;0,0,i0\nC=5.2500,1.2990;0,0,i3\nC=3.7500,2.7990;0,0,i3\nC=3.7500,-0.2010;0,0,i3\n1-2=1,0\n2-3=1,0\n2-4=2,0\n3-5=1,0\n5-6=1,0\n5-7=1,0\n5-8=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[Boc]]></Cell>\n</Row>\n<Row id="2">\n<Cell id="1"><![CDATA[SketchEl!(11,11)\nS=0.0000,0.0000;0,0,i0\nC=1.5000,0.0000;0,0,i0\nX=-1.5000,-0.0000;0,0,i0\nO=-0.0000,1.5000;0,0,i0\nO=0.0000,-1.5000;0,0,i0\nC=2.2500,-1.2990;0,0,i1\nC=3.7500,-1.2990;0,0,i1\nC=4.5000,-0.0000;0,0,i0\nC=3.7500,1.2990;0,0,i1\nC=2.2500,1.2990;0,0,i1\nC=6.0000,-0.0000;0,0,i3\n1-2=1,0\n1-3=1,0\n1-4=2,0\n1-5=2,0\n2-6=2,0\n6-7=1,0\n7-8=2,0\n8-9=1,0\n9-10=2,0\n10-2=1,0\n8-11=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[Tos]]></Cell>\n</Row>\n<Row id="3">\n<Cell id="1"><![CDATA[SketchEl!(8,7)\nS=0.0000,0.0000;0,0,i0\nC=1.5000,0.0000;0,0,i0\nX=-1.5000,-0.0000;0,0,i0\nO=-0.0000,1.5000;0,0,i0\nO=0.0000,-1.5000;0,0,i0\nF=3.0000,-0.0000;0,0,i0\nF=1.5000,1.5000;0,0,i0\nF=1.5000,-1.5000;0,0,i0\n1-2=1,0\n1-3=1,0\n1-4=2,0\n1-5=2,0\n2-6=1,0\n2-7=1,0\n2-8=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[Tf]]></Cell>\n</Row>\n<Row id="4">\n<Cell id="1"><![CDATA[SketchEl!(8,7)\nSi=0.0000,0.0000;0,0,i0\nC=1.5000,0.0000;0,0,i0\nX=-1.5000,-0.0000;0,0,i0\nPh=-0.0000,1.5000;0,0,i0,aSketchEl!(7\\002C7)\\000A*\\003D-6.5500\\002C1.6000\\003B0\\002C0\\002Ci0\\000AC\\003D-5.0500\\002C1.6000\\003B0\\002C0\\002Ci0\\000AC\\003D-4.3000\\002C2.8990\\003B0\\002C0\\002Ci1\\000AC\\003D-2.8000\\002C2.8990\\003B0\\002C0\\002Ci1\\000AC\\003D-4.3000\\002C0.3010\\003B0\\002C0\\002Ci1\\000AC\\003D-2.8000\\002C0.3010\\003B0\\002C0\\002Ci1\\000AC\\003D-2.0500\\002C1.6000\\003B0\\002C0\\002Ci1\\000A1-2\\003D1\\002C0\\000A3-2\\003D1\\002C0\\000A3-4\\003D2\\002C0\\000A2-5\\003D2\\002C0\\000A5-6\\003D1\\002C0\\000A6-7\\003D2\\002C0\\000A7-4\\003D1\\002C0\\000A!End\\000A\nPh=0.0000,-1.5000;0,0,i0,aSketchEl!(7\\002C7)\\000A*\\003D-6.5500\\002C1.6000\\003B0\\002C0\\002Ci0\\000AC\\003D-5.0500\\002C1.6000\\003B0\\002C0\\002Ci0\\000AC\\003D-4.3000\\002C2.8990\\003B0\\002C0\\002Ci1\\000AC\\003D-2.8000\\002C2.8990\\003B0\\002C0\\002Ci1\\000AC\\003D-4.3000\\002C0.3010\\003B0\\002C0\\002Ci1\\000AC\\003D-2.8000\\002C0.3010\\003B0\\002C0\\002Ci1\\000AC\\003D-2.0500\\002C1.6000\\003B0\\002C0\\002Ci1\\000A1-2\\003D1\\002C0\\000A3-2\\003D1\\002C0\\000A3-4\\003D2\\002C0\\000A2-5\\003D2\\002C0\\000A5-6\\003D1\\002C0\\000A6-7\\003D2\\002C0\\000A7-4\\003D1\\002C0\\000A!End\\000A\nC=3.0000,-0.0000;0,0,i3\nC=1.5000,1.5000;0,0,i3\nC=1.5000,-1.5000;0,0,i3\n1-2=1,0\n1-3=1,0\n1-4=1,0\n1-5=1,0\n2-6=1,0\n2-7=1,0\n2-8=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[TBDPS]]></Cell>\n</Row>\n<Row id="5">\n<Cell id="1"><![CDATA[SketchEl!(8,7)\nSi=0.0000,0.0000;0,0,i0\nC=1.5000,0.0000;0,0,i0\nX=-1.5000,-0.0000;0,0,i0\nC=-0.0000,1.5000;0,0,i3\nC=0.0000,-1.5000;0,0,i3\nC=3.0000,-0.0000;0,0,i3\nC=1.5000,1.5000;0,0,i3\nC=1.5000,-1.5000;0,0,i3\n1-2=1,0\n1-3=1,0\n1-4=1,0\n1-5=1,0\n2-6=1,0\n2-7=1,0\n2-8=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[TBDMS]]></Cell>\n</Row>\n<Row id="6">\n<Cell id="1"><![CDATA[SketchEl!(5,5)\nX=1.0000,0.0000;0,0,i0\nO=1.8817,-1.2135;0,0,i0\nC=3.3083,-0.7500;0,0,i2\nC=3.3083,0.7500;0,0,i2\nO=1.8817,1.2135;0,0,i0\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n5-1=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="7">\n<Cell id="1"><![CDATA[SketchEl!(6,6)\nX=0.0000,0.0000;0,0,i0\nO=0.7500,-1.2990;0,0,i0\nC=2.2500,-1.2990;0,0,i2\nC=3.0000,0.0000;0,0,i2\nC=2.2500,1.2990;0,0,i2\nO=0.7500,1.2990;0,0,i0\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-1=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[1,3-dioxane]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="8">\n<Cell id="1"><![CDATA[SketchEl!(6,6)\nX=0.0000,0.0000;0,0,i0\nS=0.7500,-1.2990;0,0,i0\nC=2.2500,-1.2990;0,0,i2\nC=3.0000,0.0000;0,0,i2\nC=2.2500,1.2990;0,0,i2\nS=0.7500,1.2990;0,0,i0\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-1=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[1,3-dithiane]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="9">\n<Cell id="1"><![CDATA[SketchEl!(7,6)\nX=0.0000,0.0000;0,0,i0\nC=1.5000,0.0000;0,0,i0\nO=2.2500,1.2990;0,0,i0\nC=2.2500,-1.2990;0,0,i0\nC=3.0000,-2.5981;0,0,i3\nC=3.5490,-0.5490;0,0,i3\nC=0.9510,-2.0490;0,0,i3\n1-2=1,0\n2-3=2,0\n2-4=1,0\n4-5=1,0\n4-6=1,0\n4-7=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[Piv]]></Cell>\n</Row>\n<Row id="10">\n<Cell id="1"><![CDATA[SketchEl!(11,11)\nC=8.5563,4.7294;0,0,i1\nC=9.8554,3.9794;0,0,i1\nC=9.8554,2.4794;0,0,i1\nC=8.5563,1.7294;0,0,i1\nC=7.2573,2.4794;0,0,i1\nC=7.2573,3.9794;0,0,i0\nC=5.9582,4.7294;0,0,i2\nO=4.6592,3.9794;0,0,i0\nC=3.3602,4.7294;0,0,i0\nX=2.0611,3.9794;0,0,i0\nO=3.3602,6.2294;0,0,i0\n1-2=2,0\n2-3=1,0\n3-4=2,0\n4-5=1,0\n5-6=2,0\n6-1=1,0\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n9-11=2,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[Cbz]]></Cell>\n</Row>\n<Row id="11">\n<Cell id="1"><![CDATA[SketchEl!(18,20)\nC=7.2573,3.9794;0,0,i1\nC=5.9582,4.7294;0,0,i2\nO=4.6592,3.9794;0,0,i0\nC=3.3602,4.7294;0,0,i0\nX=2.0611,3.9794;0,0,i0\nO=3.3602,6.2294;0,0,i0\nC=7.4141,2.4876;0,0,i0\nC=8.8814,2.1758;0,0,i0\nC=9.6313,3.4748;0,0,i0\nC=8.6276,4.5895;0,0,i0\nC=11.0985,3.7867;0,0,i1\nC=11.5620,5.2133;0,0,i1\nC=10.5583,6.3280;0,0,i1\nC=9.0911,6.0161;0,0,i1\nC=6.4105,1.3729;0,0,i1\nC=6.8740,-0.0537;0,0,i1\nC=8.3412,-0.3655;0,0,i1\nC=9.3449,0.7492;0,0,i1\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n4-6=2,0\n1-7=1,0\n7-8=2,0\n8-9=1,0\n9-10=2,0\n10-1=1,0\n9-11=1,0\n11-12=2,0\n12-13=1,0\n13-14=2,0\n14-10=1,0\n7-15=1,0\n15-16=2,0\n16-17=1,0\n17-18=2,0\n18-8=1,0\n!End\n]]></Cell>\n<Cell id="2"></Cell>\n<Cell id="3"><![CDATA[FMOC]]></Cell>\n</Row>\n</Content>\n</DataSheet>\n',nonplrings:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n <Summary>\n  <Title>Non-planar Rings</Title>\n  <Description><![CDATA[]]></Description>\n </Summary>\n <Header nrows="12" ncols="3">\n  <Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n  <Column name="Name" type="string" id="2">Template name</Column>\n  <Column name="Abbrev" type="string" id="3">Abbreviation code</Column>\n </Header>\n <Content>\n  <Row id="1">\n   <Cell id="1"><![CDATA[SketchEl!(6,7)\nC=-6.0428,5.1152;0,0,i1\nC=-5.8360,7.2412;0,0,i2\nC=-4.9821,6.1759;0,0,i1\nC=-3.5332,5.7877;0,0,i2\nC=-4.3230,4.4890;0,0,i2\nC=-7.3398,5.1300;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n1-5=1,0\n5-4=1,0\n1-6=1,0\n3-6=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[5-bridge-1]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="2">\n   <Cell id="1"><![CDATA[SketchEl!(7,8)\nC=-6.1000,5.0000;0,0,i2\nC=-4.8010,5.7500;0,0,i1\nC=-6.1000,3.5000;0,0,i2\nC=-4.8010,4.2500;0,0,i1\nC=-3.5019,5.0000;0,0,i2\nC=-3.5019,3.5000;0,0,i2\nC=-4.0510,6.8490;0,0,i2\n1-2=1,0\n1-3=1,0\n3-4=1,0\n2-5=1,0\n4-6=1,0\n6-5=1,0\n4-7=1,0\n2-7=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[6-bridge-1]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="3">\n   <Cell id="1"><![CDATA[SketchEl!(8,9)\nC=-6.1000,5.0000;0,0,i2\nC=-4.8010,5.7500;0,0,i1\nC=-6.1000,3.5000;0,0,i2\nC=-4.8010,4.2500;0,0,i1\nC=-3.5019,5.0000;0,0,i2\nC=-3.5019,3.5000;0,0,i2\nC=-4.5010,6.7990;0,0,i2\nC=-3.8510,5.7490;0,0,i2\n1-2=1,0\n1-3=1,0\n3-4=1,0\n2-5=1,0\n4-6=1,0\n6-5=1,0\n2-7=1,0\n4-8=1,0\n7-8=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[6-bridge-2]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="4">\n   <Cell id="1"><![CDATA[SketchEl!(8,9)\nC=-6.1177,3.0660;0,0,i2\nC=-5.3677,4.3650;0,0,i1\nC=-5.3677,1.7670;0,0,i2\nC=-4.6177,3.0660;0,0,i1\nC=-3.4177,4.2651;0,0,i2\nC=-3.6177,3.0660;0,0,i2\nC=-5.2677,5.6918;0,0,i2\nC=-2.3186,2.3160;0,0,i2\n1-2=1,0\n1-3=1,0\n3-4=1,0\n2-5=1,0\n4-6=1,0\n4-7=1,0\n2-7=1,0\n6-8=1,0\n8-5=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[7-bridge-1]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="5">\n   <Cell id="1"><![CDATA[SketchEl!(9,10)\nC=-6.1177,3.0660;0,0,i2\nC=-5.3677,4.3650;0,0,i1\nC=-5.3677,1.7670;0,0,i2\nC=-4.6177,3.0660;0,0,i1\nC=-3.4177,4.2651;0,0,i2\nC=-3.6177,3.0660;0,0,i2\nC=-5.6177,5.8418;0,0,i2\nC=-2.3186,2.3160;0,0,i2\nC=-4.9000,5.5000;0,0,i2\n1-2=1,0\n1-3=1,0\n3-4=1,0\n2-5=1,0\n4-6=1,0\n2-7=1,0\n6-8=1,0\n8-5=1,0\n4-9=1,0\n7-9=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[7-bridge-2]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="6">\n   <Cell id="1"><![CDATA[SketchEl!(9,10)\nC=-2.7481,2.7510;0,0,i2\nC=-1.4491,3.1510;0,0,i2\nC=-1.9981,4.0500;0,0,i2\nC=-0.1500,2.4010;0,0,i1\nC=-0.6991,3.3000;0,0,i1\nC=0.6000,4.0500;0,0,i2\nC=-0.4491,1.1500;0,0,i2\nC=0.3078,0.9726;0,0,i2\nC=-1.1922,-0.1265;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n6-5=1,0\n4-6=1,0\n5-7=1,0\n4-8=1,0\n8-9=1,0\n7-9=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[6-bridge-3]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="7">\n   <Cell id="1"><![CDATA[SketchEl!(10,11)\nC=-2.8297,-3.0097;0,0,i2\nC=-2.5266,-1.6847;0,0,i2\nC=-3.5797,-1.7107;0,0,i2\nC=-1.2275,-0.9347;0,0,i1\nC=-2.2806,-0.9607;0,0,i1\nC=-2.2806,0.5394;0,0,i2\nC=-0.2937,-1.8192;0,0,i2\nC=0.4384,-1.1524;0,0,i2\nC=0.4402,-3.1010;0,0,i2\nC=1.1902,-1.8019;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n6-5=1,0\n4-6=1,0\n5-7=1,0\n4-8=1,0\n7-9=1,0\n9-10=1,0\n10-8=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[7-bridge-3]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="8">\n   <Cell id="1"><![CDATA[SketchEl!(10,11)\nC=-5.9491,0.8000;0,0,i2\nC=-7.2481,0.0500;0,0,i2\nC=-7.2481,-1.4500;0,0,i2\nC=-5.9491,-2.2000;0,0,i2\nC=-4.6500,-1.4500;0,0,i1\nC=-4.6500,0.0500;0,0,i1\nC=-3.2287,0.5194;0,0,i2\nC=-2.3463,-0.6889;0,0,i2\nC=-3.2221,-1.9093;0,0,i2\nC=-3.9000,1.3490;0,0,i2\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n6-1=1,0\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-5=1,0\n6-10=1,0\n5-10=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[9-bridge-1]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="9">\n   <Cell id="1"><![CDATA[SketchEl!(11,12)\nC=-4.9010,5.1000;0,0,i2\nC=-6.2000,4.3500;0,0,i2\nC=-6.2000,2.8500;0,0,i2\nC=-4.9010,2.1000;0,0,i2\nC=-3.6019,2.8500;0,0,i1\nC=-3.6019,4.3500;0,0,i1\nC=-2.3029,5.1000;0,0,i2\nC=-2.3029,2.1000;0,0,i2\nC=-1.0038,2.8500;0,0,i2\nC=-1.0038,4.3500;0,0,i2\nC=-2.8519,5.6490;0,0,i2\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n6-1=1,0\n6-7=1,0\n5-8=1,0\n8-9=1,0\n9-10=1,0\n10-7=1,0\n6-11=1,0\n5-11=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[10-bridge-1]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="10">\n   <Cell id="1"><![CDATA[SketchEl!(12,13)\nC=-5.1991,3.1000;0,0,i2\nC=-6.4981,2.3500;0,0,i2\nC=-6.4981,0.8500;0,0,i2\nC=-5.1991,0.1000;0,0,i2\nC=-3.9000,0.8500;0,0,i1\nC=-3.9000,2.3500;0,0,i1\nC=-2.7265,3.2785;0,0,i2\nC=-2.7252,-0.0840;0,0,i2\nC=-1.2664,2.9421;0,0,i2\nC=-0.6227,1.5908;0,0,i2\nC=-1.2816,0.2423;0,0,i2\nC=-4.6500,3.6490;0,0,i2\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n6-1=1,0\n5-8=1,0\n6-7=1,0\n9-7=1,0\n9-10=1,0\n10-11=1,0\n11-8=1,0\n6-12=1,0\n5-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[11-bridge-1]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="11">\n   <Cell id="1"><![CDATA[SketchEl!(8,12)\nC=-4.3500,3.6500;0,0,i1\nC=-4.3500,2.1500;0,0,i1\nC=-2.8500,2.1500;0,0,i1\nC=-2.8500,3.6500;0,0,i1\nC=-3.5510,4.2000;0,0,i1\nC=-2.0510,4.2000;0,0,i1\nC=-2.0510,2.7000;0,0,i1\nC=-3.5510,2.7000;0,0,i1\n1-2=1,0\n2-3=1,0\n3-4=1,0\n1-4=1,0\n1-5=1,0\n4-6=1,0\n3-7=1,0\n2-8=1,0\n8-5=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cubane]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="12">\n   <Cell id="1"><![CDATA[SketchEl!(10,12)\nC=-5.1000,-1.5490;0,0,i2\nC=-3.8010,-1.1490;0,0,i1\nC=-4.3500,-0.2500;0,0,i1\nC=-2.5019,-1.8990;0,0,i2\nC=-3.0510,-1.0000;0,0,i2\nC=-1.7519,-0.2500;0,0,i1\nC=-4.3500,1.2500;0,0,i2\nC=-3.8010,0.3510;0,0,i2\nC=-1.7519,1.2500;0,0,i2\nC=-3.0510,2.0000;0,0,i1\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n6-5=1,0\n4-6=1,0\n3-7=1,0\n2-8=1,0\n6-9=1,0\n7-10=1,0\n9-10=1,0\n8-10=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[adamantane]]></Cell>\n   <Cell id="3"/>\n  </Row>\n </Content>\n</DataSheet>\n',largerings:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n<Summary>\n<Title>Large Rings</Title>\n<Description><![CDATA[]]></Description>\n</Summary>\n<Header nrows="11" ncols="3">\n<Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n<Column name="Name" type="string" id="2">Template name</Column>\n<Column name="Abbrev" type="string" id="3">Abbreviation code</Column>\n</Header>\n<Content>\n<Row id="1">\n<Cell id="1"><![CDATA[SketchEl!(9,9)\nC=2.0428,-18.6516;0,0,i2\nC=1.7880,-17.1633;0,0,i2\nC=2.5387,-15.8790;0,0,i2\nC=3.1939,-19.6177;0,0,i2\nC=4.7060,-19.6177;0,0,i2\nC=5.8535,-18.6576;0,0,i2\nC=6.1088,-17.1863;0,0,i2\nC=3.9528,-15.3740;0,0,i2\nC=5.3645,-15.8923;0,0,i2\n1-2=1,0\n2-3=1,0\n1-4=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n8-3=1,0\n8-9=1,0\n9-7=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-9]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="2">\n<Cell id="1"><![CDATA[SketchEl!(10,10)\nC=-3.5491,5.1000;0,0,i2\nC=-4.8481,4.3500;0,0,i2\nC=-4.8481,2.8500;0,0,i2\nC=-3.5491,2.1000;0,0,i2\nC=-2.2500,2.8500;0,0,i2\nC=-2.2500,4.3500;0,0,i2\nC=-0.9509,2.1000;0,0,i2\nC=0.3481,2.8500;0,0,i2\nC=0.3481,4.3500;0,0,i2\nC=-0.9509,5.1000;0,0,i2\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n6-1=1,0\n8-9=1,0\n8-7=1,0\n9-10=1,0\n10-6=1,0\n5-7=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-10]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="3">\n<Cell id="1"><![CDATA[SketchEl!(11,11)\nC=-7.7858,2.5448;0,0,i2\nC=-7.8013,1.1000;0,0,i2\nC=-6.4244,0.8579;0,0,i2\nC=-5.3288,-0.5811;0,0,i2\nC=-4.3565,0.8361;0,0,i2\nC=-2.9104,1.0882;0,0,i2\nC=-2.8964,2.5470;0,0,i2\nC=-4.2864,2.8806;0,0,i2\nC=-4.6033,4.2815;0,0,i2\nC=-6.0450,4.2766;0,0,i2\nC=-6.3710,2.8699;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n11-1=1,0\n4-5=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-11]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="4">\n<Cell id="1"><![CDATA[SketchEl!(12,12)\nC=1.1614,6.9975;0,0,i2\nC=2.4604,6.2475;0,0,i2\nC=-0.1376,6.2475;0,0,i2\nC=-0.1376,4.7475;0,0,i2\nC=-1.4367,3.9975;0,0,i2\nC=-1.4367,2.4975;0,0,i2\nC=-0.1376,1.7475;0,0,i2\nC=1.1614,2.4975;0,0,i2\nC=2.4604,1.7475;0,0,i2\nC=3.7595,2.4975;0,0,i2\nC=3.7595,3.9975;0,0,i2\nC=2.4604,4.7475;0,0,i2\n1-2=1,0\n1-3=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n11-12=1,0\n12-2=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-12]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="5">\n<Cell id="1"><![CDATA[SketchEl!(12,12)\nC=0.2503,-1.0236;0,0,i2\nC=1.7491,-1.0236;0,0,i2\nC=2.0788,0.4428;0,0,i2\nC=3.5325,0.7862;0,0,i2\nC=3.5274,2.2829;0,0,i2\nC=2.0508,2.6151;0,0,i2\nC=1.7054,4.0671;0,0,i2\nC=0.1996,4.0655;0,0,i2\nC=-0.1373,2.6137;0,0,i2\nC=-1.5850,2.2710;0,0,i2\nC=-1.5640,0.7758;0,0,i2\nC=-0.0938,0.4547;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n11-12=1,0\n12-1=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-12]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="6">\n<Cell id="1"><![CDATA[SketchEl!(13,13)\nC=-9.0085,1.2181;0,0,i2\nC=-8.4085,2.6671;0,0,i2\nC=-6.9085,2.6671;0,0,i2\nC=-6.3085,1.2181;0,0,i2\nC=-4.8595,0.6181;0,0,i2\nC=-4.8595,-0.8819;0,0,i2\nC=-6.3085,-1.4819;0,0,i2\nC=-9.0085,-1.4819;0,0,i2\nC=-10.4575,-0.8819;0,0,i2\nC=-10.4575,0.6181;0,0,i2\nC=-9.0085,-2.9819;0,0,i2\nC=-6.3085,-2.9819;0,0,i2\nC=-7.7095,-3.7319;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n8-9=1,0\n9-10=1,0\n10-1=1,0\n8-11=1,0\n7-12=1,0\n11-13=1,0\n13-12=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-13]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="7">\n<Cell id="1"><![CDATA[SketchEl!(14,14)\nC=6.9101,-5.9857;0,0,i2\nC=7.5101,-4.5367;0,0,i2\nC=9.0101,-4.5367;0,0,i2\nC=9.6101,-5.9857;0,0,i2\nC=9.6101,-8.6857;0,0,i2\nC=9.0101,-10.1347;0,0,i2\nC=7.5101,-10.1347;0,0,i2\nC=6.9101,-8.6857;0,0,i2\nC=5.4101,-5.9857;0,0,i2\nC=5.4101,-8.6857;0,0,i2\nC=11.1101,-8.6857;0,0,i2\nC=11.1101,-5.9857;0,0,i2\nC=11.8601,-7.3867;0,0,i2\nC=4.6601,-7.2847;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n1-9=1,0\n8-10=1,0\n5-11=1,0\n4-12=1,0\n11-13=1,0\n13-12=1,0\n9-14=1,0\n14-10=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-14]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="8">\n<Cell id="1"><![CDATA[SketchEl!(15,15)\nC=22.1615,-1.5864;0,0,i2\nC=23.3877,-0.7311;0,0,i2\nC=20.9592,-0.7218;0,0,i2\nC=22.9828,0.6878;0,0,i2\nC=19.7379,-1.5763;0,0,i2\nC=24.1796,1.5700;0,0,i2\nC=18.5357,-0.7167;0,0,i2\nC=23.7246,3.0381;0,0,i2\nC=18.9534,0.7033;0,0,i2\nC=22.2021,3.0764;0,0,i2\nC=17.7398,1.6155;0,0,i2\nC=21.7384,4.5021;0,0,i2\nC=18.2148,3.0479;0,0,i2\nC=20.2213,4.5021;0,0,i2\nC=19.7018,3.0711;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n4-6=1,0\n5-7=1,0\n6-8=1,0\n7-9=1,0\n8-10=1,0\n9-11=1,0\n10-12=1,0\n11-13=1,0\n12-14=1,0\n13-15=1,0\n14-15=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-15]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="9">\n<Cell id="1"><![CDATA[SketchEl!(16,16)\nC=-2.3295,-6.3508;0,0,i2\nC=-2.3295,-7.8765;0,0,i2\nC=-1.0175,-8.6353;0,0,i2\nC=0.3099,-7.8765;0,0,i2\nC=2.9416,-6.3508;0,0,i2\nC=2.9416,-7.8765;0,0,i2\nC=1.6218,-8.6353;0,0,i2\nC=-1.0150,-4.2041;0,0,i2\nC=0.2910,-3.4545;0,0,i2\nC=1.6173,-4.2041;0,0,i2\nC=-2.3088,-3.4429;0,0,i2\nC=-3.6056,-4.1961;0,0,i2\nC=-3.6212,-5.5973;0,0,i2\nC=2.9184,-3.4366;0,0,i2\nC=4.2222,-4.1763;0,0,i2\nC=4.2483,-5.5976;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n5-6=1,0\n6-7=1,0\n7-4=1,0\n8-9=1,0\n9-10=1,0\n11-12=1,0\n8-11=1,0\n1-13=1,0\n12-13=1,0\n14-15=1,0\n10-14=1,0\n5-16=1,0\n15-16=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-16]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="10">\n<Cell id="1"><![CDATA[SketchEl!(18,18)\nC=14.0401,-6.5516;0,0,i2\nC=14.7839,-7.8398;0,0,i2\nC=13.8355,-9.0080;0,0,i2\nC=14.6732,-10.2249;0,0,i2\nC=13.8569,-11.4861;0,0,i2\nC=12.3571,-11.2554;0,0,i2\nC=11.7609,-12.6417;0,0,i2\nC=10.2552,-12.6811;0,0,i2\nC=9.6255,-11.3345;0,0,i2\nC=8.1419,-11.5631;0,0,i2\nC=7.3964,-10.2751;0,0,i2\nC=8.3448,-9.1199;0,0,i2\nC=7.5032,-7.8976;0,0,i2\nC=8.3106,-6.6466;0,0,i2\nC=9.8063,-6.8716;0,0,i2\nC=10.4049,-5.4658;0,0,i2\nC=11.9207,-5.4290;0,0,i2\nC=12.5403,-6.7723;0,0,i2\n1-2=1,0\n2-3=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n3-4=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n7-8=1,0\n12-13=1,0\n13-14=1,0\n14-15=1,0\n11-12=1,0\n16-17=1,0\n17-18=1,0\n15-16=1,0\n1-18=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-18]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="11">\n<Cell id="1"><![CDATA[SketchEl!(20,20)\nC=23.0039,-8.7037;0,0,i2\nC=21.6788,-9.4637;0,0,i2\nC=21.6617,-10.9743;0,0,i2\nC=22.9767,-11.7478;0,0,i2\nC=24.2738,-14.0464;0,0,i2\nC=22.9667,-13.2731;0,0,i2\nC=28.1300,-11.8325;0,0,i2\nC=28.1300,-13.3322;0,0,i2\nC=26.8927,-14.0616;0,0,i2\nC=28.1261,-8.8196;0,0,i2\nC=29.4195,-9.5784;0,0,i2\nC=29.4306,-11.0859;0,0,i2\nC=26.8898,-15.5611;0,0,i2\nC=25.5812,-16.3118;0,0,i2\nC=24.2488,-15.5459;0,0,i2\nC=25.5520,-7.2815;0,0,i2\nC=26.8533,-6.5619;0,0,i2\nC=28.1325,-7.3250;0,0,i2\nC=24.2475,-6.5288;0,0,i2\nC=22.9549,-7.2639;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n5-6=1,0\n6-4=1,0\n7-8=1,0\n8-9=1,0\n10-11=1,0\n7-12=1,0\n11-12=1,0\n13-14=1,0\n9-13=1,0\n5-15=1,0\n15-14=1,0\n16-17=1,0\n10-18=1,0\n17-18=1,0\n19-20=1,0\n16-19=1,0\n20-1=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclo-20]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n</Content>\n</DataSheet>\n',crownethers:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n <Summary>\n  <Title>Crown Ethers</Title>\n  <Description><![CDATA[]]></Description>\n </Summary>\n <Header nrows="10" ncols="3">\n  <Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n  <Column name="Name" type="string" id="2">Template name</Column>\n  <Column name="Abbrev" type="string" id="3">Abbreviation code</Column>\n </Header>\n <Content>\n  <Row id="1">\n   <Cell id="1"><![CDATA[SketchEl!(12,12)\nO=-3.3500,6.9000;0,0,i0\nC=-2.7500,8.3490;0,0,i2\nC=-1.2500,8.3490;0,0,i2\nO=-0.6500,6.9000;0,0,i0\nC=0.7990,6.3000;0,0,i2\nC=0.7990,4.8000;0,0,i2\nO=-0.6500,4.2000;0,0,i0\nC=-1.2500,2.7510;0,0,i2\nC=-2.7500,2.7510;0,0,i2\nO=-3.3500,4.2000;0,0,i0\nC=-4.7990,4.8000;0,0,i2\nC=-4.7990,6.3000;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n11-12=1,0\n12-1=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[12-crown-4]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="2">\n   <Cell id="1"><![CDATA[SketchEl!(13,13)\nO=-9.0085,1.2181;0,0,i0\nC=-8.4085,2.6671;0,0,i2\nC=-6.9085,2.6671;0,0,i2\nO=-6.3085,1.2181;0,0,i0\nC=-4.8595,0.6181;0,0,i2\nC=-4.8595,-0.8819;0,0,i2\nO=-6.3085,-1.4819;0,0,i0\nO=-9.0085,-1.4819;0,0,i0\nC=-10.4575,-0.8819;0,0,i2\nC=-10.4575,0.6181;0,0,i2\nC=-9.0085,-2.9819;0,0,i2\nC=-6.3085,-2.9819;0,0,i2\nC=-7.7095,-3.7319;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n8-9=1,0\n9-10=1,0\n10-1=1,0\n8-11=1,0\n7-12=1,0\n11-13=1,0\n13-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[13-crown-4]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="3">\n   <Cell id="1"><![CDATA[SketchEl!(14,14)\nO=6.9101,-5.9857;0,0,i0\nC=7.5101,-4.5367;0,0,i2\nC=9.0101,-4.5367;0,0,i2\nO=9.6101,-5.9857;0,0,i0\nO=9.6101,-8.6857;0,0,i0\nC=9.0101,-10.1347;0,0,i2\nC=7.5101,-10.1347;0,0,i2\nO=6.9101,-8.6857;0,0,i0\nC=5.4101,-5.9857;0,0,i2\nC=5.4101,-8.6857;0,0,i2\nC=11.1101,-8.6857;0,0,i2\nC=11.1101,-5.9857;0,0,i2\nC=11.8601,-7.3867;0,0,i2\nC=4.6601,-7.2847;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n1-9=1,0\n8-10=1,0\n5-11=1,0\n4-12=1,0\n11-13=1,0\n13-12=1,0\n9-14=1,0\n14-10=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[14-crown-4]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="4">\n   <Cell id="1"><![CDATA[SketchEl!(15,15)\nC=22.1615,-1.5864;0,0,i2\nC=23.3877,-0.7311;0,0,i2\nO=20.9592,-0.7218;0,0,i0\nO=22.9828,0.6878;0,0,i0\nC=19.7379,-1.5763;0,0,i2\nC=24.1796,1.5700;0,0,i2\nC=18.5357,-0.7167;0,0,i2\nC=23.7246,3.0381;0,0,i2\nO=18.9534,0.7033;0,0,i0\nO=22.2021,3.0764;0,0,i0\nC=17.7398,1.6155;0,0,i2\nC=21.7384,4.5021;0,0,i2\nC=18.2148,3.0479;0,0,i2\nC=20.2213,4.5021;0,0,i2\nO=19.7018,3.0711;0,0,i0\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n4-6=1,0\n5-7=1,0\n6-8=1,0\n7-9=1,0\n8-10=1,0\n9-11=1,0\n10-12=1,0\n11-13=1,0\n12-14=1,0\n13-15=1,0\n14-15=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[15-crown-5]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="5">\n   <Cell id="1"><![CDATA[SketchEl!(16,16)\nC=-3.2703,-7.3624;0,0,i2\nC=-4.4642,-6.4905;0,0,i2\nO=-3.7283,-8.7862;0,0,i0\nO=-5.6803,-7.3450;0,0,i0\nC=-2.5315,-9.6420;0,0,i2\nC=-6.8842,-6.4872;0,0,i2\nC=-2.8996,-11.0971;0,0,i2\nC=-8.0816,-7.3361;0,0,i2\nO=-4.4208,-11.4135;0,0,i0\nO=-7.6748,-8.7819;0,0,i0\nC=-4.4492,-12.9087;0,0,i2\nC=-8.9100,-9.5864;0,0,i2\nC=-5.8087,-13.6602;0,0,i2\nC=-8.6136,-11.0608;0,0,i2\nC=-7.1438,-12.8902;0,0,i2\nO=-7.1341,-11.4135;0,0,i0\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n4-6=1,0\n5-7=1,0\n6-8=1,0\n7-9=1,0\n8-10=1,0\n9-11=1,0\n10-12=1,0\n11-13=1,0\n12-14=1,0\n13-15=1,0\n14-16=1,0\n15-16=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[16-crown-5]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="6">\n   <Cell id="1"><![CDATA[SketchEl!(17,17)\nC=11.3913,-8.5218;0,0,i2\nO=9.9653,-8.8821;0,0,i0\nC=8.6597,-11.0126;0,0,i2\nO=7.4967,-10.0548;0,0,i0\nC=6.3270,-10.9800;0,0,i2\nC=5.0002,-10.3582;0,0,i2\nO=4.9982,-8.8783;0,0,i0\nC=3.5605,-8.5538;0,0,i2\nC=3.2430,-7.1220;0,0,i2\nC=4.4248,-6.1867;0,0,i2\nO=5.8590,-6.7660;0,0,i0\nC=6.6561,-5.4870;0,0,i2\nC=8.2017,-5.4870;0,0,i2\nO=9.0164,-6.7596;0,0,i0\nC=10.4452,-6.1465;0,0,i2\nC=11.6565,-7.0603;0,0,i2\nC=9.9960,-10.3691;0,0,i2\n5-6=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n6-7=1,0\n11-12=1,0\n12-13=1,0\n13-14=1,0\n10-11=1,0\n15-16=1,0\n14-15=1,0\n16-1=1,0\n2-17=1,0\n17-3=1,0\n1-2=1,0\n3-4=1,0\n4-5=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[17-crown-5]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="7">\n   <Cell id="1"><![CDATA[SketchEl!(18,18)\nC=25.7638,-7.1614;0,0,i2\nC=25.0080,-8.4698;0,0,i2\nO=23.5267,-8.2690;0,0,i0\nC=22.8858,-9.6176;0,0,i2\nC=21.3709,-9.5699;0,0,i2\nO=20.7705,-8.1782;0,0,i0\nC=19.2614,-8.3591;0,0,i2\nC=18.4799,-7.0636;0,0,i2\nO=19.3514,-5.8621;0,0,i0\nC=18.4463,-4.6854;0,0,i2\nC=19.2046,-3.3933;0,0,i2\nO=20.6839,-3.5899;0,0,i0\nC=21.3018,-2.2555;0,0,i2\nC=22.7925,-2.2628;0,0,i2\nO=23.3883,-3.6550;0,0,i0\nC=24.8877,-3.4674;0,0,i2\nC=25.6817,-4.7676;0,0,i2\nO=24.8469,-5.9802;0,0,i0\n1-2=1,0\n2-3=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n3-4=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n7-8=1,0\n12-13=1,0\n13-14=1,0\n14-15=1,0\n11-12=1,0\n16-17=1,0\n17-18=1,0\n15-16=1,0\n1-18=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[18-crown-6]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="8">\n   <Cell id="1"><![CDATA[SketchEl!(20,20)\nC=-3.4089,-21.0677;0,0,i2\nC=-4.1767,-22.3338;0,0,i2\nC=-4.1760,-19.7823;0,0,i2\nO=-5.6753,-22.3687;0,0,i0\nO=-5.6837,-19.8385;0,0,i0\nC=-5.9548,-23.7442;0,0,i2\nC=-5.9813,-18.3858;0,0,i2\nC=-7.3810,-24.2230;0,0,i2\nC=-7.4086,-17.9180;0,0,i2\nO=-8.5195,-23.2256;0,0,i0\nO=-8.5335,-18.9110;0,0,i0\nC=-9.6750,-17.9220;0,0,i2\nC=-11.0728,-23.7403;0,0,i2\nC=-11.1043,-18.4009;0,0,i2\nO=-11.3732,-22.3272;0,0,i0\nO=-11.3858,-19.8551;0,0,i0\nC=-12.8889,-22.3529;0,0,i2\nC=-12.9024,-19.8027;0,0,i2\nC=-13.6729,-21.0850;0,0,i2\nC=-9.6554,-24.2077;0,0,i2\n1-2=1,0\n2-4=1,0\n3-5=1,0\n4-6=1,0\n5-7=1,0\n6-8=1,0\n7-9=1,0\n8-10=1,0\n9-11=1,0\n11-12=1,0\n13-15=1,0\n14-16=1,0\n15-17=1,0\n16-18=1,0\n17-19=1,0\n18-19=1,0\n12-14=1,0\n13-20=1,0\n10-20=1,0\n3-1=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[20-crown-6]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="9">\n   <Cell id="1"><![CDATA[SketchEl!(21,21)\nC=5.3181,-17.4804;0,0,i2\nC=3.8183,-17.4647;0,0,i2\nO=3.1475,-18.8055;0,0,i0\nC=1.6753,-18.4404;0,0,i2\nC=0.7284,-19.5857;0,0,i2\nO=1.3610,-20.9456;0,0,i0\nC=0.1741,-21.8748;0,0,i2\nC=0.5101,-23.3287;0,0,i2\nO=1.9785,-23.6452;0,0,i0\nC=1.9855,-25.1429;0,0,i2\nC=3.3325,-25.7906;0,0,i2\nO=4.5146,-24.8501;0,0,i0\nC=5.6870,-25.8137;0,0,i2\nC=7.0359,-25.1826;0,0,i2\nC=8.3693,-19.6515;0,0,i2\nC=7.4283,-18.4879;0,0,i2\nO=5.9620,-18.8325;0,0,i0\nO=7.0819,-23.6850;0,0,i0\nO=7.7239,-20.9997;0,0,i0\nC=8.5502,-23.3847;0,0,i2\nC=8.9031,-21.9421;0,0,i2\n1-2=1,0\n2-3=1,0\n4-5=1,0\n5-6=1,0\n6-7=1,0\n3-4=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n7-8=1,0\n12-13=1,0\n13-14=1,0\n11-12=1,0\n15-16=1,0\n16-17=1,0\n1-17=1,0\n14-18=1,0\n19-15=1,0\n18-20=1,0\n19-21=1,0\n20-21=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[21-crown-7]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="10">\n   <Cell id="1"><![CDATA[SketchEl!(24,24)\nC=20.7446,-27.4663;0,0,i2\nO=21.4914,-26.1584;0,0,i0\nC=19.2274,-27.4663;0,0,i2\nC=22.9335,-26.6476;0,0,i2\nO=18.5013,-26.1469;0,0,i0\nC=24.0269,-25.6099;0,0,i2\nC=17.0704,-26.6026;0,0,i2\nO=23.6289,-24.1676;0,0,i0\nC=15.9870,-25.5356;0,0,i2\nC=24.9576,-23.4669;0,0,i2\nO=16.4266,-24.0844;0,0,i0\nC=24.9616,-21.9609;0,0,i2\nC=15.1053,-23.3507;0,0,i2\nO=23.6462,-21.2624;0,0,i0\nC=15.1453,-21.8561;0,0,i2\nC=24.0717,-19.8181;0,0,i2\nO=16.4802,-21.1978;0,0,i0\nC=22.9846,-18.8108;0,0,i2\nC=16.0898,-19.7657;0,0,i2\nO=21.5453,-19.2991;0,0,i0\nC=17.1862,-18.7823;0,0,i2\nC=20.8284,-18.0103;0,0,i2\nO=18.5947,-19.2887;0,0,i0\nC=19.3270,-18.0074;0,0,i2\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n4-6=1,0\n5-7=1,0\n6-8=1,0\n7-9=1,0\n8-10=1,0\n9-11=1,0\n10-12=1,0\n11-13=1,0\n12-14=1,0\n13-15=1,0\n14-16=1,0\n15-17=1,0\n16-18=1,0\n17-19=1,0\n18-20=1,0\n19-21=1,0\n20-22=1,0\n21-23=1,0\n22-24=1,0\n23-24=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[24-crown-8]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n </Content>\n</DataSheet>\n',ligmonodent:'<DataSheet><Summary><Title>Monodentate Ligands</Title><Description><![CDATA[]]></Description></Summary><Extension/><Header nrows="10" ncols="3"><Column id="1" name="Molecule" type="molecule">Molecular structure</Column><Column id="2" name="Name" type="string">Template name</Column><Column id="3" name="Abbrev" type="string">Optional abbreviation</Column></Header><Content><Row id="1"><Cell id="1"><![CDATA[SketchEl!(20,22)\nP=0.0000,0.0000;0,0,i0\nC=0.0000,2.0000;0,0,i0\nC=2.0000,-0.0000;0,0,i0\nC=-0.0000,-2.0000;0,0,i0\nC=-1.2990,2.7500;0,0,i1\nC=1.2990,2.7500;0,0,i1\nC=-1.2990,4.2500;0,0,i1\nC=0.0000,5.0000;0,0,i1\nC=1.2990,4.2500;0,0,i1\nC=2.7500,1.2990;0,0,i1\nC=2.7500,-1.2990;0,0,i1\nC=4.2500,1.2990;0,0,i1\nC=5.0000,-0.0000;0,0,i1\nC=4.2500,-1.2990;0,0,i1\nC=1.2990,-2.7500;0,0,i1\nC=-1.2990,-2.7500;0,0,i1\nC=1.2990,-4.2500;0,0,i1\nC=-0.0000,-5.0000;0,0,i1\nC=-1.2990,-4.2500;0,0,i1\nX=-2.0000,0.0000;0,0,i0\n1-2=1,0\n1-3=1,0\n1-4=1,0\n2-5=1,0\n2-6=2,0\n5-7=2,0\n7-8=1,0\n8-9=2,0\n9-6=1,0\n3-10=1,0\n3-11=2,0\n10-12=2,0\n12-13=1,0\n13-14=2,0\n14-11=1,0\n4-15=1,0\n4-16=2,0\n15-17=2,0\n17-18=1,0\n18-19=2,0\n19-16=1,0\n1-20=0,0\n!End\n]]></Cell><Cell id="2"><![CDATA[triphenylphosphine]]></Cell><Cell id="3"><![CDATA[P|Ph{3}]]></Cell></Row><Row id="2"><Cell id="1"><![CDATA[SketchEl!(5,4)\nP=0.0000,0.0000;0,0,i0\nC=0.0000,1.5000;0,0,i3\nC=1.5000,-0.0000;0,0,i3\nC=-0.0000,-1.5000;0,0,i3\nX=-1.5000,0.0000;0,0,i0\n1-2=1,0\n1-3=1,0\n1-4=1,0\n1-5=0,0\n!End\n]]></Cell><Cell id="2"><![CDATA[trimethylphosphine]]></Cell><Cell id="3"><![CDATA[P|Me{3}]]></Cell></Row><Row id="3"><Cell id="1"><![CDATA[SketchEl!(8,8)\nX=-2.7000,3.9500;0,0,i0\nC=-1.2000,3.9500;0,0,i0\nN=-0.3200,2.7400;0,0,i0\nC=1.1100,3.2000;0,0,i1\nN=-0.3200,5.1600;0,0,i0\nC=1.1100,4.7000;0,0,i1\nC=-0.7853,6.5860;0,0,i3\nC=-0.7853,1.3140;0,0,i3\n1-2=2,0\n4-3=1,0\n3-2=1,0\n2-5=1,0\n5-6=1,0\n6-4=2,0\n5-7=1,0\n3-8=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[imidazolidine]]></Cell><Cell id="3"/></Row><Row id="4"><Cell id="1"><![CDATA[SketchEl!(3,2)\nX=-0.9000,0.3500;0,0,i0\nC=0.6000,0.3500;0,0,e0\nO=2.1000,0.3500;0,0,i0\n1-2=0,0\n2-3=2,0\n!End\n]]></Cell><Cell id="2"><![CDATA[carbonyl]]></Cell><Cell id="3"/></Row><Row id="5"><Cell id="1"><![CDATA[SketchEl!(6,5)\nX=-2.4000,1.9714;0,0,i0\nO=-0.9000,1.9714;0,0,i0\nC=-0.1500,3.2705;0,0,i2\nC=1.3500,3.2705;0,0,i3\nC=-0.1500,0.6724;0,0,i2\nC=1.3500,0.6724;0,0,i3\n1-2=0,0\n2-3=1,0\n3-4=1,0\n2-5=1,0\n5-6=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[diethylether]]></Cell><Cell id="3"><![CDATA[O|Et{2}]]></Cell></Row><Row id="6"><Cell id="1"><![CDATA[SketchEl!(6,6)\nX=-2.4000,1.9714;0,0,i0\nO=-0.9000,1.9714;0,0,i0\nC=-0.0200,0.7614;0,0,i2\nC=1.4100,1.2214;0,0,i2\nC=-0.0200,3.1814;0,0,i2\nC=1.4100,2.7214;0,0,i2\n1-2=0,0\n4-3=1,0\n3-2=1,0\n2-5=1,0\n5-6=1,0\n6-4=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[tetrahydrofuran]]></Cell><Cell id="3"><![CDATA[THF]]></Cell></Row><Row id="7"><Cell id="1"><![CDATA[SketchEl!(7,6)\nX=-1.0000,-0.9143;0,0,i0\nO=0.5000,-0.9143;0,0,i0\nC=2.0000,-0.9143;0,0,i0\nN=2.7500,-2.2133;0,0,i0\nC=4.2500,-2.2133;0,0,i3\nC=2.0000,-3.5124;0,0,i3\nH=2.7500,0.3848;0,0,i0\n1-2=0,0\n2-3=2,0\n3-4=1,0\n4-5=1,0\n4-6=1,0\n3-7=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[dimethylformamide]]></Cell><Cell id="3"><![CDATA[DMF]]></Cell></Row><Row id="8"><Cell id="1"><![CDATA[SketchEl!(5,4)\nX=-1.0000,-0.9143;0,0,i0\nO=0.5000,-0.9143;0,0,i0\nS=2.0000,-0.9143;0,0,i0\nC=2.7500,-2.2133;0,0,i3\nC=2.7500,0.3848;0,0,i3\n1-2=0,0\n2-3=2,0\n3-4=1,0\n3-5=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[dimethylsulfoxide]]></Cell><Cell id="3"><![CDATA[DMSO]]></Cell></Row><Row id="9"><Cell id="1"><![CDATA[SketchEl!(7,7)\nC=6.8500,0.0490;0,0,i1\nC=5.3500,0.0490;0,0,i1\nC=7.6000,-1.2500;0,0,i1\nN=4.6000,-1.2500;0,0,i0\nC=5.3500,-2.5490;0,0,i1\nC=6.8500,-2.5490;0,0,i1\nX=3.1000,-1.2500;0,0,i0\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n4-7=0,0\n!End\n]]></Cell><Cell id="2"><![CDATA[pyridine]]></Cell><Cell id="3"><![CDATA[Py]]></Cell></Row><Row id="10"><Cell id="1"><![CDATA[SketchEl!(22,24)\nX=0.0000,-0.1997;0,0,i0\nC=0.0000,1.9965;0,2,i0\nN=1.2135,2.8782;0,0,i0\nC=0.7500,4.3048;0,0,i1\nC=-0.7500,4.3048;0,0,i1\nN=-1.2135,2.8782;0,0,i0\nC=-2.7135,2.8782;0,0,i0\nC=2.7135,2.8782;0,0,i0\nC=-3.4635,4.1772;0,0,i0\nC=-4.9635,4.1772;0,0,i1\nC=-5.7135,2.8782;0,0,i1\nC=-4.9635,1.5791;0,0,i1\nC=-3.4635,1.5791;0,0,i0\nC=3.4635,1.5791;0,0,i0\nC=4.9635,1.5791;0,0,i1\nC=5.7135,2.8782;0,0,i1\nC=4.9635,4.1772;0,0,i1\nC=3.4635,4.1772;0,0,i0\n{^i}Pr=-2.7135,0.2801;0,0,i0,aSketchEl!(4\\002C3)\\000A*\\003D-6.4450\\002C2.0214\\003B0\\002C0\\002Ci0\\000AC\\003D-4.1950\\002C3.3204\\003B0\\002C0\\002Ci3\\000AC\\003D-4.1950\\002C0.7224\\003B0\\002C0\\002Ci3\\000AC\\003D-4.9450\\002C2.0214\\003B0\\002C0\\002Ci1\\000A4-2\\003D1\\002C0\\000A4-3\\003D1\\002C0\\000A4-1\\003D1\\002C0\\000A!End\\000A\n{^i}Pr=2.7135,0.2801;0,0,i0,aSketchEl!(4\\002C3)\\000A*\\003D-6.4450\\002C2.0214\\003B0\\002C0\\002Ci0\\000AC\\003D-4.1950\\002C3.3204\\003B0\\002C0\\002Ci3\\000AC\\003D-4.1950\\002C0.7224\\003B0\\002C0\\002Ci3\\000AC\\003D-4.9450\\002C2.0214\\003B0\\002C0\\002Ci1\\000A4-2\\003D1\\002C0\\000A4-3\\003D1\\002C0\\000A4-1\\003D1\\002C0\\000A!End\\000A\n{^i}Pr=2.7135,5.4763;0,0,i0,aSketchEl!(4\\002C3)\\000A*\\003D-6.4450\\002C2.0214\\003B0\\002C0\\002Ci0\\000AC\\003D-4.1950\\002C3.3204\\003B0\\002C0\\002Ci3\\000AC\\003D-4.1950\\002C0.7224\\003B0\\002C0\\002Ci3\\000AC\\003D-4.9450\\002C2.0214\\003B0\\002C0\\002Ci1\\000A4-2\\003D1\\002C0\\000A4-3\\003D1\\002C0\\000A4-1\\003D1\\002C0\\000A!End\\000A\n{^i}Pr=-2.7135,5.4763;0,0,i0,aSketchEl!(4\\002C3)\\000A*\\003D-6.4450\\002C2.0214\\003B0\\002C0\\002Ci0\\000AC\\003D-4.1950\\002C3.3204\\003B0\\002C0\\002Ci3\\000AC\\003D-4.1950\\002C0.7224\\003B0\\002C0\\002Ci3\\000AC\\003D-4.9450\\002C2.0214\\003B0\\002C0\\002Ci1\\000A4-2\\003D1\\002C0\\000A4-3\\003D1\\002C0\\000A4-1\\003D1\\002C0\\000A!End\\000A\n1-2=0,0\n2-3=1,0\n3-4=1,0\n4-5=2,0\n5-6=1,0\n6-2=1,0\n6-7=1,0\n3-8=1,0\n7-9=2,0\n9-10=1,0\n10-11=2,0\n11-12=1,0\n12-13=2,0\n13-7=1,0\n8-14=2,0\n14-15=1,0\n15-16=2,0\n16-17=1,0\n17-18=2,0\n18-8=1,0\n13-19=1,0\n14-20=1,0\n18-21=1,0\n9-22=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[IPr]]></Cell><Cell id="3"/></Row></Content></DataSheet>',ligbident:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n<Summary>\n<Title>Bidentate Ligands</Title>\n<Description><![CDATA[]]></Description>\n</Summary>\n<Header nrows="11" ncols="3">\n<Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n<Column name="Name" type="string" id="2">Template name</Column>\n<Column name="Abbrev" type="string" id="3">Optional abbreviation</Column>\n</Header>\n<Content>\n<Row id="1">\n<Cell id="1"><![CDATA[SketchEl!(13,15)\nC=2.7915,1.5000;0,0,i1\nC=4.0905,0.7500;0,0,i1\nC=1.4925,0.7500;0,0,i1\nC=4.0905,-0.7500;0,0,i1\nC=2.7915,-1.5000;0,0,i0\nN=1.4925,-0.7500;0,0,i0\nC=2.7915,-3.0000;0,0,i0\nC=4.0905,-3.7500;0,0,i1\nN=1.4925,-3.7500;0,0,i0\nC=4.0905,-5.2500;0,0,i1\nC=2.7915,-6.0000;0,0,i1\nC=1.4925,-5.2500;0,0,i1\nX=-1.1000,-2.2500;0,0,i0\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n5-7=1,0\n7-8=1,0\n7-9=2,0\n8-10=2,0\n10-11=1,0\n11-12=2,0\n12-9=1,0\n13-9=0,0\n13-6=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[bipyridine]]></Cell>\n<Cell id="3"><![CDATA[bipy]]></Cell>\n</Row>\n<Row id="2">\n<Cell id="1"><![CDATA[SketchEl!(13,15)\nC=2.7915,1.5000;0,0,i1\nC=4.0905,0.7500;0,0,i1\nC=1.4925,0.7500;0,0,i1\nC=4.0905,-0.7500;0,0,i1\nC=2.7915,-1.5000;0,0,i0\nN=1.4925,-0.7500;0,0,i0\nC=2.7915,-3.0000;0,0,i0\nC=4.0905,-3.7500;0,0,i1\nC=1.4925,-3.7500;0,0,i0\nC=4.0905,-5.2500;0,0,i1\nC=2.7915,-6.0000;0,0,i1\nC=1.4925,-5.2500;0,0,i1\nX=-1.1000,-2.2500;0,0,i0\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n5-7=1,0\n7-8=1,0\n7-9=2,0\n8-10=2,0\n10-11=1,0\n11-12=2,0\n12-9=1,0\n13-9=1,0\n13-6=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[phenylpyridine]]></Cell>\n<Cell id="3"><![CDATA[phpy]]></Cell>\n</Row>\n<Row id="3">\n<Cell id="1"><![CDATA[SketchEl!(8,8)\nX=-0.8000,3.2500;0,0,i0\nO=-0.0500,1.9510;0,0,i0,xRESPATH:1:1\nC=1.4500,1.9510;0,0,i0,xRESPATH:1:2\nC=2.2000,3.2499;0,0,i1,xRESPATH:1:3\nC=1.4500,4.5491;0,0,i0,xRESPATH:1:4\nO=-0.0500,4.5491;0,0,i0,xRESPATH:1:5\nC=2.2001,5.8481;0,0,i3\nC=2.1999,0.6519;0,0,i3\n2-3=2,0\n2-1=0,0\n3-4=1,0\n4-5=2,0\n5-6=1,0\n6-1=1,0\n5-7=1,0\n3-8=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[acetylacetonate]]></Cell>\n<Cell id="3"><![CDATA[acac]]></Cell>\n</Row>\n<Row id="4">\n<Cell id="1"><![CDATA[SketchEl!(5,5)\nX=-3.2985,-1.8750;0,0,i0\nC=0.4506,-1.8500;0,0,i3\nC=-1.0494,-1.8500;0,0,i0,xRESPATH:1:2\nO=-1.7995,-3.1491;0,0,i0,xRESPATH:1:1\nO=-1.7994,-0.5509;0,0,i0,xRESPATH:1:3\n2-3=1,0\n3-4=2,0\n3-5=1,0\n5-1=1,0\n4-1=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[acetate]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="5">\n<Cell id="1"><![CDATA[SketchEl!(15,18)\nC=2.7915,1.5000;0,0,i1\nC=4.0905,0.7500;0,0,i1\nC=1.4925,0.7500;0,0,i1\nC=4.0905,-0.7500;0,0,i0\nC=2.7915,-1.5000;0,0,i0\nN=1.4925,-0.7500;0,0,i0\nC=2.7915,-3.0000;0,0,i0\nC=4.0905,-3.7500;0,0,i0\nN=1.4925,-3.7500;0,0,i0\nC=4.0905,-5.2500;0,0,i1\nC=2.7915,-6.0000;0,0,i1\nC=1.4925,-5.2500;0,0,i1\nX=-1.1000,-2.2500;0,0,i0\nC=5.3896,-3.0000;0,0,i1\nC=5.3896,-1.5000;0,0,i1\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n5-7=1,0\n7-8=1,0\n7-9=2,0\n8-10=2,0\n10-11=1,0\n11-12=2,0\n12-9=1,0\n13-9=0,0\n13-6=0,0\n8-14=1,0\n14-15=2,0\n15-4=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[phenanthroline]]></Cell>\n<Cell id="3"><![CDATA[phen]]></Cell>\n</Row>\n<Row id="6">\n<Cell id="1"><![CDATA[SketchEl!(5,5)\nX=-1.6500,0.6500;0,0,i0\nN=0.1300,-0.5600;0,0,i2\nC=1.5600,-0.1000;0,0,i2\nN=0.1300,1.8600;0,0,i2\nC=1.5600,1.4000;0,0,i2\n3-2=1,0\n2-1=0,0\n1-4=0,0\n4-5=1,0\n5-3=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[ethylenediamine]]></Cell>\n<Cell id="3"><![CDATA[en]]></Cell>\n</Row>\n<Row id="7">\n<Cell id="1"><![CDATA[SketchEl!(12,14)\nC=4.1514,2.1507;0,0,i1\nC=2.8524,2.9007;0,0,i1\nC=1.5534,2.1507;0,0,i1\nN=1.5534,0.6507;0,0,i0\nC=2.8524,-0.0993;0,0,i0\nC=4.1515,0.6507;0,0,i0\nC=5.4505,-0.0993;0,0,i1\nC=2.8524,-1.5993;0,0,i0\nC=4.1515,-2.3494;0,0,i1\nC=5.4505,-1.5994;0,0,i1\nO=1.5534,-2.3493;0,0,i0\nX=-0.1457,-0.9064;0,0,i0\n2-3=2,0\n2-1=1,0\n3-4=1,0\n4-5=2,0\n5-6=1,0\n6-1=2,0\n7-6=1,0\n5-8=1,0\n8-9=2,0\n9-10=1,0\n10-7=2,0\n8-11=1,0\n11-12=1,0\n12-4=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[oxyquinoline]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="8">\n<Cell id="1"><![CDATA[SketchEl!(29,33)\nX=-0.3660,-0.1210;0,0,i0\nP=1.8140,1.0890;0,0,i0\nC=3.2440,0.6290;0,0,i2\nP=1.8140,-1.3310;0,0,i0\nC=3.2440,-0.8710;0,0,i2\nC=1.0487,2.5150;0,0,i0\nC=2.8725,2.1519;0,0,i0\nC=1.0487,-2.7570;0,0,i0\nC=2.8725,-2.3939;0,0,i0\nC=4.3221,1.7667;0,0,i1\nC=2.4812,3.5999;0,0,i1\nC=5.3806,2.8295;0,0,i1\nC=4.9894,4.2776;0,0,i1\nC=3.5397,4.6628;0,0,i1\nC=1.8387,3.7901;0,0,i1\nC=-0.4505,2.5616;0,0,i1\nC=1.1294,5.1118;0,0,i1\nC=-0.3699,5.1584;0,0,i1\nC=-1.1598,3.8833;0,0,i1\nC=-0.4505,-2.8036;0,0,i1\nC=1.8387,-4.0321;0,0,i1\nC=-1.1598,-4.1253;0,0,i1\nC=-0.3699,-5.4004;0,0,i1\nC=1.1294,-5.3538;0,0,i1\nC=2.4812,-3.8419;0,0,i1\nC=4.3221,-2.0087;0,0,i1\nC=3.5397,-4.9048;0,0,i1\nC=4.9893,-4.5196;0,0,i1\nC=5.3806,-3.0716;0,0,i1\n3-2=1,0\n2-1=0,0\n1-4=0,0\n4-5=1,0\n5-3=1,0\n2-6=1,0\n2-7=1,0\n4-8=1,0\n4-9=1,0\n7-10=1,0\n7-11=2,0\n10-12=2,0\n12-13=1,0\n13-14=2,0\n14-11=1,0\n6-15=1,0\n6-16=2,0\n15-17=2,0\n17-18=1,0\n18-19=2,0\n19-16=1,0\n8-20=1,0\n8-21=2,0\n20-22=2,0\n22-23=1,0\n23-24=2,0\n24-21=1,0\n9-25=1,0\n9-26=2,0\n25-27=2,0\n27-28=1,0\n28-29=2,0\n29-26=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[ethylene bis(diphenylphosphine)]]></Cell>\n<Cell id="3"><![CDATA[dppe]]></Cell>\n</Row>\n<Row id="9">\n<Cell id="1"><![CDATA[SketchEl!(28,32)\nX=-0.3660,-0.1210;0,0,i0\nP=1.8140,1.0890;0,0,i0\nP=1.8140,-1.3310;0,0,i0\nC=1.0487,2.5150;0,0,i0\nC=2.8725,2.1519;0,0,i0\nC=1.0487,-2.7570;0,0,i0\nC=2.8725,-2.3939;0,0,i0\nC=4.3221,1.7667;0,0,i1\nC=2.4812,3.5999;0,0,i1\nC=5.3806,2.8295;0,0,i1\nC=4.9894,4.2776;0,0,i1\nC=3.5397,4.6628;0,0,i1\nC=1.8387,3.7901;0,0,i1\nC=-0.4505,2.5616;0,0,i1\nC=1.1294,5.1118;0,0,i1\nC=-0.3699,5.1584;0,0,i1\nC=-1.1598,3.8833;0,0,i1\nC=-0.4505,-2.8036;0,0,i1\nC=1.8387,-4.0321;0,0,i1\nC=-1.1598,-4.1253;0,0,i1\nC=-0.3699,-5.4004;0,0,i1\nC=1.1294,-5.3538;0,0,i1\nC=2.4812,-3.8419;0,0,i1\nC=4.3221,-2.0087;0,0,i1\nC=3.5397,-4.9048;0,0,i1\nC=4.9893,-4.5196;0,0,i1\nC=5.3806,-3.0716;0,0,i1\nC=3.5430,-0.1210;0,0,i2\n2-1=0,0\n1-3=0,0\n2-4=1,0\n2-5=1,0\n3-6=1,0\n3-7=1,0\n5-8=1,0\n5-9=2,0\n8-10=2,0\n10-11=1,0\n11-12=2,0\n12-9=1,0\n4-13=1,0\n4-14=2,0\n13-15=2,0\n15-16=1,0\n16-17=2,0\n17-14=1,0\n6-18=1,0\n6-19=2,0\n18-20=2,0\n20-21=1,0\n21-22=2,0\n22-19=1,0\n7-23=1,0\n7-24=2,0\n23-25=2,0\n25-26=1,0\n26-27=2,0\n27-24=1,0\n2-28=1,0\n3-28=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[methylene bis(diphenylphonsphine)]]></Cell>\n<Cell id="3"><![CDATA[dppm]]></Cell>\n</Row>\n<Row id="10">\n<Cell id="1"><![CDATA[SketchEl!(9,10)\nX=-3.3500,-0.0500;0,0,i0\nO=-1.6700,-1.2600;0,0,i0\nC=-0.2400,-0.8000;0,0,i0\nO=-1.6700,1.1600;0,0,i0\nC=-0.2400,0.7000;0,0,i0\nC=1.0590,1.4499;0,0,i1\nC=1.0590,-1.5500;0,0,i1\nC=2.3581,-0.8000;0,0,i1\nC=2.3581,0.6999;0,0,i1\n3-2=1,0\n2-1=1,0\n1-4=1,0\n4-5=1,0\n5-3=1,0\n5-6=2,0\n3-7=2,0\n7-8=1,0\n8-9=2,0\n9-6=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[catecholate]]></Cell>\n<Cell id="3"><![CDATA[cat]]></Cell>\n</Row>\n<Row id="11">\n<Cell id="1"><![CDATA[SketchEl!(9,8)\nX=-2.9010,4.6990;0,0,i0\nO=-1.4010,4.6990;0,0,i0\nC=0.0990,4.6990;0,0,i1\nC=0.8490,5.9981;0,0,i3\nC=0.8490,3.4000;0,0,i2\nC=0.0990,2.1010;0,0,i1\nO=-1.4010,2.1010;0,0,i0\nC=0.8490,0.8019;0,0,i3\nX=-2.9010,2.1009;0,0,i0\n1-2=1,0\n2-3=1,0\n3-4=1,0\n3-5=1,0\n5-6=1,0\n6-7=1,0\n6-8=1,0\n7-9=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[bridging acac]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n</Content>\n</DataSheet>\n',ligtrident:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n<Summary>\n<Title>Tridentate Ligands</Title>\n<Description><![CDATA[]]></Description>\n</Summary>\n<Header nrows="3" ncols="3">\n<Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n<Column name="Name" type="string" id="2">Template name</Column>\n<Column name="Abbrev" type="string" id="3">Optional abbreviation</Column>\n</Header>\n<Content>\n<Row id="1">\n<Cell id="1"><![CDATA[SketchEl!(19,23)\nC=2.9998,2.0011;0,0,i1\nC=4.4998,2.0011;0,0,i1\nC=2.2498,0.7021;0,0,i1\nC=5.2498,0.7021;0,0,i1\nC=4.4998,-0.5969;0,0,i0\nN=2.9998,-0.5969;0,0,i0\nC=5.2498,-1.8960;0,0,i0\nC=6.7498,-1.8960;0,0,i1\nN=4.4998,-3.1950;0,0,i0\nC=7.4998,-3.1950;0,0,i1\nC=6.7498,-4.4940;0,0,i1\nC=5.2498,-4.4940;0,0,i0\nC=4.4999,-5.7930;0,0,i0\nN=2.9999,-5.7930;0,0,i0\nC=5.2499,-7.0921;0,0,i1\nC=2.2498,-7.0921;0,0,i1\nC=2.9998,-8.3911;0,0,i1\nC=4.4998,-8.3912;0,0,i1\nX=1.4998,-3.1950;0,0,i0\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n5-7=1,0\n7-8=1,0\n7-9=2,0\n8-10=2,0\n10-11=1,0\n11-12=2,0\n12-9=1,0\n12-13=1,0\n13-14=1,0\n13-15=2,0\n14-16=2,0\n16-17=1,0\n17-18=2,0\n18-15=1,0\n6-19=0,0\n9-19=0,0\n14-19=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[terpyridine]]></Cell>\n<Cell id="3"><![CDATA[terpy]]></Cell>\n</Row>\n<Row id="2">\n<Cell id="1"><![CDATA[SketchEl!(4,5)\nX=-7.0728,1.0229;0,0,i0,xARENE:1:1\nC=-5.3624,2.3410;0,0,i2,xARENE:1:2\nC=-4.5676,1.0688;0,0,i1,xARENE:1:3\nC=-5.2718,-0.2556;0,0,i2,xARENE:1:4\n2-3=2,0\n3-4=1,0\n1-4=1,0\n1-3=0,0\n1-2=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[allyl]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="3">\n<Cell id="1"><![CDATA[SketchEl!(8,9)\nC=3.6861,-1.8600;0,0,i2\nN=2.1861,-1.8600;0,0,i2\nC=4.4361,-3.1590;0,0,i2\nN=3.6861,-4.4580;0,0,i1\nC=4.4361,-5.7571;0,0,i2\nC=3.6861,-7.0561;0,0,i2\nN=2.1862,-7.0561;0,0,i2\nX=0.6861,-4.4580;0,0,i0\n1-2=1,0\n1-3=1,0\n3-4=1,0\n5-4=1,0\n5-6=1,0\n6-7=1,0\n2-8=0,0\n4-8=0,0\n7-8=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[diethylaminetriamine]]></Cell>\n<Cell id="3"><![CDATA[dien]]></Cell>\n</Row>\n</Content>\n</DataSheet>\n',ligmultident:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n<Summary>\n<Title>Multidentate Ligands</Title>\n<Description><![CDATA[]]></Description>\n</Summary>\n<Header nrows="5" ncols="3">\n<Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n<Column name="Name" type="string" id="2">Template name</Column>\n<Column name="Abbrev" type="string" id="3">Optional abbreviation</Column>\n</Header>\n<Content>\n<Row id="1">\n<Cell id="1"><![CDATA[SketchEl!(9,12)\nX=3.7990,0.0000;0,0,i0,xARENE:2:1,xARENE:1:1\nC=5.6500,-0.1000;0,0,i1,xARENE:2:2\nC=5.1000,-2.3000;0,0,i1,xARENE:1:3\nC=5.6500,2.4000;0,0,i1,xARENE:2:3\nC=5.1000,0.2000;0,0,i1,xARENE:1:2\nC=7.0319,1.5176;0,0,i2\nC=7.5819,3.0176;0,0,i2\nC=7.5819,-1.0824;0,0,i2\nC=7.0319,-2.5824;0,0,i2\n2-4=2,0\n3-5=2,0\n5-6=1,0\n4-7=1,0\n2-8=1,0\n3-9=1,0\n6-7=1,0\n9-8=1,0\n1-3=0,0\n1-5=0,0\n1-4=0,0\n1-2=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclooctadiene]]></Cell>\n<Cell id="3"><![CDATA[COD]]></Cell>\n</Row>\n<Row id="2">\n<Cell id="1"><![CDATA[SketchEl!(8,12)\nX=3.7990,0.0000;0,0,i0,xARENE:2:1,xARENE:1:1\nC=5.8000,0.0500;0,0,i1\nC=7.1000,1.2500;0,0,i1\nC=4.7000,1.7651;0,0,i1,xARENE:1:2\nC=6.3000,2.4651;0,0,i1,xARENE:1:3\nC=5.5500,-2.0000;0,0,i1,xARENE:2:2\nC=6.8500,-0.8000;0,0,i1,xARENE:2:3\nC=8.5000,0.6500;0,0,i2\n2-4=1,0\n3-5=1,0\n2-6=1,0\n3-7=1,0\n6-7=2,0\n2-8=1,0\n8-3=1,0\n4-5=2,0\n1-4=0,0\n1-5=0,0\n1-6=0,0\n1-7=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[norbornadiene]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="3">\n<Cell id="1"><![CDATA[SketchEl!(6,10)\nC=0.2150,2.1200;0,0,i1,xARENE:1:2\nC=-1.0950,3.1700;0,0,i1,xARENE:1:4\nC=-0.1650,3.6300;0,0,i1,xARENE:1:3\nC=-0.1650,0.6100;0,0,i1,xARENE:1:6\nC=-1.0950,1.0700;0,0,i1,xARENE:1:5\nX=-2.2110,2.0800;0,0,i0,xARENE:1:1\n2-3=2,0\n3-1=1,0\n1-4=1,0\n4-5=2,0\n5-2=1,0\n6-1=1,0\n3-6=0,0\n4-6=0,0\n5-6=0,0\n2-6=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cyclopentadienyl]]></Cell>\n<Cell id="3"><![CDATA[Cp]]></Cell>\n</Row>\n<Row id="4">\n<Cell id="1"><![CDATA[SketchEl!(7,12)\nC=0.7490,6.7000;0,0,i1,xARENE:1:2\nC=0.2000,5.9500;0,0,i1,xARENE:1:3\nC=1.2981,6.0500;0,0,i1,xARENE:1:7\nC=0.2000,4.4500;0,0,i1,xARENE:1:4\nC=0.7490,3.7000;0,0,i1,xARENE:1:5\nC=1.2981,4.3500;0,0,i1,xARENE:1:6\nX=-1.3490,5.2000;0,0,i0,xARENE:1:1\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n2-7=0,0\n4-7=0,0\n7-1=0,0\n7-5=0,0\n7-6=0,0\n7-3=0,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[arene]]></Cell>\n<Cell id="3"></Cell>\n</Row>\n<Row id="5">\n<Cell id="1"><![CDATA[SketchEl!(11,15)\nX=0.0000,0.0000;0,0,i0,xARENE:1:1\nC=2.9263,-0.0154;0,0,i0,xARENE:1:2\nC=1.5927,-1.0352;0,0,i0,xARENE:1:4\nC=2.5119,-1.5163;0,0,i0,xARENE:1:3\nC=2.5809,1.5029;0,0,i0,xARENE:1:6\nC=1.6407,1.0642;0,0,i0,xARENE:1:5\nC=3.7728,-0.0348;0,0,i3\nC=2.8692,2.9749;0,0,i3\nC=0.9137,2.3762;0,0,i3\nC=0.8354,-2.3300;0,0,i3\nC=2.7329,-3.0000;0,0,i3\n3-4=2,0\n4-2=1,0\n2-5=1,0\n5-6=2,0\n6-3=1,0\n1-2=1,0\n4-1=0,0\n5-1=0,0\n6-1=0,0\n3-1=0,0\n2-7=1,0\n5-8=1,0\n6-9=1,0\n3-10=1,0\n4-11=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[pentamethylcyclopentadienyl]]></Cell>\n<Cell id="3"><![CDATA[Cp*]]></Cell>\n</Row>\n</Content>\n</DataSheet>\n',cagecmplx:'<DataSheet><Summary><Title>Cage Complexes</Title><Description><![CDATA[]]></Description></Summary><Extension/><Header nrows="8" ncols="3"><Column id="1" name="Molecule" type="molecule">Molecular structure</Column><Column id="2" name="Name" type="string">Template name</Column><Column id="3" name="Abbrev" type="string">Optional abbreviation</Column></Header><Content><Row id="1"><Cell id="1"><![CDATA[SketchEl!(21,25)\nM=-0.6000,2.4500;0,0,i0\nN=-1.3500,3.7490;0,0,i0\nO=0.1500,1.1510;0,0,i0\nO=0.9000,2.4500;0,0,i0\nO=-2.1000,2.4500;0,0,i0\nO=-1.3500,1.1510;0,0,i0\nN=0.1500,3.7490;0,0,i0\nC=-0.9618,5.1979;0,0,i2\nC=-0.2382,5.1979;0,0,i2\nC=-2.7989,4.1373;0,0,i2\nC=-3.3990,3.2000;0,0,i0\nC=2.1990,3.2000;0,0,i0\nC=1.5989,4.1373;0,0,i2\nC=-3.0821,2.1510;0,0,i0\nC=1.8821,2.1510;0,0,i0\nC=1.4938,3.5999;0,0,i2\nC=-2.6938,3.5999;0,0,i2\nO=3.2679,1.5769;0,0,i0\nO=3.6975,3.2689;0,0,i0\nO=-4.4679,1.5769;0,0,i0\nO=-4.8975,3.2689;0,0,i0\n1-2=0,0\n1-3=1,0\n1-4=1,0\n1-5=1,0\n1-6=1,0\n1-7=0,0\n2-8=1,0\n7-9=1,0\n8-9=1,0\n2-10=1,0\n5-11=1,0\n4-12=1,0\n7-13=1,0\n12-13=1,0\n11-10=1,0\n6-14=1,0\n3-15=1,0\n15-16=1,0\n14-17=1,0\n17-2=1,0\n16-7=1,0\n15-18=2,0\n12-19=2,0\n14-20=2,0\n11-21=2,0\n!End\n]]></Cell><Cell id="2"><![CDATA[EDTA]]></Cell><Cell id="3"/></Row><Row id="2"><Cell id="1"><![CDATA[SketchEl!(25,32)\nM=-0.3000,1.2000;0,0,i0\nN=-1.7142,2.6142;0,0,i0\nN=1.1142,2.6142;0,0,i0\nN=1.1142,-0.2142;0,0,i0\nN=-1.7142,-0.2142;0,0,i0\nC=-3.1921,0.0191;0,0,i0\nC=-3.8780,-1.3173;0,0,i1\nC=-1.4809,-1.6921;0,0,i0\nC=-2.8173,-2.3780;0,0,i1\nC=-1.4809,4.0921;0,0,i0\nC=-2.8173,4.7780;0,0,i1\nC=-3.1921,2.3809;0,0,i0\nC=-3.8780,3.7173;0,0,i1\nC=2.5921,2.3809;0,0,i0\nC=3.2780,3.7173;0,0,i1\nC=0.8809,4.0921;0,0,i0\nC=2.2173,4.7780;0,0,i1\nC=0.8809,-1.6921;0,0,i0\nC=2.2173,-2.3780;0,0,i1\nC=2.5921,0.0191;0,0,i0\nC=3.2780,-1.3173;0,0,i1\nC=-3.8714,1.2000;0,0,i1\nC=-0.3000,4.7714;0,0,i1\nC=3.2714,1.2000;0,0,i1\nC=-0.3000,-2.3714;0,0,i1\n1-2=1,0\n1-3=0,0\n1-4=1,0\n1-5=0,0\n7-6=1,0\n6-5=1,0\n5-8=2,0\n8-9=1,0\n9-7=2,0\n11-10=2,0\n10-2=1,0\n2-12=1,0\n12-13=2,0\n13-11=1,0\n15-14=1,0\n14-3=2,0\n3-16=1,0\n16-17=1,0\n17-15=2,0\n19-18=1,0\n18-4=1,0\n4-20=1,0\n20-21=1,0\n21-19=2,0\n6-22=2,0\n10-23=1,0\n14-24=1,0\n18-25=2,0\n22-12=1,0\n23-16=2,0\n24-20=2,0\n25-8=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[porphyrin]]></Cell><Cell id="3"/></Row><Row id="3"><Cell id="1"><![CDATA[SketchEl!(25,32)\nM=1.5000,0.0000;0,0,i0\nN=2.9117,1.4117;0,0,i0\nN=0.0882,-1.4117;0,0,i0\nN=2.9117,-1.4117;0,0,i0\nN=0.0882,1.4117;0,0,i0\nC=-2.0755,-2.5147;0,0,i1\nC=-1.3895,-1.1783;0,0,i0\nC=0.3215,-2.8895;0,0,i0\nC=-1.0148,-3.5754;0,0,i1\nC=5.0755,2.5147;0,0,i1\nC=4.3895,1.1783;0,0,i0\nC=2.6784,2.8895;0,0,i0\nC=4.0148,3.5754;0,0,i1\nC=-1.0148,3.5754;0,0,i1\nC=0.3216,2.8895;0,0,i0\nC=-1.3895,1.1783;0,0,i0\nC=-2.0754,2.5148;0,0,i1\nC=4.0148,-3.5754;0,0,i1\nC=2.6783,-2.8895;0,0,i0\nC=4.3895,-1.1783;0,0,i0\nC=5.0754,-2.5148;0,0,i1\nN=-1.9510,-0.0731;0,0,i0\nN=1.4268,3.4510;0,0,i0\nN=4.9510,0.0731;0,0,i0\nN=1.5731,-3.4510;0,0,i0\n1-2=0,0\n1-3=0,0\n1-4=0,0\n1-5=0,0\n6-7=1,0\n7-3=2,0\n3-8=1,0\n8-9=1,0\n9-6=2,0\n10-11=1,0\n11-2=2,0\n2-12=1,0\n12-13=1,0\n13-10=2,0\n14-15=1,0\n15-5=2,0\n5-16=1,0\n16-17=1,0\n17-14=2,0\n18-19=1,0\n19-4=2,0\n4-20=1,0\n20-21=1,0\n21-18=2,0\n7-22=1,0\n15-23=1,0\n11-24=1,0\n19-25=1,0\n8-25=2,0\n16-22=2,0\n12-23=2,0\n20-24=2,0\n!End\n]]></Cell><Cell id="2"><![CDATA[porphyrinoid]]></Cell><Cell id="3"/></Row><Row id="4"><Cell id="1"><![CDATA[SketchEl!(11,20)\nM=12.1738,-1.7111;0,0,i0,xARENE:1:1,xARENE:2:1\nC=13.1284,-0.5301;0,0,i1,xARENE:1:2\nC=11.2193,-0.5301;0,0,i1,xARENE:1:3\nC=11.2193,-2.8920;0,0,i1,xARENE:2:2\nC=13.1284,-2.8920;0,0,i1,xARENE:2:3\nC=10.8390,-3.7589;0,0,i1,xARENE:2:6\nC=12.1738,-4.1749;0,0,i1,xARENE:2:5\nC=13.5087,-3.7589;0,0,i1,xARENE:2:4\nC=13.5087,0.3368;0,0,i1,xARENE:1:6\nC=12.1738,0.7528;0,0,i1,xARENE:1:5\nC=10.8390,0.3368;0,0,i1,xARENE:1:4\n2-3=1,0\n4-5=1,0\n4-6=2,0\n6-7=1,0\n7-8=1,0\n8-5=2,0\n2-9=2,0\n9-10=1,0\n10-11=1,0\n11-3=2,0\n10-1=1,0\n7-1=1,0\n8-1=0,0\n5-1=0,0\n4-1=0,0\n6-1=0,0\n3-1=0,0\n2-1=0,0\n9-1=0,0\n11-1=0,0\n!End\n]]></Cell><Cell id="2"><![CDATA[metallocene]]></Cell><Cell id="3"/></Row><Row id="5"><Cell id="1"><![CDATA[SketchEl!(37,45)\nM=1.5000,0.0000;0,0,i0\nC=5.3914,3.7500;0,0,i1\nC=6.6904,3.0000;0,0,i1\nC=4.0924,3.0000;0,0,i1\nC=6.6904,1.5000;0,0,i1\nC=5.3914,0.7500;0,0,i0\nN=4.0924,1.5000;0,0,i0\nC=5.3914,-0.7500;0,0,i0\nC=6.6904,-1.5000;0,0,i1\nN=4.0924,-1.5000;0,0,i0\nC=6.6904,-3.0000;0,0,i1\nC=5.3914,-3.7500;0,0,i1\nC=4.0924,-3.0000;0,0,i1\nC=-3.6940,1.4927;0,0,i1\nC=-3.6946,2.9927;0,0,i1\nC=-2.3946,0.7433;0,0,i1\nC=-2.3959,3.7433;0,0,i1\nC=-1.0966,2.9939;0,0,i0\nN=-1.0959,1.4939;0,0,i0\nC=0.2020,3.7445;0,0,i0\nC=0.2013,5.2445;0,0,i1\nN=1.5014,2.9951;0,0,i0\nC=1.5000,5.9951;0,0,i1\nC=2.7994,5.2457;0,0,i1\nC=2.8001,3.7457;0,0,i1\nC=2.8030,-5.2448;0,0,i1\nC=1.5041,-5.9951;0,0,i1\nC=2.8026,-3.7448;0,0,i1\nC=0.2049,-5.2453;0,0,i1\nC=0.2046,-3.7454;0,0,i0\nN=1.5034,-2.9951;0,0,i0\nC=-1.0945,-2.9957;0,0,i0\nC=-2.3934,-3.7459;0,0,i1\nN=-1.0949,-1.4957;0,0,i0\nC=-3.6926,-2.9962;0,0,i1\nC=-3.6930,-1.4963;0,0,i1\nC=-2.3941,-0.7460;0,0,i1\n2-3=1,0\n2-4=2,0\n3-5=2,0\n5-6=1,0\n6-7=2,0\n7-4=1,0\n6-8=1,0\n8-9=1,0\n8-10=2,0\n9-11=2,0\n11-12=1,0\n12-13=2,0\n13-10=1,0\n1-10=0,0\n1-7=0,0\n14-15=1,0\n14-16=2,0\n15-17=2,0\n17-18=1,0\n18-19=2,0\n19-16=1,0\n18-20=1,0\n20-21=1,0\n20-22=2,0\n21-23=2,0\n23-24=1,0\n24-25=2,0\n25-22=1,0\n1-22=0,0\n1-19=0,0\n26-27=1,0\n26-28=2,0\n27-29=2,0\n29-30=1,0\n30-31=2,0\n31-28=1,0\n30-32=1,0\n32-33=1,0\n32-34=2,0\n33-35=2,0\n35-36=1,0\n36-37=2,0\n37-34=1,0\n1-34=0,0\n1-31=0,0\n!End\n]]></Cell><Cell id="2"><![CDATA[tris-bipy]]></Cell><Cell id="3"/></Row><Row id="6"><Cell id="1"><![CDATA[SketchEl!(15,18)\nN=0.0000,0.0000;0,0,i1\nC=-1.5000,0.0000;0,0,i2\nC=-2.2500,-1.2990;0,0,i2\nC=-1.5000,-2.5981;0,0,i2\nN=-0.0000,-2.5981;0,0,i1\nC=0.7500,1.2990;0,0,i2\nC=2.2500,1.2990;0,0,i2\nN=3.0000,-0.0000;0,0,i1\nC=4.5000,-0.0000;0,0,i2\nC=5.2500,-1.2990;0,0,i2\nC=4.5000,-2.5981;0,0,i2\nN=3.0000,-2.5981;0,0,i1\nC=0.7500,-3.8971;0,0,i2\nC=2.2500,-3.8971;0,0,i2\nM=1.5000,-1.3000;0,0,i0\n1-2=1,0\n2-3=1,0\n3-4=1,0\n4-5=1,0\n1-6=1,0\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n10-11=1,0\n11-12=1,0\n5-13=1,0\n12-14=1,0\n14-13=1,0\n1-15=0,0\n15-12=0,0\n5-15=0,0\n15-8=0,0\n!End\n]]></Cell><Cell id="2"><![CDATA[tren]]></Cell><Cell id="3"/></Row><Row id="7"><Cell id="1"><![CDATA[SketchEl!(11,13)\nM=1.4999,0.0000;0,0,i0\nN=1.4999,1.5000;0,0,i2\nN=1.4999,-1.5000;0,0,i2\nN=0.2009,0.7500;0,0,i2\nN=0.2009,-0.7500;0,0,i0\nC=0.4393,-2.5606;0,0,i2\nC=-1.2479,-0.3617;0,0,i2\nC=-0.1872,-2.1988;0,0,i2\nC=-1.2479,0.3617;0,0,i2\nC=0.0511,1.8882;0,0,i2\nC=-0.7973,0.9790;0,0,i2\n1-2=0,0\n1-3=0,0\n1-4=0,0\n1-5=0,0\n3-6=1,0\n5-7=1,0\n5-8=1,0\n4-9=1,0\n7-9=1,0\n6-8=1,0\n2-10=1,0\n5-11=1,0\n10-11=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[N4]]></Cell><Cell id="3"/></Row><Row id="8"><Cell id="1"><![CDATA[SketchEl!(21,27)\nN=3.2639,-1.3522;0,0,i1\nC=1.8122,-0.7585;0,0,i2\nC=1.8056,0.7411;0,0,i2\nN=3.2521,1.3475;0,0,i1\nN=5.9520,1.3594;0,0,i1\nC=7.4037,0.7657;0,0,i2\nC=7.4103,-0.7339;0,0,i2\nN=5.9639,-1.3403;0,0,i1\nC=3.2705,-2.8521;0,0,i2\nC=5.9705,-2.8402;0,0,i2\nC=5.9454,2.8594;0,0,i2\nC=3.2455,2.8475;0,0,i2\nC=4.6431,3.6036;0,0,i1\nC=4.5728,-3.5963;0,0,i1\nM=4.6052,-0.0128;0,0,i0\nN=4.5994,1.4890;0,0,i1\nN=4.6133,-1.5126;0,0,i1\nC=4.1980,2.5347;0,0,i2\nC=4.2120,-2.5583;0,0,i2\nC=2.8657,-0.6612;0,0,i2\nC=2.8489,0.6376;0,0,i2\n1-2=1,0\n2-3=1,0\n3-4=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n1-9=1,0\n8-10=1,0\n5-11=1,0\n4-12=1,0\n11-13=1,0\n13-12=1,0\n9-14=1,0\n14-10=1,0\n1-15=0,0\n4-15=0,0\n8-15=0,0\n5-15=0,0\n15-16=0,0\n15-17=0,0\n16-18=1,0\n13-18=1,0\n17-19=1,0\n19-14=1,0\n17-20=1,0\n16-21=1,0\n21-20=1,0\n!End\n]]></Cell><Cell id="2"><![CDATA[N6]]></Cell><Cell id="3"/></Row></Content></DataSheet>',aminoacids:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n<Summary>\n<Title>Amino Acids</Title><Description><![CDATA[]]></Description></Summary>\n<Header nrows="20" ncols="4">\n<Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n<Column name="Name" type="string" id="2">Template name</Column>\n<Column name="Abbrev" type="string" id="3">Abbreviation code</Column>\n<Column name="Mnemonic" type="string" id="4"></Column>\n</Header>\n<Content>\n<Row id="1">\n<Cell id="1"><![CDATA[SketchEl!(7,6)\nC=-6.5731,8.0000;0,0,i0\nO=-6.5731,9.5000;0,0,i0\nC=-7.8721,7.2500;0,0,i1\nX=-5.2741,7.2500;0,0,i0\nN=-9.1712,8.0000;0,0,i1\nC=-7.8721,5.7500;0,0,i3\nX=-10.4702,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n5-7=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[alanine]]></Cell>\n<Cell id="3"><![CDATA[Ala]]></Cell>\n<Cell id="4"><![CDATA[A]]></Cell>\n</Row>\n<Row id="2">\n<Cell id="1"><![CDATA[SketchEl!(8,7)\nC=-6.8514,8.0000;0,0,i0\nO=-6.8514,9.5000;0,0,i0\nC=-8.1504,7.2500;0,0,i1\nX=-5.5524,7.2500;0,0,i0\nN=-9.4495,8.0000;0,0,i1\nC=-8.1504,5.7500;0,0,i2\nS=-6.8515,5.0000;0,0,i1\nX=-10.7485,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n5-8=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[cysteine]]></Cell>\n<Cell id="3"><![CDATA[Cys]]></Cell>\n<Cell id="4"><![CDATA[C]]></Cell>\n</Row>\n<Row id="3">\n<Cell id="1"><![CDATA[SketchEl!(10,9)\nC=-7.5010,8.0000;0,0,i0\nO=-7.5010,9.5000;0,0,i0\nC=-8.8000,7.2500;0,0,i1\nX=-6.2020,7.2500;0,0,i0\nN=-10.0991,8.0000;0,0,i1\nC=-8.8000,5.7500;0,0,i2\nC=-7.5010,5.0000;0,0,i0\nO=-7.5009,3.5000;-1,0,i0\nO=-6.2020,5.7499;0,0,i0\nX=-11.3981,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n7-9=2,0\n5-10=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[aspartic acid]]></Cell>\n<Cell id="3"><![CDATA[Asp]]></Cell>\n<Cell id="4"><![CDATA[D]]></Cell>\n</Row>\n<Row id="4">\n<Cell id="1"><![CDATA[SketchEl!(11,10)\nC=-7.3830,8.0000;0,0,i0\nO=-7.3830,9.5000;0,0,i0\nC=-8.6820,7.2500;0,0,i1\nX=-6.0840,7.2500;0,0,i0\nN=-9.9811,8.0000;0,0,i1\nC=-8.6820,5.7500;0,0,i2\nC=-7.3830,5.0000;0,0,i2\nC=-7.3828,3.5000;0,0,i0\nO=-6.0838,2.7500;-1,0,i0\nO=-8.6819,2.7500;0,0,i0\nX=-11.2801,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n8-9=1,0\n8-10=2,0\n5-11=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[glutamic acid]]></Cell>\n<Cell id="3"><![CDATA[Glu]]></Cell>\n<Cell id="4"><![CDATA[E]]></Cell>\n</Row>\n<Row id="5">\n<Cell id="1"><![CDATA[SketchEl!(13,13)\nC=-8.8000,8.0000;0,0,i0\nO=-8.8000,9.5000;0,0,i0\nC=-10.0990,7.2500;0,0,i1\nX=-7.5010,7.2500;0,0,i0\nN=-11.3981,8.0000;0,0,i1\nC=-10.0990,5.7500;0,0,i2\nC=-8.8000,5.0000;0,0,i0\nC=-8.8000,3.5000;0,0,i1\nC=-7.5010,5.7500;0,0,i1\nC=-7.5010,2.7500;0,0,i1\nC=-6.2019,3.5000;0,0,i1\nC=-6.2019,5.0000;0,0,i1\nX=-12.6971,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n7-9=2,0\n8-10=2,0\n10-11=1,0\n11-12=2,0\n12-9=1,0\n5-13=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[phenylalanine]]></Cell>\n<Cell id="3"><![CDATA[Phe]]></Cell>\n<Cell id="4"><![CDATA[F]]></Cell>\n</Row>\n<Row id="6">\n<Cell id="1"><![CDATA[SketchEl!(6,5)\nC=-6.6349,8.0000;0,0,i0\nO=-6.6349,9.5000;0,0,i0\nC=-7.9339,7.2500;0,0,i2\nX=-5.3359,7.2500;0,0,i0\nN=-9.2330,8.0000;0,0,i1\nX=-10.5320,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n5-6=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[glycine]]></Cell>\n<Cell id="3"><![CDATA[Gly]]></Cell>\n<Cell id="4"><![CDATA[G]]></Cell>\n</Row>\n<Row id="7">\n<Cell id="1"><![CDATA[SketchEl!(12,12)\nC=-8.4232,8.0000;0,0,i0\nO=-8.4232,9.5000;0,0,i0\nC=-9.7222,7.2500;0,0,i1\nX=-7.1242,7.2500;0,0,i0\nN=-11.0213,8.0000;0,0,i1\nC=-9.7222,5.7500;0,0,i2\nC=-8.4232,5.0000;0,0,i0\nC=-6.0475,4.4955;0,0,i1\nN=-6.7961,3.2002;0,0,i1\nC=-8.2664,3.5081;0,0,i1\nN=-7.0492,5.6069;0,0,i0\nX=-12.3203,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n10-9=1,0\n9-8=1,0\n8-11=2,0\n11-7=1,0\n7-10=2,0\n5-12=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[histidine]]></Cell>\n<Cell id="3"><![CDATA[His]]></Cell>\n<Cell id="4"><![CDATA[H]]></Cell>\n</Row>\n<Row id="8">\n<Cell id="1"><![CDATA[SketchEl!(10,9)\nC=-6.7216,8.0000;0,0,i0\nO=-6.7216,9.5000;0,0,i0\nC=-8.0206,7.2500;0,0,i1\nX=-5.4226,7.2500;0,0,i0\nN=-9.3197,8.0000;0,0,i1\nC=-8.0206,5.7500;0,0,i1\nC=-6.7216,5.0000;0,0,i2\nC=-9.3196,5.0000;0,0,i3\nC=-6.7214,3.5000;0,0,i3\nX=-10.6187,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n6-8=1,0\n7-9=1,0\n5-10=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[isoleucine]]></Cell>\n<Cell id="3"><![CDATA[Ile]]></Cell>\n<Cell id="4"><![CDATA[I]]></Cell>\n</Row>\n<Row id="9">\n<Cell id="1"><![CDATA[SketchEl!(11,10)\nC=-7.8553,8.0000;0,0,i0\nO=-7.8553,9.5000;0,0,i0\nC=-9.1543,7.2500;0,0,i1\nX=-6.5563,7.2500;0,0,i0\nN=-10.4534,8.0000;0,0,i1\nC=-9.1543,5.7500;0,0,i2\nC=-7.8553,5.0000;0,0,i2\nC=-7.8552,3.5000;0,0,i2\nC=-6.5561,2.7500;0,0,i2\nN=-6.5561,1.2500;1,0,i3\nX=-11.7524,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n5-11=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[lysine]]></Cell>\n<Cell id="3"><![CDATA[Lys]]></Cell>\n<Cell id="4"><![CDATA[K]]></Cell>\n</Row>\n<Row id="10">\n<Cell id="1"><![CDATA[SketchEl!(10,9)\nC=-7.5010,8.0000;0,0,i0\nO=-7.5010,9.5000;0,0,i0\nC=-8.8000,7.2500;0,0,i1\nX=-6.2020,7.2500;0,0,i0\nN=-10.0991,8.0000;0,0,i1\nC=-8.8000,5.7500;0,0,i2\nC=-7.5010,5.0000;0,0,i1\nC=-7.5008,3.5000;0,0,i3\nC=-6.2019,5.7500;0,0,i3\nX=-11.3981,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n7-9=1,0\n5-10=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[leucine]]></Cell>\n<Cell id="3"><![CDATA[Leu]]></Cell>\n<Cell id="4"><![CDATA[L]]></Cell>\n</Row>\n<Row id="11">\n<Cell id="1"><![CDATA[SketchEl!(10,9)\nC=-7.5010,8.0000;0,0,i0\nO=-7.5010,9.5000;0,0,i0\nC=-8.8000,7.2500;0,0,i1\nX=-6.2020,7.2500;0,0,i0\nN=-10.0991,8.0000;0,0,i1\nC=-8.8000,5.7500;0,0,i2\nC=-7.5010,5.0000;0,0,i2\nS=-7.5008,3.5000;0,0,i0\nC=-6.2018,2.7500;0,0,i3\nX=-11.3981,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n8-9=1,0\n5-10=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[methionine]]></Cell>\n<Cell id="3"><![CDATA[Met]]></Cell>\n<Cell id="4"><![CDATA[M]]></Cell>\n</Row>\n<Row id="12">\n<Cell id="1"><![CDATA[SketchEl!(10,9)\nC=-7.5010,8.0000;0,0,i0\nO=-7.5010,9.5000;0,0,i0\nC=-8.8000,7.2500;0,0,i1\nX=-6.2020,7.2500;0,0,i0\nN=-10.0991,8.0000;0,0,i1\nC=-8.8000,5.7500;0,0,i2\nC=-7.5010,5.0000;0,0,i0\nN=-7.5008,3.5000;0,0,i2\nO=-6.2019,5.7500;0,0,i0\nX=-11.3981,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n7-9=2,0\n5-10=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[asparagine]]></Cell>\n<Cell id="3"><![CDATA[Asn]]></Cell>\n<Cell id="4"><![CDATA[N]]></Cell>\n</Row>\n<Row id="13">\n<Cell id="1"><![CDATA[SketchEl!(9,9)\nC=-5.7561,8.0000;0,0,i0\nO=-5.7561,9.5000;0,0,i0\nC=-7.0551,7.2500;0,0,i1\nX=-4.4571,7.2500;0,0,i0\nC=-7.2122,5.7621;0,0,i2\nC=-8.6806,5.4455;0,0,i2\nN=-8.4222,7.8579;0,0,i0\nC=-9.4306,6.7446;0,0,i2\nX=-8.7323,9.3255;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n6-5=1,0\n3-5=1,2\n3-7=1,0\n7-8=1,0\n8-6=1,0\n7-9=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[proline]]></Cell>\n<Cell id="3"><![CDATA[Pro]]></Cell>\n<Cell id="4"><![CDATA[P]]></Cell>\n</Row>\n<Row id="14">\n<Cell id="1"><![CDATA[SketchEl!(11,10)\nC=-7.3829,8.0000;0,0,i0\nO=-7.3829,9.5000;0,0,i0\nC=-8.6819,7.2500;0,0,i1\nX=-6.0839,7.2500;0,0,i0\nN=-9.9810,8.0000;0,0,i1\nC=-8.6819,5.7500;0,0,i2\nC=-7.3829,5.0000;0,0,i2\nC=-7.3828,3.5000;0,0,i0\nN=-6.0837,2.7500;0,0,i2\nO=-8.6818,2.7500;0,0,i0\nX=-11.2800,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n8-9=1,0\n8-10=2,0\n5-11=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[glutamine]]></Cell>\n<Cell id="3"><![CDATA[Gln]]></Cell>\n<Cell id="4"><![CDATA[Q]]></Cell>\n</Row>\n<Row id="15">\n<Cell id="1"><![CDATA[SketchEl!(13,12)\nC=-11.2850,5.8016;0,0,i0\nO=-11.2850,7.3016;0,0,i0\nC=-12.5840,5.0517;0,0,i1\nX=-9.9860,5.0516;0,0,i0\nN=-13.8830,5.8017;0,0,i1\nC=-12.5840,3.5516;0,0,i2\nC=-11.2849,2.8015;0,0,i2\nC=-11.2849,1.3015;0,0,i2\nN=-9.9859,0.5516;0,0,i1\nC=-9.9859,-0.9483;0,0,i0\nN=-11.2850,-1.6984;1,0,i2\nN=-8.6869,-1.6983;0,0,i2\nX=-15.1821,5.0517;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n8-9=1,0\n9-10=1,0\n10-11=2,0\n10-12=1,0\n5-13=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[arginine]]></Cell>\n<Cell id="3"><![CDATA[Arg]]></Cell>\n<Cell id="4"><![CDATA[R]]></Cell>\n</Row>\n<Row id="16">\n<Cell id="1"><![CDATA[SketchEl!(8,7)\nC=-6.8514,8.0000;0,0,i0\nO=-6.8514,9.5000;0,0,i0\nC=-8.1504,7.2500;0,0,i1\nX=-5.5525,7.2500;0,0,i0\nN=-9.4496,8.0000;0,0,i1\nC=-8.1504,5.7500;0,0,i2\nO=-6.8514,5.0000;0,0,i1\nX=-10.7486,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n5-8=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[serine]]></Cell>\n<Cell id="3"><![CDATA[Ser]]></Cell>\n<Cell id="4"><![CDATA[S]]></Cell>\n</Row>\n<Row id="17">\n<Cell id="1"><![CDATA[SketchEl!(9,8)\nC=-6.4906,8.0000;0,0,i0\nO=-6.4906,9.5000;0,0,i0\nC=-7.7896,7.2500;0,0,i1\nX=-5.1916,7.2500;0,0,i0\nN=-9.0887,8.0000;0,0,i1\nC=-7.7896,5.7500;0,0,i1\nC=-9.0887,5.0000;0,0,i3\nO=-6.4906,5.0000;0,0,i1\nX=-10.3877,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,2\n3-6=1,0\n6-7=1,0\n6-8=1,2\n5-9=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[threonine]]></Cell>\n<Cell id="3"><![CDATA[Thr]]></Cell>\n<Cell id="4"><![CDATA[T]]></Cell>\n</Row>\n<Row id="18">\n<Cell id="1"><![CDATA[SketchEl!(14,14)\nC=-9.3567,8.0000;0,0,i0\nO=-9.3567,9.5000;0,0,i0\nC=-10.6557,7.2500;0,0,i1\nX=-8.0577,7.2500;0,0,i0\nN=-11.9548,8.0000;0,0,i1\nC=-10.6557,5.7500;0,0,i2\nC=-9.3567,5.0000;0,0,i0\nC=-9.3567,3.5000;0,0,i1\nC=-8.0577,5.7500;0,0,i1\nC=-8.0577,2.7500;0,0,i1\nC=-6.7586,3.5000;0,0,i0\nC=-6.7586,5.0000;0,0,i1\nO=-5.4596,2.7500;0,0,i1\nX=-13.2538,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n7-8=1,0\n7-9=2,0\n8-10=2,0\n10-11=1,0\n11-12=2,0\n12-9=1,0\n11-13=1,0\n5-14=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[tyrosine]]></Cell>\n<Cell id="3"><![CDATA[Tyr]]></Cell>\n<Cell id="4"><![CDATA[Y]]></Cell>\n</Row>\n<Row id="19">\n<Cell id="1"><![CDATA[SketchEl!(9,8)\nC=-6.4906,8.0000;0,0,i0\nO=-6.4906,9.5000;0,0,i0\nC=-7.7896,7.2500;0,0,i1\nX=-5.1916,7.2500;0,0,i0\nN=-9.0887,8.0000;0,0,i1\nC=-7.7896,5.7500;0,0,i1\nC=-9.0887,5.0000;0,0,i3\nC=-6.4906,5.0000;0,0,i3\nX=-10.3877,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n6-8=1,0\n5-9=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[valine]]></Cell>\n<Cell id="3"><![CDATA[Val]]></Cell>\n<Cell id="4"><![CDATA[V]]></Cell>\n</Row>\n<Row id="20">\n<Cell id="1"><![CDATA[SketchEl!(16,17)\nC=-9.1949,8.0000;0,0,i0\nO=-9.1949,9.5000;0,0,i0\nC=-10.4939,7.2500;0,0,i1\nX=-7.8959,7.2500;0,0,i0\nN=-11.7930,8.0000;0,0,i1\nC=-10.4939,5.7500;0,0,i2\nC=-9.1949,5.0000;0,0,i0\nC=-9.4755,2.2797;0,0,i1\nC=-8.7255,0.9806;0,0,i1\nC=-8.7255,3.5787;0,0,i0\nC=-7.2255,0.9806;0,0,i1\nC=-6.4755,2.2797;0,0,i1\nC=-7.2255,3.5787;0,0,i0\nC=-7.9866,5.8824;0,0,i1\nN=-6.7662,5.0065;0,0,i1\nX=-13.0920,7.2501;0,0,i0\n1-2=2,0\n1-3=1,0\n1-4=1,0\n3-5=1,0\n3-6=1,2\n6-7=1,0\n8-9=1,0\n8-10=2,0\n9-11=2,0\n11-12=1,0\n12-13=2,0\n13-10=1,0\n10-7=1,0\n7-14=2,0\n14-15=1,0\n15-13=1,0\n5-16=1,0\n!End\n]]></Cell>\n<Cell id="2"><![CDATA[tryptophan]]></Cell>\n<Cell id="3"><![CDATA[Trp]]></Cell>\n<Cell id="4"><![CDATA[W]]></Cell>\n</Row>\n</Content>\n</DataSheet>\n',biomolecules:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n <Summary>\n  <Title>Biomolecules</Title>\n  <Description><![CDATA[]]></Description>\n </Summary>\n <Header nrows="8" ncols="3">\n  <Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n  <Column name="Name" type="string" id="2">Template name</Column>\n  <Column name="Abbrev" type="string" id="3">Abbreviation code</Column>\n </Header>\n <Content>\n  <Row id="1">\n   <Cell id="1"><![CDATA[SketchEl!(11,12)\nN=0.7009,1.8000;0,0,i0\nC=2.0000,2.5500;0,0,i1\nC=-0.5981,2.5500;0,0,i0\nN=2.0000,4.0500;0,0,i0\nC=0.7009,4.8000;0,0,i0\nC=-0.5981,4.0500;0,0,i0\nN=-2.0194,2.0806;0,0,i0\nC=-2.9018,3.2889;0,0,i1\nN=-2.0260,4.5093;0,0,i0\nN=0.7009,6.3000;0,0,i2\nX=-2.4777,0.6523;0,0,i0\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n3-7=1,0\n7-8=1,0\n8-9=2,0\n9-6=1,0\n5-10=1,0\n7-11=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[adenine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="2">\n   <Cell id="1"><![CDATA[SketchEl!(12,13)\nN=0.7009,1.8000;0,0,i0\nC=2.0000,2.5500;0,0,i0\nC=-0.5981,2.5500;0,0,i0\nN=2.0000,4.0500;0,0,i1\nC=0.7009,4.8000;0,0,i0\nC=-0.5981,4.0500;0,0,i0\nN=-2.0194,2.0806;0,0,i0\nC=-2.9018,3.2889;0,0,i1\nN=-2.0260,4.5093;0,0,i0\nO=0.7009,6.3000;0,0,i0\nX=-2.4777,0.6523;0,0,i0\nN=3.2990,1.8000;0,0,i2\n1-2=2,0\n1-3=1,0\n2-4=1,0\n4-5=1,0\n5-6=1,0\n6-3=2,0\n3-7=1,0\n7-8=1,0\n8-9=2,0\n9-6=1,0\n5-10=2,0\n7-11=1,0\n2-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[guanine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="3">\n   <Cell id="1"><![CDATA[SketchEl!(9,9)\nC=-1.7510,2.3500;0,0,i0\nC=-3.0500,1.6000;0,0,i1\nN=-0.4519,1.6000;0,0,i0\nC=-3.0500,0.1000;0,0,i1\nN=-1.7510,-0.6500;0,0,i0\nC=-0.4519,0.1000;0,0,i0\nN=-1.7510,3.8500;0,0,i2\nO=0.8471,-0.6500;0,0,i0\nX=-1.7510,-2.1500;0,0,i0\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=1,0\n6-3=1,0\n1-7=1,0\n6-8=2,0\n5-9=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[cytosine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="4">\n   <Cell id="1"><![CDATA[SketchEl!(9,9)\nC=-1.7510,2.3500;0,0,i0\nC=-3.0500,1.6000;0,0,i1\nN=-0.4519,1.6000;0,0,i1\nC=-3.0500,0.1000;0,0,i1\nN=-1.7510,-0.6500;0,0,i0\nC=-0.4519,0.1000;0,0,i0\nO=-1.7510,3.8500;0,0,i0\nO=0.8471,-0.6500;0,0,i0\nX=-1.7510,-2.1500;0,0,i0\n1-2=1,0\n3-1=1,0\n2-4=2,0\n4-5=1,0\n5-6=1,0\n6-3=1,0\n1-7=2,0\n6-8=2,0\n5-9=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[uracil]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="5">\n   <Cell id="1"><![CDATA[SketchEl!(10,10)\nC=-1.7510,2.3500;0,0,i0\nC=-3.0500,1.6000;0,0,i0\nN=-0.4519,1.6000;0,0,i1\nC=-3.0500,0.1000;0,0,i1\nN=-1.7510,-0.6500;0,0,i0\nC=-0.4519,0.1000;0,0,i0\nO=-1.7510,3.8500;0,0,i0\nO=0.8471,-0.6500;0,0,i0\nX=-1.7510,-2.1500;0,0,i0\nC=-4.3490,2.3500;0,0,i3\n1-2=1,0\n3-1=1,0\n2-4=2,0\n4-5=1,0\n5-6=1,0\n6-3=1,0\n1-7=2,0\n6-8=2,0\n5-9=1,0\n2-10=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[thymine]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="6">\n   <Cell id="1"><![CDATA[SketchEl!(27,29)\nN=4.6026,-2.2500;0,0,i0\nC=5.9018,-1.5000;0,0,i1\nC=3.3036,-1.5000;0,0,i0\nN=5.9018,0.0000;0,0,i0\nC=4.6026,0.7500;0,0,i0\nC=3.3036,0.0000;0,0,i0\nN=1.8824,-1.9694;0,0,i0\nC=1.0000,-0.7610;0,0,i1\nN=1.8756,0.4593;0,0,i0\nN=4.6026,2.2500;0,0,i2\nC=1.4240,-3.3975;0,0,i1\nO=0.0030,-3.8657;0,0,i0\nC=0.0040,-5.3680;0,0,i1\nC=2.3071,-4.6051;0,0,i1\nC=1.4322,-5.8263;0,0,i1\nO=3.8071,-4.5978;0,0,i1\nO=1.9031,-7.2505;0,0,i1\nC=-1.2076,-6.2522;0,0,i2\nO=-2.5790,-5.6451;0,0,i0\nP=-3.7905,-6.5296;0,0,i0\nO=-4.6750,-5.3179;0,0,i0\nO=-2.9062,-7.7412;0,0,i1\nO=-5.0022,-7.4140;0,0,i0\nP=-6.3738,-6.8069;0,0,i0\nO=-5.7668,-5.4352;0,0,i0\nO=-6.9808,-8.1786;0,0,i1\nO=-7.7455,-6.1998;0,0,i1\n1-2=1,0\n1-3=2,0\n2-4=2,0\n4-5=1,0\n5-6=2,0\n6-3=1,0\n3-7=1,0\n7-8=1,0\n8-9=2,0\n9-6=1,0\n5-10=1,0\n11-7=1,1\n13-12=1,0\n12-11=1,0\n11-14=1,0\n14-15=1,0\n15-13=1,0\n14-16=1,2\n15-17=1,2\n13-18=1,1\n18-19=1,0\n20-21=2,0\n20-22=1,0\n20-23=1,0\n20-19=1,0\n24-25=2,0\n24-26=1,0\n24-27=1,0\n24-23=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[ADP]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="7">\n   <Cell id="1"><![CDATA[SketchEl!(18,19)\nC=2.2100,1.1549;0,0,i0\nN=1.0000,0.2749;0,0,i1\nC=1.4600,-1.1549;0,0,i0\nN=3.4200,0.2749;0,0,i1\nC=2.9600,-1.1549;0,0,i0\nC=3.4282,-2.5763;0,0,i1\nS=2.2199,-3.4587;0,0,i0\nC=0.9995,-2.5829;0,0,i2\nO=2.2100,2.6549;0,0,i0\nH=4.4599,-1.1497;0,0,i0\nH=-0.0399,-1.1545;0,0,i0\nC=4.8563,-3.0352;0,0,i2\nC=5.9677,-2.0279;0,0,i2\nC=7.3958,-2.4869;0,0,i2\nC=8.5073,-1.4796;0,0,i2\nC=9.9353,-1.9386;0,0,i0\nO=11.0468,-0.9314;0,0,i0\nO=10.2519,-3.4048;0,0,i1\n3-2=1,0\n2-1=1,0\n1-4=1,0\n4-5=1,0\n5-3=1,0\n5-6=1,0\n6-7=1,0\n7-8=1,0\n8-3=1,0\n1-9=2,0\n5-10=1,1\n3-11=1,1\n6-12=1,2\n12-13=1,0\n13-14=1,0\n14-15=1,0\n16-17=2,0\n16-18=1,0\n16-15=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[biotin]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="8">\n   <Cell id="1"><![CDATA[SketchEl!(24,27)\nC=-7.1991,2.0500;0,0,i1\nC=-8.4981,1.3000;0,0,i1\nC=-8.4981,-0.2000;0,0,i0\nC=-7.1991,-0.9500;0,0,i1\nC=-5.9000,-0.2000;0,0,i0\nC=-5.9000,1.3000;0,0,i0\nC=-4.6009,-0.9500;0,0,i2\nC=-3.3019,-0.2000;0,0,i2\nC=-3.3019,1.3000;0,0,i0\nC=-4.6009,2.0500;0,0,i0\nC=-2.0028,2.0500;0,0,i0\nC=-2.0028,3.5500;0,0,i0\nC=-3.3018,4.3000;0,0,i2\nC=-4.6008,3.5501;0,0,i2\nC=-0.5814,4.0194;0,0,i1\nC=0.3009,2.8111;0,0,i1\nC=-0.5749,1.5907;0,0,i2\nO=-9.7971,-0.9500;0,0,i1\nH=-4.6009,0.5500;0,0,i0\nH=-3.3019,2.8000;0,0,i0\nH=-2.0028,0.5500;0,0,i0\nC=-2.0028,5.0500;0,0,i3\nO=-0.1231,5.4476;0,0,i1\nO=1.8009,2.8174;0,0,i1\n2-3=2,0\n2-1=1,0\n3-4=1,0\n4-5=2,0\n5-6=1,0\n6-1=2,0\n8-9=1,0\n8-7=1,0\n9-10=1,0\n10-6=1,0\n5-7=1,0\n12-13=1,0\n12-11=1,0\n13-14=1,0\n14-10=1,0\n9-11=1,0\n12-15=1,0\n15-16=1,0\n16-17=1,0\n17-11=1,0\n3-18=1,0\n10-19=1,2\n9-20=1,1\n11-21=1,2\n12-22=1,1\n15-23=1,1\n16-24=1,2\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[estrogen]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n </Content>\n</DataSheet>\n',saccharides:'<?xml version="1.0" encoding="UTF-8"?>\n<DataSheet>\n <Summary>\n  <Title>Saccharides</Title>\n  <Description><![CDATA[]]></Description>\n </Summary>\n <Header nrows="7" ncols="3">\n  <Column name="Molecule" type="molecule" id="1">Molecular structure</Column>\n  <Column name="Name" type="string" id="2">Template name</Column>\n  <Column name="Abbrev" type="string" id="3">Abbreviation code</Column>\n </Header>\n <Content>\n  <Row id="1">\n   <Cell id="1"><![CDATA[SketchEl!(12,12)\nC=1.0000,0.5911;0,0,i1\nC=2.2990,0.1911;0,0,i1\nC=1.7500,-0.7078;0,0,i1\nO=3.5981,0.9411;0,0,i0\nC=3.0490,0.0421;0,0,i1\nC=4.3481,-0.7078;0,0,i1\nO=-0.2797,-0.1912;0,0,i1\nO=0.2727,-0.9682;0,0,i1\nC=1.4079,1.3978;0,0,i2\nO=2.0074,2.7728;0,0,i1\nO=3.4372,-1.4066;0,0,i1\nO=4.5368,-2.1958;0,0,i1\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n6-5=1,0\n4-6=1,0\n1-7=1,0\n3-8=1,0\n2-9=1,0\n9-10=1,0\n5-11=1,0\n6-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[glucose alpha]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="2">\n   <Cell id="1"><![CDATA[SketchEl!(12,12)\nC=1.0000,0.5910;0,0,i1\nC=2.2990,0.1911;0,0,i1\nC=1.7500,-0.7077;0,0,i1\nO=3.5980,0.9411;0,0,i0\nC=3.0490,0.0421;0,0,i1\nC=4.3481,-0.7077;0,0,i1\nO=-0.2797,-0.1912;0,0,i1\nO=0.2727,-0.9682;0,0,i1\nC=1.4078,1.3977;0,0,i2\nO=2.0074,2.7727;0,0,i1\nO=3.4372,-1.4065;0,0,i1\nO=5.6169,0.0920;0,0,i1\n1-2=1,0\n1-3=1,0\n2-4=1,0\n3-5=1,0\n6-5=1,0\n4-6=1,0\n1-7=1,0\n3-8=1,0\n2-9=1,0\n9-10=1,0\n5-11=1,0\n6-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[glucose beta]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="3">\n   <Cell id="1"><![CDATA[SketchEl!(16,15)\nC=1.5000,0.0000;0,0,i0\nC=1.4999,1.5000;0,0,i1\nC=1.4999,-1.5000;0,0,i0\nO=3.0000,0.0000;0,0,i1\nH=0.0000,0.0000;0,0,i0\nC=1.4999,-3.0000;0,0,i0\nH=2.9999,-1.5000;0,0,i0\nO=-0.0000,-1.4999;0,0,i1\nC=1.4999,-4.5000;0,0,i0\nO=2.9999,-3.0000;0,0,i1\nH=-0.0000,-2.9999;0,0,i0\nC=1.4999,-6.0000;0,0,i2\nO=2.9999,-4.5000;0,0,i1\nH=-0.0000,-4.5000;0,0,i0\nO=2.7990,-6.7500;0,0,i1\nO=0.2009,2.2499;0,0,i0\n1-2=1,0\n1-3=1,0\n1-4=1,0\n1-5=1,0\n3-6=1,0\n3-7=1,0\n3-8=1,0\n6-9=1,0\n6-10=1,0\n6-11=1,0\n9-12=1,0\n9-13=1,0\n9-14=1,0\n12-15=1,0\n2-16=2,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[glucose chain]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="4">\n   <Cell id="1"><![CDATA[SketchEl!(12,12)\nC=1.3913,1.2718;0,0,i1\nC=0.4839,-0.0000;0,0,i1\nC=1.3913,-1.2718;0,0,i1\nC=3.2063,-1.2718;0,0,i1\nC=4.1139,0.0000;0,0,i1\nO=3.2063,1.2718;0,0,i0\nC=1.3912,2.7718;0,0,i2\nO=4.1139,-1.4998;0,0,i1\nO=3.2128,-2.7718;0,0,i1\nO=1.3717,0.2280;0,0,i1\nO=0.4839,-1.5000;0,0,i1\nO=0.0922,3.5218;0,0,i1\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-1=1,0\n1-7=1,1\n5-8=1,2\n4-9=1,2\n3-10=1,1\n2-11=1,2\n7-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[glucose alpha]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="5">\n   <Cell id="1"><![CDATA[SketchEl!(12,12)\nC=1.3912,1.2718;0,0,i1\nC=0.4839,-0.0000;0,0,i1\nC=1.3912,-1.2718;0,0,i1\nC=3.2063,-1.2718;0,0,i1\nC=4.1139,0.0000;0,0,i1\nO=3.2063,1.2718;0,0,i0\nC=1.3911,2.7718;0,0,i2\nO=4.1139,1.4997;0,0,i1\nO=3.2128,-2.7718;0,0,i1\nO=1.3717,0.2280;0,0,i1\nO=0.4839,-1.5000;0,0,i1\nO=0.0922,3.5218;0,0,i1\n2-3=1,0\n2-1=1,0\n3-4=1,0\n4-5=1,0\n5-6=1,0\n6-1=1,0\n1-7=1,1\n5-8=1,1\n4-9=1,2\n3-10=1,1\n2-11=1,2\n7-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[glucose beta]]></Cell>\n   <Cell id="3"><![CDATA[]]></Cell>\n  </Row>\n  <Row id="6">\n   <Cell id="1"><![CDATA[SketchEl!(12,12)\nO=2.2100,1.1549;0,0,i0\nC=1.0000,0.2749;0,0,i0\nC=1.4600,-1.1549;0,0,i1\nC=3.4200,0.2749;0,0,i1\nC=2.9600,-1.1549;0,0,i1\nO=3.8434,-2.3672;0,0,i1\nC=4.8460,0.7402;0,0,i2\nO=5.1561,2.2078;0,0,i1\nC=-0.4260,0.7402;0,0,i2\nO=-1.5419,-0.2621;0,0,i1\nO=0.7658,1.7566;0,0,i1\nO=0.5765,-2.3672;0,0,i1\n3-2=1,0\n2-1=1,0\n1-4=1,0\n4-5=1,0\n5-3=1,0\n5-6=1,1\n4-7=1,2\n7-8=1,0\n2-9=1,2\n9-10=1,0\n2-11=1,1\n3-12=1,2\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[fructose alpha]]></Cell>\n   <Cell id="3"/>\n  </Row>\n  <Row id="7">\n   <Cell id="1"><![CDATA[SketchEl!(12,12)\nO=2.2100,1.1549;0,0,i0\nC=1.0000,0.2749;0,0,i0\nC=1.4600,-1.1549;0,0,i1\nC=3.4200,0.2749;0,0,i1\nC=2.9600,-1.1549;0,0,i1\nO=3.8434,-2.3672;0,0,i1\nC=4.8460,0.7402;0,0,i2\nO=5.1561,2.2078;0,0,i1\nO=-0.4260,0.7402;0,0,i1\nC=0.7658,1.7566;0,0,i2\nO=0.5765,-2.3672;0,0,i1\nO=-0.6344,2.2946;0,0,i1\n3-2=1,0\n2-1=1,0\n1-4=1,0\n4-5=1,0\n5-3=1,0\n5-6=1,1\n4-7=1,2\n7-8=1,0\n2-9=1,2\n2-10=1,1\n3-11=1,2\n10-12=1,0\n!End\n]]></Cell>\n   <Cell id="2"><![CDATA[fructose beta]]></Cell>\n   <Cell id="3"/>\n  </Row>\n </Content>\n</DataSheet>\n'};class Bn{constructor(){this.abbrevs=[]}static getTemplateKeys(){return Object.keys(Ln)}static getTemplateData(t){return Ln[t]}static needsSetup(){return!this.main}static setupData(){return t=this,e=void 0,i=function*(){if(!this.main){this.main=new Bn;for(let t of this.getTemplateKeys()){let e=this.getTemplateData(t),n=On.readXML(e),i=n.firstColOfType("molecule"),s=n.findColByName("Abbrev","string");if(!(i<0||s<0))for(let t=0;t<n.numRows;t++){let e=n.getMoleculeClone(t,i),o=n.getString(t,s);if(!e||!o)continue;let r=0,a=0;for(let t=1;t<=e.numAtoms;t++)e.atomElement(t)==Qt.TEMPLATE_ATTACHMENT&&(0==a&&(a=t),e.setAtomElement(t,Qt.ABBREV_ATTACHMENT),r++);1==r&&(a>1&&e.swapAtoms(1,a),this.main.submitAbbreviation(o,e))}}}},new((n=void 0)||(n=Promise))((function(s,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}getAbbrevs(){return this.abbrevs.slice(0)}submitAbbreviation(t,e,n=!1){let i=e.clone();this.submitFragment(t,i,n)}submitMolecule(t,e=!1){let n=t.clone();for(let t=1;t<=n.numAtoms;t++){let i=Qt.getAbbrev(n,t);i&&this.submitFragment(n.atomElement(t),i,e)}}substituteAbbrevName(t,e){let i=Qt.getAbbrev(t,e);if(!i)return!1;let s=Qt.expandedAbbrevs(i),o=Qt.molecularFormula(s),r=Nn.create(bn.createStrictRubric(s),Nn.CLASS_ECFP6).getUniqueHashes();for(let s of this.abbrevs)if(s.frag.numAtoms==i.numAtoms){let a=Zt.sketchEquivalent(i,s.frag);if(!a){let t=Qt.expandedAbbrevs(s.frag);if(o==Qt.molecularFormula(t)){let e=Nn.create(bn.createStrictRubric(t),Nn.CLASS_ECFP6).getUniqueHashes();n.equals(r,e)&&(a=!0)}}if(a)return t.setAtomElement(e,s.name),!0}return!1}submitFragment(t,e,n){if("?"==t)return;let i=0,s=0,o=e.atomAdjList(1);for(let t of o)i+=e.atomX(t)-e.atomX(1),s+=e.atomY(t)-e.atomY(1);if(o.length>1){let t=1/o.length;i*=t,s*=t}if(U(i,s)>.1*.1){let t=Math.atan2(s,i);Math.abs(t)>2*tt&&Zt.rotateMolecule(e,-t)}let r=-1;for(let e=0;e<this.abbrevs.length;e++)if(this.abbrevs[e].name==t){r=e;break}let[a,l]=this.formatAbbrevLabel(t),d={name:t,frag:e,nameHTML:a,nameSearch:l};r<0?n?this.abbrevs.unshift(d):this.abbrevs.push(d):n&&r>0?(this.abbrevs.splice(r,1),this.abbrevs.unshift(d)):this.abbrevs[r]=d}formatAbbrevLabel(t){let e="",n="",i=(t,i)=>{i&&(e+="<"+i+">"),e+=wt(t),n+=t,i&&(e+="</"+i+">")};for(let e of t.split("|")){for(;;){let t=e.match(/^(.*?)\{(.*?)\}(.*)$/);if(!t)break;let n=t[1],s=t[2],o=t[3];i(n,null),s.startsWith("^")?i(s.substring(1),"sup"):i(s,"sub"),e=o}i(e,null)}return[e,n.toLowerCase()]}}Bn.main=null;class qn{}qn.FMT_NATIVE="native",qn.FMT_XMLDS="xmlds",qn.FMT_MDLMOL="mdlmol",qn.FMT_MDLSDF="mdlsdf",qn.FMT_MDLRDF="mdlrdf",qn.FMT_MDLRXN="mdlrxn",qn.GFX_PNG="png",qn.GFX_PNGZIP="pngzip",qn.GFX_SVG="svg",qn.GFX_SVGZIP="svgzip",qn.GFX_PDF="pdf",qn.GFX_PDFZIP="pdfzip",qn.GFX_EPS="eps",qn.GFX_HTML="html",qn.GFX_OPENDOC_ODG="odg",qn.GFX_OPENDOC_ODT="odt",qn.GFX_OPENDOC_ODS="ods",qn.GFX_OOXML_DOCX="docx",qn.GFX_OOXML_XLSX="xlsx",qn.FORMAT_DESCR={native:"SketchEl Molecule",xmlds:"DataSheet XML",mdlmol:"MDL MOL (single molecule)",mdlsdf:"MDL SDF (molecules + data)",mdlrdf:"MDL RDF (reactions + data)",mdlrxn:"MDL RXN (single reaction)",png:"PNG image (raster)",pngzip:"ZIP (multiple PNG files)",svg:"SVG picture (vector)",svgzip:"ZIP (multiple SVG files)",pdf:"PDF diagram (vector)",pdfzip:"ZIP (multiple PDF files)",eps:"Encapsulated PostScript (vector)",html:"HTML with embedded SVG",odg:"OpenDocument Graphic",odt:"OpenDocument Text",ods:"OpenDocument SpreadSheet",docx:"Microsoft Word",xlsx:"Microsoft Excel"},qn.FORMAT_EXTN={native:".el",xmlds:".ds",mdlmol:".mol",mdlsdf:".sdf",mdlrdf:".rdf",mdlrxn:".rxn",png:".png",pngzip:"_png.zip",svg:".svg",svgzip:"_svg.zip",pdf:".pdf",pdfzip:"_pdf.zip",eps:".eps",html:".html",odg:".odg",odt:".odt",ods:".ods",docx:".docx",xlsx:".xlsx"},qn.FORMAT_MIMETYPE={native:"chemical/x-sketchel",xmlds:"chemical/x-datasheet",mdlmol:"chemical/x-mdl-molfile",mdlsdf:"chemical/x-mdl-sdfile",mdlrdf:"chemical/x-mdl-rdfile",mdlrxn:"chemical/x-mdl-rxnfile",png:"image/png",pngzip:"application/zip",svg:"image/png",svgzip:"application/zip",pdf:"application/pdf",pdfzip:"application/zip",eps:"image/eps",html:"text/html",odg:"application/vnd.oasis.opendocument.graphics",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};let _n=null;const In={units:"http://purl.obolibrary.org/obo/UO_0000000 units\n- http://purl.obolibrary.org/obo/UO_0000051 concentration units\n- - http://www.bioassayontology.org/bao#BAO_0000102 -log10[mol/L]\n- - http://purl.obolibrary.org/obo/UO_0000175 grams per litre (g/L)\n- - http://www.bioassayontology.org/bao#BAO_0000101 log10[mol/L]\n- - http://purl.obolibrary.org/obo/UO_0000275 micrograms per litre (ug/L)\n- - http://purl.obolibrary.org/obo/UO_0000064 micromoles per litre (umol/L)\n- - http://purl.obolibrary.org/obo/UO_0000273 milligrams per litre (mg/L)\n- - http://purl.obolibrary.org/obo/UO_0000063 millimoles per litre (mmol/L)\n- - http://purl.obolibrary.org/obo/UO_0000062 moles per litre (mol/L)\n- - http://purl.obolibrary.org/obo/UO_0000065 nanomoles per litre (nmol/L)\n- - http://purl.obolibrary.org/obo/UO_0000066 picomoles per litre (pmol/L)\n- http://purl.obolibrary.org/obo/UO_0000186 dimensionless unit\n- - http://www.bioassayontology.org/bao#BAO_0080023 binary (true/false)\n- - http://purl.obolibrary.org/obo/UO_0000187 percent"};class zn{static get main(){return _n}static getOntologyKeys(){return Object.keys(In)}static getOntologyData(t){return In[t]}constructor(){this.roots=[],this.mapTerms=new Map,this.alreadyLoaded=new Set}static init(){if(!_n){_n=new zn;for(let t of this.getOntologyKeys())_n.loadFromString(t,this.getOntologyData(t))}}getRoots(){return this.roots}hasTerm(t){return this.mapTerms.has(t)}getBranch(t){return this.mapTerms.get(t)}getBranchList(t){if("string"==typeof t){let e=this.mapTerms.get(t);if(!e)throw`Unknown branch URI: ${t}`;if(e.length>1)throw`Ambiguous branch URI occurs more than once: ${t}`;t=e[0]}let e=[],i=t=>{e.push(t);for(let e of n.safeArray(t.children))i(e)};return i(t),e}loadFromString(t,e){this.alreadyLoaded.has(t)||(this.alreadyLoaded.add(t),this.loadContent(e))}loadContent(t){let e=[],n=0;for(let i of t.split(/\n/)){if(n++,i=i.trim(),!i||i.startsWith("#"))continue;let t=i.indexOf("http");if(t<0)throw`Line ${n} invalid, no URI term: ${i}`;let s=0;for(let e=0;e<t;e++)"-"==i.charAt(e)&&s++;let o=i.substring(t);if(t=o.indexOf(" "),t<0)throw`Line ${n} invalid, no label: ${i}`;let r=o.substring(t+1);o=o.substring(0,t);let a=null;if(0==s&&(a=this.roots.find((t=>t.uri==o))),!a){if(a={uri:o,label:r,parent:null,children:[],depth:s},0==s)this.roots.push(a);else{for(let t=e.length-1;t>=0;t--)if(e[t].depth==s-1){a.parent=e[t],e[t].children.push(a);break}if(!a.parent)throw`Line ${n} invalid hierarchy, no parent found`}let t=this.mapTerms.get(o);t?t.push(a):this.mapTerms.set(o,[a])}e.push(a)}}debugString(t){let e=[],n=t=>{e.push("* ".repeat(t.depth)+`<${t.uri}> "${t.label}"`);for(let e of t.children)n(e)};return n(t),e.join("\n")}}class Pn{}function Fn(t){Pn.RESOURCE_URL=t;try{document}catch(t){return}document&&Xn("main",function(){let t=S(Pn.lowlight);return`\n\t\t.wmk-button\n\t\t{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding: 6px 12px;\n\t\t\tmargin-bottom: 0;\n\t\t\tfont-family: 'Open Sans', sans-serif;\n\t\t\tfont-size: 14px;\n\t\t\tfont-weight: normal;\n\t\t\tline-height: 1.42857143;\n\t\t\ttext-align: center;\n\t\t\twhite-space: nowrap;\n\t\t\tvertical-align: middle;\n\t\t\tcursor: pointer;\n\t\t\tbackground-image: none;\n\t\t\tborder: 1px solid transparent;\n\t\t\tborder-radius: 4px;\n\t\t\t-ms-touch-action: manipulation; touch-action: manipulation;\n\t\t\t-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;\n\t\t}\n\t\t.wmk-button:focus,\n\t\t.wmk-button:active:focus,\n\t\t.wmk-button.active:focus,\n\t\t.wmk-button.focus,\n\t\t.wmk-button:active.focus,\n\t\t.wmk-button.active.focus\n\t\t{\n\t\t\toutline: thin dotted;\n\t\t\toutline: 5px auto -webkit-focus-ring-color;\n\t\t\toutline-offset: -2px;\n\t\t}\n\t\t.wmk-button:hover,\n\t\t.wmk-button:focus,\n\t\t.wmk-button.focus\n\t\t{\n\t\t\tcolor: #333;\n\t\t\ttext-decoration: none;\n\t\t}\n\t\t.wmk-button:active,\n\t\t.wmk-button.active\n\t\t{\n\t\t\tbackground-image: none;\n\t\t\toutline: 0;\n\t\t\t-webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);\n\t\t\tbox-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);\n\t\t}\n\t\t.wmk-button.disabled,\n\t\t.wmk-button[disabled],\n\t\tfieldset[disabled] .wmk-button\n\t\t{\n\t\t\tcursor: not-allowed;\n\t\t\tfilter: alpha(opacity=65);\n\t\t\t-webkit-box-shadow: none;\n\t\t\tbox-shadow: none;\n\t\t\topacity: .65;\n\t\t}\n\t\ta.wmk-button.disabled,\n\t\tfieldset[disabled] a.wmk-button\n\t\t{\n\t\t\tpointer-events: none;\n\t\t}\n\n\t\t/* shrunken button */\n\n\t\t.wmk-button-small\n\t\t{\n\t\t\tpadding: 2px 4px;\n\t\t\tline-height: 1;\n\t\t\tfont-size: 12px;\n\t\t}\n\n\t\t/* default button */\n\n\t\t.wmk-button-default\n\t\t{\n\t\t\tcolor: #333;\n\t\t\tbackground-color: #fff;\n\t\t\tbackground-image: linear-gradient(to right bottom, #FFFFFF, #E0E0E0);\n\t\t\tborder-color: #ccc;\n\t\t}\n\t\t.wmk-button-default:focus,\n\t\t.wmk-button-default.focus\n\t\t{\n\t\t\tcolor: #333;\n\t\t\tbackground-color: #e6e6e6;\n\t\t\tborder-color: #8c8c8c;\n\t\t}\n\t\t.wmk-button-default:hover\n\t\t{\n\t\t\tcolor: #333;\n\t\t\tbackground-color: #e6e6e6;\n\t\t\tborder-color: #adadad;\n\t\t}\n\t\t.wmk-button-default:active,\n\t\t.wmk-button-default.active,\n\t\t.open > .dropdown-toggle.wmk-button-default\n\t\t{\n\t\t\tcolor: #333;\n\t\t\tbackground-color: #e6e6e6;\n\t\t\tborder-color: #adadad;\n\t\t}\n\t\t.wmk-button-default:active:hover,\n\t\t.wmk-button-default.active:hover,\n\t\t.open > .dropdown-toggle.wmk-button-default:hover,\n\t\t.wmk-button-default:active:focus,\n\t\t.wmk-button-default.active:focus,\n\t\t.open > .dropdown-toggle.wmk-button-default:focus,\n\t\t.wmk-button-default:active.focus,\n\t\t.wmk-button-default.active.focus,\n\t\t.open > .dropdown-toggle.wmk-button-default.focus\n\t\t{\n\t\t\tcolor: #333;\n\t\t\tbackground-color: #d4d4d4;\n\t\t\tborder-color: #8c8c8c;\n\t\t}\n\t\t.wmk-button-default:active,\n\t\t.wmk-button-default.active,\n\t\t.open > .dropdown-toggle.wmk-button-default\n\t\t{\n\t\t\tbackground-image: none;\n\t\t}\n\t\t.wmk-button-default.disabled:hover,\n\t\t.wmk-button-default[disabled]:hover,\n\t\tfieldset[disabled] .wmk-button-default:hover,\n\t\t.wmk-button-default.disabled:focus,\n\t\t.wmk-button-default[disabled]:focus,\n\t\tfieldset[disabled] .wmk-button-default:focus,\n\t\t.wmk-button-default.disabled.focus,\n\t\t.wmk-button-default[disabled].focus,\n\t\tfieldset[disabled] .wmk-button-default.focus\n\t\t{\n\t\t\tbackground-color: #fff;\n\t\t\tborder-color: #ccc;\n\t\t}\n\t\t.wmk-button-default .badge\n\t\t{\n\t\t\tcolor: #fff;\n\t\t\tbackground-color: #333;\n\t\t}\n\n\t\t/* primary button */\n\n\t\t.wmk-button-primary\n\t\t{\n\t\t\tcolor: #fff;\n\t\t\tbackground-color: #008FD2;\n\t\t\tbackground-image: linear-gradient(to right bottom, ${S(Pn.lowlightEdge1)}, ${S(Pn.lowlightEdge2)});\n\t\t\tborder-color: #00C0C0;\n\t\t}\n\t\t.wmk-button-primary:focus,\n\t\t.wmk-button-primary.focus\n\t\t{\n\t\t\tcolor: #fff;\n\t\t\tbackground-color: ${t};\n\t\t\tborder-color: #122b40;\n\t\t}\n\t\t.wmk-button-primary:hover\n\t\t{\n\t\t\tcolor: #fff;\n\t\t\tbackground-color: #286090;\n\t\t\tborder-color: #204d74;\n\t\t}\n\t\t.wmk-button-primary:active,\n\t\t.wmk-button-primary.active,\n\t\t.open > .dropdown-toggle.wmk-button-primary\n\t\t{\n\t\t\tcolor: #fff;\n\t\t\tbackground-color: #286090;\n\t\t\tborder-color: #20744d;\n\t\t}\n\t\t.wmk-button-primary:active:hover,\n\t\t.wmk-button-primary.active:hover,\n\t\t.open > .dropdown-toggle.wmk-button-primary:hover,\n\t\t.wmk-button-primary:active:focus,\n\t\t.wmk-button-primary.active:focus,\n\t\t.open > .dropdown-toggle.wmk-button-primary:focus,\n\t\t.wmk-button-primary:active.focus,\n\t\t.wmk-button-primary.active.focus,\n\t\t.open > .dropdown-toggle.wmk-button-primary.focus\n\t\t{\n\t\t\tcolor: #fff;\n\t\t\tbackground-color: ${S(Pn.highlight)};\n\t\t\tbackground-image: linear-gradient(to right bottom, ${S(Pn.highlightEdge1)}, ${S(Pn.highlightEdge2)});\n\t\t\tborder-color: #12802b;\n\t\t}\n\t\t.wmk-button-primary:active,\n\t\t.wmk-button-primary.active,\n\t\t.open > .dropdown-toggle.wmk-button-primary\n\t\t{\n\t\t\tbackground-image: none;\n\t\t}\n\t\t.wmk-button-primary.disabled:hover,\n\t\t.wmk-button-primary[disabled]:hover,\n\t\tfieldset[disabled] .wmk-button-primary:hover,\n\t\t.wmk-button-primary.disabled:focus,\n\t\t.wmk-button-primary[disabled]:focus,\n\t\tfieldset[disabled] .wmk-button-primary:focus,\n\t\t.wmk-button-primary.disabled.focus,\n\t\t.wmk-button-primary[disabled].focus,\n\t\tfieldset[disabled] .wmk-button-primary.focus\n\t\t{\n\t\t\tbackground-color: #337ab7;\n\t\t\tborder-color: #2ea46d;\n\t\t}\n\t\t.wmk-button-primary .badge\n\t\t{\n\t\t\tcolor: #337ab7;\n\t\t\tbackground-color: #fff;\n\t\t}\n\t`}())}Pn.BASE_URL=null,Pn.RESOURCE_URL=null,Pn.foreground=0,Pn.background=16777215,Pn.lowlight=2412752,Pn.lowlightEdge1=4707794,Pn.lowlightEdge2=36817,Pn.highlight=65280,Pn.highlightEdge1=51801,Pn.highlightEdge2=34384,Pn.error=16711680;let jn=new Set;function Un(t){return jn.has(t)}function Xn(t,e){if(jn.has(t))return!1;let n=document.createElement("style");return n.innerHTML=e,document.head.appendChild(n),jn.add(t),!0}const Yn="\n    *.wmk-tooltip-outer\n    {\n\t\tposition: absolute;\n\t\tborder-radius: 4px;\n\t\tborder: 1px solid black;\n\t\tbackground-color: white;\n\t\tpadding: 1px;\n\t\tpointer-events: none;\n        font-family: 'Open Sans', sans-serif;\n\t\tfont-size: 14px;\n    }\n\t*.wmk-tooltip-inner\n\t{\n\t\tcolor: white;\n\t\tborder-radius: 4px;\n\t\tbackground-color: black;\n\t\tpadding: 0.3em;\n\t\tmax-width: calc(min(40em, 50vw));\n\t}\n";let Wn=null,Hn=0;function Gn(t,e,n,i){Xn("tooltip",Yn);let s=k(t),o=new Qn(s,e,n,null==i?1e3:i);s.onMouseEnter((()=>o.start())),s.onMouseLeave((()=>o.stop()))}function Vn(t,e,n,i){Xn("tooltip",Yn);let s=k(t),o=new Qn(s,null,n,null==i?1e3:i);o.bodyCallback=e,s.onMouseEnter((()=>o.start())),s.onMouseLeave((()=>o.stop()))}function $n(t,e,n,i){Xn("tooltip",Yn),Kn(),Hn++,new Qn(k(t),n,i,0).start(e)}function Kn(){null!=Wn&&(Hn++,Wn.stop())}class Qn{constructor(t,e,n,i){this.widget=t,this.bodyHTML=e,this.titleHTML=n,this.delay=i,this.domTooltip=null}start(t){this.watermark=++Hn,(()=>{var e,n,i,s;e=this,n=void 0,s=function*(){null==this.bodyHTML&&this.bodyCallback&&(this.bodyHTML=yield this.bodyCallback()),window.setTimeout((()=>{this.watermark==Hn&&this.raise(t)}),this.delay)},new((i=void 0)||(i=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,a)}l((s=s.apply(e,n||[])).next())}))})()}stop(){this.domTooltip&&(this.domTooltip.remove(),this.domTooltip=null),this.watermark=-1}raise(t){if(!this.widget.exists())return;if(Wn=this,this.domTooltip)return;let e=this.domTooltip=k("<div/>").class("wmk-tooltip-outer").css({visibility:"hidden"}).appendTo(document.body),n=50;for(let t=this.widget;t&&0!=--n;t=t.parent()){let n=parseInt(t.elHTML.style.zIndex);if(n>0){e.setCSS("z-index",(n+1e3).toString());break}}let i=k("<div/>").appendTo(e).class("wmk-tooltip-inner"),s=null!=this.titleHTML&&this.titleHTML.length>0,o=null!=this.bodyHTML&&this.bodyHTML.length>0;s&&k("<div/>").appendTo(i).setHTML("<b>"+this.titleHTML+"</b>"),s&&o&&i.appendHTML("<hr/>"),o&&k("<div/>").appendTo(i).setHTML(this.bodyHTML);let r=window.innerWidth,a=window.innerHeight,l=this.widget.el.getBoundingClientRect(),d=l.left,p=l.top,h=d+l.width,c=p+l.height;t&&(d+=t.x,p+=t.y,h=d+t.w,c=p+t.h),e.css({left:"0px",top:"0px"}),setTimeout((()=>(()=>{let t=e.width(),n=e.height(),i=0,s=0;d+t<r?i=d:t<h&&(i=h-t),s=c+2+n<a?c+2:p-2-n>0?p-2-n:c+2,i+=window.pageXOffset,s+=window.pageYOffset,e.css({left:`${i}px`,top:`${s}px`,visibility:"visible"})})()),1);let m=()=>{this.watermark==Hn&&this.widget.isVisible()&&this.widget.exists()?setTimeout(m,100):this.stop()};setTimeout(m,100)}}class Zn{constructor(t=null){this.minPortionWidth=80,this.maxPortionWidth=80,this.maximumWidth=0,this.maximumHeight=0,this.minPortionHeight=20,this.maxPortionHeight=0,this.topMargin=50,this.title="Dialog",this.allowScroller=!0,this.zindex=null,this.callbackClose=null,this.callbackShown=null,this.parent=y(t),Xn("dialog","\n    *.wmk-dialog\n    {\n        font-family: 'Open Sans', sans-serif;\n\t\tfont-size: 16px;\n\t\tcolor: black;\n\t\tuser-select: none;\n    }\n\t*.wmk-noscroll\n\t{\n\t\toverflow: hidden;\n\t}\n")}onClose(t){this.callbackClose=t}onShown(t){this.callbackShown=t}open(){Kn();let t=this.parent||k(document.body);t.addClass("wmk-noscroll");let e=this.domObscureBackground=k("<div/>").appendTo(t);e.css({position:"fixed"}),e.css({left:"0",right:"0",top:"0",bottom:"0"}),e.css({"background-color":"black",opacity:.8}),e.onClick((()=>this.close()));let n=this.domObscureForeground=k("<div/>").appendTo(t);n.css({position:"fixed"}),n.css({left:"0",right:"0",top:"0",bottom:"0"}),this.zindex>0&&(e.setCSS("z-index",this.zindex),n.setCSS("z-index",this.zindex+1));let i=this.domPanelBoundary=k('<div class="wmk-dialog"/>').appendTo(n);i.css({"min-width":this.minPortionWidth+"%"}),this.maximumWidth>0?i.css({"max-width":this.maximumWidth+"px"}):null!=this.maxPortionWidth&&i.css({"max-width":this.maxPortionWidth+"%"}),this.maximumHeight>0?i.css({"max-height":this.maximumHeight+"px"}):this.maxPortionHeight>0&&i.css({"max-height":this.maxPortionHeight+"vh"}),i.css({"background-color":"white","border-radius":"6px",border:"1px solid black"}),i.css({position:"absolute"}),i.css({left:50-.5*this.minPortionWidth+"%"}),i.css({top:this.topMargin+"px"}),i.css({"min-height":this.minPortionHeight+"%"});let s=k("<div/>").appendTo(i).css({display:"flex"});s.css({"flex-direction":"column","align-items":"stretch"}),this.maximumHeight>0?s.css({"max-height":this.maximumHeight+"px"}):this.maxPortionHeight>0&&s.css({"max-height":this.maxPortionHeight+"vh"});let o=this.domTitle=k("<div/>").appendTo(s);o.css({"flex-shrink":"0","flex-grow":"0"}),o.css({margin:"0",padding:"0"}),o.css({"background-color":"#F0F0F0"}),o.css({"background-image":"linear-gradient(to right bottom, #FFFFFF, #E0E0E0)"}),o.css({"border-bottom":"1px solid #C0C0C0"}),o.css({"border-radius":"6px 6px 0 0"});let r=k("<div/>").appendTo(s).css({width:"100%"});r.css({"flex-shrink":"1","flex-grow":"0"}),this.allowScroller&&r.css({"overflow-y":"auto"}),this.domBody=k("<div/>").appendTo(r).css({padding:"0.5em"});let a=k("<table/>").appendTo(o),l=k("<tr/>").appendTo(a);a.attr({width:"100%"});let d=k('<td valign="center"/>').appendTo(l).css({padding:"0.5em"});k("<font/>").appendTo(d).css({"font-size":"1.5em","font-weight":"600"}).setText(this.title);let p=this.domTitleButtons=k('<td align="right" valign="center"/>').appendTo(l).css({padding:"0.5em"});this.domClose=k('<button class="wmk-button wmk-button-default">Close</button>').appendTo(p),this.domClose.onClick((()=>this.close())),this.populate(),this.repositionSize(),this.callbackShown&&this.callbackShown(this)}close(){Kn(),this.domObscureBackground.remove(),this.domObscureForeground.remove(),(this.parent||k(document.body)).removeClass("wmk-noscroll"),this.callbackClose&&this.callbackClose(this)}bump(){this.repositionSize()}bodyDOM(){return this.domBody}buttonsDOM(){return this.domTitleButtons}populate(){this.bodyDOM().setText("Empty dialog box.")}repositionSize(){let t=window.innerWidth,e=this.domPanelBoundary.width();this.domPanelBoundary.css({left:.5*(t-e)+"px"})}}class Jn{get contentDOM(){return this.domContent}constructor(){this.tagType="div",this.domContent=null}render(t){let e=this.tagType;this.domContent=k(`<${e}/>`).appendTo(t)}remove(){this.domContent&&this.domContent.remove(),this.domContent=null}addTooltip(t,e){Gn(this.contentDOM,t,e)}grabFocus(){this.domContent.grabFocus()}}var ti,ei;!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Top=2]="Top",t[t.Bottom=3]="Bottom",t[t.Centre=4]="Centre"}(ti||(ti={}));class ni extends Jn{constructor(t,e,n,i,s){super(),this.position=t,this.parentX=e,this.parentY=n,this.parentWidth=i,this.parentHeight=s,this.idealSize=50,this.width=0,this.height=0,this.selectedButton=null,this.highlightButton=null,this.maxButtonColumns=0,this.maxButtonRows=0,this.border=8421504,this.background=16777215,this.buttonColNorm1=4707794,this.buttonColNorm2=36817,this.buttonColActv1=3211113,this.buttonColActv2=34384,this.buttonColSel1=16777215,this.buttonColSel2=14737632,this.canvas=null,this.stack=[],this.display=[],this.hasBigButtons=!0,this.prefabImgSize=44,this.gripHeight=30,this.gripWidth=50,this.isRaised=!0,this.outPadding=2,this.inPadding=2,this.x=0,this.y=0,this.isMacLike=!1,this.isMacLike=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)}setParentSize(t,e){this.parentWidth=t,this.parentHeight=e,this.contentDOM&&(this.applyOffset(),this.redraw())}get topBank(){return this.stack.length>0?this.stack[this.stack.length-1]:null}get stackSize(){return this.stack.length}render(t){super.render(t),this.contentDOM.css({position:"absolute",width:`${this.width}px`,height:`${this.height}px`}),this.contentDOM.addClass("no_selection"),this.layoutButtons();let e="position: absolute; left: 0; top: 0;";e+="pointer-events: none;",this.canvas=b(this.contentDOM.el,"canvas",{width:this.width,height:this.height,style:"position: absolute; left: 0; top: 0;pointer-events: none;"}),this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.applyOffset(),this.redraw(),this.contentDOM.onClick((t=>this.mouseClick(t))),this.contentDOM.onDblClick((t=>this.mouseDoubleClick(t))),this.contentDOM.onMouseDown((t=>{t.preventDefault(),this.mouseDown(t)})),this.contentDOM.onMouseUp((t=>this.mouseUp(t))),this.contentDOM.onMouseOver((t=>this.mouseOver(t))),this.contentDOM.onMouseLeave((t=>this.mouseOut(t))),this.contentDOM.onMouseMove((t=>this.mouseMove(t)))}pushBank(t){t.buttonView=this,t.isSubLevel=this.stack.length>0,t.init(),this.stack.push(t),null!=this.canvas&&(this.layoutButtons(),this.replaceCanvas(),this.applyOffset(),this.redraw())}popBank(){0!=this.stack.length&&(n.last(this.stack).bankClosed(),this.stack.length--,null!=this.canvas&&(this.layoutButtons(),this.replaceCanvas(),this.applyOffset(),this.redraw()))}refreshBank(){null!=this.canvas&&(this.layoutButtons(),this.replaceCanvas(),this.applyOffset(),this.redraw())}getSelectedButton(){return this.selectedButton}setSelectedButton(t){t!=this.selectedButton&&(this.selectedButton=t,this.redraw())}cycleSelected(t){let e=this.display.filter((t=>"*"!=t.id));e.sort(((t,e)=>1e4*t.y+t.x-(1e4*e.y+e.x)));let n=0,i=e.length;for(let t=0;t<i;t++)if(e[t].id==this.selectedButton){n=t;break}this.selectedButton=e[(n+t+i)%i].id,this.redraw()}raiseBank(){this.isRaised||(this.isRaised=!0,this.contentDOM&&(this.layoutButtons(),this.replaceCanvas(),this.applyOffset(),this.redraw()))}lowerBank(){this.isRaised&&(this.isRaised=!1,this.contentDOM&&(this.layoutButtons(),this.replaceCanvas(),this.applyOffset(),this.redraw()))}getHasBigButtons(){return this.hasBigButtons}setHasBigButtons(t){this.hasBigButtons=t,this.prefabImgSize=t?44:36,this.idealSize=t?50:40}withinOutline(t,e){let n=this.width,i=this.height;if(t<0||t>n||e<0||e>i)return!1;if(this.position==ti.Centre||0==this.stack.length)return!0;if(this.position==ti.Left){let s=.5*i-1,o=this.gripHeight,r=.5*this.gripWidth;return t<n-o||e>s-r&&e<s+r}if(this.position==ti.Right){let n=.5*i-1,s=this.gripHeight,o=.5*this.gripWidth;return t>s||e>n-o&&e<n+o}if(this.position==ti.Top){let s=.5*n-1,o=this.gripHeight,r=.5*this.gripWidth;return e<i-o||t>s-r&&t<s+r}if(this.position==ti.Bottom){let i=.5*n-1,s=this.gripHeight,o=.5*this.gripWidth;return e>s||t>i-o&&t<i+o}return!0}gripSize(){return this.gripHeight}sizeForButtons(t){return this.idealSize*t+this.inPadding*(t-1)+2*this.outPadding}layoutButtons(){if(null==this.contentDOM)return;let t=this.outPadding,e=this.inPadding;if(this.removeDisplayButtons(),0==this.stack.length)return this.width=10,this.height=10,void(this.position==ti.Left||this.position==ti.Right?this.height=this.parentHeight:this.position!=ti.Top&&this.position!=ti.Bottom||(this.width=this.parentWidth));if(!this.isRaised)return this.position==ti.Left||this.position==ti.Right?(this.width=this.gripHeight,this.height=this.gripWidth+2*t):this.position!=ti.Top&&this.position!=ti.Bottom||(this.width=this.gripWidth+2*t,this.height=this.gripHeight),void this.addGripButton();let n=this.stack[this.stack.length-1];n.buttons=[],n.update();let i=0,s=0;1==this.stack.length||(this.position==ti.Left||this.position==ti.Right?s=this.gripHeight+e:this.position!=ti.Top&&this.position!=ti.Bottom||(i=this.gripHeight+e));let o=null,r=null;if(this.position==ti.Left||this.position==ti.Right){let i=Math.floor((this.parentHeight-2*t-e)/(this.idealSize+e)),s=Math.ceil(.5*i);for(let t=i;t>=s;t--){let e=Math.ceil(n.buttons.length/t);for(let i=e;i<=e+1;i++){let e=this.layoutMaxHeight(n,t,i),s=this.scoreLayout(e)+1*e[0].length;(null==o||s<r)&&(o=e,r=s)}}}else if(this.position==ti.Top||this.position==ti.Bottom){let s=Math.floor((this.parentWidth-2*t-e-i)/(this.idealSize+e)),a=Math.ceil(.5*s);for(let t=s;t>=a;t--){let e=this.layoutMaxWidth(n,t),i=this.scoreLayout(e)+1*e.length;(null==o||i<r)&&(o=e,r=i)}}let a=o[0].length,l=o.length;if(this.width=2*t+e+(this.idealSize+e)*a+i,this.height=2*t+e+(this.idealSize+e)*l+s,this.position==ti.Left||this.position==ti.Right?this.width+=this.gripHeight:this.position!=ti.Top&&this.position!=ti.Bottom||(this.height+=this.gripHeight),this.addGripButton(),i>0||s>0){let n={id:"!",x:t+e,y:t+e,width:i-e,height:s-e};this.position==ti.Right?n.x+=this.gripHeight:this.position==ti.Bottom&&(n.y+=this.gripHeight),0==i&&(n.width=a*this.idealSize+e*(a-1)),0==s&&(n.height=l*this.idealSize+e*(l-1)),this.display.push(n)}for(let r=0;r<l;r++)for(let l=0;l<a;l++)for(let a=0;a<n.buttons.length;a++)if(o[r][l]==n.buttons[a].id){let o={id:n.buttons[a].id};o.x=t+e+i+(this.idealSize+e)*l,o.y=t+e+s+(this.idealSize+e)*r,this.position==ti.Right?o.x+=this.gripHeight:this.position==ti.Bottom&&(o.y+=this.gripHeight),o.width=this.idealSize,o.height=this.idealSize,this.display.push(o)}}addGripButton(){if(this.position==ti.Centre)return;let t={id:"*"};this.position==ti.Left?(t.width=this.gripHeight-3,t.height=this.gripWidth-6,t.x=this.width-t.width-3-1,t.y=.5*(this.height-t.height)):this.position==ti.Right?(t.width=this.gripHeight-3,t.height=this.gripWidth-6,t.x=4,t.y=.5*(this.height-t.height)):this.position==ti.Top?(t.width=this.gripWidth-6,t.height=this.gripHeight-3,t.x=.5*(this.width-t.width),t.y=this.height-t.height-3-1):this.position==ti.Bottom&&(t.width=this.gripWidth-6,t.height=this.gripHeight-3,t.x=.5*(this.width-t.width),t.y=4),this.display.push(t)}replaceCanvas(){this.contentDOM.empty();for(let t=0;t<this.display.length;t++)this.display[t].imgDOM=null,this.display[t].helpSpan=null;let t="position: absolute; left: 0; top: 0;";t+="pointer-events: none;",this.canvas=b(this.contentDOM.el,"canvas",{width:this.width,height:this.height,style:"position: absolute; left: 0; top: 0;pointer-events: none;"})}removeDisplayButtons(){this.contentDOM.empty(),this.display=[]}applyOffset(){let t,e;this.position==ti.Left?(t=0,e=.5*(this.parentHeight-this.height)):this.position==ti.Right?(t=this.parentWidth-this.width,e=.5*(this.parentHeight-this.height)):this.position==ti.Top?(t=.5*(this.parentWidth-this.width),e=0):this.position==ti.Bottom?(t=.5*(this.parentWidth-this.width),e=this.parentHeight-this.height):(t=.5*(this.parentWidth-this.width),e=.5*(this.parentHeight-this.height)),this.x=this.parentX+t,this.y=this.parentY+e,this.contentDOM.css({position:"absolute"}),z(this.contentDOM,this.x,this.y,this.width,this.height)}redraw(){if(!this.contentDOM||!this.canvas)return;let t=gt();this.canvas.width=this.width*t,this.canvas.height=this.height*t,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px";let e=this.canvas.getContext("2d");e.save(),e.scale(t,t),e.clearRect(0,0,this.width,this.height);let n=this.traceOutline();e.fillStyle=R(this.background),e.fill(n),e.strokeStyle=R(this.border),e.lineWidth=1,e.stroke(n),this.stack.length>0&&this.stack[this.stack.length-1],this.contentDOM.css({width:this.width+"px",height:this.height+"px"});for(let t=0;t<this.display.length;t++){const i=this.display[t],s=this.buttonFromID(i.id);let o,r;if(null!=this.highlightButton&&i.id==this.highlightButton?(o=this.buttonColActv1,r=this.buttonColActv2):null!=this.selectedButton&&i.id==this.selectedButton?(o=this.buttonColSel1,r=this.buttonColSel2):(o=this.buttonColNorm1,r=this.buttonColNorm2),e.save(),n=ht(i.x+.5,i.y+.5,i.x+i.width-1,i.y+i.height-1,5),null!=r){let t=e.createLinearGradient(i.x,i.y,i.x+i.width,i.y+i.height);t.addColorStop(0,R(o)),t.addColorStop(1,R(r)),e.fillStyle=t}else e.fillStyle=R(o);if(e.fill(n),e.strokeStyle=R(this.border),e.lineWidth=.5,e.stroke(n),e.restore(),null!=i.imgDOM&&(i.imgDOM.remove(),i.imgDOM=null),null!=s){if(null==i.helpSpan){i.helpSpan=k('<span style="position: absolute;"/>').appendTo(this.contentDOM);let t=s.helpText;if(s.mnemonic){for(;t.endsWith(".");)t=t.substring(0,t.length-1);let e=s.mnemonic,n=e.match(/^(.*)CmdOrCtrl(.*)$/);n&&(e=n[1]+(this.isMacLike?"Cmd":"Ctrl")+n[2]),t+=" ["+e+"]"}Gn(i.helpSpan,t)}z(i.helpSpan,i.x,i.y,i.width,i.height)}if(null==s);else if(null!=s.imageFN&&null==i.imgDOM){i.imgDOM=k("<img/>").appendTo(this.contentDOM).css({position:"absolute","pointer-events":"none"}),i.imgDOM.setAttr("src",Pn.RESOURCE_URL+"/img/actions/"+s.imageFN+".svg");const t=this.prefabImgSize,e=i.x+Math.floor(.5*(i.width-t)),n=i.y+Math.floor(.5*(i.height-t));z(i.imgDOM,e,n,t,t)}else if(null!=s.svg){i.imgDOM=k("<div/>").appendTo(this.contentDOM).css({display:"block",position:"absolute","pointer-events":"none"});const t=this.prefabImgSize,e=i.x+Math.floor(.5*(i.width-t)),n=i.y+Math.floor(.5*(i.height-t));z(i.imgDOM,e,n,t,t);let o=k(s.svg.substring(s.svg.indexOf("<svg"))).appendTo(i.imgDOM),r=o.getAttr("width"),a=o.getAttr("height");o.attr({viewBox:`0 0 ${r} ${a}`,width:`${t}`,height:`${t}`}),o.css({width:`${t}px`,height:`${t}px`,"pointer-events":"none"}),k(o).appendTo(i.imgDOM)}else if(null!=s.metavec){let t=s.metavec instanceof cn?s.metavec:new cn(s.metavec);t.offsetX=i.x+Math.floor(.5*(i.width-t.width)),t.offsetY=i.y+Math.floor(.5*(i.height-t.height)),t.renderContext(e)}else if(null!=s.text){let t=this.idealSize,n=new cn({size:[t,t]}),o=.6*t,r=en.main.measureText(s.text,o);r[1]+r[2]>t&&(o*=t/(r[1]+r[2]),r=en.main.measureText(s.text,o)),r[0]>t&&(o*=t/r[0],r=en.main.measureText(s.text,o));let a=.5*(t-r[0]),l=.5*(t+r[1]);n.drawText(a-1,l,s.text,o,0),n.drawText(a+1,l,s.text,o,0),n.drawText(a,l-1,s.text,o,0),n.drawText(a,l+1,s.text,o,0),n.drawText(a,l,s.text,o,16777215),n.offsetX=i.x+Math.floor(.5*(i.width-n.width)),n.offsetY=i.y+Math.floor(.5*(i.height-n.height)),n.renderContext(e)}if(null!=s&&s.isSubMenu){e.save();let t=i.x+i.width-3,n=i.y+i.height-3;e.beginPath(),e.moveTo(t,n),e.lineTo(t-6,n),e.lineTo(t,n-6),e.closePath(),e.fillStyle="black",e.fill(),e.restore()}if("*"==i.id){e.save(),n=new Path2D;let t,s,o=this.isRaised;this.position==ti.Left||this.position==ti.Right?(t=[.2,.7,.7],s=[.5,.3,.7],this.position==ti.Left&&(o=!o)):this.position!=ti.Top&&this.position!=ti.Bottom||(t=[.5,.3,.7],s=[.2,.7,.7],this.position==ti.Top&&(o=!o)),o&&(t=[1-t[0],1-t[1],1-t[2]],s=[1-s[0],1-s[1],1-s[2]]),n.moveTo(i.x+i.width*t[0],i.y+i.height*s[0]),n.lineTo(i.x+i.width*t[1],i.y+i.height*s[1]),n.lineTo(i.x+i.width*t[2],i.y+i.height*s[2]),n.closePath(),e.fillStyle="white",e.strokeStyle="black",e.lineWidth=0,e.fill(n),e.stroke(n),e.restore()}else if("!"==i.id){e.save();let t=new Path2D,n=new Path2D,s=5,o=i.width-2*s,r=i.height-2*s;for(let e=5;e<o+r-1;e+=12){let a=0,l=e,d=e,p=0;if(l>r){let t=l-r;a+=t,l-=t}if(d>o){let t=d-o;d-=t,p+=t}t.moveTo(i.x+s+a,i.y+s+l),t.lineTo(i.x+s+d,i.y+s+p),n.moveTo(i.x+s+a+1,i.y+s+l),n.lineTo(i.x+s+d+1,i.y+s+p)}e.lineWidth=1,e.strokeStyle="#404040",e.stroke(t),e.strokeStyle="white",e.stroke(n),e.restore()}}e.restore()}delayedRedraw(){window.setTimeout((()=>this.redraw()),100)}buttonFromID(t){let e=this.stack[this.stack.length-1];for(let n=0;n<e.buttons.length;n++)if(e.buttons[n].id==t)return e.buttons[n];return null}displayFromID(t){for(let e=0;e<this.display.length;e++)if(this.display[e].id==t)return this.display[e];return null}traceOutline(){let t=this.width,e=this.height,n=t-1,i=e-1;if(this.position==ti.Centre||0==this.stack.length)return ht(.5,.5,t-.5,e-.5,8);let s=new Path2D;if(this.position==ti.Left){let t=.5*e-1,o=this.gripHeight,r=.5*this.gripWidth;s.moveTo(.5,.5),s.lineTo(.5+n-o-8,.5),s.bezierCurveTo(.5+n-o,.5,.5+n-o,.5,.5+n-o,8.5),s.lineTo(.5+n-o,.5+t-r),s.lineTo(.5+n-8,.5+t-r),s.bezierCurveTo(.5+n,.5+t-r,.5+n,.5+t-r,.5+n,.5+t-r+8),s.lineTo(.5+n,.5+t+r-8),s.bezierCurveTo(.5+n,.5+t+r,.5+n,.5+t+r,.5+n-8,.5+t+r),s.lineTo(.5+n-o,.5+t+r),s.lineTo(.5+n-o,.5+i-8),s.bezierCurveTo(.5+n-o,.5+i,.5+n-o,.5+i,.5+n-o-8,.5+i),s.lineTo(.5,.5+i)}else if(this.position==ti.Right){let o=.5*e-1,r=this.gripHeight,a=.5*this.gripWidth;s.moveTo(t-.5,.5),s.lineTo(t-(.5+n-r-8),.5),s.bezierCurveTo(t-(.5+n-r),.5,t-(.5+n-r),.5,t-(.5+n-r),8.5),s.lineTo(t-(.5+n-r),.5+o-a),s.lineTo(t-(.5+n-8),.5+o-a),s.bezierCurveTo(t-(.5+n),.5+o-a,t-(.5+n),.5+o-a,t-(.5+n),.5+o-a+8),s.lineTo(t-(.5+n),.5+o+a-8),s.bezierCurveTo(t-(.5+n),.5+o+a,t-(.5+n),.5+o+a,t-(.5+n-8),.5+o+a),s.lineTo(t-(.5+n-r),.5+o+a),s.lineTo(t-(.5+n-r),.5+i-8),s.bezierCurveTo(t-(.5+n-r),.5+i,t-(.5+n-r),.5+i,t-(.5+n-r-8),.5+i),s.lineTo(t-.5,.5+i)}else if(this.position==ti.Top){let o=.5*t-1,r=this.gripHeight,a=.5*this.gripWidth;s.moveTo(.5,e-(.5+i)),s.lineTo(.5,e-(.5+r+8)),s.bezierCurveTo(.5,e-(.5+r),.5,e-(.5+r),8.5,e-(.5+r)),s.lineTo(.5+o-a,e-(.5+r)),s.lineTo(.5+o-a,e-8.5),s.bezierCurveTo(.5+o-a,e-.5,.5+o-a,e-.5,.5+o-a+8,e-.5),s.lineTo(.5+o+a-8,e-.5),s.bezierCurveTo(.5+o+a,e-.5,.5+o+a,e-.5,.5+o+a,e-8.5),s.lineTo(.5+o+a,e-(.5+r)),s.lineTo(.5+n-8,e-(.5+r)),s.bezierCurveTo(.5+n,e-(.5+r),.5+n,e-(.5+r),.5+n,e-(.5+r+8)),s.lineTo(.5+n,e-(.5+i))}else if(this.position==ti.Bottom){let e=.5*t-1,o=this.gripHeight,r=.5*this.gripWidth;s.moveTo(.5,.5+i),s.lineTo(.5,.5+o+8),s.bezierCurveTo(.5,.5+o,.5,.5+o,8.5,.5+o),s.lineTo(.5+e-r,.5+o),s.lineTo(.5+e-r,8.5),s.bezierCurveTo(.5+e-r,.5,.5+e-r,.5,.5+e-r+8,.5),s.lineTo(.5+e+r-8,.5),s.bezierCurveTo(.5+e+r,.5,.5+e+r,.5,.5+e+r,8.5),s.lineTo(.5+e+r,.5+o),s.lineTo(.5+n-8,.5+o),s.bezierCurveTo(.5+n,.5+o,.5+n,.5+o,.5+n,.5+o+8),s.lineTo(.5+n,.5+i)}return s}layoutMaxWidth(t,e){if(0==t.buttons.length)return[[null]];let n=new Array(t.buttons.length),i=new Array(t.buttons.length),s=0,o=0,r=0,a=0;for(let l=0;l<t.buttons.length;l++)r=Math.max(s+1,r),a=Math.max(o+1,a),n[l]=s,i[l]=o,s++,s>=e&&(s=0,o++);let l=new Array(a);for(let t=0;t<a;t++)l[t]=new Array(r);for(let e=0;e<t.buttons.length;e++)l[i[e]][n[e]]=t.buttons[e].id;return l}layoutMaxHeight(t,e,n){if(0==t.buttons.length)return[[null]];let i=new Array(t.buttons.length),s=new Array(t.buttons.length),o=0,r=0,a=0,l=0;for(let e=0;e<t.buttons.length;e++)a=Math.max(o+1,a),l=Math.max(r+1,l),i[e]=o,s[e]=r,o++,o>=n&&(o=0,r++);let d=new Array(l);for(let t=0;t<l;t++)d[t]=new Array(a);for(let e=0;e<t.buttons.length;e++)d[s[e]][i[e]]=t.buttons[e].id;return d}scoreLayout(t){let e=0,n=t.length,i=t[0].length;for(let s=0;s<n;s++)for(let n=0;n<i;n++)null==t[s][n]&&e++;return this.maxButtonRows>0&&n>this.maxButtonRows&&(e+=100*(n-this.maxButtonRows)),this.maxButtonColumns>0&&i>this.maxButtonColumns&&(e+=100*(i-this.maxButtonColumns)),e}pickButtonIndex(t,e){for(let n=0;n<this.display.length;n++){let i=this.display[n];if(t>=i.x&&e>=i.y&&t<i.x+i.width&&e<i.y+i.height)return n}return-1}pickButtonID(t,e){let n=this.pickButtonIndex(t,e);if(!(n<0))return this.display[n].id}triggerButton(t){"*"!=t?"!"!=t?this.stack[this.stack.length-1].hitButton(t):this.popBank():this.isRaised?this.lowerBank():this.raiseBank()}mouseClick(t){}mouseDoubleClick(t){t.stopImmediatePropagation()}mouseDown(t){this.contentDOM.parent().grabFocus();let e=I(t,this.contentDOM);if(!this.withinOutline(e[0],e[1]))return;let n=this.pickButtonID(e[0],e[1]);n!=this.highlightButton&&(this.highlightButton=n,this.redraw()),t.stopPropagation()}mouseUp(t){let e=I(t,this.contentDOM);if(!this.withinOutline(e[0],e[1]))return;let n=this.pickButtonID(e[0],e[1]);null!=n&&this.highlightButton==n?(this.highlightButton=void 0,this.triggerButton(n),this.delayedRedraw()):(this.highlightButton=void 0,this.delayedRedraw()),t.stopPropagation()}mouseOver(t){let e=I(t,this.contentDOM);this.withinOutline(e[0],e[1])&&t.stopPropagation()}mouseOut(t){let e=I(t,this.contentDOM);if(this.withinOutline(e[0],e[1])){if(null!=this.highlightButton){let e=I(t,this.contentDOM);this.pickButtonID(e[0],e[1])!=this.highlightButton&&(this.highlightButton=null,this.delayedRedraw())}t.stopPropagation()}else null!=this.highlightButton&&(this.highlightButton=null,this.delayedRedraw())}mouseMove(t){let e=I(t,this.contentDOM);this.withinOutline(e[0],e[1])}}class ii{constructor(){this.isSubLevel=!1,this.buttons=[]}init(){}claimKey(t){return!1}bankClosed(){}static matchKey(t,e,n){if(null==e||""==e)return!1;let i=!1,s=!1,o=!1,r=!1,a=e;for(;;)if(a.startsWith("Shift+"))i=!0,a=a.substring(6);else if(a.startsWith("Ctrl+"))s=!0,a=a.substring(5);else if(a.startsWith("Alt+"))o=!0,a=a.substring(4);else{if(!a.startsWith("Cmd+"))break;r=!0,a=a.substring(4)}return i==t.shiftKey&&s==t.ctrlKey&&o==t.altKey&&r==t.metaKey&&(n&&(a=n),a.toLowerCase()==t.key.toLowerCase())}}class si{constructor(t,e,n){this.metalAtom=e,this.ligandAttach=n,this.ligands=[],this.mol=t.clone()}generate(){const{mol:t,metalAtom:e,ligandAttach:i,ligands:s}=this;let o=qt.fromMolecule(t);o.isolateNode(e-1);for(let r of o.calculateComponentGroups()){n.addTo(r,1);let o=!1;for(let t of i)if(r.indexOf(t)>=0){o=!0;break}if(!o)continue;let a={atoms:r,attach:[]};a.atoms=r;let l=!1;for(let n of a.atoms)if(t.findBond(n,e)>0){l=!0;break}for(let n of a.atoms)(t.findBond(n,e)>0||!l&&i.includes(n))&&a.attach.push(n);s.push(a);for(let n of a.attach)0==t.findBond(n,e)&&this.makeLigandBond(n)}if(0==s.length)throw new Error("No ligand atoms");let r=t.atomAdjList(e);for(let t of s)r=n.exclude(r,t.attach);let a=t.atomX(e),d=t.atomY(e),p=new Array(r.length);for(let e=0;e<r.length;e++)p[e]=Math.atan2(t.atomY(r[e])-d,t.atomX(r[e])-a);for(let e of s)if(1==e.attach.length){let n=e.attach[0];e.avgTheta=Math.atan2(t.atomY(n)-d,t.atomX(n)-a),this.orientLigand(e)}else{let i=new Array(e.attach.length);for(let n=0;n<e.attach.length;n++){let s=e.attach[n];i[n]=Math.atan2(t.atomY(s)-d,t.atomX(s)-a)}i=l.sortAngles(i);let s=i[0];for(let t=0;t<i.length;t++)i[t]=st(i[t],s);e.avgTheta=s+n.sum(i)/i.length,this.orientLigand(e)}if(0==r.length)s.sort(((t,e)=>H(t.avgTheta-e.avgTheta))),this.arrangeLigandsFree(s);else if(1==r.length)s.sort(((t,e)=>H(st(t.avgTheta,p[0])-st(e.avgTheta,p[0])))),this.arrangeLigandsRange(s,p[0],Z,!0);else{let t=n.idxSort(p);for(let e=0;e<t.length;e++){let n=(e+1)%t.length,i=p[t[e]],o=st(p[t[n]],i),r=[];for(let t of s)st(t.avgTheta,i)<o&&r.push(t);0!=r.length&&(r.sort(((t,e)=>H(st(t.avgTheta,i)-st(e.avgTheta,i)))),this.arrangeLigandsRange(r,i,o,!0))}}return this.resolveClashes(),t}makeLigandBond(t){const{mol:e,metalAtom:n}=this;let i=e.atomCharge(n),s=e.atomCharge(t);if(i>0&&s<0)return e.setAtomCharge(n,i-1),e.setAtomCharge(t,s+1),void e.addBond(n,t,1);if(i<0&&s>0)return e.setAtomCharge(n,i+1),e.setAtomCharge(t,s-1),void e.addBond(n,t,1);let o=0;e.atomHExplicit(t)==ge.HEXPLICIT_UNKNOWN&&e.atomHydrogens(t)>0&&(o=1),e.addBond(n,t,o)}orientLigand(t){const{mol:e,metalAtom:i}=this;let s=e.atomX(i),o=e.atomY(i),r=t.atoms.length,a=t.attach.length,d=new Array(a);for(let e=0;e<a;e++)d[e]=t.atoms.indexOf(t.attach[e]);let p=new Array(r),h=new Array(r),c=Qt.arrayAtomX(e),m=Qt.arrayAtomY(e),u=n.max(c)-n.min(c)+n.max(m)-n.min(m),f=u*Math.cos(t.avgTheta),g=u*Math.sin(t.avgTheta);for(let n=0;n<r;n++)p[n]=e.atomX(t.atoms[n])+f,h[n]=e.atomY(t.atoms[n])+g;let k=n.sum(p)/r,y=n.sum(h)/r,w=[];for(let t=0;t<r;t++){let e=Number.POSITIVE_INFINITY;for(let n of d)e=Math.min(e,Y(p[t]-p[n],h[t]-h[n]));w.push(1/(1+Math.sqrt(e)))}let x=Number.POSITIVE_INFINITY,C=null,v=null;for(let e=0;e<360;e+=15){let n=Math.cos(e*tt),i=Math.sin(e*tt),a=new Array(r),l=new Array(r),d=0;for(let e=0;e<r;e++){let r=p[e]-k,c=h[e]-y;a[e]=k+r*n-c*i,l[e]=y+r*i+c*n;let m=U(a[e]-s,l[e]-o);t.attach.indexOf(t.atoms[e])>=0?d+=m:d-=m*w[e]}d<x&&(x=d,C=a,v=l)}if(p=C,h=v,1==a)f=ge.IDEALBOND*Math.cos(t.avgTheta),g=ge.IDEALBOND*Math.sin(t.avgTheta),n.addTo(p,s+f-p[d[0]]),n.addTo(h,o+g-h[d[0]]);else{let e=new Array(a),i=n.numberArray(0,a),c=n.numberArray(0,a),m=n.numberArray(0,a);for(let t=0;t<a;t++){let n=p[d[t]]-s,r=h[d[t]]-o;e[t]=Math.atan2(r,n),a>2&&(i[t]=U(n,r),c[t]=n/i[t],m[t]=r/i[t])}n.addTo(i,-n.min(i));let u=l.idxSortAngles(e),f=new Array(a),g=new Array(a),k=new Array(a),y=new Array(a),w=45*tt/(a-1),x=t.avgTheta-.5*w;for(let t=0;t<a;t++)f[t]=p[d[u[t]]],g[t]=h[d[u[t]]],k[t]=s+ge.IDEALBOND*Math.cos(x)+i[t]*c[t],y[t]=o+ge.IDEALBOND*Math.sin(x)+i[t]*m[t],x+=w/(a-1);let C=l.superimpose(f,g,k,y);for(let t=0;t<r;t++){let[e,n]=l.applyAffine(p[t],h[t],C);p[t]=e,h[t]=n}}for(let n=0;n<r;n++)e.setAtomPos(t.atoms[n],p[n],h[n])}arrangeLigandsFree(t){if(1==t.length)return;let e=n.last(t).avgTheta;e+=.5*st(n.first(t).avgTheta,e),this.arrangeLigandsRange(t,e,Z,!1)}arrangeLigandsRange(t,e,n,i){const{mol:s,metalAtom:o}=this;let r=s.atomX(o),a=s.atomY(o),l=t.length,d=new Array(l),p=new Array(l),h=0;for(let e=0;e<l;e++){let[n,i]=this.determineThetaBounds(t[e]);d[e]=n,p[e]=st(i,n),h+=p[e]}let c=(n-h)/(l+(i?1:0)),m=e+(i?c:.5*c);for(let e=0;e<l;e++){let n=m-d[e],i=Math.cos(n),o=Math.sin(n);for(let n of t[e].atoms){let t=s.atomX(n)-r,e=s.atomY(n)-a;s.setAtomPos(n,r+t*i-e*o,a+t*o+e*i)}m+=p[e]+c}}determineThetaBounds(t){const{mol:e,metalAtom:i}=this;let s=[],o=e.atomX(i),r=e.atomY(i);for(let n=0;n<t.attach.length;n++){let i=e.atomX(t.attach[n])-o,a=e.atomY(t.attach[n])-r;s.push(Math.atan2(a,i))}n.sort(s);let a=Number.POSITIVE_INFINITY,l=0,d=0;for(let t=0;t<s.length;t++){let t=0;for(let e=0;e<s.length-1;e++)t+=st(s[e+1],s[e]);t<a&&(a=t,l=n.first(s),d=n.last(s)),s.push(s.shift())}return[l,d]}resolveClashes(){const{mol:t,metalAtom:e,ligands:i}=this,s=t.numAtoms,o=t.numBonds,r=this.ligands.length;let a=n.numberArray(-1,s),d=n.numberArray(-1,o);for(let n=1;n<=s;n++)t.atomConnComp(n)==t.atomConnComp(e)&&(a[n-1]=0);for(let t=0;t<r;t++)for(let e of i[t].atoms)a[e-1]=t+1;for(let e=1;e<=o;e++){let n=a[t.bondFrom(e)-1],i=a[t.bondTo(e)-1];n<0||i<0||n==i&&(d[e-1]=n)}let p=new Array(r),h=new Array(r),c=t.atomX(e),m=t.atomY(e);for(let e=0;e<r;e++){let n=i[e],s=0,o=0;for(let e of n.attach)s+=t.atomX(e)-c,o+=t.atomY(e)-m;s/=n.attach.length,o/=n.attach.length;let r=1/U(s,o);p[e]=.5*s*r,h[e]=.5*o*r}const u=G(.5);for(let e=0;e<12;e++){let e=n.booleanArray(!1,r);t:for(let i=0;i<s-1;i++)if(!(a[i]<0))for(let o=i+1;o<s;o++)if(a[o]>=0&&a[o]!=a[i]&&(Y(t.atomX(i+1)-t.atomX(o+1),t.atomY(i+1)-t.atomY(o+1))<u&&(a[i]>0&&(e[a[i]-1]=!0),a[o]>0&&(e[a[o]-1]=!0)),n.allTrue(e)))break t;if(n.anyFalse(e))t:for(let i=0;i<o-1;i++){if(d[i]<0)continue;let s=t.atomX(t.bondFrom(i+1)),r=t.atomY(t.bondFrom(i+1)),a=t.atomX(t.bondTo(i+1)),p=t.atomY(t.bondTo(i+1));for(let h=i+1;h<o;h++)if(d[h]>=0&&d[h]!=d[i]){let o=t.atomX(t.bondFrom(h+1)),c=t.atomY(t.bondFrom(h+1)),m=t.atomX(t.bondTo(h+1)),u=t.atomY(t.bondTo(h+1));if(l.doLineSegsIntersect(s,r,a,p,o,c,m,u)&&(d[i]>0&&(e[d[i]-1]=!0),d[h]>0&&(e[d[h]-1]=!0)),n.allTrue(e))break t}}if(n.allFalse(e))break;for(let n=0;n<r;n++)if(e[n])for(let e of i[n].atoms)t.setAtomPos(e,t.atomX(e)+p[n],t.atomY(e)+h[n])}}}class oi{constructor(){this.attdist=0,this.guided=!1,this.bridged=!1,this.scoreModifier=0,this.chainSelect=0}}class ri{constructor(t,e,n){this.mol=t,this.templ=e,this.abbrev=n,this.perms=[],this.numAttach=0,this.withGuideOnly=!1,this.guidetempl=null,this.guideidx=[],this.guideadj=[],this.timeLimit=5;let i=new Ft(t),s=new Ft(e);s.harmoniseNumbering(i),s.rewriteMolecule();let o=new $t(t),r=new $t(e);r.harmoniseNumbering(o),r.rewriteMolecule(),this.huntForGuides()}permuteNone(){let t=this.mol.clone(),e=this.templ.clone();if(t.numAtoms>0){let n=t.boundary(),i=e.boundary(),s=n.maxX()+1-i.minX(),o=.5*(n.minY()+n.maxY())-.5*(i.minY()+i.maxY());Zt.translateMolecule(e,s,o)}else{let t=e.boundary();Zt.translateMolecule(e,-t.midX(),-t.midY())}t.boundary();let n=e.boundary(),i=n.midX(),s=n.midY(),o=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330];t:for(let n=0;n<o.length;n++){let r=e.clone();Zt.rotateMolecule(r,-o[n]*tt,i,s);for(let t=0;t<this.perms.length;t++)if(Zt.sketchEquivalent(r,this.perms[t].display))continue t;let a=new oi;a.mol=t.clone(),a.mol.append(r),a.display=r,a.srcidx=this.sourceIndex(a.mol,t),a.attdist=0,a.guided=!1,this.perms.push(a)}}permuteAtom(t){this.numAttach=1;let e=(new Date).getTime(),n=this.mol.clone(),i=this.templ.clone(),s=[];if(null!=this.guidetempl){let i=Zt.mirrorImage(this.guidetempl.clone());for(let o=0;o<this.guideidx.length&&!((new Date).getTime()-e>1e3*this.timeLimit);o++)this.composeGuidedOne(s,n,this.guidetempl,t,this.guideidx[o]),this.composeGuidedOne(s,n,i,t,this.guideidx[o])}if(!this.withGuideOnly){let o=i.clone();Zt.mirrorImage(o);for(let r=1;r<=i.numAtoms&&!((new Date).getTime()-e>1e3*this.timeLimit);r++)this.composeDirectOne(s,n,i,t,r),this.composeDirectOne(s,n,o,t,r),this.composeBridge(s,n,i,t,r),this.composeBridge(s,n,o,t,r)}this.affixRawPermutations(s)}permuteBond(t,e){this.numAttach=2;let n=(new Date).getTime(),i=this.mol.clone(),s=this.templ.clone(),o=[];if(null!=this.guidetempl){let s=Zt.mirrorImage(this.guidetempl.clone());for(let r=0;r<this.guideidx.length&&!((new Date).getTime()-n>1e3*this.timeLimit);r++){let n=this.guideidx[r],a=this.guidetempl.atomAdjList(n);for(let r=0;r<a.length;r++){let l=a[r];this.composeGuidedTwo(o,i,this.guidetempl,t,e,n,l,!0),this.composeGuidedTwo(o,i,this.guidetempl,e,t,n,l,!0),this.composeGuidedTwo(o,i,s,t,e,n,l,!0),this.composeGuidedTwo(o,i,s,e,t,n,l,!0),this.composeGuidedTwo(o,i,this.guidetempl,t,e,n,l,!1),this.composeGuidedTwo(o,i,this.guidetempl,e,t,n,l,!1),this.composeGuidedTwo(o,i,s,t,e,n,l,!1),this.composeGuidedTwo(o,i,s,e,t,n,l,!1)}}}if(!this.withGuideOnly){let r=s.clone();Zt.mirrorImage(r);for(let a=1;a<=s.numBonds&&!((new Date).getTime()-n>1e3*this.timeLimit);a++){let n=s.bondFrom(a),l=s.bondTo(a);this.composeDirectTwo(o,i,s,t,e,n,l),this.composeDirectTwo(o,i,r,t,e,n,l),this.composeDirectTwo(o,i,s,t,e,l,n),this.composeDirectTwo(o,i,r,t,e,l,n)}}this.affixRawPermutations(o)}permuteMulti(t){this.numAttach=t.length;let e=(new Date).getTime(),n=this.mol.clone(),i=this.templ.clone(),s=[];if(null!=this.guidetempl){let e=Zt.mirrorImage(this.guidetempl.clone());this.guideidx.length==t.length&&(this.composeGuidedMulti(s,n,this.guidetempl,t,this.guideidx,!0),this.composeGuidedMulti(s,n,e,t,this.guideidx,!0)),this.guideadj.length==t.length&&(this.composeGuidedMulti(s,n,this.guidetempl,t,this.guideadj,!1),this.composeGuidedMulti(s,n,e,t,this.guideadj,!1))}if(!this.withGuideOnly){let o=i.clone();Zt.mirrorImage(o);for(let r=1;r<=i.numAtoms&&!((new Date).getTime()-e>1e3*this.timeLimit);r++)this.composeDirectMulti(s,n,i,t,r),this.composeDirectMulti(s,n,o,t,r)}this.affixRawPermutations(s)}huntForGuides(){this.guideidx=[],this.guideadj=[];for(let t=1;t<=this.templ.numAtoms;t++)if("X"==this.templ.atomElement(t)&&this.templ.atomAdjCount(t)>0){this.guideidx.push(t);let e=this.templ.atomAdjList(t);for(let t=0;t<e.length;t++)this.guideadj.indexOf(e[t])<0&&this.guideadj.push(e[t])}if(this.guideidx.length>0){this.guidetempl=this.templ.clone();for(let t=this.guideidx.length-1;t>=0;t--)this.templ.deleteAtomAndBonds(this.guideidx[t])}}composeDirectOne(t,e,n,i,s){let o=Kt.primeDirections(e,i),r=Kt.primeDirections(n,s),a=Zt.atomBondAngles(e,i),l=Zt.atomBondAngles(n,s),d=[],p=[],h=[];for(let t=0;t<a.length;t++)for(let e=0;e<r.length;e++)d.push(a[t]),p.push(r[e]),h.push(-51);for(let t=0;t<o.length;t++)for(let e=0;e<l.length;e++)d.push(o[t]),p.push(l[e]),h.push(0);for(let t=0;t<o.length;t++)for(let e=0;e<r.length;e++)d.push(o[t]),p.push(r[e]),h.push(0);let c=qt.fromMolecule(n).calculateBFS(0),m=e.atomX(i),u=e.atomY(i),f=n.atomX(s),g=n.atomY(s);for(let o=0;o<d.length;o++){let r=it(d[o],p[o]),a=n.clone();Zt.translateMolecule(a,m-f,u-g),Zt.rotateMolecule(a,r,m,u);let l=e.clone(),k=l.numAtoms;l.append(a);let y=this.sourceIndex(l,e);if(Kt.mergeFragmentsMask(l,this.asMask(y)),l.numAtoms==k)continue;let w=new oi;w.mol=l,w.display=a,w.srcidx=y,w.molidx=[i],w.temidx=[s],w.attdist=c[s-1],w.guided=!1,w.scoreModifier=h[o],this.removeExtraGuides(w,e),t.push(w)}}composeDirectTwo(t,e,n,i,s,o,r){let a=Math.atan2(e.atomY(s)-e.atomY(i),e.atomX(s)-e.atomX(i)),l=Math.atan2(n.atomY(r)-n.atomY(o),n.atomX(r)-n.atomX(o)),d=.5*(e.atomX(i)+e.atomX(s)),p=.5*(e.atomY(i)+e.atomY(s)),h=n.clone();Zt.translateMolecule(h,d-.5*(n.atomX(o)+n.atomX(r)),p-.5*(n.atomY(o)+n.atomY(r))),Zt.rotateMolecule(h,a-l,d,p),h.setAtomPos(o,e.atomX(i),e.atomY(i)),h.setAtomPos(r,e.atomX(s),e.atomY(s));let c=e.clone(),m=c.numAtoms;c.append(h);let u=this.sourceIndex(c,e);if(Kt.mergeFragmentsMask(c,this.asMask(u)),c.numAtoms==m)return;let f=qt.fromMolecule(n).calculateBFS(0),g=new oi;g.mol=c,g.display=h,g.srcidx=u,g.molidx=[i,s],g.temidx=[o,r],g.attdist=Math.min(f[o-1],f[r-1]),g.guided=!1,this.removeExtraGuides(g,e),t.push(g)}composeDirectMulti(t,e,n,i,s){let o=n.clone(),r=e.atomX(i[0]),a=e.atomY(i[0]);Zt.translateMolecule(o,r-o.atomX(s),a-o.atomY(s));let l=e.atomX(i[1])-r,d=e.atomY(i[1])-a,p=Math.atan2(d,l),h=U(l,d),c=qt.fromMolecule(n).calculateBFS(1),m=[];for(let n=1;n<=o.numAtoms;n++)if(s!=n){let l=o.atomX(n)-o.atomX(s),d=o.atomY(n)-o.atomY(s),u=U(l,d);if(Math.abs(u-h)>.1)continue;let f=Math.atan2(d,l);Zt.rotateMolecule(o,p-f,r,a),m=[s,n];for(let t=2;t<i.length;t++){let n=!1;for(let s=1;s<=o.numAtoms;s++)if(m.indexOf(s)<0&&U(e.atomX(i[t])-o.atomX(s),e.atomY(i[t])-o.atomY(s))<.1*.1){n=!0,m.push(s);break}if(!n)break}if(m.length<i.length)continue;let g=c.length;for(let t=0;t<m.length;t++)g=Math.min(g,c[m[t]-1]);let k=0,y=0;for(let t=0;t<i.length;t++)k+=e.atomX(i[t])-o.atomX(m[t]),y+=e.atomY(i[t])-o.atomY(m[t]);let w=1/i.length;k*=w,y*=w,Zt.translateMolecule(o,k,y);let x=e.clone(),C=x.numAtoms;x.append(o);let v=this.sourceIndex(x,e);for(let t=0;t<m.length;t++){let e=x.atomX(i[t]),n=x.atomY(i[t]);x.setAtomPos(C+m[t],e,n)}if(Kt.mergeFragmentsMask(x,this.asMask(v)),x.numAtoms==C)continue;let b=new oi;b.mol=x,b.display=o.clone(),b.srcidx=v,b.molidx=i.slice(0),b.temidx=m.slice(0),b.attdist=Math.min(c[s-1],c[n-1]),b.guided=!1,this.removeExtraGuides(b,e),t.push(b)}}composeBridge(t,e,n,i,s){let o=0!=e.atomRingBlock(i)||e.atomAdjCount(i)>=3,r=0!=n.atomRingBlock(s)||n.atomAdjCount(s)>=3;if(!o||!r)return;let a=Kt.primeDirections(e,i),l=Kt.primeDirections(n,s),d=qt.fromMolecule(n).calculateBFS(0);for(let o=0;o<a.length;o++)for(let r=0;r<l.length;r++){let p=e.atomX(i),h=e.atomY(i),c=n.atomX(s),m=n.atomY(s),u=ge.IDEALBOND*Math.cos(a[o]),f=ge.IDEALBOND*Math.sin(a[o]),g=it(a[o],Math.PI+l[r]),k=n.clone();Zt.translateMolecule(k,p-c+u,h-m+f),Zt.rotateMolecule(k,g,p+u,h+f);let y=e.clone(),w=y.numAtoms+s,x=y.numAtoms;y.append(k);let C=this.sourceIndex(y,e);if(y.addBond(i,w,1),w=k.addAtom("C",p,h),k.addBond(s,w,1),Kt.mergeFragmentsMask(y,this.asMask(C)),y.numAtoms==x)continue;let v=new oi;v.mol=y,v.display=k,v.srcidx=C,v.molidx=[i],v.temidx=[w],v.attdist=d[s-1],v.bridged=!0,v.guided=!1,this.removeExtraGuides(v,e),t.push(v)}}composeGuidedOne(t,e,n,i,s){if(0==n.atomAdjCount(s))return;let o=Kt.primeDirections(e,i);if(n.atomAdjCount(s)>1&&e.atomAdjCount(i)>0){let t=0,n=0,s=e.atomAdjList(i);for(let o=0;o<s.length;o++)t+=e.atomX(s[o])-e.atomX(i),n+=e.atomY(s[o])-e.atomY(i);let r=Math.atan2(n,t),a=!0;for(let t=0;t<o.length;t++)if(Math.abs(it(r,o[t]))<3*et){a=!1;break}a&&o.push(r)}let r=n.atomX(s),a=n.atomY(s),l=0,d=0,p=n.atomAdjList(s);for(let t=0;t<p.length;t++)l+=n.atomX(p[t])-r,d+=n.atomY(p[t])-a;l/=p.length,d/=p.length;let h=Math.atan2(d,l),c=0;if(1==p.length){let t=e.atomElement(i),s=n.atomElement(p[0]);"C"!=t&&t==s&&(c=1)}for(let l=0;l<o.length;l++){let d=n.clone();if(2==this.guideidx.length)for(let t=1;t<=d.numAtoms;t++)if(t!=s&&"X"==d.atomElement(t)){d.setAtomElement(t,ri.RESERVED_GUIDESYMBOL);break}Zt.rotateMolecule(d,o[l]-h,r,a),Zt.translateMolecule(d,e.atomX(i)-r,e.atomY(i)-a);let p=e.clone(),m=p.numAtoms;p.append(d);let u=this.sourceIndex(p,e);if(Kt.mergeFragmentsMask(p,this.asMask(u)),p.numAtoms==m)continue;let f=0;for(let t=1;t<=p.numAtoms;t++)if(p.atomElement(t)==ri.RESERVED_GUIDESYMBOL){let e=p.atomAdjList(t);1==e.length&&(f=e[0],f>t&&f--),p.deleteAtomAndBonds(t),u.splice(t-1,1);break}let g=new oi;g.mol=p,g.display=d,g.srcidx=u,g.molidx=[i],g.temidx=[s],g.attdist=0,g.guided=!0,g.scoreModifier=c,g.chainSelect=f,this.removeExtraGuides(g,e),t.push(g)}}composeGuidedTwo(t,e,n,i,s,o,r,a){let l=e.atomX(i),d=e.atomY(i),p=n.atomX(o),h=n.atomY(o),c=n.atomX(r),m=n.atomY(r),u=Math.atan2(e.atomY(s)-d,e.atomX(s)-l),f=Math.atan2(m-h,c-p),g=1==e.atomAdjCount(i),k=e.clone(),y=n.clone();Zt.rotateMolecule(y,u-f,p,h),a?(Zt.translateMolecule(y,l-p,d-h),k.setAtomPos(s,y.atomX(r),y.atomY(r))):(Zt.translateMolecule(y,e.atomX(s)-y.atomX(r),e.atomY(s)-y.atomY(r)),y.setAtomPos(o,l,d));let w=k.numAtoms;k.append(y);let x=this.sourceIndex(k,e);if(Kt.mergeFragmentsMask(k,this.asMask(x)),k.numAtoms==w)return;let C=new oi;C.mol=k,C.display=y,C.srcidx=x,C.molidx=[i,s],C.temidx=[o,r],C.attdist=g?1:0,C.guided=!0,this.removeExtraGuides(C,e),t.push(C)}composeGuidedMulti(t,e,i,s,o,r){let a=0,l=0,d=0,p=0;for(let t=0;t<s.length;t++)a+=e.atomX(s[t]),l+=e.atomY(s[t]);for(let t=0;t<o.length;t++)d+=i.atomX(o[t]),p+=i.atomY(o[t]);a/=s.length,l/=s.length,d/=o.length,p/=o.length;let h=e.numAtoms;for(let c=0;c<s.length;c++)for(let m=0;m<o.length;m++){let u=e.clone(),f=i.clone(),g=Math.atan2(u.atomY(s[c])-l,u.atomX(s[c])-a),k=Math.atan2(f.atomY(o[m])-p,f.atomX(o[m])-d);Zt.rotateMolecule(f,g-k,d,p),Zt.translateMolecule(f,a-d,l-p),u.append(f);let y=this.sourceIndex(u,e),w=n.numberArray(0,o.length),x=o.slice(0);n.sort(x);let C=n.booleanArray(!1,h);for(let t=x.length-1;t>=0;t--){let e=x[t]+h,n=0,i=0;for(let t=0;t<s.length;t++)if(!C[s[t]-1]){let o=U(u.atomX(s[t])-u.atomX(e),u.atomY(s[t])-u.atomY(e));(0==n||o<i)&&(n=s[t],i=o)}if(!r){if(U(u.atomX(e)-u.atomX(n),u.atomY(e)-u.atomY(n))>.1*.1){let e=f.addAtom("C",u.atomX(n),u.atomY(n));f.addBond(e,x[t],0)}u.setAtomPos(n,u.atomX(e),u.atomY(e))}w[t]=n,C[n-1]=!0;let o=u.atomAdjList(e);for(let t=0;t<o.length;t++){let i=u.findBond(e,o[t]);u.addBond(n,o[t],u.bondOrder(i),u.bondType(i))}u.deleteAtomAndBonds(e),y.splice(e-1,1),f.setAtomPos(x[t],u.atomX(n),u.atomY(n))}for(let t=u.numAtoms;t>h;t--)if("X"==u.atomElement(t)){u.deleteAtomAndBonds(t),y.splice(t-1,1);for(let e=0;e<x.length;e++)t<x[e]&&x[e]--}for(let t=f.numAtoms;t>=1;t--)"X"==f.atomElement(t)&&f.setAtomElement(t,"C");let v=new oi;v.mol=u,v.display=f,v.srcidx=y,v.molidx=w,v.temidx=x,v.attdist=0,v.guided=!0,this.removeExtraGuides(v,e),t.push(v)}}affixRawPermutations(t){let e=t.length;if(0==e)return;let i=n.booleanArray(!0,e);for(let n=0;n<e-1;n++)if(i[n]){let s=t[n];for(let o=n+1;o<e;o++)if(i[o]){let e=t[o];Zt.sketchEquivalent(s.mol,e.mol)&&(s.scoreModifier+s.attdist>e.scoreModifier+e.attdist&&(t[n]=e,t[o]=s),i[o]=!1)}}let s=n.numberArray(0,e),o=0;for(let n=0;n<e;n++)i[n]?(s[n]=this.scorePermutation(t[n]),s[n]<1e3&&o++):s[n]=0;if(o>0)for(let t=0;t<e;t++)i[t]&&s[t]>=1e3&&(i[t]=!1);let r=[],a=[];for(let t=0;t<e;t++)i[t]&&(r.push(s[t]),a.push(t));let l=n.idxSort(r);for(let e=0;e<l.length;e++){let n=t[a[l[e]]];n.guided&&this.perms.push(n)}for(let e=0;e<l.length;e++){let n=t[a[l[e]]];n.guided||this.perms.push(n)}}removeExtraGuides(t,e){Qt.removeDuplicateBonds(t.mol);for(let e=t.temidx.length-1;e>=0;e--){let n=t.display.atomElement(t.temidx[e]);"X"!=n&&n!=ri.RESERVED_GUIDESYMBOL||(t.molidx.splice(e,1),t.temidx.splice(e,1))}for(let n=t.display.numAtoms;n>=1;n--){let i=t.display.atomElement(n);if("X"==i||i==ri.RESERVED_GUIDESYMBOL)if(Zt.atomAtPoint(e,t.display.atomX(n),t.display.atomY(n))>0)t.display.setAtomElement(n,"C");else{t.display.deleteAtomAndBonds(n);for(let e=0;e<t.temidx.length;e++)t.temidx[e]>n&&t.temidx[e]--}}}scorePermutation(t){let e=this.mol,i=t.display,s=t.mol,o=.2*t.attdist+t.scoreModifier;o+=Zt.congestionMolecule(s,.001),o-=s.numAtoms;let r=e.numAtoms,a=i.numAtoms,l=[],d=[],p=[],h=[];for(let t=0;t<r;t++)l.push(e.atomX(t+1)),d.push(e.atomY(t+1));for(let t=0;t<a;t++)p.push(i.atomX(t+1)),h.push(i.atomY(t+1));for(let e=0;e<r;e++)for(let n=0;n<a;n++){if(U(l[e]-p[n],d[e]-h[n])>Zt.OVERLAP_THRESHOLD_SQ)continue;let i=!1;for(let s=0;s<t.molidx.length;s++)if(t.molidx[s]==e+1&&t.temidx[s]==n+1){i=!0;break}i||(o+=100)}if(!t.guided)for(let n=0;n<t.molidx.length;n++){let s=e.atomElement(t.molidx[n]);if("C"==s||"O"==s||"S"==s||"N"==s||"P"==s)continue;let r=e.atomAdjList(t.molidx[n]),a=i.atomAdjList(t.temidx[n]);if(!(r.length+a.length>=4))for(let s=0;s<r.length;s++)for(let c=0;c<a.length;c++){let m=r[s],u=a[c],f=e.bondOrder(e.findBond(t.molidx[n],m)),g=i.bondOrder(i.findBond(t.temidx[n],u)),k=0;if(1==f&&1==g||1==f&&2==g||2==f&&1==g)k=120;else{if(!(2==f&&2==g||1==f&&3==g||3==f&&1==g))continue;k=180}let y=l[m-1]-l[t.molidx[n]-1],w=d[m-1]-d[t.molidx[n]-1],x=p[u-1]-p[t.temidx[n]-1],C=h[u-1]-h[t.temidx[n]-1],v=Math.abs(it(Math.atan2(w,y),Math.atan2(C,x)))*et;Math.abs(v-k)>5&&(o+=50)}}for(let t=1;t<=s.numAtoms;t++)if("C"==s.atomElement(t)||"N"==s.atomElement(t)){let e=s.atomAdjBonds(t),n=0;for(let t=0;t<e.length;t++){let i=s.bondOrder(e[t]);if(n+=i,0==i){n=0;break}}n>4&&(o+=1e3)}if(t.molidx.length>=2){let s=n.booleanArray(!1,r);for(let e=0;e<t.molidx.length;e++)s[t.molidx[e]-1]=!0;for(let n=1;n<=e.numBonds;n++){let r=e.bondFrom(n),a=e.bondTo(n);if(!s[r-1]||!s[a-1])continue;let l=t.molidx.indexOf(r),d=t.molidx.indexOf(a),p=i.findBond(t.temidx[l],t.temidx[d]);0!=p&&e.bondOrder(n)!=i.bondOrder(p)&&(o+=1)}}return o}sourceIndex(t,e){let i=n.numberArray(0,t.numAtoms);for(let t=e.numAtoms;t>=1;t--)i[t-1]=t;return i}asMask(t){let e=n.booleanArray(!1,t.length);for(let n=0;n<t.length;n++)e[n]=0!=t[n];return e}}ri.RESERVED_GUIDESYMBOL="XXX",function(t){t[t.Delete=1]="Delete",t[t.Clear=2]="Clear",t[t.Copy=3]="Copy",t[t.Cut=4]="Cut",t[t.SelectAll=5]="SelectAll",t[t.SelectNone=6]="SelectNone",t[t.SelectPrevComp=7]="SelectPrevComp",t[t.SelectNextComp=8]="SelectNextComp",t[t.SelectSide=9]="SelectSide",t[t.SelectGrow=10]="SelectGrow",t[t.SelectShrink=11]="SelectShrink",t[t.SelectChain=12]="SelectChain",t[t.SelectSmRing=13]="SelectSmRing",t[t.SelectRingBlk=14]="SelectRingBlk",t[t.SelectCurElement=15]="SelectCurElement",t[t.SelectToggle=16]="SelectToggle",t[t.SelectUnCurrent=17]="SelectUnCurrent",t[t.Element=18]="Element",t[t.AtomPos=19]="AtomPos",t[t.Charge=20]="Charge",t[t.Connect=21]="Connect",t[t.Disconnect=22]="Disconnect",t[t.MetalLigate=23]="MetalLigate",t[t.BondOrder=24]="BondOrder",t[t.BondType=25]="BondType",t[t.BondGeom=26]="BondGeom",t[t.BondAtom=27]="BondAtom",t[t.BondSwitch=28]="BondSwitch",t[t.BondRotate=29]="BondRotate",t[t.BondAddTwo=30]="BondAddTwo",t[t.BondInsert=31]="BondInsert",t[t.Join=32]="Join",t[t.Nudge=33]="Nudge",t[t.NudgeLots=34]="NudgeLots",t[t.NudgeFar=35]="NudgeFar",t[t.Flip=36]="Flip",t[t.Scale=37]="Scale",t[t.Rotate=38]="Rotate",t[t.BondDist=39]="BondDist",t[t.AlignAngle=40]="AlignAngle",t[t.AlignRegular=41]="AlignRegular",t[t.AdjustTorsion=42]="AdjustTorsion",t[t.Move=43]="Move",t[t.Ring=44]="Ring",t[t.TemplateFusion=45]="TemplateFusion",t[t.AbbrevTempl=46]="AbbrevTempl",t[t.AbbrevGroup=47]="AbbrevGroup",t[t.AbbrevFormula=48]="AbbrevFormula",t[t.AbbrevClear=49]="AbbrevClear",t[t.AbbrevExpand=50]="AbbrevExpand",t[t.BondArtifactPath=51]="BondArtifactPath",t[t.BondArtifactRing=52]="BondArtifactRing",t[t.BondArtifactArene=53]="BondArtifactArene",t[t.BondArtifactClear=54]="BondArtifactClear",t[t.PolymerBlock=55]="PolymerBlock",t[t.AddHydrogens=56]="AddHydrogens",t[t.RemoveHydrogens=57]="RemoveHydrogens",t[t.QueryClear=58]="QueryClear",t[t.QueryCopy=59]="QueryCopy",t[t.QueryPaste=60]="QueryPaste",t[t.QuerySetAtom=61]="QuerySetAtom",t[t.QuerySetBond=62]="QuerySetBond",t[t.QueryBondAny=63]="QueryBondAny",t[t.SproutDirection=64]="SproutDirection"}(ei||(ei={}));class ai{constructor(t,e,i,s){this.input=t,this.activity=e,this.param=i,this.owner=s,this.toClipboard=null,this.output={mol:null,currentAtom:-1,currentBond:-1,selectedMask:null};let o=this.input.mol.numAtoms;for(null==this.input.selectedMask&&(this.input.selectedMask=n.booleanArray(!1,o));this.input.selectedMask.length<o;)this.input.selectedMask.push(!1);if(this.subjectMask=this.input.selectedMask.slice(0),this.subjectLength=n.maskCount(this.subjectMask),this.subjectIndex=[],this.hasSelected=this.subjectLength>0,0==this.subjectLength){if(this.input.currentAtom>0)this.subjectLength=1,this.subjectMask[this.input.currentAtom-1]=!0,this.subjectIndex=[this.input.currentAtom];else if(this.input.currentBond>0){let t=this.input.mol.bondFrom(this.input.currentBond),e=this.input.mol.bondTo(this.input.currentBond),n=Math.min(t,e),i=Math.max(t,e);this.subjectLength=2,this.subjectMask[n-1]=!0,this.subjectMask[i-1]=!0,this.subjectIndex=[n,i]}}else this.subjectIndex=n.maskIdx(this.subjectMask),n.addTo(this.subjectIndex,1)}setOwner(t){this.owner=t}evaluate(){return!0}execute(){var t;let e=this.param;if(this.activity==ei.Delete)this.execDelete();else if(this.activity==ei.Clear)this.execClear();else if(this.activity==ei.Copy)this.execCopy(!1);else if(this.activity==ei.Cut)this.execCopy(!0);else if(this.activity==ei.SelectAll)this.execSelectAll(!0);else if(this.activity==ei.SelectNone)this.execSelectAll(!1);else if(this.activity==ei.SelectPrevComp)this.execSelectComp(-1);else if(this.activity==ei.SelectNextComp)this.execSelectComp(1);else if(this.activity==ei.SelectSide)this.execSelectSide();else if(this.activity==ei.SelectGrow)this.execSelectGrow();else if(this.activity==ei.SelectShrink)this.execSelectShrink();else if(this.activity==ei.SelectChain)this.execSelectChain();else if(this.activity==ei.SelectSmRing)this.execSelectSmRing();else if(this.activity==ei.SelectRingBlk)this.execSelectRingBlk();else if(this.activity==ei.SelectCurElement)this.execSelectCurElement();else if(this.activity==ei.SelectToggle)this.execSelectToggle();else if(this.activity==ei.SelectUnCurrent)this.execSelectUnCurrent();else if(this.activity==ei.Element)this.execElement(e.element,e.positionX,e.positionY,e.keepAbbrev);else if(this.activity==ei.Charge)this.execCharge(e.delta);else if(this.activity==ei.Connect)this.execConnect(1,ge.BONDTYPE_NORMAL);else if(this.activity==ei.Disconnect)this.execDisconnect();else if(this.activity==ei.MetalLigate)this.execMetalLigate();else if(this.activity==ei.BondOrder)this.execBond(e.order,ge.BONDTYPE_NORMAL);else if(this.activity==ei.BondType)this.execBond(1,e.type);else if(this.activity==ei.BondGeom)this.execBondGeom(e.geom);else if(this.activity==ei.BondAtom)this.execBondAtom(e.order,e.type,e.element,e.x1,e.y1,e.x2,e.y2);else if(this.activity==ei.BondSwitch)this.execBondSwitch();else if(this.activity==ei.BondRotate)this.execBondRotate();else if(this.activity==ei.BondAddTwo)this.execBondAddTwo();else if(this.activity==ei.BondInsert)this.execBondInsert();else if(this.activity==ei.Join)this.execJoin();else if(this.activity==ei.Nudge)this.execNudge(e.dir,.1);else if(this.activity==ei.NudgeLots)this.execNudge(e.dir,1);else if(this.activity==ei.NudgeFar)this.execNudgeFar(e.dir);else if(this.activity==ei.Flip)this.execFlip(e.axis);else if(this.activity==ei.Scale)this.execScale(e.mag);else if(this.activity==ei.Rotate)this.execRotate(e.theta,e.centreX,e.centreY);else if(this.activity==ei.BondDist)this.execBondDist(e.dist);else if(this.activity==ei.AlignAngle)this.execAlignAngle(e.angle);else if(this.activity==ei.AlignRegular)this.execAlignRegular();else if(this.activity==ei.AdjustTorsion)this.execAdjustTorsion(e.angle);else if(this.activity==ei.Move)this.execMove(e.refAtom,e.deltaX,e.deltaY);else if(this.activity==ei.Ring)this.execRing(e.ringX,e.ringY,e.aromatic);else{if(this.activity==ei.TemplateFusion)return this.execTemplateFusion(null!==(t=e.frag)&&void 0!==t?t:ge.fromString(e.fragNative)),void(this.owner&&this.owner.setPermutations(this.output.permutations));this.activity==ei.AbbrevTempl?this.execAbbrevTempl():this.activity==ei.AbbrevGroup?this.execAbbrevGroup():this.activity==ei.AbbrevFormula?this.execAbbrevFormula():this.activity==ei.AbbrevClear?this.execAbbrevClear():this.activity==ei.AbbrevExpand?this.execAbbrevExpand():this.activity==ei.BondArtifactPath||this.activity==ei.BondArtifactRing||this.activity==ei.BondArtifactArene||this.activity==ei.BondArtifactClear?this.execBondArtifact(this.activity):this.activity==ei.PolymerBlock?this.execPolymerBlock():this.activity==ei.AddHydrogens?this.execAddHydrogens():this.activity==ei.RemoveHydrogens?this.execRemoveHydrogens():this.activity==ei.QueryClear?this.execQueryClear():this.activity==ei.QueryCopy?this.execQueryCopy():this.activity==ei.QueryPaste?this.execQueryPaste():this.activity==ei.QuerySetAtom?this.execQuerySetAtom():this.activity==ei.QuerySetBond?this.execQuerySetBond():this.activity==ei.QueryBondAny?this.execQueryBondAny():this.activity==ei.SproutDirection&&this.execSproutDirection(e.deltaX,e.deltaY)}this.finish()}finish(){this.owner&&(null!=this.output.mol||this.output.currentAtom>=0||this.output.currentBond>=0||null!=this.output.selectedMask?(this.owner.setState(this.output,!0),null!=this.errmsg&&this.owner.showMessage(this.errmsg,!1)):null!=this.errmsg&&this.owner.showMessage(this.errmsg,!0))}execDelete(){if(!this.requireSubject())return;let t=this.input.mol;if(this.output.mol=t.clone(),this.zapSubject(),this.input.currentBond>0&&!this.hasSelected)return this.output.mol.deleteBond(this.input.currentBond),void(this.output.currentBond=0);if(1==this.subjectLength&&this.subjectIndex[0]==this.input.currentAtom){let e=t.atomAdjList(this.input.currentAtom);1==e.length&&(this.output.currentAtom=e[0],this.output.currentAtom>this.input.currentAtom&&this.output.currentAtom--)}for(let t=this.subjectLength-1;t>=0;t--)this.output.mol.deleteAtomAndBonds(this.subjectIndex[t])}execCopy(t){let e=this.input.mol;this.subjectLength>0&&(e=Qt.subgraphWithAttachments(e,this.subjectMask)),this.owner?this.owner.performCopy(e):this.toClipboard=e.toString(),t&&(this.zapSubject(),this.output.mol=Qt.subgraphMask(this.input.mol,n.notMask(this.subjectMask)))}execClear(){this.output.mol=new ge,this.zapSubject()}execSelectAll(t){let e=!0;for(let n=0;n<this.input.mol.numAtoms;n++)if(this.subjectMask[n]!=t){e=!1;break}e?this.errmsg=t?"All atoms already selected.":"All atoms already deselected.":this.output.selectedMask=n.booleanArray(t,this.input.mol.numAtoms)}execSelectComp(t){let e=Qt.componentList(this.input.mol);if(1==e.length&&this.hasSelected&&this.subjectLength==this.input.mol.numAtoms)return void(this.errmsg="All atoms already selected.");let i=this.pickSelectedGroup(e,t);this.output.selectedMask=n.booleanArray(!1,this.input.mol.numAtoms);for(let t=0;t<e[i].length;t++)this.output.selectedMask[e[i][t]-1]=!0}execSelectSide(){if(!this.requireCurrent())return;let t=this.input.mol,e=this.input.currentAtom,i=this.input.currentBond;if(e>0&&0==t.atomAdjCount(e))return void(this.errmsg="Current atom has no neighbours.");if(i>0&&1==t.atomAdjCount(t.bondFrom(i))&&1==t.atomAdjCount(t.bondTo(i)))return void(this.errmsg="Current bond has no neighbours.");let s=e>0?Qt.getAtomSides(t,e):Qt.getBondSides(t,i),o=this.pickSelectedGroup(s,1);this.output.selectedMask=n.booleanArray(!1,t.numAtoms);for(let t=0;t<s[o].length;t++)this.output.selectedMask[s[o][t]-1]=!0}execSelectGrow(){if(!this.requireSubject())return;let t=this.input.mol,e=this.input.currentAtom,n=this.input.currentBond;if(this.output.selectedMask=this.input.selectedMask.slice(0),this.hasSelected)for(let e=1;e<=t.numBonds;e++){let n=t.bondFrom(e)-1,i=t.bondTo(e)-1;this.input.selectedMask[n]&&!this.input.selectedMask[i]?this.output.selectedMask[i]=!0:this.input.selectedMask&&!this.input.selectedMask[n]&&(this.output.selectedMask[n]=!0)}else e>0?this.output.selectedMask[e-1]=!0:(this.output.selectedMask[t.bondFrom(n)-1]=!0,this.output.selectedMask[t.bondTo(n)-1]=!0)}execSelectShrink(){if(!this.requireSelected())return;let t=this.input.mol,e=n.numberArray(0,t.numAtoms);for(let n=1;n<=t.numBonds;n++){let i=t.bondFrom(n)-1,s=t.bondTo(n)-1;this.input.selectedMask[i]&&this.input.selectedMask[s]&&(e[i]++,e[s]++)}this.output.selectedMask=this.input.selectedMask.slice(0);for(let n=0;n<t.numAtoms;n++)this.output.selectedMask[n]=this.input.selectedMask[n]&&e[n]>=2}execSelectChain(){if(!this.requireSubject())return;let t=this.input.mol;this.output.selectedMask=this.input.selectedMask.slice(0);for(let e=1;e<=t.numBonds;e++){let n=t.bondFrom(e)-1,i=t.bondTo(e)-1;this.input.selectedMask[n]&&!this.input.selectedMask[i]&&0==t.atomRingBlock(i+1)?this.output.selectedMask[i]=!0:this.input.selectedMask[i]&&!this.input.selectedMask[n]&&0==t.atomRingBlock(n+1)&&(this.output.selectedMask[n]=!0)}}execSelectSmRing(){if(this.requireSubject()){this.output.selectedMask=this.input.selectedMask.slice(0);for(let t=3;t<=8;t++){let e=this.input.mol.findRingsOfSize(t);for(let t=0;t<e.length;t++){let n=!1;for(let i=0;i<e[t].length;i++)if(this.subjectMask[e[t][i]-1]){n=!0;break}if(n)for(let n=0;n<e[t].length;n++)this.output.selectedMask[e[t][n]-1]=!0}}}}execSelectRingBlk(){if(!this.requireSubject())return;let t=this.input.mol;this.output.selectedMask=this.input.selectedMask.slice(0);let e=0;for(let n=1;n<=t.numAtoms;n++)e=Math.max(e,t.atomRingBlock(n));if(0==e)return;let i=n.booleanArray(!1,e);for(let e=1;e<=t.numAtoms;e++){let n=t.atomRingBlock(e);n>0&&this.subjectMask[e-1]&&(i[n-1]=!0)}for(let e=1;e<=t.numAtoms;e++){let n=t.atomRingBlock(e);n>0&&i[n-1]&&(this.output.selectedMask[e-1]=!0)}}execSelectCurElement(){if(!this.requireCurrent())return;let t=this.input.mol;this.output.selectedMask=this.input.selectedMask.slice(0);let e="",n="";this.input.currentAtom>0?e=t.atomElement(this.input.currentAtom):(e=t.atomElement(t.bondFrom(this.input.currentBond)),n=t.atomElement(t.bondTo(this.input.currentBond)));for(let i=1;i<=t.numAtoms;i++)t.atomElement(i)!=e&&t.atomElement(i)!=n||(this.output.selectedMask[i-1]=!0)}execSelectToggle(){if(this.requireCurrent())if(this.output.selectedMask=this.input.selectedMask.slice(0),this.input.currentAtom>0)this.output.selectedMask[this.input.currentAtom-1]=!this.output.selectedMask[this.input.currentAtom-1];else{let t=this.input.mol.bondFrom(this.input.currentBond),e=this.input.mol.bondTo(this.input.currentBond),n=!this.input.selectedMask[t-1]||!this.input.selectedMask[e-1];this.output.selectedMask[t-1]=n,this.output.selectedMask[e-1]=n}}execSelectUnCurrent(){this.requireCurrent()&&(this.output.selectedMask=this.input.selectedMask.slice(0),this.input.currentAtom>0?this.output.selectedMask[this.input.currentAtom-1]=!1:(this.output.selectedMask[this.input.mol.bondFrom(this.input.currentBond)-1]=!1,this.output.selectedMask[this.input.mol.bondTo(this.input.currentBond)-1]=!1))}execElement(t,e,n,i){if(this.subjectLength>0&&!["A","X","Y","Z","Q","M","T","E","R"].includes(t)){let e=!1;for(let n=0;n<this.subjectLength;n++)if(this.input.mol.atomElement(this.subjectIndex[n])!=t){e=!0;break}if(!e)return void(this.errmsg="Elements not changed.")}let s=this.output.mol=this.input.mol.clone(),o=e=>{if("A"==t)te.setQueryAtomElementsNot(s,e,["H"]),te.deleteQueryAtom(s,e,Ht.Elements);else if("X"==t)te.setQueryAtomElements(s,e,["F","Cl","Br","I"]),te.deleteQueryAtom(s,e,Ht.ElementsNot);else if("Y"==t)te.setQueryAtomElements(s,e,["O","S","Se","Te"]),te.deleteQueryAtom(s,e,Ht.ElementsNot);else if("Z"==t)te.setQueryAtomElements(s,e,["F","Cl","Br","O","S"]),te.deleteQueryAtom(s,e,Ht.ElementsNot);else if("Q"==t)te.setQueryAtomElementsNot(s,e,["H","C"]),te.deleteQueryAtom(s,e,Ht.Elements);else if("M"==t){const t=["H","B","C","N","O","F","Si","P","S","Cl","As","Se","Br","Te","I"];te.setQueryAtomElementsNot(s,e,t),te.deleteQueryAtom(s,e,Ht.Elements)}else if("T"==t){const t=["Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr"];te.setQueryAtomElements(s,e,t),te.deleteQueryAtom(s,e,Ht.ElementsNot)}else if("E"==t){const t=["B","N","O","F","Al","Si","P","S","Cl","Zn","Ga","Se","As","Se","Br","Cd","In","Sn","Sb","Te","I","Hg","Tl","Pb","Bi","Pb","At"];te.setQueryAtomElements(s,e,t),te.deleteQueryAtom(s,e,Ht.ElementsNot)}else"R"==t&&(te.setQueryAtomElements(s,e,["C","N","O","S","P","H"]),te.deleteQueryAtom(s,e,Ht.ElementsNot))};if(0==s.numAtoms)s.addAtom(t,0,0),o(s.numAtoms);else if(0==this.subjectLength)null!=e&&null!=n?s.addAtom(t,e,n):Kt.placeNewAtom(s,t),o(s.numAtoms);else for(let e=0;e<this.subjectLength;e++)i?s.setAtomElement(this.subjectIndex[e],t):Qt.setAtomElement(s,this.subjectIndex[e],t),o(this.subjectIndex[e])}execCharge(t){if(this.requireSubject()){this.output.mol=this.input.mol.clone();for(let e=0;e<this.subjectLength;e++){let n=Math.max(-20,Math.min(20,this.input.mol.atomCharge(this.subjectIndex[e])+t));this.output.mol.setAtomCharge(this.subjectIndex[e],n)}}}execConnect(t,e){if(!this.requireSubject())return;let n=Kt.pickAtomsToConnect(this.input.mol,this.subjectIndex);if(null!=n){this.output.mol=this.input.mol.clone();for(let i=0;i<n.length;i+=2)Qt.addBond(this.output.mol,n[i],n[i+1],t,e)}else this.errmsg="Subject atoms contain no bonds suitable for connection."}execDisconnect(){let t=[],e=this.input.mol;if(this.hasSelected)for(let n=1;n<=e.numBonds;n++)this.subjectMask[e.bondFrom(n)-1]&&this.subjectMask[e.bondTo(n)-1]&&t.push(n);else if(this.input.currentAtom>0)for(let n of e.atomAdjBonds(this.input.currentAtom))t.push(n);else this.input.currentBond>0&&t.push(this.input.currentBond);if(0==t.length)return void(this.errmsg="Subject atoms contain no bonds suitable for disconnection.");let i=n.booleanArray(!1,e.numBonds);for(let e of t)i[e-1]=!0;this.output.mol=this.input.mol.clone();for(let t=e.numBonds;t>=1;t--)i[t-1]&&this.output.mol.deleteBond(t)}execMetalLigate(){if(!this.requireSubject())return;let t=this.input.mol,e=this.subjectIndex.slice(0),i=this.input.currentAtom;if(0==i)for(let e of this.subjectIndex){let n=t.atomicNumber(e);if(Bt.ELEMENT_BLOCKS[n]>=3){i=e;break}}if(0==i)for(let e of this.subjectIndex){let n=t.atomicNumber(e);if(Bt.ELEMENT_ROWS[n]>=3){i=e;break}}if(0==i)return void(this.errmsg="Unsure which is the metal atom: try indicating as current.");let s=e.indexOf(i);if(s>=0&&e.splice(s,1),0==e.length&&(e=t.atomAdjList(i)),0!=e.length){t=new si(t,i,e).generate(),this.output.mol=t,this.output.currentAtom=i,this.output.currentBond=-1,this.output.selectedMask=n.booleanArray(!1,t.numAtoms);for(let t of e)this.output.selectedMask[t-1]=!0}else this.errmsg="Metal centre has no attachments: try selecting atom join-points."}execBond(t,e){if(!this.requireSubject())return;if(1==this.subjectLength)return void this.performBondNew(this.subjectIndex[0],t,e);let n=Qt.subgraphMask(this.input.mol,this.subjectMask),i=!0;for(let t=n.numAtoms;t>=1;t--)if(1!=n.atomConnComp(t)){i=!1;break}i?this.performBondChange(t,e):this.execConnect(t,e)}execBondGeom(t){let e=2==this.subjectLength?this.input.mol.findBond(this.subjectIndex[0],this.subjectIndex[1]):0;0==this.subjectLength||this.subjectLength>2||2==this.subjectLength&&0==e?this.errmsg="The subject must be a single atom or bond.":1==this.subjectLength?this.performBondGeomAtom(t,this.subjectIndex[0]):this.performBondGeomBond(t,e)}execBondAtom(t,e,n,i,s,o,r){let a=this.input.mol,l=Zt.atomAtPoint(a,i,s,.01),d=Zt.atomAtPoint(a,o,r,.01);l>0&&l==d||l>0&&d>0&&a.findBond(l,d)>0||(this.output.mol=a.clone(),0==l&&(l=this.output.mol.addAtom("C",i,s)),0==d&&(d=this.output.mol.addAtom(n,o,r)),this.output.mol.addBond(l,d,t,e))}execBondSwitch(){if(this.input.altmol)return this.output.mol=this.input.altmol,void(this.output.altmol=this.input.mol);if(!this.requireSubject())return;let t=this.input.mol,e=0,n=[];if(1==this.subjectLength){e=this.subjectIndex[0];let i=t.atomAdjList(e);for(let e=0;e<i.length;e++)1==t.atomAdjCount(i[e])&&n.push(i[e])}else if(2==this.subjectLength&&t.findBond(this.subjectIndex[0],this.subjectIndex[1])>0){let i=t.atomAdjCount(this.subjectIndex[0]),s=t.atomAdjCount(this.subjectIndex[1]);i>1&&1==s?(e=this.subjectIndex[0],n.push(this.subjectIndex[1])):1==i&&s>1&&(e=this.subjectIndex[1],n.push(this.subjectIndex[0]))}if(0==e||0==n.length)return void(this.errmsg="Subject must include a terminal bond.");let i=Kt.guessAtomGeometry(t,e,1);0!=i.length?(this.output.mol=Kt.switchAtomGeometry(t,e,n,i),null==this.output.mol&&(this.errmsg="No alternative geometries identified.")):this.errmsg="No alternative geometries identified."}execBondRotate(){let t=this.input.currentBond;if(0==t)return void(this.errmsg="There must be a current bond.");let e=this.input.mol;if(e.bondInRing(t))return void(this.errmsg="Cannot rotate a ring-bond.");if(1==e.atomAdjCount(e.bondFrom(t))&&1==e.atomAdjCount(e.bondTo(t)))return void(this.errmsg="Two-atom components do not rotate.");e=e.clone();let[i,s,o]=this.mobileSide(t,!0),r=e.atomX(i),a=e.atomY(i),l=Math.atan2(e.atomY(i)-e.atomY(s),e.atomX(i)-e.atomX(s));for(let t of o)if(t!=i){let n=e.atomX(t)-r,i=e.atomY(t)-a,s=U(n,i),o=Math.atan2(i,n);o=l-it(o,l),e.setAtomPos(t,r+s*Math.cos(o),a+s*Math.sin(o))}let d=n.idxMask(n.add(o,-1),e.numAtoms);for(let t=1;t<=e.numBonds;t++)if(d[e.bondFrom(t)-1]&&d[e.bondTo(t)-1]){let n=e.bondType(t);n==ge.BONDTYPE_INCLINED?e.setBondType(t,ge.BONDTYPE_DECLINED):n==ge.BONDTYPE_DECLINED&&e.setBondType(t,ge.BONDTYPE_INCLINED)}Zt.sketchEquivalent(this.input.mol,e)?this.errmsg="Rotation has no effect.":this.output.mol=e}execBondAddTwo(){if(1!=this.subjectLength)return void(this.errmsg="Subject must be a single atom.");let t=this.subjectIndex[0];if(this.input.mol.atomAdjCount(t)<2)return void(this.errmsg="Subject atom must already have at least 2 bonds.");let e=Kt.calculateNewBondAngles(this.input.mol,t,1);if(0==e.length&&(e=Kt.exitVectors(this.input.mol,t)),0==e.length)return void(this.errmsg="Could not find a suitable geometry for new substituents.");let n=e[0],i=this.input.mol.atomX(t),s=this.input.mol.atomY(t);if(e.length>1){let t=0;for(let o=0;o<e.length;o++){let r=i+ge.IDEALBOND*Math.cos(e[o]),a=s+ge.IDEALBOND*Math.sin(e[o]),l=Zt.congestionPoint(this.input.mol,r,a);(0==o||l<t)&&(t=l,n=e[o])}}let o=n-30*tt,r=n+30*tt,a=this.input.mol.clone(),l=a.addAtom("C",i+ge.IDEALBOND*Math.cos(o),s+ge.IDEALBOND*Math.sin(o)),d=a.addAtom("C",i+ge.IDEALBOND*Math.cos(r),s+ge.IDEALBOND*Math.sin(r));a.addBond(t,l,1),a.addBond(t,d,1),this.output.mol=a}execBondInsert(){let t=this.input.mol,e=this.input.currentBond;if(0==e)return void(this.errmsg="There must be a current bond.");if(t.bondInRing(e))return void(this.errmsg="Cannot insert into a ring-bond.");let[i,s,o]=this.mobileSide(e);t=t.clone(),t.setBondOrder(e,1);let r=n.booleanArray(!1,t.numAtoms);for(let t of o)r[t-1]=!0;let a=Qt.subgraphWithAttachments(t,r);for(let e=t.numAtoms;e>=1;e--)r[e-1]&&e!=i&&(t.deleteAtomAndBonds(e),e<i&&(i-=1));t.setAtomElement(i,"C"),t.setAtomCharge(i,0),t.setAtomUnpaired(i,0),t.setAtomHExplicit(i,ge.HEXPLICIT_UNKNOWN),t.setAtomIsotope(i,ge.ISOTOPE_NATURAL),t.setAtomMapNum(i,0),t.setAtomExtra(i,[]),t.setAtomTransient(i,[]);let l=new ri(t,a,"");l.withGuideOnly=!0,l.permuteAtom(i),0!=l.perms.length?(this.output.mol=l.perms[0].mol,this.zapSubject(),this.output.currentAtom=i):this.errmsg="Unable to insert."}execJoin(){this.requireSubject()&&(this.output.mol=Kt.joinOverlappingAtoms(this.input.mol,this.subjectMask),null==this.output.mol?this.errmsg="Subject contains no overlapping atoms.":this.zapSubject())}execNudge(t,e){if(!this.requireSubject())return;let n=e*("left"==t?-1:"right"==t?1:0),i=e*("down"==t?-1:"up"==t?1:0);this.output.mol=this.input.mol.clone();for(let t=0;t<this.subjectLength;t++){let e=this.output.mol.atomX(this.subjectIndex[t]),s=this.output.mol.atomY(this.subjectIndex[t]);this.output.mol.setAtomPos(this.subjectIndex[t],e+n,s+i)}}execNudgeFar(t){if(!this.requireSubject())return;if(this.subjectLength==this.input.mol.numAtoms)return void(this.errmsg="Cannot apply to entire molecule.");let e="left"==t?-1:"right"==t?1:0,n="down"==t?-1:"up"==t?1:0;this.output.mol=Kt.moveToEdge(this.input.mol,this.subjectMask,e,n),null==this.output.mol&&this.execNudge(t,1)}execFlip(t){if(this.input.mol.numAtoms<2)return void(this.errmsg="At least 2 atoms are required.");let e="ver"==t,i=0,s=0,o=this.subjectMask,r=this.input.mol;if(this.input.currentAtom>0){if(i=r.atomX(this.input.currentAtom),s=r.atomY(this.input.currentAtom),!this.hasSelected){o=n.booleanArray(!1,r.numAtoms);let t=r.atomConnComp(this.input.currentAtom);for(let e=1;e<=r.numAtoms;e++)o[e-1]=r.atomConnComp(e)==t}}else if(this.input.currentBond>0){let t=r.bondFrom(this.input.currentBond),e=r.bondTo(this.input.currentBond);if(i=.5*(r.atomX(t)+r.atomX(e)),s=.5*(r.atomY(t)+r.atomY(e)),!this.hasSelected){o=n.booleanArray(!1,r.numAtoms);let e=r.atomConnComp(t);for(let t=1;t<=r.numAtoms;t++)o[t-1]=r.atomConnComp(t)==e}}else if(0==this.subjectLength){let t=r.boundary();i=.5*(t.minX()+t.maxX()),s=.5*(t.minY()+t.maxY()),o=n.booleanArray(!0,r.numAtoms)}else{for(let t=0;t<this.subjectLength;t++)i+=r.atomX(this.subjectIndex[t]),s+=r.atomY(this.subjectIndex[t]);let t=1/this.subjectLength;i*=t,s*=t}this.output.mol=r.clone();for(let t=1;t<=r.numAtoms;t++)o[t-1]&&(e?this.output.mol.setAtomY(t,2*s-this.output.mol.atomY(t)):this.output.mol.setAtomX(t,2*i-this.output.mol.atomX(t)))}execScale(t){const{mol:e,currentAtom:i,currentBond:s}=this.input;if(e.numAtoms<2)return void(this.errmsg="At least 2 atoms are required.");if(i>0){let s=[];for(let t of this.subjectIndex)t!=i&&e.findBond(i,t)>0&&s.push(t);let o=qt.fromMolecule(e);o.isolateNode(i-1);let r=!1;for(let a of o.calculateComponentGroups()){n.addTo(a,1);let o=0,l=0,d=0;for(let t of a)s.includes(t)&&(l+=e.atomX(t)-e.atomX(i),d+=e.atomY(t)-e.atomY(i),o++);if(0!=o&&([l,d]=[l/o,d/o],!(Math.abs(l)<.1&&Math.abs(d)<.1))){[l,d]=[l*(t-1),d*(t-1)],this.output.mol||(this.output.mol=e.clone());for(let t of a)this.output.mol.setAtomPos(t,this.output.mol.atomX(t)+l,this.output.mol.atomY(t)+d);r=!0}}if(r)return}let o;if(2==this.subjectLength&&(o=e.findBond(this.subjectIndex[0],this.subjectIndex[1]))>0&&!e.bondInRing(o)){let n=this.subjectIndex[0],i=this.subjectIndex[1],s=e.clone();s.deleteBond(o);let r=[],a=[];for(let t=1;t<=s.numAtoms;t++)s.atomConnComp(t)==s.atomConnComp(n)?r.push(t):s.atomConnComp(t)==s.atomConnComp(i)&&a.push(t);let l=(e.atomX(i)-e.atomX(n))*(t-1),d=(e.atomY(i)-e.atomY(n))*(t-1);if(r.length==a.length&&(l*=.5,d*=.5),this.output.mol=e.clone(),r.length<=a.length)for(let t=0;t<r.length;t++){let e=r[t];this.output.mol.setAtomPos(e,this.output.mol.atomX(e)-l,this.output.mol.atomY(e)-d)}if(a.length<=r.length)for(let t=0;t<a.length;t++){let e=a[t];this.output.mol.setAtomPos(e,this.output.mol.atomX(e)+l,this.output.mol.atomY(e)+d)}return}let r=0,a=0;if(i>0)r=e.atomX(i),a=e.atomY(i);else if(s>0){let t=e.bondFrom(s),n=e.bondTo(s);r=.5*(e.atomX(t)+e.atomX(n)),a=.5*(e.atomY(t)+e.atomY(n))}else{for(let t=0;t<this.subjectLength;t++)r+=e.atomX(this.subjectIndex[t]),a+=e.atomY(this.subjectIndex[t]);let t=1/this.subjectLength;r*=t,a*=t}this.output.mol=e.clone();for(let e=0;e<this.subjectLength;e++){let n=this.output.mol.atomX(this.subjectIndex[e]),i=this.output.mol.atomY(this.subjectIndex[e]);this.output.mol.setAtomPos(this.subjectIndex[e],(n-r)*t+r,(i-a)*t+a)}}execRotate(t,e,i){t*=tt;let s=this.input.mol;if(null!=e&&null!=i){this.output.mol=s.clone();let o=0==this.subjectLength?n.booleanArray(!0,s.numAtoms):this.subjectMask;return void Zt.rotateAtoms(this.output.mol,o,e,i,t)}if(s.numAtoms<2)return void(this.errmsg="At least 2 atoms are required.");let o=0,r=0,a=this.subjectMask;if(this.input.currentAtom>0){if(o=s.atomX(this.input.currentAtom),r=s.atomY(this.input.currentAtom),!this.hasSelected){a=n.booleanArray(!1,s.numAtoms);let t=s.atomConnComp(this.input.currentAtom);for(let e=1;e<=s.numAtoms;e++)a[e-1]=s.atomConnComp(e)==t}if(1==n.maskCount(a)&&a[this.input.currentAtom-1])return void(this.errmsg="Component is isolated.")}else if(this.input.currentBond>0){let t=s.bondFrom(this.input.currentBond),e=s.bondTo(this.input.currentBond);if(o=.5*(s.atomX(t)+s.atomX(e)),r=.5*(s.atomY(t)+s.atomY(e)),!this.hasSelected){a=n.booleanArray(!1,s.numAtoms);let e=s.atomConnComp(t);for(let t=1;t<=s.numAtoms;t++)a[t-1]=s.atomConnComp(t)==e}}else if(0==this.subjectLength){let t=s.boundary();o=.5*(t.minX()+t.maxX()),r=.5*(t.minY()+t.maxY()),a=n.booleanArray(!0,s.numAtoms)}else{if(1==this.subjectLength)return void(this.errmsg="Component is isolated.");for(let t=0;t<this.subjectLength;t++)o+=s.atomX(this.subjectIndex[t]),r+=s.atomY(this.subjectIndex[t]);let t=1/this.subjectLength;o*=t,r*=t}this.output.mol=s.clone(),Zt.rotateAtoms(this.output.mol,a,o,r,t)}execBondDist(t){let e=this.input.currentBond;if(0==e)return void(this.errmsg="There must be a current bond.");let n=this.input.mol.clone();if(n.bondInRing(e)){let i=n.bondFrom(e),s=n.bondTo(e),o=n.atomX(s)-n.atomX(i),r=n.atomY(s)-n.atomY(i),a=U(o,r),l=1/a,d=this.isSelected(i),p=this.isSelected(s),h=o*(t-a)*l,c=r*(t-a)*l;d&&!p?n.setAtomPos(i,n.atomX(i)-h,n.atomY(i)-c):p&&!d?n.setAtomPos(s,n.atomX(s)+h,n.atomY(s)+c):(n.setAtomPos(i,n.atomX(i)-.5*h,n.atomY(i)-.5*c),n.setAtomPos(s,n.atomX(s)+.5*h,n.atomY(s)+.5*c))}else{let[i,s,o]=this.mobileSide(e),r=n.atomX(s)-n.atomX(i),a=n.atomY(s)-n.atomY(i),l=U(r,a),d=1/l,p=r*(t-l)*d,h=a*(t-l)*d;for(let t of o)n.setAtomPos(t,n.atomX(t)-p,n.atomY(t)-h)}this.output.mol=n}execAlignAngle(t){let e=this.input.currentBond;if(0==e)return void(this.errmsg="There must be a current bond.");let n=this.input.mol.clone();if(n.bondInRing(e))return void(this.errmsg="Cannot align a ring-bond.");let[i,s,o]=this.mobileSide(e),r=n.atomX(s),a=n.atomY(s),l=t-Math.atan2(n.atomY(i)-a,n.atomX(i)-r),d=Math.cos(l),p=Math.sin(l);for(let t of o){let e=n.atomX(t)-r,i=n.atomY(t)-a;n.setAtomPos(t,r+e*d-i*p,a+e*p+i*d)}this.output.mol=n}execAlignRegular(){if(0==this.input.currentBond)return void(this.errmsg="There must be a current bond.");let t=this.input.mol.clone(),e=t.bondFrom(this.input.currentBond),i=t.bondTo(this.input.currentBond),s=Math.atan2(t.atomY(i)-t.atomY(e),t.atomX(i)-t.atomX(e))*et;s<0&&(s+=360);let o=30*Math.round(s/30);if(Math.abs(s-o)<.001)return;let r=(o-s)*tt,a=this.input.selectedMask;if(n.allFalse(a)){let n=t.atomConnComp(e);for(let e=1;e<=t.numAtoms;e++)a[e-1]=n==t.atomConnComp(e)}let l=.5*(t.atomX(e)+t.atomX(i)),d=.5*(t.atomY(e)+t.atomY(i));for(let e=1;e<=t.numAtoms;e++)if(a[e-1]){let n=t.atomX(e)-l,i=t.atomY(e)-d,s=Math.atan2(i,n)+r,o=U(n,i);t.setAtomPos(e,l+o*Math.cos(s),d+o*Math.sin(s))}this.output.mol=t}execAdjustTorsion(t){if(0==this.input.currentAtom||3!=n.maskCount(this.input.selectedMask))return void(this.errmsg="Must be 3 selected atoms and a current atom.");let e=this.input.mol.clone(),i=this.input.currentAtom,s=[];for(let t=1;t<=e.numAtoms;t++)t!=i&&this.input.selectedMask[t-1]&&s.push(t);let o=e.findBond(i,s[0])>0?s.shift():e.findBond(i,s[1])>0?s.pop():0;if(0==o||0==e.findBond(o,s[0]))return void(this.errmsg="Selected atoms must be consecutive.");let r=s[0],a=e.atomX(o),l=e.atomY(o),d=Math.atan2(e.atomY(i)-l,e.atomX(i)-a),p=t-it(Math.atan2(e.atomY(r)-l,e.atomX(r)-a),d),h=[],c=[];if(0==e.atomRingBlock(i)||e.atomRingBlock(i)!=e.atomRingBlock(r)){let t=qt.fromMolecule(e);t.removeEdge(o-1,i-1),t.removeEdge(o-1,r-1);let n=t.calculateComponents();for(let e=0;e<t.numNodes;e++)n[e]==n[i-1]?h.push(e+1):n[e]==n[r-1]&&c.push(e+1)}e.atomRingBlock(i)>0&&e.atomRingBlock(i)==e.atomRingBlock(o)&&(h=[i]),e.atomRingBlock(r)>0&&e.atomRingBlock(r)==e.atomRingBlock(o)&&(c=[r]),Zt.rotateAtoms(e,n.idxMask(n.add(h,-1),e.numAtoms),a,l,-.5*p),Zt.rotateAtoms(e,n.idxMask(n.add(c,-1),e.numAtoms),a,l,.5*p),this.output.mol=e}execMove(t,e,i){let s=this.subjectIndex;if(0==n.len(s)){if(0==t)return;s=[t]}this.output.mol=this.input.mol.clone();for(let t of s)this.output.mol.setAtomPos(t,this.output.mol.atomX(t)+e,this.output.mol.atomY(t)+i)}execRing(t,e,i){let s=t.length,o=n.numberArray(0,s),r=n.numberArray(0,s),a=this.input.mol.clone();for(let n=0;n<s;n++)o[n]=Zt.atomAtPoint(a,t[n],e[n]),0==o[n]&&(o[n]=a.addAtom("C",t[n],e[n]));for(let t=0;t<s;t++){let e=t<s-1?t+1:0;r[t]=a.findBond(o[t],o[e]),0==r[t]&&(r[t]=a.addBond(o[t],o[e],1))}if(i){let t=n.numberArray(0,s),e=n.booleanArray(!1,s);for(let n=0;n<s;n++){t[n]=Bt.ELEMENT_BONDING[a.atomicNumber(o[n])]+a.atomCharge(o[n]),a.atomHExplicit(o[n])!=ge.HEXPLICIT_UNKNOWN&&(t[n]-=a.atomHExplicit(o[n]));for(let e of a.atomAdjBonds(o[n]))t[n]-=a.bondOrder(e);a.bondOrder(r[n])>=2&&(e[n]=!0,n<s-1?(e[n]=!0,n++):e[0]=!0)}for(let n=0;n<s;n++){let i=n<s-1?n+1:0;e[n]||e[i]||t[n]>0&&t[i]>0&&(a.setBondOrder(r[n],2),e[n]=!0,e[i]=!0,t[n]--,t[i]--)}}this.output.mol=a}execTemplateFusion(t){let e=this.input.mol,n=new ri(e,t,"");0==this.subjectLength?n.permuteNone():1==this.subjectLength?n.permuteAtom(this.subjectIndex[0]):2==this.subjectLength&&e.findBond(this.subjectIndex[0],this.subjectIndex[1])>0?n.permuteBond(this.subjectIndex[0],this.subjectIndex[1]):n.permuteMulti(this.subjectIndex);let i=[];for(let t of n.perms){let e={};e.mol=t.mol.toString(),e.display=t.display.toString(),e.molidx=t.molidx,e.temidx=t.temidx,e.srcidx=t.srcidx,i.push(e)}this.output.permutations=i}execAbbrevTempl(){}execAbbrevGroup(){if(!this.requireSubject())return;if(!this.checkAbbreviationReady())return;let t=Qt.convertToAbbrev(this.input.mol,n.notMask(this.subjectMask),"?");if(null!=t){if(Bn.main){Bn.main.submitMolecule(t,!0);for(let e=1;e<=t.numAtoms;e++)"?"==t.atomElement(e)&&Qt.hasAbbrev(t,e)&&Bn.main.substituteAbbrevName(t,e)}this.output.mol=t,this.zapSubject(),this.output.currentAtom=t.numAtoms}else this.errmsg="Inline abbreviations must be terminal with exactly one attachment point."}execAbbrevFormula(){if(!this.requireSubject())return;if(!this.checkAbbreviationReady())return;let t=this.input.mol.clone();for(let e=1;e<=t.numAtoms;e++)t.setAtomHExplicit(e,t.atomHydrogens(e));let e=Qt.subgraphMask(t,this.subjectMask),i=Qt.molecularFormula(e,!0),s=Qt.convertToAbbrev(this.input.mol,n.notMask(this.subjectMask),i);null!=s?(this.output.mol=s,this.zapSubject(),this.output.currentAtom=s.numAtoms):this.errmsg="Inline abbreviations must be terminal with exactly one attachment point."}execAbbrevClear(){let t=[];for(let e of this.subjectIndex)Qt.hasAbbrev(this.input.mol,e)&&t.push(e);if(0==t.length)return void(this.errmsg="No abbreviations to clear.");let e=this.input.mol.clone();for(let n of t)Qt.clearAbbrev(e,n);this.output.mol=e}execAbbrevExpand(){let t=[];for(let e of this.subjectIndex)Qt.hasAbbrev(this.input.mol,e)&&t.push(e);if(0==t.length)return void(this.errmsg="No abbreviations to expand.");let e=this.input.mol.clone();for(let n of t)Qt.expandOneAbbrev(e,n,!0);this.output.mol=e,this.zapSubject()}execBondArtifact(t){if(!this.requireAtoms()||!this.requireSubject())return;let e=new Ft(this.input.mol.clone()),n=this.subjectIndex.slice(0),i=this.input.currentAtom;if(i>0&&n.indexOf(i)<0&&n.push(i),t==ei.BondArtifactPath){if(!e.createPath(n))return void(this.errmsg="Path artifact not suitable.")}else if(t==ei.BondArtifactRing){if(!e.createRing(n))return void(this.errmsg="Ring artifact not suitable.")}else if(t==ei.BondArtifactArene){if(!e.createArene(n))return void(this.errmsg="Arene artifact not suitable.")}else if(t==ei.BondArtifactClear&&!e.removeArtifact(n)){if(this.removePolymerBlock(n))return;return void(this.errmsg="No artifact removed.")}e.rewriteMolecule(),this.output.mol=e.mol}execPolymerBlock(){this.requireAtoms()&&this.requireSubject()&&this.owner&&this.owner.performPolymerBlock(this.subjectIndex)}execAddHydrogens(){let t=this.input.mol.clone();if(!this.requireAtoms())return;let e=this.subjectIndex;0==e.length&&(e=n.identity1(t.numAtoms));for(let n of e){let e=t.atomHydrogens(n);e>0&&Kt.placeAdditionalHydrogens(t,n,e)}t.numAtoms!=this.input.mol.numAtoms?this.output.mol=t:this.errmsg="Nothing needs to be added."}execRemoveHydrogens(){if(!this.requireAtoms())return;let t=this.input.mol,e=this.subjectMask;n.allFalse(e)&&(e=n.booleanArray(!0,t.numAtoms));let i=n.booleanArray(!0,t.numAtoms);for(let n=1;n<=t.numAtoms;n++)if(Qt.boringHydrogen(t,n)){let s=t.atomAdjList(n)[0];(e[n-1]||e[s-1])&&(i[n-1]=!1)}n.allTrue(i)?this.errmsg="Nothing to be deleted.":this.output.mol=Qt.subgraphMask(t,i)}execQueryClear(){if(!this.requireSubject())return;let t=this.input.mol.clone();const{currentBond:e}=this.input;if(e>0&&te.hasAnyQueryBond(t,e))return te.deleteQueryBondAll(t,e),void(this.output.mol=t);let n=!1;for(let e of this.subjectIndex)te.hasAnyQueryAtom(t,e)&&(te.deleteQueryAtomAll(t,e),n=!0);for(let e=1;e<=t.numBonds;e++)this.subjectMask[t.bondFrom(e)-1]&&this.subjectMask[t.bondTo(e)-1]&&te.hasAnyQueryBond(t,e)&&(te.deleteQueryBondAll(t,e),n=!0);n?this.output.mol=t:this.errmsg="No query terms to clear."}execQueryCopy(){if(!this.requireSubject())return;const{mol:t,currentBond:e}=this.input;if(e>0){if(!te.hasAnyQueryBond(t,e))return void(this.errmsg="Bond has no query terms.");let n=new ge;n.addAtom("*",0,0),n.addAtom("*",ge.IDEALBOND,0),n.addBond(1,2,1),n.setBondExtra(1,t.bondExtra(e).filter((t=>t.startsWith("q")))),this.toClipboard=n.toString()}else if(1==this.subjectLength){let e=this.subjectIndex[0];if(!te.hasAnyQueryAtom(t,e))return void(this.errmsg="Atom has no query terms.");let n=new ge;n.addAtom("*",0,0),n.setAtomExtra(1,t.atomExtra(e).filter((t=>t.startsWith("q")))),this.toClipboard=n.toString()}else this.errmsg="Subject has to be a single atom or bond."}execQueryPaste(){if(!this.requireSubject())return;let t=this.param.qmol;if(t){if(1==t.numAtoms&&"*"==t.atomElement(1)&&te.hasAnyQueryAtom(t,1)){let e=this.output.mol=this.input.mol.clone(),n=t.atomExtra(1).filter((t=>t.startsWith("q")));for(let t of this.subjectIndex){let i=e.atomExtra(t).filter((t=>t.startsWith("q")));e.setAtomExtra(t,[...i,...n])}return}if(2==t.numAtoms&&"*"==t.atomElement(1)&&"*"==t.atomElement(2)&&1==t.numBonds&&te.hasAnyQueryBond(t,1)){let e=this.output.mol=this.input.mol.clone(),n=t.bondExtra(1).filter((t=>t.startsWith("q")));for(let t=1;t<=e.numBonds;t++)if(this.subjectMask[e.bondFrom(t)-1]&&this.subjectMask[e.bondTo(t)-1]){let i=e.bondExtra(t).filter((t=>t.startsWith("q")));e.setBondExtra(t,[...i,...n])}return}}this.errmsg="Unable to paste query terms."}execQuerySetAtom(){}execQuerySetBond(){}execQueryBondAny(){if(!this.requireSubject())return;const{mol:t,currentBond:e}=this.input;let n=[];for(let e=1;e<=t.numBonds;e++)this.subjectMask[t.bondFrom(e)-1]&&this.subjectMask[t.bondTo(e)-1]&&n.push(e);if(0!=n.length){this.output.mol=t.clone();for(let t of n)this.output.mol.setBondOrder(t,0),te.setQueryBondOrders(this.output.mol,t,[-1,0,1,2,3,4])}else this.errmsg="Must select at least one bond."}execSproutDirection(t,e){var i,s;if(!this.requireCurrent())return;if(0==t&&0==e)return;const{mol:o,currentAtom:r}=this.input;let a;if(a=0==o.atomAdjCount(r)?n.identity0(12).map((t=>t*Z/12)):null!==(i=Kt.primeDirections(o,r))&&void 0!==i?i:Kt.exitVectors(o,r),0==a.length)return;let l=Math.atan2(e,t),d=n.idxMin(a.map((t=>Math.abs(it(l,t))+.01*Math.abs(Math.sin(t))))),p=o.atomX(r)+ge.IDEALBOND*Math.cos(a[d]),h=o.atomY(r)+ge.IDEALBOND*Math.sin(a[d]);this.output.mol=o.clone();let c=this.output.mol.addAtom("C",p,h);this.output.mol.addBond(r,c,1),this.output.mol=null!==(s=Kt.joinOverlappingAtoms(this.output.mol,n.booleanArray(!0,this.output.mol.numAtoms)))&&void 0!==s?s:this.output.mol;for(let t=1;t<=this.output.mol.numAtoms;t++)if(Y(this.output.mol.atomX(t)-p,this.output.mol.atomY(t)-h)<Zt.OVERLAP_THRESHOLD_SQ){this.output.currentAtom=t;break}}requireSubject(){return 0==this.subjectLength&&(this.errmsg="Subject required: current atom/bond or selected atoms."),this.subjectLength>0}requireAtoms(){return 0==this.input.mol.numAtoms&&(this.errmsg="There are no atoms."),this.input.mol.numAtoms>0}requireCurrent(){return 0!=this.input.currentAtom||0!=this.input.currentBond||(this.errmsg="There must be a current atom or bond.",!1)}requireSelected(){return this.hasSelected||(this.errmsg="No atoms are selected."),this.hasSelected}pickSelectedGroup(t,e){if(0==this.subjectLength)return 0;for(let n=0;n<t.length;n++){let i=t[n],s=!0;for(let t=0;t<i.length;t++)if(!this.subjectMask[i[t]-1]){s=!1;break}if(s)return n+=e,n<0?n+t.length:n>=t.length?n-t.length:n}for(let e=0;e<t.length;e++){let n=t[e];for(let t=0;t<n.length;t++)if(this.subjectMask[n[t]-1])return e}return 0}zapSubject(){this.output.currentAtom=0,this.output.currentBond=0,this.output.selectedMask=n.booleanArray(!1,this.input.mol.numAtoms)}performBondNew(t,e,i){let s=this.input.mol,o=Kt.calculateNewBondAngles(s,t,e);if(0==o.length&&(o=Kt.exitVectors(s,t)),0==o.length)return void(this.errmsg="Could not find a suitable geometry for a new substituent.");let r=[],a=[],l=[];for(let e=0;e<o.length;e++){let n=s.atomX(t)+ge.IDEALBOND*Math.cos(o[e]),i=s.atomY(t)+ge.IDEALBOND*Math.sin(o[e]),d=Zt.congestionPoint(s,n,i);Bt.ELEMENT_BLOCKS[s.atomicNumber(t)]<=2?d+=1e-8*Math.abs(nt(o[e])):d+=1e-8*Math.abs(it(.5*Math.PI,o[e])),r.push(n),a.push(i),l.push(d)}let d=n.idxSort(l);this.output.mol=s.clone();let p=Zt.atomAtPoint(this.output.mol,r[d[0]],a[d[0]]);0==p&&(p=this.output.mol.addAtom("C",r[d[0]],a[d[0]])),Qt.addBond(this.output.mol,t,p,e,i),d.length>=2&&(this.output.altmol=s.clone(),p=Zt.atomAtPoint(this.output.altmol,r[d[1]],a[d[1]]),0==p&&(p=this.output.altmol.addAtom("C",r[d[1]],a[d[1]])),Qt.addBond(this.output.altmol,t,p,e,i))}performBondChange(t,e){let n=this.input.mol,i=[];for(let t=1;t<=n.numBonds;t++)this.subjectMask[n.bondFrom(t)-1]&&this.subjectMask[n.bondTo(t)-1]&&i.push(t);let s=e==ge.BONDTYPE_DECLINED||e==ge.BONDTYPE_INCLINED,o=s||e==ge.BONDTYPE_UNKNOWN,r=s;for(let s=0;s<i.length&&!r;s++){let o=i[s];(n.bondOrder(o)!=t&&e==ge.BONDTYPE_NORMAL||n.bondType(o)!=e)&&(r=!0)}if(r){this.output.mol=n.clone();for(let n=0;n<i.length;n++){let r=i[n],a=this.output.mol.bondFrom(r),l=this.output.mol.bondTo(r);s&&this.output.mol.bondType(r)==e?this.output.mol.setBondFromTo(r,l,a):this.output.mol.bondOrder(r)!=t||this.output.mol.bondType(r)!=e?o||t==this.output.mol.bondOrder(r)?this.output.mol.setBondType(r,e):this.output.mol.setBondOrder(r,t):s&&this.output.mol.setBondFromTo(r,l,a)}}else this.errmsg="No bond changes made."}performBondGeomAtom(t,e){let n=this.input.mol,i=n.atomAdjList(e).length,s=Kt.GEOM_ANGLES[t].length;if(i>s)return void(this.errmsg="The current atom has more bonds than does the selected geometry.");if(0==i)return void this.performBondNew(e,1,ge.BONDTYPE_NORMAL);if(i==s)return this.output.mol=Kt.refitAtomGeometry(n,e,t),void(null==this.output.mol&&(this.errmsg="Could not re-fit the atom geometry."));let o=Zt.atomBondAngles(n,e),r=Kt.mapAngleSubstituent(t,o);if(null==r)return this.output.mol=Kt.refitAtomGeometry(n,e,t),void(null==this.output.mol&&(this.errmsg="Could not re-fit the atom geometry."));this.output.mol=n.clone();let a=Kt.pickNewAtomDirection(n,e,r),l=this.output.mol.atomX(e)+ge.IDEALBOND*Math.cos(a),d=this.output.mol.atomY(e)+ge.IDEALBOND*Math.sin(a),p=Zt.atomAtPoint(this.output.mol,l,d);0==p&&(p=this.output.mol.addAtom("C",l,d)),Qt.addBond(this.output.mol,e,p,1)}performBondGeomBond(t,e){let n=this.input.mol,i=n.bondFrom(e),s=n.bondTo(e),o=n.atomAdjCount(i),r=n.atomAdjCount(s);if(o>1&&1==r);else{if(!(1==o&&r>1))return void(this.errmsg="One end of the bond must be terminal.");{let t=o;o=r,r=t}}let a=n.atomAdjList(i),l=n.atomX(i),d=n.atomY(i),p=n.atomX(s),h=n.atomY(s),c=[];for(let t=0;t<a.length;t++)a[t]!=s&&c.push(Math.atan2(n.atomY(a[t])-d,n.atomX(a[t])-l));let m=Kt.mapAngleSubstituent(t,c);if(null==m)return void(this.errmsg="No alternative geometries identified.");let u=Z+1,f=0,g=0,k=Math.atan2(h-d,p-l),y=U(p-l,h-d);for(let t=0;t<m.length;t++){let e=it(m[t],k);if(e<0&&(e+=Z),t>0&&e>u)continue;let i=l+y*Math.cos(e+k),s=d+y*Math.sin(e+k);Zt.atomAtPoint(n,i,s)>0||(u=e,f=i,g=s)}u>Z?this.errmsg="No alternative geometries identified.":(this.output.mol=n.clone(),this.output.mol.setAtomPos(s,f,g))}checkAbbreviationReady(){let t=0,e=this.input.mol,n=this.subjectMask;for(let i=1;i<=e.numBonds;i++){let s=e.bondFrom(i),o=e.bondTo(i),r=0;if(n[s-1]&&!n[o-1]&&Qt.hasAbbrev(e,s)||n[o-1]&&!n[s-1]&&Qt.hasAbbrev(e,o))return this.errmsg="Already an abbreviation.",!1;if(n[s-1]&&!n[o-1]?r=s:n[o-1]&&!n[s-1]&&(r=o),0==r||r==t);else{if(0!=t)return this.errmsg="The selected group must be terminal.",!1;t=r}}return!0}mobileSide(t,e=!1){let{mol:i}=this.input,s=i.bondFrom(t),o=i.bondTo(t),r=qt.fromMolecule(i);r.removeEdge(s-1,o-1);let a=[],l=[];for(let t of r.calculateComponentGroups())t.includes(s-1)&&(a=n.add(t,1)),t.includes(o-1)&&(l=n.add(t,1));let d=a.length*(i.atomRingBlock(s)>0?2:1),p=l.length*(i.atomRingBlock(o)>0?2:1),h=!1,c=!1;for(let t of a)if(this.isSelected(t)){h=!0;break}for(let t of l)if(this.isSelected(t)){c=!0;break}if(e&&1==i.atomAdjCount(s))return[o,s,l];if(e&&1==i.atomAdjCount(o))return[s,o,a];if(h&&!c);else if(c&&!h||p<d)return[o,s,l];return[s,o,a]}isSelected(t){let e=this.input.selectedMask;return!!e&&e[t-1]}removePolymerBlock(t){let e=new $t(this.input.mol.clone());for(let n of e.getIDList()){let i=e.getUnit(n);for(let s of t)if(i.atoms.includes(s))return e.removeUnit(n),e.rewriteMolecule(),this.output.mol=e.mol,!0}return!1}}const li='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="AtomPlus.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomPlus.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective10" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="-64.472045"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1155"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2818" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.75;stroke:#000000;stroke-width:20;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:8.13591309000000070"\n       id="path3758"\n       sodipodi:cx="161.07143"\n       sodipodi:cy="160.35715"\n       sodipodi:rx="149.64285"\n       sodipodi:ry="149.64285"\n       d="m 310.71428,160.35715 a 149.64285,149.64285 0 1 1 -299.285706,0 149.64285,149.64285 0 1 1 299.285706,0 z"\n       transform="matrix(0.60145026,0,0,0.6014321,63.123549,63.556079)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:14.75459385;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 91.367971,160.26223 230.74482,159.73468"\n       id="path3754"\n       sodipodi:nodetypes="cc"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:14.75459385;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 160.52478,90.246356 0.53163,138.246984"\n       id="path3756"\n       sodipodi:nodetypes="cc"\n       inkscape:connector-curvature="0" />\n  </g>\n</svg>\n',di='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="AtomMinus.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomMinus.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective9" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="59.813669"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="467"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2815" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.75;stroke:#000000;stroke-width:20;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:8.13591309000000070"\n       id="path3758"\n       sodipodi:cx="161.07143"\n       sodipodi:cy="160.35715"\n       sodipodi:rx="149.64285"\n       sodipodi:ry="149.64285"\n       d="m 310.71428,160.35715 a 149.64285,149.64285 0 1 1 -299.285706,0 149.64285,149.64285 0 1 1 299.285706,0 z"\n       transform="matrix(0.60591986,0,0,0.60381033,62.403623,63.530598)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:12.95214939;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 96.131868,160.58706 129.596922,-0.4623"\n       id="path3754"\n       sodipodi:nodetypes="cc" />\n  </g>\n</svg>\n',pi='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondOne.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondLinear.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.0389,160 L 39.961095,160"\n       id="path3152" />\n  </g>\n</svg>\n',hi='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondTwo.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondOne.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.0389,140 L 39.961095,140"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.01947,179.98053 L 39.941666,179.98053"\n       id="path3574" />\n  </g>\n</svg>\n',ci='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondThree.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondTwo.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.0389,160 L 39.961095,160"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.01947,199.98053 L 39.941666,199.98053"\n       id="path3574" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.01947,119.98053 L 39.941663,119.98053"\n       id="path3576" />\n  </g>\n</svg>\n',mi='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="BondZero.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondLinear.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2966" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4517786"\n     inkscape:cx="160"\n     inkscape:cy="160"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1390"\n     inkscape:window-height="1119"\n     inkscape:window-x="422"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2968" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none"\n       id="path3742"\n       sodipodi:cx="40"\n       sodipodi:cy="135"\n       sodipodi:rx="10"\n       sodipodi:ry="10"\n       d="m 50,135 a 10,10 0 1 1 -20,0 10,10 0 1 1 20,0 z"\n       transform="matrix(1.25,0,0,1.25,132.5,-8.75)" />\n    <path\n       transform="matrix(1.25,0,0,1.25,-17.5,-8.75)"\n       d="m 50,135 a 10,10 0 1 1 -20,0 10,10 0 1 1 20,0 z"\n       sodipodi:ry="10"\n       sodipodi:rx="10"\n       sodipodi:cy="135"\n       sodipodi:cx="40"\n       id="path3744"\n       style="fill:#000000;fill-opacity:1;stroke:none"\n       sodipodi:type="arc" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none"\n       id="path3746"\n       sodipodi:cx="40"\n       sodipodi:cy="135"\n       sodipodi:rx="10"\n       sodipodi:ry="10"\n       d="m 50,135 a 10,10 0 1 1 -20,0 10,10 0 1 1 20,0 z"\n       transform="matrix(1.25,0,0,1.25,32.5,-8.75)" />\n    <path\n       transform="matrix(1.25,0,0,1.25,82.5,-8.75)"\n       d="m 50,135 a 10,10 0 1 1 -20,0 10,10 0 1 1 20,0 z"\n       sodipodi:ry="10"\n       sodipodi:rx="10"\n       sodipodi:cy="135"\n       sodipodi:cx="40"\n       id="path3748"\n       style="fill:#000000;fill-opacity:1;stroke:none"\n       sodipodi:type="arc" />\n    <path\n       transform="matrix(1.25,0,0,1.25,232.5,-8.75)"\n       d="m 50,135 a 10,10 0 1 1 -20,0 10,10 0 1 1 20,0 z"\n       sodipodi:ry="10"\n       sodipodi:rx="10"\n       sodipodi:cy="135"\n       sodipodi:cx="40"\n       id="path3750"\n       style="fill:#000000;fill-opacity:1;stroke:none"\n       sodipodi:type="arc" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none"\n       id="path3752"\n       sodipodi:cx="40"\n       sodipodi:cy="135"\n       sodipodi:rx="10"\n       sodipodi:ry="10"\n       d="m 50,135 a 10,10 0 1 1 -20,0 10,10 0 1 1 20,0 z"\n       transform="matrix(1.25,0,0,1.25,182.5,-8.75)" />\n  </g>\n</svg>\n',ui='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondUp.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#000000;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"\n       d="M 10,160 L 300,100 L 300,220.71429 L 10,160 z "\n       id="path3610"\n       sodipodi:nodetypes="cccc" />\n  </g>\n</svg>\n',fi='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondDown.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondLinear.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:20;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 40.382649,165.00403 L 40.382649,155.19597"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:20;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 100,174.2408 L 100,144.59666"\n       id="path3712" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:20;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 160,184.32705 L 160,134.74379"\n       id="path3714" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:20;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280,204.78908 L 280,115.08664"\n       id="path3716" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:20;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 220,195.22384 L 220,125.64966"\n       id="path3718" />\n  </g>\n</svg>\n',gi='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondSquig.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondSquig.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.70939255;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 13.854696,160 C 23.404427,145.60525 31.644659,120.73451 42.883757,119.8547 C 52.560111,118.19483 66.522178,143.90673 71.912818,160 C 82.300825,178.10026 83.522733,199.152 100.94188,200.1453 C 119.40219,200.81786 121.80479,177.7981 129.97094,160 C 137.74367,142.33593 144.46966,118.67452 159,119.8547 C 175.82856,118.93206 179.97706,143.36954 188.02906,160 C 196.14175,177.45474 205.82635,200.76232 217.05812,200.1453 C 231.09125,199.83385 237.2755,175.9758 246.08718,160 C 254.09821,142.34457 263.95628,119.88399 275.11624,119.8547 C 289.09333,120.33425 295.4277,143.74196 304.1453,160 L 304.1453,160 L 304.1453,160"\n       id="path3749"\n       sodipodi:nodetypes="ccccccccccccc" />\n  </g>\n</svg>\n',ki=["He","Ar","Kr","Xe","Rn"],yi=["Li","Na","K","Rb","Cs","Fr","Sc","Be","Mg","Ca","Sr","Ba","Ra","Y"],wi=["B","Al","Si","Ga","Ge","As","Se","In","Sn","Sb","Te","Tl","Pb","Bi","Po","At"],xi=["Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg"],Ci=["La","Ce","Pr","Nd","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Ac","Th","Pa","U"],vi=["*","A","X","Y","Z","Q","M","T","E","L","R","R0","R1","R2","R3","R4","R5","R6","R7","R8"];var bi;!function(t){t[t.Main=0]="Main",t[t.Atom=1]="Atom",t[t.Bond=2]="Bond",t[t.Select=3]="Select",t[t.Move=4]="Move",t[t.Abbrev=5]="Abbrev",t[t.SBlock=6]="SBlock",t[t.PBlock=7]="PBlock",t[t.DBlock=8]="DBlock",t[t.FBlock=9]="FBlock",t[t.Noble=10]="Noble"}(bi||(bi={}));const Ai=[{id:"undo",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainUndo.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainExport.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3604">\n      <stop\n         style="stop-color:#000000;stop-opacity:0.25098041;"\n         offset="0"\n         id="stop3606" />\n      <stop\n         style="stop-color:#000000;stop-opacity:0.1254902;"\n         offset="1"\n         id="stop3608" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective23" />\n    <pattern\n       patternUnits="userSpaceOnUse"\n       width="30"\n       height="33"\n       patternTransform="translate(0,0)"\n       id="pattern5043">\n      <rect\n         id="rect5041"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none;stroke-linecap:round" />\n      <path\n         id="path5039"\n         d="M 21.5,31.5 L 31.5,21.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5037"\n         d="M 11.5,31.5 L 31.5,11.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5035"\n         d="M 1.5,31.5 L 31.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5033"\n         d="M 1.5,21.5 L 21.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    </pattern>\n    <pattern\n       patternUnits="userSpaceOnUse"\n       width="30"\n       height="33"\n       patternTransform="translate(18.5,-71.5)"\n       id="pattern5062">\n      <path\n         id="path5060"\n         d="M 1.5,21.5 L 21.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5058"\n         d="M 1.5,31.5 L 31.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5056"\n         d="M 11.5,31.5 L 31.5,11.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5054"\n         d="M 21.5,31.5 L 31.5,21.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <rect\n         id="rect5052"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none;stroke-linecap:round" />\n      <rect\n         id="rect5050"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none" />\n      <path\n         id="path5000"\n         d="M 1.5,11.5 L 11.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <rect\n         id="rect5030"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none" />\n    </pattern>\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3604"\n       id="radialGradient3610"\n       cx="210"\n       cy="140"\n       fx="210"\n       fy="140"\n       r="152.5"\n       gradientUnits="userSpaceOnUse"\n       gradientTransform="matrix(1.0491803,-0.78688524,0.78096126,1.0412817,-119.66246,159.46646)" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.2586836"\n     inkscape:cx="163.14968"\n     inkscape:cy="164.16609"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1716"\n     inkscape:window-height="1116"\n     inkscape:window-x="144"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3600" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:url(#radialGradient3610);fill-opacity:1;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"\n       id="path3602"\n       sodipodi:cx="160"\n       sodipodi:cy="160"\n       sodipodi:rx="150"\n       sodipodi:ry="150"\n       d="m 310,160 a 150,150 0 1 1 -300,0 150,150 0 1 1 300,0 z"\n       transform="matrix(0.93333333,0,0,0.93333333,10.666666,10.666666)" />\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans"\n       d="m 196.07064,12.690252 -90,50 90,49.999998 0,-12.8125 c 20.29664,12.07637 33.75,34.2109 33.75,59.78125 0,38.68907 -30.81093,69.5 -69.5,69.5 -38.68907,0 -69.531254,-30.81093 -69.531254,-69.5 0.0934,-6.60391 -2.559001,-13.20451 -7.195999,-17.90755 -4.636997,-4.70304 -11.199433,-7.4485 -17.804001,-7.4485 -6.604568,0 -13.167004,2.74546 -17.804001,7.4485 -4.636998,4.70304 -7.289395,11.30364 -7.195999,17.90755 0,65.71107 53.82018,119.5 119.531254,119.5 65.71107,0 119.5,-53.78892 119.5,-119.5 0,-53.27576 -35.34828,-98.733461 -83.75,-114.031248 l 0,-32.9375 z"\n       id="path3612"\n       sodipodi:nodetypes="ccccsscssscsscc" />\n  </g>\n</svg>\n',helpText:"Undo last change.",mnemonic:"CmdOrCtrl+Z"},{id:"redo",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainRedo.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainExport.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3604">\n      <stop\n         style="stop-color:#000000;stop-opacity:0.25098041;"\n         offset="0"\n         id="stop3606" />\n      <stop\n         style="stop-color:#000000;stop-opacity:0.1254902;"\n         offset="1"\n         id="stop3608" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective23" />\n    <pattern\n       patternUnits="userSpaceOnUse"\n       width="30"\n       height="33"\n       patternTransform="translate(0,0)"\n       id="pattern5043">\n      <rect\n         id="rect5041"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none;stroke-linecap:round" />\n      <path\n         id="path5039"\n         d="M 21.5,31.5 L 31.5,21.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5037"\n         d="M 11.5,31.5 L 31.5,11.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5035"\n         d="M 1.5,31.5 L 31.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5033"\n         d="M 1.5,21.5 L 21.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    </pattern>\n    <pattern\n       patternUnits="userSpaceOnUse"\n       width="30"\n       height="33"\n       patternTransform="translate(18.5,-71.5)"\n       id="pattern5062">\n      <path\n         id="path5060"\n         d="M 1.5,21.5 L 21.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5058"\n         d="M 1.5,31.5 L 31.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5056"\n         d="M 11.5,31.5 L 31.5,11.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5054"\n         d="M 21.5,31.5 L 31.5,21.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <rect\n         id="rect5052"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none;stroke-linecap:round" />\n      <rect\n         id="rect5050"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none" />\n      <path\n         id="path5000"\n         d="M 1.5,11.5 L 11.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <rect\n         id="rect5030"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none" />\n    </pattern>\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3604"\n       id="radialGradient3610"\n       cx="210"\n       cy="140"\n       fx="210"\n       fy="140"\n       r="152.5"\n       gradientUnits="userSpaceOnUse"\n       gradientTransform="matrix(1.0491803,-0.78688524,0.78096126,1.0412817,-119.66246,159.46646)" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.2586836"\n     inkscape:cx="16.170725"\n     inkscape:cy="164.16609"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1716"\n     inkscape:window-height="1116"\n     inkscape:window-x="144"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3600" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:url(#radialGradient3610);fill-opacity:1;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"\n       id="path3602"\n       sodipodi:cx="160"\n       sodipodi:cy="160"\n       sodipodi:rx="150"\n       sodipodi:ry="150"\n       d="m 310,160 a 150,150 0 1 1 -300,0 150,150 0 1 1 300,0 z"\n       transform="matrix(0.93333333,0,0,0.93333333,10.666666,10.666666)" />\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans"\n       d="m 124.537,12.690252 90,50 -90,49.999998 0,-12.8125 c -20.29664,12.07637 -33.75,34.2109 -33.75,59.78125 0,38.68907 30.81093,69.5 69.5,69.5 38.68907,0 69.53125,-30.81093 69.53125,-69.5 -0.0934,-6.60391 2.559,-13.20451 7.196,-17.90755 4.637,-4.70304 11.19944,-7.4485 17.804,-7.4485 6.60457,0 13.16701,2.74546 17.804,7.4485 4.637,4.70304 7.2894,11.30364 7.196,17.90755 0,65.71107 -53.82018,119.5 -119.53125,119.5 -65.71107,0 -119.5,-53.78892 -119.5,-119.5 0,-53.27576 35.34828,-98.733461 83.75,-114.031248 l 0,-32.9375 z"\n       id="path3612"\n       sodipodi:nodetypes="ccccsscssscsscc" />\n  </g>\n</svg>\n',helpText:"Cancel last undo.",mnemonic:"CmdOrCtrl+Shift+Z"},{id:"zoomin",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainZoomIn.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="C:\\work\\eclipse\\MMDS\\scratch\\msk\\MainZoomIn.png"\n   inkscape:export-xdpi="12.375"\n   inkscape:export-ydpi="12.375">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective3766" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="184.61711"\n     inkscape:cy="128.35938"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3768" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       transform="translate(62.703026,241.98783)"\n       id="g3444"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3446"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char51"\n           x="0"\n           id="use3448"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(92.31631,241.98783)"\n       id="g3450"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3452"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char46"\n           x="0"\n           id="use3454"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,211.98783)"\n       id="g3456"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3458"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3460"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,271.98783)"\n       id="g3462"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3464"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3466"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(243.63564,271.98783)"\n       id="g3468"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3470"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char38"\n           x="0"\n           id="use3472"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n        <use\n           xlink:href="#char69"\n           x="1227"\n           id="use3474"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(208.2958,247.96859)"\n       id="g3476"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3478"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3480"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(215.2958,204.00707)"\n       id="g3482"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3484"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3486"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(275.2958,204.00707)"\n       id="g3488"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3490"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3492"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(283.2958,243.96859)"\n       id="g3494"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3496"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3498"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(102.68629,241.50525)"\n       id="g3500"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3502"\n         style="stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3504"\n           style="fill:#000000;stroke-width:817.664;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(112.65748,242.7117)"\n       id="g3506"\n       style="stroke-width:4.791;stroke-miterlimit:4;stroke-dasharray:none">\n      <g\n         transform="scale(2.9296875e-3,-2.9296875e-3)"\n         id="g3508"\n         style="stroke-width:1635.328;stroke-miterlimit:4;stroke-dasharray:none">\n        <use\n           xlink:href="#char18"\n           x="0"\n           id="use3510"\n           style="fill:#000000;stroke-width:1635.328;stroke-miterlimit:4;stroke-dasharray:none"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:4.791;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans"\n       d="m 159.9337,7.3957969 c -1.22836,0.017783 -2.44251,0.5361707 -3.31003,1.4132395 L 127.99649,37.675208 c -1.32116,1.336065 -1.7593,3.488685 -1.0437,5.231992 0.71562,1.743309 2.54225,2.973143 4.41336,2.976825 l 23.85599,0 0,32.594718 c -19.03094,1.043649 -36.29578,8.792862 -49.59062,20.927974 L 81.596615,75.50192 98.593999,58.603182 c 1.337912,-1.329214 1.784181,-3.508978 1.073521,-5.262062 -0.710656,-1.753085 -2.535151,-2.973199 -4.413356,-2.976825 l -40.46571,-0.270619 c -0.158907,-0.0079 -0.318211,-0.0079 -0.477119,0 -2.335535,0.221972 -4.319354,2.415492 -4.323896,4.780958 l -0.298201,40.803535 c -0.01994,1.896771 1.188724,3.743885 2.922358,4.480271 1.733635,0.73639 3.886482,0.31711 5.218495,-1.022343 L 74.797659,82.237359 98.922018,106.26244 c -11.630556,13.42652 -19.014244,30.73454 -19.949562,49.73401 l -33.487834,0 0,-24.05515 c 9.54e-4,-2.56989 -2.372929,-4.89108 -4.920297,-4.81103 -1.198278,0.0406 -2.374437,0.55669 -3.220558,1.41324 L 8.7165889,157.40968 c -1.7614043,1.78077 -1.7614043,5.01481 0,6.79558 l 28.6271781,28.86618 c 1.325004,1.33218 3.4598,1.77398 5.188676,1.0524 1.728876,-0.72158 2.948527,-2.56345 2.952179,-4.4502 l 0,-24.05515 33.607114,0 c 1.240981,18.80865 8.766006,35.88989 20.486319,49.10257 L 76.169379,238.65594 59.171991,221.75718 c -1.335156,-1.31903 -3.467046,-1.72624 -5.188676,-0.99227 -1.72163,0.73398 -2.930541,2.56544 -2.922358,4.4502 l 0.26838,40.83362 c 0.01573,2.5291 2.322811,4.81236 4.830836,4.78095 l 40.465711,-0.30069 c 1.873236,-0.0154 3.680176,-1.25616 4.383526,-3.00689 0.70337,-1.75074 0.26095,-3.90631 -1.073508,-5.232 L 82.968334,245.39136 106.3472,221.48657 c 13.35681,11.91347 30.59938,19.44988 49.56079,20.32659 l 0,32.38424 -23.85597,0 c -1.87113,0.004 -3.69775,1.23352 -4.41337,2.97683 -0.71561,1.7433 -0.27746,3.89593 1.0437,5.23198 l 28.62718,28.86618 c 1.76603,1.7761 4.97329,1.7761 6.73932,0 l 28.62718,-28.86618 c 1.32117,-1.33605 1.75932,-3.48868 1.0437,-5.23198 -0.71562,-1.74331 -2.54224,-2.97314 -4.41336,-2.97683 l -23.85599,0 0,-32.50452 c 18.91988,-1.36942 36.01699,-9.38124 49.11351,-21.70975 l 23.67706,25.97954 -16.99739,16.89874 c -1.33789,1.32921 -1.78418,3.50897 -1.07351,5.26207 0.71065,1.75307 2.53515,2.97319 4.41336,2.97682 l 40.4657,0.27062 c 2.49814,0.0155 4.7852,-2.26196 4.80102,-4.78097 l 0.29821,-40.80352 c 0.009,-1.88477 -1.20074,-3.71624 -2.92237,-4.45021 -1.72162,-0.73397 -3.85353,-0.32678 -5.18866,0.99227 l -16.9974,16.89875 -23.8858,-26.19004 c 11.5936,-13.79235 18.76194,-31.49959 19.23388,-50.87663 l 34.11406,0 0,24.05514 c -0.008,1.89176 1.19113,3.72124 2.92236,4.45021 1.73125,0.72896 3.88998,0.31342 5.21849,-1.02234 l 28.62718,-28.86617 c 1.77918,-1.78291 1.77918,-5.04275 0,-6.82565 L 282.6429,125.08559 c -0.90259,-0.91262 -2.1811,-1.43496 -3.45912,-1.41325 -2.46815,0.047 -4.68191,2.32184 -4.68173,4.81103 l 0,24.05515 -34.44207,0 c -1.6396,-17.98221 -9.04936,-34.27895 -20.33723,-46.99774 l 23.40868,-24.536247 16.99739,16.898738 c 1.33515,1.319049 3.46704,1.726245 5.18867,0.992274 1.72162,-0.73397 2.93055,-2.565432 2.92236,-4.4502 L 267.97148,53.61174 c -0.0313,-2.519034 -2.33266,-4.782323 -4.83084,-4.750891 l -40.46571,0.270621 c -1.87323,0.01535 -3.68017,1.256162 -4.38354,3.006893 -0.70337,1.750731 -0.26095,3.906314 1.07352,5.231992 L 236.36229,74.269093 212.95361,98.7452 C 199.918,87.125675 183.17867,79.683488 164.76453,78.508812 l 0,-32.624787 23.85598,0 c 1.87112,-0.0037 3.69774,-1.233516 4.41336,-2.976825 0.71561,-1.743307 0.27747,-3.895927 -1.0437,-5.231992 L 163.36299,8.8090364 C 162.46736,7.9036606 161.20183,7.3821292 159.9337,7.3957969 z m -0.29821,90.1767151 c 37.68702,2.849578 62.29024,31.065418 61.69754,62.543368 -0.66052,35.07958 -25.42255,62.86092 -61.69754,62.54337 -33.68472,-0.29486 -64.464992,-23.49428 -63.576187,-62.54337 0.890095,-39.10566 27.382967,-61.739358 63.576187,-62.543368 z"\n       id="path4847"\n       sodipodi:nodetypes="cccsccccccscccccsccccccsccccsccccccsccccsccccccsccccsccccccsccccsccccccsccccsccccccsccccsccccccsccccsssc" />\n  </g>\n</svg>\n',helpText:"Zoom in.",mnemonic:"="},{id:"zoomout",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainZoomOut.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="C:\\work\\eclipse\\MMDS\\scratch\\msk\\MainZoomOut.png"\n   inkscape:export-xdpi="12.375"\n   inkscape:export-ydpi="12.375">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective3832" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="154.5481"\n     inkscape:cy="146.35603"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3854" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       transform="translate(62.703026,241.98783)"\n       id="g3444">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3446">\n        <use\n           xlink:href="#char51"\n           x="0"\n           id="use3448"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(92.31631,241.98783)"\n       id="g3450">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3452">\n        <use\n           xlink:href="#char46"\n           x="0"\n           id="use3454"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,211.98783)"\n       id="g3456">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3458">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3460"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,271.98783)"\n       id="g3462">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3464">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3466"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(243.63564,271.98783)"\n       id="g3468">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3470">\n        <use\n           xlink:href="#char38"\n           x="0"\n           id="use3472"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n        <use\n           xlink:href="#char69"\n           x="1227"\n           id="use3474"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(208.2958,247.96859)"\n       id="g3476">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3478">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3480"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(215.2958,204.00707)"\n       id="g3482">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3484">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3486"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(275.2958,204.00707)"\n       id="g3488">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3490">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3492"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(283.2958,243.96859)"\n       id="g3494">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3496">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3498"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(102.68629,241.50525)"\n       id="g3500">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3502">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3504"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(112.65748,242.7117)"\n       id="g3506">\n      <g\n         transform="scale(2.9296875e-3,-2.9296875e-3)"\n         id="g3508">\n        <use\n           xlink:href="#char18"\n           x="0"\n           id="use3510"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:5;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 159.25 10 C 77.278938 10 10.71875 76.943918 10.71875 159.21875 C 10.71875 241.49357 77.278938 308.40625 159.25 308.40625 C 241.22106 308.40625 307.84375 241.49357 307.84375 159.21875 C 307.84375 76.943918 241.22106 10 159.25 10 z M 155.875 27.59375 C 155.91666 27.592693 155.95833 27.594768 156 27.59375 L 156 61.4375 L 131 61.4375 C 129.03915 61.4413 127.12493 62.719466 126.375 64.53125 C 125.62507 66.343035 126.08423 68.580206 127.46875 69.96875 L 157.46875 99.96875 C 159.32168 101.83325 162.70957 101.83325 164.5625 99.96875 L 194.5625 69.96875 C 195.95072 68.576522 196.3826 66.314253 195.625 64.5 C 194.8674 62.685746 192.96606 61.429035 191 61.4375 L 166 61.4375 L 166 27.71875 C 233.43435 31.142779 287.33666 85.620853 290.1875 153.5625 L 258.4375 153.5625 L 258.4375 128.5625 C 258.4385 125.89168 255.95078 123.47931 253.28125 123.5625 C 252.02551 123.6047 250.79295 124.14106 249.90625 125.03125 L 219.90625 155.03125 C 218.06038 156.88197 218.06038 160.24303 219.90625 162.09375 L 249.90625 192.09375 C 251.29479 193.47827 253.53196 193.93743 255.34375 193.1875 C 257.15553 192.43757 258.43367 190.52335 258.4375 188.5625 L 258.4375 163.5625 L 290.25 163.5625 C 288.03607 232.42829 233.36911 287.73364 165.0625 290.71875 L 165.0625 260 L 190.0625 260 C 192.03598 260.009 193.96634 258.73069 194.71875 256.90625 C 195.47117 255.08181 194.99955 252.82257 193.59375 251.4375 L 163.59375 221.4375 C 162.64999 220.50778 161.3246 219.97762 160 220 C 158.71699 220.0103 157.44542 220.53722 156.53125 221.4375 L 126.53125 251.4375 C 125.12545 252.82257 124.65383 255.08181 125.40625 256.90625 C 126.15866 258.73069 128.08902 260.00857 130.0625 260 L 155.0625 260 L 155.0625 290.78125 C 86.483864 288.62253 31.34883 233.7369 28.40625 165 L 62.15625 165 L 62.15625 190 C 62.16005 191.96085 63.438216 193.84382 65.25 194.59375 C 67.061785 195.34368 69.298956 194.91577 70.6875 193.53125 L 100.6875 163.53125 C 102.53337 161.68053 102.53337 158.31947 100.6875 156.46875 L 70.6875 126.46875 C 69.741627 125.52028 68.401813 124.97743 67.0625 125 C 64.475993 125.0488 62.156049 127.41303 62.15625 130 L 62.15625 155 L 28.34375 155 C 30.519811 85.260706 86.399976 29.356768 155.875 27.59375 z "\n       id="path4847" />\n  </g>\n</svg>\n',helpText:"Zoom out.",mnemonic:"-"},{id:"zoomfit",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="MainZoomFit.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="C:\\work\\eclipse\\MMDS\\scratch\\msk\\MainZoomFit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective60" />\n    <pattern\n       patternUnits="userSpaceOnUse"\n       width="30"\n       height="33"\n       patternTransform="translate(0,0)"\n       id="pattern5043">\n      <rect\n         id="rect5041"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none;stroke-linecap:round" />\n      <path\n         id="path5039"\n         d="M 21.5,31.5 L 31.5,21.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5037"\n         d="M 11.5,31.5 L 31.5,11.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5035"\n         d="M 1.5,31.5 L 31.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5033"\n         d="M 1.5,21.5 L 21.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    </pattern>\n    <pattern\n       patternUnits="userSpaceOnUse"\n       width="30"\n       height="33"\n       patternTransform="translate(18.5,-71.5)"\n       id="pattern5062">\n      <path\n         id="path5060"\n         d="M 1.5,21.5 L 21.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5058"\n         d="M 1.5,31.5 L 31.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5056"\n         d="M 11.5,31.5 L 31.5,11.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         id="path5054"\n         d="M 21.5,31.5 L 31.5,21.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <rect\n         id="rect5052"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none;stroke-linecap:round" />\n      <rect\n         id="rect5050"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none" />\n      <path\n         id="path5000"\n         d="M 1.5,11.5 L 11.5,1.5"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <rect\n         id="rect5030"\n         y="0"\n         x="0"\n         height="33"\n         width="30"\n         style="fill:none;stroke:none" />\n    </pattern>\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="282.47425"\n     inkscape:cy="140.55244"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1478"\n     inkscape:window-height="842"\n     inkscape:window-x="166"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       transform="translate(62.703026,241.98783)"\n       id="g3444">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3446">\n        <use\n           xlink:href="#char51"\n           x="0"\n           id="use3448"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(92.31631,241.98783)"\n       id="g3450">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3452">\n        <use\n           xlink:href="#char46"\n           x="0"\n           id="use3454"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,211.98783)"\n       id="g3456">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3458">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3460"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,271.98783)"\n       id="g3462">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3464">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3466"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(243.63564,271.98783)"\n       id="g3468">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3470">\n        <use\n           xlink:href="#char38"\n           x="0"\n           id="use3472"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n        <use\n           xlink:href="#char69"\n           x="1227"\n           id="use3474"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(208.2958,247.96859)"\n       id="g3476">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3478">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3480"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(215.2958,204.00707)"\n       id="g3482">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3484">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3486"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(275.2958,204.00707)"\n       id="g3488">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3490">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3492"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(283.2958,243.96859)"\n       id="g3494">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3496">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3498"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(102.68629,241.50525)"\n       id="g3500">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3502">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3504"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(112.65748,242.7117)"\n       id="g3506">\n      <g\n         transform="scale(2.9296875e-3,-2.9296875e-3)"\n         id="g3508">\n        <use\n           xlink:href="#char18"\n           x="0"\n           id="use3510"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:#dddddd;fill-opacity:0.5;stroke:#000000;stroke-width:10.00008255000000000;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path4971"\n       sodipodi:cx="157.5"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="148.21428"\n       sodipodi:ry="147.5"\n       d="M 305.71428 158.92857 A 148.21428 147.5 0 1 1  9.2857208,158.92857 A 148.21428 147.5 0 1 1  305.71428 158.92857 z"\n       transform="matrix(0.8709386,0,0,0.8950109,23.61288,16.185766)" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:10.44176006px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="text4835">\n      <path\n         d="m 70.985713,183.23596 11.216734,0 0,-38.71472 L 70,146.96852 l 0,-6.25418 12.134467,-2.44728 6.866001,0 0,44.9689 11.216732,0 0,5.77832 -29.231487,0 0,-5.77832 z"\n         style="font-size:69.61173248px"\n         id="path4188" />\n      <path\n         d="m 128.80288,142.78774 q -5.30246,0 -7.98768,5.23448 -2.65123,5.20048 -2.65123,15.66943 0,10.43497 2.65123,15.66944 2.68522,5.20049 7.98768,5.20049 5.33644,0 7.98767,-5.20049 2.68522,-5.23447 2.68522,-15.66944 0,-10.46895 -2.68522,-15.66943 -2.65123,-5.23448 -7.98767,-5.23448 z m 0,-5.43842 q 8.53151,0 13.01821,6.76404 4.52068,6.73004 4.52068,19.57829 0,12.81427 -4.52068,19.5783 Q 137.33439,190 128.80288,190 q -8.53152,0 -13.0522,-6.73005 -4.4867,-6.76403 -4.4867,-19.5783 0,-12.84825 4.4867,-19.57829 4.52068,-6.76404 13.0522,-6.76404 z"\n         style="font-size:69.61173248px"\n         id="path4190" />\n      <path\n         d="m 173.12597,142.78774 q -5.30246,0 -7.98767,5.23448 -2.65123,5.20048 -2.65123,15.66943 0,10.43497 2.65123,15.66944 2.68521,5.20049 7.98767,5.20049 5.33645,0 7.98768,-5.20049 2.68521,-5.23447 2.68521,-15.66944 0,-10.46895 -2.68521,-15.66943 -2.65123,-5.23448 -7.98768,-5.23448 z m 0,-5.43842 q 8.53152,0 13.01821,6.76404 4.52068,6.73004 4.52068,19.57829 0,12.81427 -4.52068,19.5783 Q 181.65749,190 173.12597,190 q -8.53152,0 -13.0522,-6.73005 -4.48669,-6.76403 -4.48669,-19.5783 0,-12.84825 4.48669,-19.57829 4.52068,-6.76404 13.0522,-6.76404 z"\n         style="font-size:69.61173248px"\n         id="path4192" />\n      <path\n         d="m 245.93277,166.68278 q -2.95713,0 -4.65664,2.51527 -1.66551,2.51527 -1.66551,7.00196 0,4.41872 1.66551,6.96797 1.69951,2.51527 4.65664,2.51527 2.88916,0 4.55468,-2.51527 1.6995,-2.54925 1.6995,-6.96797 0,-4.4527 -1.6995,-6.96797 -1.66552,-2.54926 -4.55468,-2.54926 z m 0,-4.31674 q 5.37044,0 8.53152,3.73891 3.16108,3.73891 3.16108,10.09506 0,6.35615 -3.19507,10.09506 Q 251.26922,190 245.93277,190 q -5.43841,0 -8.59949,-3.70493 -3.16108,-3.73891 -3.16108,-10.09506 0,-6.39014 3.16108,-10.09506 3.19507,-3.73891 8.59949,-3.73891 z m -35.07778,-20.69997 q -2.92315,0 -4.62266,2.54926 -1.66551,2.51526 -1.66551,6.93398 0,4.48669 1.66551,7.00196 1.66552,2.51527 4.62266,2.51527 2.95714,0 4.62265,-2.51527 1.69951,-2.51527 1.69951,-7.00196 0,-4.38473 -1.69951,-6.93398 -1.6995,-2.54926 -4.62265,-2.54926 z m 30.69306,-4.31675 5.43842,0 L 215.23971,190 l -5.43842,0 31.74676,-52.65068 z m -30.69306,0 q 5.37043,0 8.5655,3.73892 3.19507,3.70492 3.19507,10.06107 0,6.42413 -3.19507,10.12905 -3.16108,3.70492 -8.5655,3.70492 -5.40443,0 -8.56551,-3.70492 -3.12709,-3.73891 -3.12709,-10.12905 0,-6.32216 3.16108,-10.06107 3.16108,-3.73892 8.53152,-3.73892 z"\n         style="font-size:69.61173248px"\n         id="path4194" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path4967"\n       sodipodi:cx="157.5"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="148.21428"\n       sodipodi:ry="147.5"\n       d="M 305.71428 158.92857 A 148.21428 147.5 0 1 1  9.2857208,158.92857 A 148.21428 147.5 0 1 1  305.71428 158.92857 z"\n       transform="matrix(0.981039,0,0,1.0003176,5.8435029,-5.0472616e-2)" />\n  </g>\n</svg>\n',helpText:"Show whole diagram onscreen.",mnemonic:""},{id:"selside",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="SelectionSide.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="199.96541"\n     inkscape:cy="158.99107"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 48.664209,245.16396 L 108.91547,160.16396 L 50.664209,75.163966"\n       id="path3273"\n       sodipodi:nodetypes="ccc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:15;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 108.7868,160.70711 L 226.16295,161.41421"\n       id="path2170"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 283.22481,77.213358 L 226.68065,159.21336 L 284.22481,241.21336"\n       id="path3271"\n       sodipodi:nodetypes="ccc" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3288"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.37604,-0.37604,0.3179989,0.3179989,165.10228,132.56626)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3243"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.2656501,-1.2656501,0.9968499,0.9968499,-343.98648,267.653)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3177"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.37604,-0.37604,0.3179989,0.3179989,-69.132419,130.55198)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3181"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.37604,-0.37604,0.3179989,0.3179989,164.75661,294.92979)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3247"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.2656501,-1.2656501,0.9968499,0.9968499,-341.57497,437.10883)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3185"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.37604,-0.37604,0.3179989,0.3179989,-69.803983,299.05197)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3245"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.2656501,-1.2656501,0.9968499,0.9968499,-283.31663,352.18587)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.37604,-0.37604,0.3179989,0.3179989,107.42818,214.60137)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3189"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.37604,-0.37604,0.3179989,0.3179989,-10.218211,214.29461)" />\n  </g>\n</svg>\n',helpText:"Select alternate side of current atom or bond.",mnemonic:"E"},{id:"selall",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainSelAll.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="189.90735"\n     inkscape:cy="158.99107"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 76.36753,113.52483 L 77.074637,213.93399 L 167.5843,264.84567 L 255.97265,210.39845 L 254.55843,117.06036 L 165.46298,53.420751 L 76.36753,113.52483 z "\n       id="path3251" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3241"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-248.04603,-85.05335)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3288"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.5318008,0,0,0.4497183,42.797336,11.621703)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3171"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-337.35469,-26.947524)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-46.092499,68.688162)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3243"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-159.19783,-25.889527)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3177"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,132.0984,71.516592)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3249"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-336.95273,70.72442)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3181"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-45.385389,166.73337)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3247"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-246.2033,123.92331)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3185"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,43.58874,218.47348)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3245"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-158.39386,69.713238)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3189"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,132.21973,165.31915)" />\n  </g>\n</svg>\n',helpText:"Select all atoms.",mnemonic:"Shift+A"},{id:"selnone",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainSelNone.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective14" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="189.90735"\n     inkscape:cy="158.99107"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="m 76.36753,113.52483 0.707107,100.40916 88.509663,50.91168 90.38835,-54.44722 -1.41422,-93.33809 -89.09545,-59.639609 -89.09545,56.104079 z"\n       id="path3251"\n       sodipodi:nodetypes="ccccccc" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3288"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.5318008,0,0,0.4497183,42.797336,11.621703)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-46.092499,68.688162)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3177"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,132.0984,71.516592)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3181"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-45.385389,166.73337)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3185"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,43.58874,218.47348)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3189"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,132.21973,165.31915)" />\n  </g>\n</svg>\n',helpText:"Clear selection.",mnemonic:"Shift+Q"},{id:"delete",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MainDelete.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainQuit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="159.5736"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="793"\n     inkscape:window-height="842"\n     inkscape:window-x="21"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       d="M 159.65625 30.71875 C 88.093395 30.71875 30 88.487677 30 159.65625 C 30 230.82482 88.093395 288.56252 159.65625 288.5625 C 231.2191 288.5625 289.28125 230.82482 289.28125 159.65625 C 289.28125 88.487677 231.2191 30.71875 159.65625 30.71875 z M 157.84375 72 C 158.59438 71.985792 159.33922 71.994392 160.09375 72 C 176.61399 72.122789 194.05818 77.018142 211.4375 88.5625 L 86.4375 213.5625 C 60.537368 184.56234 69.685666 120.89857 96.4375 96.4375 C 113.21391 82.331272 134.57422 72.440433 157.84375 72 z M 235.53125 110.625 C 261.43138 139.62516 252.28307 203.32017 225.53125 227.78125 C 196.3648 252.30549 153.31112 264.04188 110.53125 235.625 L 235.53125 110.625 z "\n       id="path3281" />\n  </g>\n</svg>\n',helpText:"Delete selected atoms and bonds.",mnemonic:"D"},{id:"cut",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainCut.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective13" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="2.8284272"\n     inkscape:cx="170.6097"\n     inkscape:cy="215.55961"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:4.93447638;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans"\n       d="m 159.84431,4.0536087 c -0.29508,0.00449 -0.58207,0.030042 -0.87522,0.060857 -0.0514,-0.00404 -0.10482,0.00322 -0.15629,0 -0.26793,-0.016729 -0.54407,-0.036361 -0.8127,-0.030428 -2.52061,0.055258 -5.00989,1.1162381 -6.75172,2.8907158 -1.74182,1.7744777 -2.71473,4.2405775 -2.65692,6.6942895 L 149.90429,134.04453 47.472011,85.328366 45.346471,83.624365 c -1.676342,-1.065683 -3.687289,-1.624994 -5.688946,-1.582287 -0.143902,0.003 -0.294356,0.02089 -0.437611,0.03043 -0.397202,-0.03723 -0.78889,-0.04182 -1.187802,-0.03043 -4.295438,0.112766 -8.28419,3.359535 -9.158577,7.455004 -0.874388,4.09547 1.451553,8.636997 5.345108,10.406581 l 0.562644,0.273857 109.840403,68.03832 c 1.67488,1.03918 3.67355,1.56833 5.6577,1.52143 l 0.46886,43.99973 c 0.005,0.64693 0.10661,1.28576 0.25007,1.91701 -8.81541,5.38078 -15.33495,12.77739 -19.41119,21.75644 -5.08278,11.19622 -6.52603,24.62804 -5.15756,39.98316 0.0144,0.14281 0.0352,0.28499 0.0625,0.426 1.83482,10.3447 4.15972,19.71772 9.34612,26.95973 5.16099,7.20651 13.78411,11.64917 24.97511,11.13687 l 0,0.0304 c 18.09365,-0.39567 30.45126,-6.60038 37.25946,-16.7053 6.80821,-10.10493 8.17398,-23.08912 7.65819,-37.0316 -0.007,-0.1017 -0.0175,-0.20319 -0.0312,-0.30428 -1.7739,-18.11192 -9.59128,-28.87305 -18.53596,-35.54059 -6.03478,-4.49844 -12.34072,-7.3741 -17.56696,-10.01101 0.27934,-0.90435 0.41844,-1.85482 0.40635,-2.79942 l -0.53139,-49.32475 46.69938,22.21288 c 0.083,0.0395 0.16586,0.0847 0.25006,0.1217 -3.31001,17.14209 2.79839,30.23586 11.78424,40.2266 0.34773,0.39526 0.76108,0.73572 1.21906,1.00414 11.30221,6.4521 20.79655,6.99911 28.38221,4.41215 7.58567,-2.58696 13.73725,-4.92629 18.81728,-10.68044 6.76902,-5.94633 9.04203,-16.49269 9.90878,-25.01229 0.11784,-10.04709 -5.59112,-21.3058 -20.88032,-28.75502 -0.45188,-0.22178 -0.93854,-0.37626 -1.43786,-0.45643 -6.30082,-1.02286 -12.65323,-2.0926 -18.97357,-1.94743 -2.10678,0.0484 -4.22421,0.23694 -6.3141,0.60857 -4.21959,0.75035 -8.31043,2.4329 -12.00305,5.17287 -0.69153,-0.62747 -1.46297,-1.14863 -2.3131,-1.55187 l -42.94844,-20.41753 c 1.1306,-1.8011 1.65144,-3.95307 1.43786,-6.05529 L 169.94063,12.999613 c -0.20349,-2.429755 -1.39886,-4.7794669 -3.25082,-6.4204317 -1.85197,-1.6409647 -4.34143,-2.5562438 -6.8455,-2.5255726 z m -9.59618,163.9492313 0,0 z m 111.55959,12.82428 c 8.34066,2.98048 12.80146,8.83371 12.7225,15.56559 -0.52192,14.16651 -10.39975,21.02728 -20.03685,22.62502 -4.93943,1.6845 -12.73755,-0.57732 -17.22364,-5.22544 -4.30437,-5.36245 -8.22528,-12.25024 -4.56467,-27.41058 6.00237,-10.50581 21.04796,-10.76963 29.10266,-5.55459 z m -101.33825,50.22103 c 9.69468,-0.0714 19.13216,5.11216 24.59899,13.04553 8.86571,10.18835 10.08761,40.94213 0.62719,47.7922 -10.21171,9.37645 -27.6858,12.97759 -37.42521,3.78947 -3.54224,-4.94619 -6.12245,-9.52873 -7.86958,-19.28591 -2.56041,-21.47176 7.13036,-43.01402 20.06861,-45.34129 z"\n       id="path3256"\n       sodipodi:nodetypes="cssssccccssssccccccsccsccsccscccccccscccssscccccsccccccccccccccc" />\n  </g>\n</svg>\n',helpText:"Copy selection to clipboard, and remove.",mnemonic:"CmdOrCtrl+X"},{id:"copy",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainCopy.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective26" />\n    <inkscape:perspective\n       id="perspective3630"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1"\n     inkscape:cx="103.77793"\n     inkscape:cy="88.169551"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2832" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:0.5;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 47.647496,250.03858 46.764383,-103.11546 0,-29.46156 -62.352511,0 0,-29.46156 L 110,88 C 94.411879,88 85.058997,73.26922 85.058997,58.538439 c 0,-14.73078 9.352882,-29.46156 24.941003,-29.46156 l 15.58814,0 c 15.58811,0 24.94098,14.73078 24.94098,29.46156 C 150.52912,73.26922 141.17625,88 125.58814,88 l 77.94063,0 0,29.46156 -62.35252,0 0,29.46156 46.76439,103.11546 -37.41152,0 -31.17624,-73.65389 -34.293883,73.65389 -37.411501,0 z"\n       id="path3606-1"\n       sodipodi:nodetypes="cccccccccccccccccccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 148.05936,290.03859 46.76439,-103.11546 0,-29.46157 -62.35252,0 0,-29.46156 77.94063,0 c -15.58811,0 -24.941,-14.73077 -24.941,-29.46156 0,-14.73078 9.35289,-29.46156 24.941,-29.46156 l 15.58814,0 c 15.58811,0 24.941,14.73078 24.941,29.46156 C 250.941,113.26923 241.58811,128 226,128 l 77.94063,0 0,29.46156 -62.35252,0 0,29.46157 46.76439,103.11546 -37.4115,0 -31.17626,-73.6539 -34.29388,73.6539 -37.4115,0 z"\n       id="path3606"\n       sodipodi:nodetypes="cccccccccccccccccccc" />\n  </g>\n</svg>\n',helpText:"Copy selection to clipboard.",mnemonic:"CmdOrCtrl+C"},{id:"paste",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="SelectionPaste.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="174.19811"\n     inkscape:cy="158.99107"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="false" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#646169;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"\n       d="M 49.497473,254.94617 C 47.825874,262.83305 36.201583,261.20579 30.405591,265.55278 C 28.322858,267.11483 31.539377,271.49006 29.698484,273.33095 C 26.809794,276.21964 14.54002,280.60096 21.213203,283.93756 C 25.917942,286.28992 18.777684,290.61571 16.970562,292.42284 C 16.407185,292.98621 11.862619,303.34583 10.606601,305.85786 C 8.8718742,309.32732 0.66378058,311.62811 -1.4142135,312.22183 C -5.3815501,313.35535 -6.7727732,317.67427 -2.1213203,320 C 4.7353319,323.42833 10.071931,322.29954 16.970562,320 C 21.596201,318.45812 26.669572,317.77844 31.112698,320 C 36.578588,322.73295 50.364949,320 56.568541,320 C 62.249059,320 67.612413,321.41421 73.539103,321.41421 C 78.147222,321.41421 83.161272,321.90643 86.974132,320 C 87.233912,319.87011 86.176512,316.99055 84.852811,314.34315 C 84.737012,314.11155 86.869217,308.51143 84.852811,305.15076 C 82.266966,300.84102 73.174191,304.07874 70.003569,300.90812 C 68.147372,299.05192 69.987876,293.16133 71.417783,290.30152 C 71.59232,289.95244 65.401454,280.15842 65.053822,279.69491 C 63.028881,276.99499 57.766096,271.20963 63.639609,271.20963 C 66.398433,271.20963 65.234252,265.89903 66.468036,263.43146 C 68.386098,259.59534 68.589356,257.469 68.589356,252.82486 C 68.589356,252.05846 63.356113,251.15582 62.225395,250.70354 C 60.461018,249.99779 62.861998,252.89536 61.518288,254.23907 C 60.546463,255.2109 50.675985,254.23907 49.497473,254.94617 z "\n       id="path3196"\n       sodipodi:nodetypes="cssssssssssssssssssssssc" />\n    <path\n       style="fill:#c5c2c2;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 53.8295,185.43081 C 48.117551,230.16693 94.90917,267.3379 133.61555,268.32077 C 162.93137,153.99105 110.3127,171.17033 53.8295,185.43081 z "\n       id="path3188"\n       sodipodi:nodetypes="ccc" />\n    <path\n       style="fill:#fcfbff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 182.96729,2.557079 L 54.035294,186.04372 C 85.905043,179.15842 144.16417,242.05257 133.15455,268.24096 L 321.426,146.40224 C 302.97323,72.703226 258.08103,23.582864 182.96729,2.557079 z "\n       id="path3184"\n       sodipodi:nodetypes="ccccc" />\n    <path\n       style="fill:#fcfbff;fill-opacity:1;fill-rule:evenodd;stroke:#030303;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 86.523375,220.41621 L 50.5,255.09065 C 61.048111,255.62428 64.617354,261.18692 64.369775,269.5 L 100.39315,234.82557 C 100.05192,225.90076 96.35526,220.20575 86.523375,220.41621 z "\n       id="path3190"\n       sodipodi:nodetypes="ccccc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 141.76067,103.45156 L 152.49269,163.67952 L 212.07438,184.96328 L 259.56663,143.19171 L 249.13583,87.282865 L 189.09687,58.210192 L 141.76067,103.45156 z "\n       id="path3251" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3277"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.319372,-5.459132e-2,4.6165247e-2,0.2700775,110.7288,43.297737)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.319372,-5.459132e-2,4.6165247e-2,0.2700775,63.614871,89.09596)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3177"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.319372,-5.459132e-2,4.6165247e-2,0.2700775,170.91744,72.502614)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3181"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.319372,-5.459132e-2,4.6165247e-2,0.2700775,74.104227,147.90424)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3185"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.319372,-5.459132e-2,4.6165247e-2,0.2700775,132.84879,169.84315)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3189"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.319372,-5.459132e-2,4.6165247e-2,0.2700775,180.61948,128.82311)" />\n  </g>\n</svg>\n',helpText:"Paste clipboard contents."},{id:"atom",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainAtom.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainAtom.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2848" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="48.145029"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="793"\n     inkscape:window-height="842"\n     inkscape:window-x="597"\n     inkscape:window-y="53"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:0.99991798;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path2173"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(3.9083767,0,0,4.4541355,-191.02317,-104.15694)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3146"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(4.1274211,0,0,4.7037667,-170.63132,-160.28246)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3148"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(3.9083767,0,0,4.4541355,-123.67417,-89.452119)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3150"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(4.1274211,0,0,4.7037667,-189.79433,-79.64646)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#7b7777;stroke-width:7.5817451;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3152"\n       sodipodi:cx="164.28572"\n       sodipodi:cy="173.57143"\n       sodipodi:rx="85.714287"\n       sodipodi:ry="157.14285"\n       d="M 250.00001 173.57143 A 85.714287 157.14285 0 1 1  78.571434,173.57143 A 85.714287 157.14285 0 1 1  250.00001 173.57143 z"\n       transform="matrix(0.5559432,-0.9629219,0.8671851,0.5006696,-82.679852,232.98137)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#7b7777;stroke-width:7.58174519;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3160"\n       sodipodi:cx="164.28572"\n       sodipodi:cy="173.57143"\n       sodipodi:rx="85.714287"\n       sodipodi:ry="157.14285"\n       d="M 250.00001 173.57143 A 85.714287 157.14285 0 1 1  78.571434,173.57143 A 85.714287 157.14285 0 1 1  250.00001 173.57143 z"\n       transform="matrix(-0.5559432,-0.962922,0.8671851,-0.5006694,98.56249,410.307)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3166"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(1.1659548,0,0,1.3287666,177.55034,-16.166303)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3168"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(1.1659548,0,0,1.3287666,147.55034,143.8337)" />\n  </g>\n</svg>\n',helpText:"Open the Atom submenu.",isSubMenu:!0,mnemonic:"A"},{id:"bond",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MainBond.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainAtom.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="159.5736"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="793"\n     inkscape:window-height="842"\n     inkscape:window-x="479"\n     inkscape:window-y="21"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g3182"\n       transform="translate(11.909887,59.760501)">\n      <path\n         transform="matrix(2.0292346,0,0,2.3125933,-112.32262,-38.207236)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path2173"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(2.1429628,0,0,2.4422022,-101.73514,-67.347684)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3146"\n         style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(2.0292346,0,0,2.3125933,-77.354923,-30.572473)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3148"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(2.1429628,0,0,2.4422022,-111.6846,-25.481361)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3150"\n         style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3188"\n       transform="translate(-15.161547,-19.009179)">\n      <path\n         transform="matrix(-2.0292346,0,0,2.3125933,428.39405,40.562444)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3174"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(-2.1429628,0,0,2.4422022,417.80657,11.421996)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3176"\n         style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(-2.0292346,0,0,2.3125933,393.42635,48.197207)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3178"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(-2.1429628,0,0,2.4422022,427.75603,53.288319)"\n         d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3180"\n         style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n         sodipodi:type="arc" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#7b7777;stroke-width:7.58174515;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3152"\n       sodipodi:cx="164.28572"\n       sodipodi:cy="173.57143"\n       sodipodi:rx="85.714287"\n       sodipodi:ry="157.14285"\n       d="M 250.00001 173.57143 A 85.714287 157.14285 0 1 1  78.571434,173.57143 A 85.714287 157.14285 0 1 1  250.00001 173.57143 z"\n       transform="matrix(-1.3630223e-8,-1.1150628,0.8671872,4.2624012e-8,9.4810906,343.88434)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#7b7777;stroke-width:7.58174515;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3195"\n       sodipodi:cx="164.28572"\n       sodipodi:cy="173.57143"\n       sodipodi:rx="85.714287"\n       sodipodi:ry="157.14285"\n       d="M 250.00001 173.57143 A 85.714287 157.14285 0 1 1  78.571434,173.57143 A 85.714287 157.14285 0 1 1  250.00001 173.57143 z"\n       transform="matrix(0.8308212,-1.0223571e-8,-3.1758687e-8,0.6504479,-60.492046,52.100836)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#7b7777;stroke-width:7.58174515;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3197"\n       sodipodi:cx="164.28572"\n       sodipodi:cy="173.57143"\n       sodipodi:rx="85.714287"\n       sodipodi:ry="157.14285"\n       d="M 250.00001 173.57143 A 85.714287 157.14285 0 1 1  78.571434,173.57143 A 85.714287 157.14285 0 1 1  250.00001 173.57143 z"\n       transform="matrix(0.8308212,-1.0223571e-8,-3.1758687e-8,0.6504479,107.50794,52.100828)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3168"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(1.1659548,0,0,1.3287666,89.896893,-11.387448)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3200"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(1.1659548,0,0,1.3287666,-12.449661,159.8337)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3202"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(1.1659548,0,0,1.3287666,-74.103107,22.612552)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path3204"\n       sodipodi:cx="80"\n       sodipodi:cy="59.285713"\n       sodipodi:rx="9.2857141"\n       sodipodi:ry="8.5714283"\n       d="M 89.285714 59.285713 A 9.2857141 8.5714283 0 1 1  70.714286,59.285713 A 9.2857141 8.5714283 0 1 1  89.285714 59.285713 z"\n       transform="matrix(1.1659548,0,0,1.3287666,179.55034,179.8337)" />\n  </g>\n</svg>\n',helpText:"Open the Bond submenu.",isSubMenu:!0,mnemonic:"B"},{id:"select",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MainSelect.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="159.5736"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="793"\n     inkscape:window-height="842"\n     inkscape:window-x="21"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:1.89162562, 18.91625616;stroke-dashoffset:0;stroke-opacity:1"\n       d="M 30.44335,26.729064 L 30.44335,291.55665 L 295.27094,291.55665 L 295.27094,26.729064 L 30.44335,26.729064 z "\n       id="path3343"\n       inkscape:export-xdpi="9"\n       inkscape:export-ydpi="9" />\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;fill-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 89.051436,52.692713 L 80.264142,218.75776 L 136.18329,186.31714 L 190.50474,269.73586 L 246.42389,237.29525 L 192.10243,153.87653 L 248.02157,121.43591 L 89.051436,52.692713 z "\n       id="path3345"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Open the Selection submenu.",isSubMenu:!0,mnemonic:"S"},{id:"move",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MainMove.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainMove.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="198.18854"\n     inkscape:cy="129.1885"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="166"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       transform="translate(62.703026,241.98783)"\n       id="g3444">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3446">\n        <use\n           xlink:href="#char51"\n           x="0"\n           id="use3448"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(92.31631,241.98783)"\n       id="g3450">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3452">\n        <use\n           xlink:href="#char46"\n           x="0"\n           id="use3454"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,211.98783)"\n       id="g3456">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3458">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3460"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(62.081933,271.98783)"\n       id="g3462">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3464">\n        <use\n           xlink:href="#char47"\n           x="0"\n           id="use3466"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(243.63564,271.98783)"\n       id="g3468">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3470">\n        <use\n           xlink:href="#char38"\n           x="0"\n           id="use3472"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n        <use\n           xlink:href="#char69"\n           x="1227"\n           id="use3474"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(208.2958,247.96859)"\n       id="g3476">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3478">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3480"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(215.2958,204.00707)"\n       id="g3482">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3484">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3486"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(275.2958,204.00707)"\n       id="g3488">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3490">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3492"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(283.2958,243.96859)"\n       id="g3494">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3496">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3498"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(102.68629,241.50525)"\n       id="g3500">\n      <g\n         transform="scale(5.859375e-3,-5.859375e-3)"\n         id="g3502">\n        <use\n           xlink:href="#char40"\n           x="0"\n           id="use3504"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <g\n       transform="translate(112.65748,242.7117)"\n       id="g3506">\n      <g\n         transform="scale(2.9296875e-3,-2.9296875e-3)"\n         id="g3508">\n        <use\n           xlink:href="#char18"\n           x="0"\n           id="use3510"\n           style="fill:#000000"\n           y="0"\n           width="320"\n           height="320" />\n      </g>\n    </g>\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none;fill-opacity:1"\n       d="M 130,130 L 70,130 L 70,100 L 10,160 L 70,220 L 70,190 L 130,190 L 130,250 L 100,250 L 160,310 L 220,250 L 190,250 L 190,190 L 250,190 L 250,220 L 310,160 L 250,100 L 250,130 L 190,130 L 190,70 L 220,70 L 160,10 L 100,70 L 130,70 L 130,130 z "\n       id="path4831" />\n  </g>\n</svg>\n',helpText:"Open the Move submenu.",isSubMenu:!0,mnemonic:"M"}],Ti=[{id:"element:C",text:"C",helpText:"Change elements to Carbon.",mnemonic:"Shift+C"},{id:"element:N",text:"N",helpText:"Change elements to Nitrogen.",mnemonic:"Shift+N"},{id:"element:O",text:"O",helpText:"Change elements to Oxygen.",mnemonic:"Shift+O"},{id:"element:S",text:"S",helpText:"Change elements to Sulfur.",mnemonic:"Shift+S"},{id:"element:P",text:"P",helpText:"Change elements to Phosphorus.",mnemonic:"Shift+P"},{id:"element:H",text:"H",helpText:"Change elements to Hydrogen.",mnemonic:"Shift+H"},{id:"element:F",text:"F",helpText:"Change elements to Fluorine.",mnemonic:"Shift+F"},{id:"element:Cl",text:"Cl",helpText:"Change elements to Chlorine.",mnemonic:"Shift+L"},{id:"element:Br",text:"Br",helpText:"Change elements to Bromine.",mnemonic:"Shift+B"},{id:"element:I",text:"I",helpText:"Change elements to Iodine.",mnemonic:"Shift+I"},{id:"plus",svg:li,helpText:"Increase the atom charge.",mnemonic:"Shift+=",key:"+"},{id:"minus",svg:di,helpText:"Decrease the atom charge.",mnemonic:"Shift+-",key:"_"},{id:"abbrev",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomAbbrev.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomElement.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="206.12564"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:8.13591309;stroke-opacity:1"\n       id="path3960"\n       sodipodi:cx="159.28572"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="159.28572"\n       sodipodi:ry="158.92857"\n       d="M 318.57144 158.92857 A 159.28572 158.92857 0 1 1  0,158.92857 A 159.28572 158.92857 0 1 1  318.57144 158.92857 z"\n       transform="matrix(0.9738456,0,0,0.9782812,4.8803045,5.5945903)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 160,0 L 160,320"\n       id="path3962" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 0,160 L 320,160"\n       id="path3964" />\n    <g\n       style="font-size:80px"\n       id="text3966">\n      <path\n         d="m 70,181.11523 13.227539,0 16.743164,44.64844 16.831057,-44.64844 13.22754,0 0,65.61036 -8.65723,0 0,-57.61231 -16.91894,45 -8.920903,0 -16.918946,-45 0,57.61231 -8.613281,0 0,-65.61036 z"\n         style="font-size:90px"\n         id="path7008" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3970">\n      <path\n         d="m 109.11328,107.96387 q 2.85645,0.96679 5.53711,4.13086 2.72461,3.16406 5.44922,8.70117 l 9.00879,17.92969 -9.53613,0 -8.39356,-16.83106 q -3.25195,-6.5918 -6.32812,-8.74512 -3.03223,-2.15332 -8.305668,-2.15332 l -9.667969,0 0,27.7295 -8.876953,0 0,-65.610356 20.039062,0 q 11.249998,0 16.787108,4.702149 5.53711,4.702148 5.53711,14.194336 0,6.196289 -2.90039,10.283201 -2.85644,4.08692 -8.34961,5.66895 z m -22.236327,-27.553714 0,23.291014 11.162109,0 q 6.416018,0 9.667968,-2.94433 3.2959,-2.988285 3.2959,-8.745121 0,-5.756836 -3.2959,-8.657227 -3.25195,-2.944336 -9.667968,-2.944336 l -11.162109,0 z"\n         style="font-size:90px"\n         id="path7017" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3974">\n      <path\n         d="m 191.65039,72 9.53613,0 16.30371,24.389648 L 233.88184,72 l 9.53613,0 -21.09375,31.50879 22.5,34.10156 -9.53613,0 -18.45704,-27.90527 -18.58886,27.90527 -9.58008,0 23.42285,-35.02441 L 191.65039,72 Z"\n         style="font-size:90px"\n         id="path7014" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3978">\n      <path\n         d="m 200,180.38965 8.87695,0 0,58.13965 31.94825,0 0,7.4707 -40.8252,0 0,-65.61035 z"\n         style="font-size:90px"\n         id="path7011" />\n    </g>\n  </g>\n</svg>\n',helpText:"Open list of common labels.",isSubMenu:!0,mnemonic:""},{id:"sblock",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomSBlock.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomElement.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="98.625641"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1447"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:8.13591309;stroke-opacity:1"\n       id="path3960"\n       sodipodi:cx="159.28572"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="159.28572"\n       sodipodi:ry="158.92857"\n       d="M 318.57144 158.92857 A 159.28572 158.92857 0 1 1  0,158.92857 A 159.28572 158.92857 0 1 1  318.57144 158.92857 z"\n       transform="matrix(0.9738456,0,0,0.9782812,4.8803045,5.5945903)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 160,0 L 160,320"\n       id="path3962" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 0,160 L 320,160"\n       id="path3964" />\n    <g\n       style="font-size:80px"\n       id="text3966">\n      <path\n         d="m 52.876953,215.39258 0,24.03808 14.238281,0 q 7.163086,0 10.590821,-2.94433 3.471679,-2.98828 3.471679,-9.09668 0,-6.15235 -3.471679,-9.05274 -3.427735,-2.94433 -10.590821,-2.94433 l -14.238281,0 z m 0,-26.98242 0,19.77539 13.139649,0 q 6.503906,0 9.667968,-2.417 3.208008,-2.46093 3.208008,-7.4707 0,-4.96582 -3.208008,-7.42676 -3.164062,-2.46093 -9.667968,-2.46093 l -13.139649,0 z M 44,181.11523 l 22.675781,0 q 10.151367,0 15.644531,4.21875 5.493165,4.21875 5.493165,11.99707 0,6.02051 -2.8125,9.58008 -2.8125,3.55957 -8.261719,4.43848 6.547851,1.40625 10.151367,5.88867 3.647461,4.43848 3.647461,11.11817 0,8.78906 -5.976563,13.5791 -5.976562,4.79004 -17.006836,4.79004 l -23.554687,0 0,-65.61036 z"\n         style="font-size:90px"\n         id="path6940" />\n      <path\n         d="m 147.44727,220.09473 0,3.95507 -37.17774,0 q 0.52735,8.34961 5.00977,12.74415 4.52636,4.35058 12.56836,4.35058 4.6582,0 9.00879,-1.14258 4.39453,-1.14258 8.70117,-3.42773 l 0,7.64648 q -4.35059,1.84571 -8.9209,2.8125 -4.57031,0.9668 -9.27246,0.9668 -11.77735,0 -18.67676,-6.85547 -6.85547,-6.85547 -6.85547,-18.54492 0,-12.08496 6.50391,-19.16016 6.54785,-7.11914 17.62207,-7.11914 9.93164,0 15.68847,6.41602 5.80079,6.37207 5.80079,17.3584 z m -8.08594,-2.37305 q -0.0879,-6.63574 -3.73535,-10.59082 -3.60352,-3.95508 -9.58008,-3.95508 -6.76758,0 -10.85449,3.82324 -4.04297,3.82325 -4.65821,10.7666 l 28.82813,-0.0439 z"\n         style="font-size:90px"\n         id="path6942" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3970">\n      <path\n         d="m 64,73.115234 8.876953,0 0,58.139646 31.948247,0 0,7.47071 -40.8252,0 0,-65.610356 z"\n         style="font-size:90px"\n         id="path6945" />\n      <path\n         d="m 113.74609,89.506836 8.08594,0 0,49.218754 -8.08594,0 0,-49.218754 z m 0,-19.160156 8.08594,0 0,10.239257 -8.08594,0 0,-10.239257 z"\n         style="font-size:90px"\n         id="path6947" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3974">\n      <path\n         d="m 178.81445,72 11.95313,0 29.09179,54.8877 0,-54.8877 8.61329,0 0,65.61035 -11.95313,0 -29.0918,-54.887694 0,54.887694 -8.61328,0 0,-65.61035 z"\n         style="font-size:90px"\n         id="path6932" />\n      <path\n         d="m 268.15527,112.86914 q -9.7998,0 -13.5791,2.24121 -3.7793,2.24121 -3.7793,7.64649 0,4.30664 2.8125,6.85546 2.85645,2.50489 7.73438,2.50489 6.72363,0 10.7666,-4.7461 4.08692,-4.79004 4.08692,-12.70019 l 0,-1.80176 -8.042,0 z m 16.12793,-3.33984 0,28.08105 -8.08593,0 0,-7.4707 q -2.76856,4.48242 -6.89942,6.63574 -4.13086,2.10938 -10.10742,2.10938 -7.55859,0 -12.04102,-4.21875 -4.43847,-4.2627 -4.43847,-11.38184 0,-8.30566 5.53711,-12.52441 5.58105,-4.21875 16.61132,-4.21875 l 11.3379,0 0,-0.79102 q 0,-5.58105 -3.69141,-8.613281 -3.64746,-3.076172 -10.2832,-3.076172 -4.21875,0 -8.21778,1.010742 -3.99902,1.010742 -7.69043,3.032227 l 0,-7.470704 q 4.43848,-1.713867 8.61328,-2.548828 4.17481,-0.878906 8.12989,-0.878906 10.67871,0 15.95215,5.537109 5.27343,5.53711 5.27343,16.787113 z"\n         style="font-size:90px"\n         id="path6934" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3978">\n      <path\n         d="m 174,184.38965 13.22754,0 16.74316,44.64844 16.83106,-44.64844 13.22754,0 0,65.61035 -8.65723,0 0,-57.6123 -16.91895,45 -8.92089,0 -16.91895,-45 0,57.6123 -8.61328,0 0,-65.61035 z"\n         style="font-size:90px"\n         id="path6937" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text2248">\n      <path\n         d="m 275.90332,226.09863 q 0,-8.78906 -3.64746,-13.62304 -3.60352,-4.83399 -10.15137,-4.83399 -6.5039,0 -10.15137,4.83399 -3.60351,4.83398 -3.60351,13.62304 0,8.74512 3.60351,13.5791 3.64747,4.83399 10.15137,4.83399 6.54785,0 10.15137,-4.83399 3.64746,-4.83398 3.64746,-13.5791 z m 8.08594,19.07227 q 0,12.56836 -5.58106,18.67676 Q 272.82715,270 261.31348,270 q -4.2627,0 -8.042,-0.65918 -3.77929,-0.61523 -7.33886,-1.93359 l 0,-7.86621 q 3.55957,1.93359 7.03125,2.85644 3.47168,0.92285 7.07519,0.92285 7.9541,0 11.90918,-4.1748 3.95508,-4.13086 3.95508,-12.52442 l 0,-3.99902 q -2.50488,4.35059 -6.41602,6.50391 -3.91113,2.15332 -9.36035,2.15332 -9.05273,0 -14.58984,-6.89942 Q 240,237.48047 240,226.09863 q 0,-11.42578 5.53711,-18.32519 5.53711,-6.89942 14.58984,-6.89942 5.44922,0 9.36035,2.15332 3.91114,2.15332 6.41602,6.50391 l 0,-7.4707 8.08594,0 0,43.11035 z"\n         style="font-size:90px"\n         id="path6929" />\n    </g>\n  </g>\n</svg>\n',helpText:"Open list of s-block elements.",isSubMenu:!0,mnemonic:""},{id:"pblock",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomPBlock.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomElement.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective18" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="206.12564"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:8.13591309;stroke-opacity:1"\n       id="path3960"\n       sodipodi:cx="159.28572"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="159.28572"\n       sodipodi:ry="158.92857"\n       d="M 318.57144 158.92857 A 159.28572 158.92857 0 1 1  0,158.92857 A 159.28572 158.92857 0 1 1  318.57144 158.92857 z"\n       transform="matrix(0.9738456,0,0,0.9782812,4.8803045,5.5945903)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 160,0 L 160,320"\n       id="path3962" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 0,160 L 320,160"\n       id="path3964" />\n    <g\n       style="font-size:80px"\n       id="text3966">\n      <path\n         d="m 107.33105,183.26855 0,8.65723 q -5.05371,-2.41699 -9.536128,-3.60351 -4.482422,-1.18653 -8.657227,-1.18653 -7.250976,0 -11.206054,2.8125 -3.911133,2.8125 -3.911133,7.99805 0,4.35058 2.592773,6.5918 2.636719,2.19726 9.931641,3.55957 l 5.361328,1.09863 q 9.93164,1.88965 14.63379,6.67969 4.74609,4.74609 4.74609,12.74414 0,9.53613 -6.41601,14.458 Q 98.498047,248 86.149414,248 q -4.658203,0 -9.931641,-1.05469 -5.229492,-1.05469 -10.854492,-3.12011 l 0,-9.14063 q 5.405274,3.03223 10.590821,4.57031 5.185546,1.53809 10.195312,1.53809 7.602539,0 11.733398,-2.98828 4.130858,-2.98828 4.130858,-8.52539 0,-4.83399 -2.988279,-7.5586 -2.944336,-2.72461 -9.711914,-4.08691 l -5.405274,-1.05469 q -9.931641,-1.97754 -14.370117,-6.19629 -4.438477,-4.21875 -4.438477,-11.7334 0,-8.70117 6.108399,-13.71093 6.152344,-5.00977 16.918945,-5.00977 4.614258,0 9.404297,0.83496 4.79004,0.83496 9.7998,2.50488 z"\n         style="font-size:90px"\n         id="path6942" />\n      <path\n         d="m 124.77734,197.50684 8.08594,0 0,49.21875 -8.08594,0 0,-49.21875 z m 0,-19.16016 8.08594,0 0,10.23926 -8.08594,0 0,-10.23926 z"\n         style="font-size:90px"\n         id="path6944" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3970">\n      <path\n         d="m 84.876953,107.39258 0,24.03808 14.238281,0 q 7.163086,0 10.590816,-2.94433 3.47168,-2.98828 3.47168,-9.09668 0,-6.15235 -3.47168,-9.05274 -3.42773,-2.94433 -10.590816,-2.94433 l -14.238281,0 z m 0,-26.982424 0,19.775394 13.139649,0 q 6.503908,0 9.667968,-2.416995 3.20801,-2.460938 3.20801,-7.470703 0,-4.965821 -3.20801,-7.426758 -3.16406,-2.460938 -9.667968,-2.460938 l -13.139649,0 z M 76,73.115234 l 22.675781,0 q 10.151369,0 15.644529,4.21875 5.49317,4.21875 5.49317,11.997071 0,6.020507 -2.8125,9.580078 -2.8125,3.559567 -8.26172,4.438477 6.54785,1.40625 10.15137,5.88867 3.64746,4.43848 3.64746,11.11817 0,8.78906 -5.97657,13.5791 -5.97656,4.79004 -17.006833,4.79004 l -23.554687,0 0,-65.610356 z"\n         style="font-size:90px"\n         id="path6947" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3974">\n      <path\n         d="m 210.74316,80.745117 -12.04101,32.651363 24.12597,0 -12.08496,-32.651363 z M 205.7334,72 l 10.06347,0 25.00489,65.61035 -9.22852,0 -5.97656,-16.83105 -29.5752,0 -5.97656,16.83105 -9.36035,0 L 205.7334,72 Z"\n         style="font-size:90px"\n         id="path6932" />\n      <path\n         d="m 281.36328,89.841797 0,7.646484 q -3.42773,-1.757812 -7.11914,-2.636719 -3.69141,-0.878906 -7.64648,-0.878906 -6.02051,0 -9.05274,1.845703 -2.98828,1.845703 -2.98828,5.537111 0,2.8125 2.15332,4.43848 2.15332,1.58203 8.65723,3.03222 l 2.76855,0.61524 q 8.61328,1.8457 12.2168,5.22949 3.64746,3.33984 3.64746,9.36035 0,6.85547 -5.44922,10.85449 -5.40527,3.99903 -14.89746,3.99903 -3.95508,0 -8.26172,-0.79102 -4.26269,-0.74707 -9.00879,-2.28516 l 0,-8.34961 q 4.48242,2.32911 8.83301,3.51563 4.35059,1.14258 8.61328,1.14258 5.71289,0 8.78906,-1.9336 3.07618,-1.97754 3.07618,-5.53711 0,-3.29589 -2.24122,-5.05371 -2.19726,-1.75781 -9.71191,-3.38379 l -2.8125,-0.65918 q -7.51465,-1.58203 -10.85449,-4.83398 -3.33985,-3.2959 -3.33985,-9.00879 0,-6.943358 4.92188,-10.722655 4.92187,-3.779297 13.97461,-3.779297 4.48242,0 8.4375,0.65918 3.95508,0.659179 7.29492,1.977539 z"\n         style="font-size:90px"\n         id="path6934" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3978">\n      <path\n         d="m 190.87695,189.68457 0,24.65332 11.16211,0 q 6.19629,0 9.58008,-3.20801 3.38379,-3.20801 3.38379,-9.14062 0,-5.88867 -3.38379,-9.09668 -3.38379,-3.20801 -9.58008,-3.20801 l -11.16211,0 z M 182,182.38965 l 20.03906,0 q 11.03028,0 16.65528,5.00976 5.66894,4.96582 5.66894,14.58985 0,9.71191 -5.66894,14.67773 -5.625,4.96582 -16.65528,4.96582 l -11.16211,0 0,26.36719 -8.87695,0 0,-65.61035 z"\n         style="font-size:90px"\n         id="path6937" />\n      <path\n         d="m 271.29687,223.43457 q 0,-8.9209 -3.6914,-13.97461 -3.64746,-5.09766 -10.06348,-5.09766 -6.41601,0 -10.10742,5.09766 -3.64746,5.05371 -3.64746,13.97461 0,8.9209 3.64746,14.01855 3.69141,5.05372 10.10742,5.05372 6.41602,0 10.06348,-5.05372 3.6914,-5.09765 3.6914,-14.01855 z m -27.50976,-17.18262 q 2.54883,-4.39453 6.41601,-6.5039 3.91114,-2.15332 9.31641,-2.15332 8.96484,0 14.5459,7.11914 5.625,7.11914 5.625,18.7207 0,11.60156 -5.625,18.7207 -5.58106,7.11914 -14.5459,7.11914 -5.40527,0 -9.31641,-2.10937 -3.86718,-2.15332 -6.41601,-6.54785 l 0,7.38281 -8.12988,0 0,-68.37891 8.12988,0 0,26.63086 z"\n         style="font-size:90px"\n         id="path6939" />\n    </g>\n  </g>\n</svg>\n',helpText:"Open list of p-block elements.",isSubMenu:!0,mnemonic:""},{id:"dblock",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomDBlock.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomElement.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="206.12564"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:8.13591309;stroke-opacity:1"\n       id="path3960"\n       sodipodi:cx="159.28572"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="159.28572"\n       sodipodi:ry="158.92857"\n       d="M 318.57144 158.92857 A 159.28572 158.92857 0 1 1  0,158.92857 A 159.28572 158.92857 0 1 1  318.57144 158.92857 z"\n       transform="matrix(0.9738456,0,0,0.9782812,4.8803045,5.5945903)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 160,0 L 160,320"\n       id="path3962" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 0,160 L 320,160"\n       id="path3964" />\n    <g\n       style="font-size:80px"\n       id="text3966">\n      <path\n         d="m 73.413235,217.96387 q 2.856445,0.96679 5.537109,4.13086 2.724609,3.16406 5.449219,8.70117 l 9.008789,17.92969 -9.536133,0 -8.393555,-16.83106 q -3.251953,-6.5918 -6.328125,-8.74512 -3.032226,-2.15332 -8.305664,-2.15332 l -9.667968,0 0,27.7295 -8.876954,0 0,-65.61036 20.039063,0 q 11.25,0 16.787109,4.70215 5.53711,4.70215 5.53711,14.19434 0,6.19629 -2.900391,10.2832 -2.856445,4.08692 -8.349609,5.66895 z m -22.236328,-27.55371 0,23.29101 11.162109,0 q 6.416016,0 9.667969,-2.94433 3.295898,-2.98829 3.295898,-8.74512 0,-5.75684 -3.295898,-8.65723 -3.251953,-2.94433 -9.667969,-2.94433 l -11.162109,0 z"\n         style="font-size:90px"\n         id="path6988" />\n      <path\n         d="m 99.648586,229.30176 0,-29.79492 8.085934,0 0,29.4873 q 0,6.98731 2.72461,10.50293 2.72461,3.47168 8.17383,3.47168 6.54785,0 10.32715,-4.1748 3.82324,-4.17481 3.82324,-11.38184 l 0,-27.90527 8.08594,0 0,49.21875 -8.08594,0 0,-7.5586 q -2.94433,4.48242 -6.85547,6.67969 Q 122.0607,250 116.91909,250 q -8.48144,0 -12.87597,-5.27344 -4.394534,-5.27344 -4.394534,-15.4248 z m 20.346684,-30.98145 0,0 z"\n         style="font-size:90px"\n         id="path6990" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3970">\n      <path\n         d="m 48,73.115234 37.705078,0 0,7.470703 -28.828125,0 0,19.335938 26.015625,0 0,7.470705 -26.015625,0 0,31.33301 -8.876953,0 0,-65.610356 z"\n         style="font-size:90px"\n         id="path7003" />\n      <path\n         d="m 136.68164,112.09473 0,3.95507 -37.177734,0 q 0.527344,8.34961 5.009764,12.74415 4.52637,4.35058 12.56836,4.35058 4.6582,0 9.00879,-1.14258 4.39453,-1.14258 8.70117,-3.42773 l 0,7.64648 q -4.35058,1.84571 -8.9209,2.8125 -4.57031,0.9668 -9.27246,0.9668 -11.77734,0 -18.676755,-6.85547 -6.855469,-6.85547 -6.855469,-18.54492 0,-12.08496 6.503906,-19.160157 6.547848,-7.119141 17.622068,-7.119141 9.93164,0 15.68848,6.416016 5.80078,6.372072 5.80078,17.358402 z m -8.08594,-2.37305 q -0.0879,-6.63574 -3.73535,-10.590821 -3.60351,-3.955078 -9.58008,-3.955078 -6.76757,0 -10.85449,3.823242 -4.04297,3.823247 -4.658202,10.766607 l 28.828122,-0.0439 z"\n         style="font-size:90px"\n         id="path7005" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3974">\n      <path\n         d="m 229.94531,77.053711 0,9.360351 q -4.48242,-4.174804 -9.58008,-6.240234 -5.05371,-2.06543 -10.7666,-2.06543 -11.25,0 -17.22656,6.899414 -5.97656,6.855469 -5.97656,19.863278 0,12.96387 5.97656,19.86329 5.97656,6.85546 17.22656,6.85546 5.71289,0 10.7666,-2.06543 5.09766,-2.06543 9.58008,-6.24023 l 0,9.27246 q -4.6582,3.16406 -9.88769,4.74609 -5.18555,1.58204 -10.98633,1.58204 -14.89746,0 -23.4668,-9.09668 -8.56933,-9.14063 -8.56933,-24.917 0,-15.820309 8.56933,-24.916988 8.56934,-9.140625 23.4668,-9.140625 5.88867,0 11.07422,1.582031 5.22949,1.538086 9.7998,4.658203 z"\n         style="font-size:90px"\n         id="path6998" />\n      <path\n         d="m 262.46484,94.060547 q -6.5039,0 -10.2832,5.097656 -3.7793,5.053707 -3.7793,13.886717 0,8.83301 3.73536,13.93067 3.77929,5.05371 10.32714,5.05371 6.45996,0 10.23926,-5.09766 3.7793,-5.09766 3.7793,-13.88672 0,-8.74512 -3.7793,-13.842772 -3.7793,-5.141601 -10.23926,-5.141601 z m 0,-6.855469 q 10.54688,0 16.56739,6.855469 6.0205,6.855473 6.0205,18.984373 0,12.08496 -6.0205,18.98438 -6.02051,6.85547 -16.56739,6.85547 -10.59082,0 -16.61132,-6.85547 -5.97657,-6.89942 -5.97657,-18.98438 0,-12.1289 5.97657,-18.984373 6.0205,-6.855469 16.61132,-6.855469 z"\n         style="font-size:90px"\n         id="path7000" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3978">\n      <path\n         d="m 211.11328,219.23828 q 2.85645,0.9668 5.53711,4.13086 2.72461,3.16406 5.44922,8.70117 L 231.1084,250 l -9.53613,0 -8.39356,-16.83105 q -3.25195,-6.5918 -6.32812,-8.74512 -3.03223,-2.15332 -8.30567,-2.15332 l -9.66797,0 0,27.72949 -8.87695,0 0,-65.61035 20.03906,0 q 11.25,0 16.78711,4.70215 5.53711,4.70215 5.53711,14.19433 0,6.19629 -2.90039,10.28321 -2.85644,4.08691 -8.34961,5.66894 z m -22.23633,-27.55371 0,23.29102 11.16211,0 q 6.41602,0 9.66797,-2.94434 3.2959,-2.98828 3.2959,-8.74512 0,-5.75683 -3.2959,-8.65722 -3.25195,-2.94434 -9.66797,-2.94434 l -11.16211,0 z"\n         style="font-size:90px"\n         id="path6993" />\n      <path\n         d="m 283.13965,220.29297 0,29.70703 -8.08594,0 0,-29.44336 q 0,-6.9873 -2.72461,-10.45898 -2.72461,-3.47168 -8.17383,-3.47168 -6.54785,0 -10.32715,4.1748 -3.77929,4.17481 -3.77929,11.38184 l 0,27.81738 -8.12988,0 0,-68.37891 8.12988,0 0,26.80664 q 2.90039,-4.43847 6.81152,-6.63574 3.95508,-2.19726 9.09668,-2.19726 8.48145,0 12.83203,5.27343 4.35059,5.2295 4.35059,15.42481 z"\n         style="font-size:90px"\n         id="path6995" />\n    </g>\n  </g>\n</svg>\n',helpText:"Open list of d-block elements.",isSubMenu:!0,mnemonic:""},{id:"fblock",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomFBlock.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomElement.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective18" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="81.839927"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1680"\n     inkscape:window-height="974"\n     inkscape:window-x="96"\n     inkscape:window-y="14"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:8.13591309;stroke-opacity:1"\n       id="path3960"\n       sodipodi:cx="159.28572"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="159.28572"\n       sodipodi:ry="158.92857"\n       d="M 318.57144 158.92857 A 159.28572 158.92857 0 1 1  0,158.92857 A 159.28572 158.92857 0 1 1  318.57144 158.92857 z"\n       transform="matrix(0.9738456,0,0,0.9782812,4.8803045,5.5945903)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 160,0 L 160,320"\n       id="path3962" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 0,160 L 320,160"\n       id="path3964" />\n    <g\n       style="font-size:80px"\n       id="text3966">\n      <path\n         d="m 68.82914,189.86035 -12.041016,32.65137 24.125977,0 -12.084961,-32.65137 z m -5.009766,-8.74512 10.063477,0 25.004882,65.61036 -9.228515,0 -5.976563,-16.83106 -29.575195,0 -5.976562,16.83106 -9.360352,0 25.048828,-65.61036 z"\n         style="font-size:90px"\n         id="path6970" />\n      <path\n         d="m 141.91019,199.39648 0,7.5586 q -3.42773,-1.88965 -6.89941,-2.8125 -3.42773,-0.9668 -6.94336,-0.9668 -7.86621,0 -12.2168,5.00977 -4.35058,4.96582 -4.35058,13.97461 0,9.00879 4.35058,14.01855 4.35059,4.96582 12.2168,4.96582 3.51563,0 6.94336,-0.92285 3.47168,-0.9668 6.89941,-2.85645 l 0,7.47071 q -3.38378,1.58203 -7.03125,2.37304 Q 131.27543,248 127.18851,248 q -11.11816,0 -17.66601,-6.9873 -6.54785,-6.98731 -6.54785,-18.85254 0,-12.04102 6.59179,-18.94043 6.63575,-6.89942 18.14942,-6.89942 3.73535,0 7.29492,0.79102 3.55957,0.74707 6.89941,2.28515 z"\n         style="font-size:90px"\n         id="path6972" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3970">\n      <path\n         d="m 50,73.115234 8.876953,0 0,58.139646 31.948242,0 0,7.47071 -40.825195,0 0,-65.610356 z"\n         style="font-size:90px"\n         id="path6983" />\n      <path\n         d="m 122.11426,113.98438 q -9.79981,0 -13.5791,2.24121 -3.7793,2.24121 -3.7793,7.64648 0,4.30664 2.8125,6.85547 2.85644,2.50488 7.73437,2.50488 6.72364,0 10.76661,-4.74609 4.08691,-4.79004 4.08691,-12.7002 l 0,-1.80175 -8.04199,0 z m 16.12793,-3.33985 0,28.08106 -8.08594,0 0,-7.47071 q -2.76855,4.48242 -6.89941,6.63574 Q 119.12598,140 113.14941,140 q -7.55859,0 -12.04101,-4.21875 -4.438478,-4.2627 -4.438478,-11.38184 0,-8.30566 5.537108,-12.52441 5.58106,-4.21875 16.61133,-4.21875 l 11.33789,0 0,-0.79102 q 0,-5.58105 -3.69141,-8.613277 -3.64746,-3.076172 -10.2832,-3.076172 -4.21875,0 -8.21777,1.010742 -3.99903,1.010743 -7.69043,3.032227 l 0,-7.470703 q 4.43847,-1.713867 8.61328,-2.548828 4.1748,-0.878907 8.12988,-0.878907 10.67871,0 15.95215,5.53711 5.27344,5.537109 5.27344,16.787108 z"\n         style="font-size:90px"\n         id="path6985" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3974">\n      <path\n         d="m 233.94531,77.053711 0,9.360351 q -4.48242,-4.174804 -9.58008,-6.240234 -5.05371,-2.06543 -10.7666,-2.06543 -11.25,0 -17.22656,6.899414 -5.97656,6.855469 -5.97656,19.863278 0,12.96387 5.97656,19.86329 5.97656,6.85546 17.22656,6.85546 5.71289,0 10.7666,-2.06543 5.09766,-2.06543 9.58008,-6.24023 l 0,9.27246 q -4.6582,3.16406 -9.88769,4.74609 -5.18555,1.58204 -10.98633,1.58204 -14.89746,0 -23.4668,-9.09668 -8.56933,-9.14063 -8.56933,-24.917 0,-15.820309 8.56933,-24.916988 8.56934,-9.140625 23.4668,-9.140625 5.88867,0 11.07422,1.582031 5.22949,1.538086 9.7998,4.658203 z"\n         style="font-size:90px"\n         id="path6978" />\n      <path\n         d="m 289.49219,110.97949 0,3.95508 -37.17774,0 q 0.52735,8.34961 5.00977,12.74414 4.52637,4.35059 12.56836,4.35059 4.6582,0 9.00879,-1.14258 4.39453,-1.14258 8.70117,-3.42774 l 0,7.64649 q -4.35059,1.8457 -8.9209,2.8125 -4.57031,0.9668 -9.27246,0.9668 -11.77734,0 -18.67676,-6.85547 -6.85547,-6.85547 -6.85547,-18.54492 0,-12.08497 6.50391,-19.160161 6.54785,-7.119141 17.62207,-7.119141 9.93164,0 15.68848,6.416016 5.80078,6.37207 5.80078,17.358396 z m -8.08594,-2.37304 q -0.0879,-6.63575 -3.73535,-10.590825 -3.60352,-3.955078 -9.58008,-3.955078 -6.76758,0 -10.85449,3.823242 -4.04297,3.823241 -4.65821,10.766601 l 28.82813,-0.0439 z"\n         style="font-size:90px"\n         id="path6980" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3978">\n      <path\n         d="m 194.98926,184.38965 8.9209,0 0,39.8584 q 0,10.54687 3.82324,15.20507 3.82324,4.61426 12.39258,4.61426 8.52539,0 12.34863,-4.61426 3.82324,-4.6582 3.82324,-15.20507 l 0,-39.8584 8.9209,0 0,40.95703 q 0,12.83203 -6.37207,19.37988 -6.32813,6.54785 -18.7207,6.54785 -12.43653,0 -18.8086,-6.54785 -6.32812,-6.54785 -6.32812,-19.37988 l 0,-40.95703 z"\n         style="font-size:90px"\n         id="path6975" />\n    </g>\n  </g>\n</svg>\n',helpText:"Open list of f-block elements.",isSubMenu:!0,mnemonic:""},{id:"noble",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomNoble.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomElement.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="206.12564"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:8.13591309;stroke-opacity:1"\n       id="path3960"\n       sodipodi:cx="159.28572"\n       sodipodi:cy="158.92857"\n       sodipodi:rx="159.28572"\n       sodipodi:ry="158.92857"\n       d="M 318.57144 158.92857 A 159.28572 158.92857 0 1 1  0,158.92857 A 159.28572 158.92857 0 1 1  318.57144 158.92857 z"\n       transform="matrix(0.9738456,0,0,0.9782812,4.8803045,5.5945903)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 160,0 L 160,320"\n       id="path3962" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 0,160 L 320,160"\n       id="path3964" />\n    <g\n       style="font-size:80px"\n       id="text3966">\n      <path\n         d="m 71.928711,191.86035 -12.041016,32.65137 24.125977,0 -12.084961,-32.65137 z m -5.009766,-8.74512 10.063477,0 25.004878,65.61036 -9.228511,0 -5.976562,-16.83106 -29.575196,0 -5.976562,16.83106 -9.360352,0 25.048828,-65.61036 z"\n         style="font-size:90px"\n         id="path6950" />\n      <path\n         d="m 139.69238,207.06543 q -1.3623,-0.79102 -2.98828,-1.14258 -1.58203,-0.39551 -3.51562,-0.39551 -6.85547,0 -10.54688,4.48243 -3.64746,4.43847 -3.64746,12.78808 l 0,25.92774 -8.12988,0 0,-49.21875 8.12988,0 0,7.64648 q 2.54883,-4.48242 6.63574,-6.63574 4.08692,-2.19727 9.93164,-2.19727 0.83496,0 1.84571,0.13184 1.01074,0.0879 2.24121,0.30762 l 0.0439,8.30566 z"\n         style="font-size:90px"\n         id="path6952" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3970">\n      <path\n         d="m 40,73.115234 8.876953,0 0,26.894536 32.255859,0 0,-26.894536 8.876954,0 0,65.610356 -8.876954,0 0,-31.24512 -32.255859,0 0,31.24512 -8.876953,0 0,-65.610356 z"\n         style="font-size:90px"\n         id="path6965" />\n      <path\n         d="m 149.42383,112.09473 0,3.95507 -37.17774,0 q 0.52735,8.34961 5.00977,12.74415 4.52637,4.35058 12.56836,4.35058 4.6582,0 9.00879,-1.14258 4.39453,-1.14258 8.70117,-3.42773 l 0,7.64648 q -4.35059,1.84571 -8.9209,2.8125 -4.57031,0.9668 -9.27246,0.9668 -11.77734,0 -18.67676,-6.85547 -6.85547,-6.85547 -6.85547,-18.54492 0,-12.08496 6.50391,-19.160157 6.54785,-7.119141 17.62207,-7.119141 9.93164,0 15.68848,6.416016 5.80078,6.372072 5.80078,17.358402 z m -8.08594,-2.37305 q -0.0879,-6.63574 -3.73535,-10.590821 -3.60352,-3.955078 -9.58008,-3.955078 -6.76758,0 -10.85449,3.823242 -4.04297,3.823247 -4.6582,10.766607 l 28.82812,-0.0439 z"\n         style="font-size:90px"\n         id="path6967" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3974">\n      <path\n         d="m 184.81445,72 11.95313,0 29.09179,54.8877 0,-54.8877 8.61329,0 0,65.61035 -11.95313,0 -29.0918,-54.887694 0,54.887694 -8.61328,0 0,-65.61035 z"\n         style="font-size:90px"\n         id="path6960" />\n      <path\n         d="m 293.88672,110.97949 0,3.95508 -37.17774,0 q 0.52735,8.34961 5.00977,12.74414 4.52637,4.35059 12.56836,4.35059 4.6582,0 9.00879,-1.14258 4.39453,-1.14258 8.70117,-3.42774 l 0,7.64649 q -4.35059,1.8457 -8.9209,2.8125 -4.57031,0.9668 -9.27246,0.9668 -11.77734,0 -18.67676,-6.85547 -6.85547,-6.85547 -6.85547,-18.54492 0,-12.08497 6.50391,-19.160161 6.54785,-7.119141 17.62207,-7.119141 9.93164,0 15.68848,6.416016 5.80078,6.37207 5.80078,17.358396 z m -8.08594,-2.37304 q -0.0879,-6.63575 -3.73535,-10.590825 -3.60352,-3.955078 -9.58008,-3.955078 -6.76758,0 -10.85449,3.823242 -4.04297,3.823241 -4.6582,10.766601 l 28.82812,-0.0439 z"\n         style="font-size:90px"\n         id="path6962" />\n    </g>\n    <g\n       style="font-size:80px"\n       id="text3978">\n      <path\n         d="m 180,184.38965 8.87695,0 0,27.72949 29.44336,-27.72949 11.42578,0 -32.56347,30.58594 L 232.0752,250 l -11.68946,0 -31.50879,-31.59668 0,31.59668 -8.87695,0 0,-65.61035 z"\n         style="font-size:90px"\n         id="path6955" />\n      <path\n         d="m 267.23145,208.33984 q -1.36231,-0.79101 -2.98829,-1.14257 -1.58203,-0.39551 -3.51562,-0.39551 -6.85547,0 -10.54688,4.48242 -3.64746,4.43848 -3.64746,12.78809 l 0,25.92773 -8.12988,0 0,-49.21875 8.12988,0 0,7.64648 q 2.54883,-4.48242 6.63575,-6.63574 4.08691,-2.19726 9.93164,-2.19726 0.83496,0 1.8457,0.13183 1.01074,0.0879 2.24121,0.30762 l 0.0439,8.30566 z"\n         style="font-size:90px"\n         id="path6957" />\n    </g>\n  </g>\n</svg>\n',helpText:"Open list of noble elements.",isSubMenu:!0,mnemonic:""}],Mi=[{id:"one",svg:pi,helpText:"Create or set bonds to single.",mnemonic:"1"},{id:"two",svg:hi,helpText:"Create or set bonds to double.",mnemonic:"2"},{id:"three",svg:ci,helpText:"Create or set bonds to triple.",mnemonic:"3"},{id:"four",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondFour.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondFour.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.0389,180 L 39.961095,180"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.01947,219.98053 L 39.941666,219.98053"\n       id="path3574" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.01947,139.98053 L 39.941663,139.98053"\n       id="path3576" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.96105766;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 280.01947,99.980529 L 39.941665,99.980529"\n       id="path3578" />\n  </g>\n</svg>\n',helpText:"Create or set bonds to quadruple.",mnemonic:""},{id:"zero",svg:mi,helpText:"Create or set bonds to zero-order.",mnemonic:"0"},{id:"inclined",svg:ui,helpText:"Create or set bonds to inclined.",mnemonic:"5"},{id:"declined",svg:fi,helpText:"Create or set bonds to declined.",mnemonic:"6"},{id:"squig",svg:gi,helpText:"Create or set bonds to unknown stereochemistry.",mnemonic:"4"},{id:"bondQAny",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="1.0.2 (1.0.2+r75+1)"\n   version="1.0"\n   sodipodi:docname="BondAny.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondLinear.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2966" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.36294465"\n     inkscape:cx="-23.567935"\n     inkscape:cy="160"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1920"\n     inkscape:window-height="1023"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     inkscape:document-rotation="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2968" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <circle\n       id="path3744"\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.25"\n       cx="20.5"\n       cy="160"\n       r="12.5" />\n    <circle\n       style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.25"\n       id="path3746"\n       cx="60.5"\n       cy="160"\n       r="12.5" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:20;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 150,160 H 100"\n       id="path838" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:20;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 230,140 H 180"\n       id="path840" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:20;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 230,180 H 180"\n       id="path842" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:20;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 310,120 H 260"\n       id="path844" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:20;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 310,160 H 260"\n       id="path846" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:20;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 310,200 H 260"\n       id="path848" />\n  </g>\n</svg>\n',helpText:"Query bond that matches anything."},{id:"addtwo",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="BondAddTwo.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondTrigonal.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2948" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="39.099383"\n     inkscape:cy="92.512755"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1421"\n     inkscape:window-height="893"\n     inkscape:window-x="278"\n     inkscape:window-y="110"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;stroke:#000000;stroke-width:4.1221571;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:2.00970001"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="m 140.71429,135 a 8.9285717,9.2857141 0 1 1 -17.85714,0 8.9285717,9.2857141 0 1 1 17.85714,0 z"\n       transform="matrix(0,1.9791656,-1.9030439,0,400.81202,-104.81214)"\n       inkscape:export-xdpi="9"\n       inkscape:export-ydpi="9" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 126.24182,130.35436 51.64564,35.560356"\n       id="path3152" />\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:0.75294118;fill-rule:nonzero;stroke:#000000;stroke-width:8;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans"\n       d="m 176.5625,165.59375 a 9.6254627,9.6254627 0 0 0 -3.875,18.3125 L 280,237 a 9.6254627,9.6254627 0 1 0 8.53125,-17.25 l -107.3125,-53.09375 a 9.6254627,9.6254627 0 0 0 -4.65625,-1.0625 z"\n       id="path3154" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 126.24182,181.56035 51.64564,276.35436"\n       id="path3162" />\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:0.75294118;fill-rule:nonzero;stroke:#000000;stroke-width:8;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans"\n       d="m 283.65625,72.625 a 9.6254627,9.6254627 0 0 0 -4.34375,1.0625 l -107.34375,53.125 a 9.6254627,9.6254627 0 1 0 8.53125,17.25 l 107.34375,-53.125 a 9.6254627,9.6254627 0 0 0 -4.1875,-18.3125 z"\n       id="path3164" />\n  </g>\n</svg>\n',helpText:"Add two new bonds to the subject atom.",mnemonic:"Shift+D"},{id:"insert",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="BondInsert.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondLinear.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2958" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="103.22259"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1204"\n     inkscape:window-height="925"\n     inkscape:window-x="508"\n     inkscape:window-y="54"\n     showgrid="false"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4800" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 113.39098,158.69004 53.078266,263.15473"\n       id="path3152" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 299.98723,58.483019 240.10753,162.19765"\n       id="path3154" />\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:0.75294118;stroke:#000000;stroke-width:8;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans"\n       d="M 116.5625 151.3125 A 9.6254923 9.6254923 0 0 0 111.09375 152.90625 A 9.6254923 9.6254923 0 0 0 116.53125 170.53125 L 159.75 170.5625 C 158.10087 167.65453 157.15625 164.30057 157.15625 160.71875 C 157.15625 157.31663 158.0016 154.11729 159.5 151.3125 L 116.5625 151.3125 z M 194.78125 151.3125 C 196.27965 154.11729 197.15625 157.31663 197.15625 160.71875 C 197.15625 164.30057 196.18038 167.65453 194.53125 170.5625 L 236.28125 170.59375 A 9.6321508 9.6321508 0 0 0 236.28125 151.3125 L 194.78125 151.3125 z "\n       id="path4284" />\n    <path\n       transform="translate(157.71429,141.42857)"\n       d="M 40,20 A 20,20 0 1 1 0,20 20,20 0 1 1 40,20 z"\n       sodipodi:ry="20"\n       sodipodi:rx="20"\n       sodipodi:cy="20"\n       sodipodi:cx="20"\n       id="path3660"\n       style="fill:none;stroke:#000000;stroke-width:9;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       sodipodi:type="arc" />\n  </g>\n</svg>\n',helpText:"Insert a methylene into the subject bond.",mnemonic:""},{id:"switch",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="BondSwitch.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondTrigonal.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective4871" />\n    <marker\n       inkscape:stockid="Arrow2Send"\n       orient="auto"\n       refY="0.0"\n       refX="0.0"\n       id="Arrow2Send"\n       style="overflow:visible;">\n      <path\n         id="path3178"\n         style="font-size:12px;fill:#8b8b8b;fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"\n         d="M 8.7185878,4.0337352 L -2.2072895,0.016013256 L 8.7185884,-4.0017078 C 6.97309,-1.6296469 6.9831476,1.6157441 8.7185878,4.0337352 z "\n         transform="matrix(-0.3,0,0,-0.3,0.69,0)" />\n    </marker>\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="39.099383"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1215"\n     inkscape:window-height="839"\n     inkscape:window-x="145"\n     inkscape:window-y="105"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;color:#000000;fill:#ffffff;fill-opacity:0.75294119;stroke:#000000;stroke-width:8;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Bitstream Vera Sans;-inkscape-font-specification:Bitstream Vera Sans;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="m 225.375,15.59375 a 9.6254923,9.6254923 0 0 0 -8.125,5.5 l -60.28125,123.0625 a 9.6295647,9.6295647 0 1 0 17.3125,8.4375 l 60.25,-123.03125 A 9.6254923,9.6254923 0 0 0 225.375,15.59375 z"\n       id="path3132" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:4.1221571;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-104.82577,-96.910927)"\n       inkscape:export-xdpi="9"\n       inkscape:export-ydpi="9" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:15.49904156;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 141.61589,160 L 63.973265,160"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 225.41813,293.9522 L 165.1533,170.90493"\n       id="path3158"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#8b8b8b;stroke-width:6.58357668;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow2Send)"\n       d="M 197.79178,142.41668 C 208.33227,154.9762 208.33227,166.6984 197.79178,177.58331"\n       id="path3134"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#8b8b8b;stroke-width:6.58357668;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow2Send)"\n       d="M 213.88997,98.458413 C 237.84561,141.99804 237.84561,183.02576 213.88997,221.54158"\n       id="path3136"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#8b8b8b;stroke-width:6.584;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow2Send);fill-opacity:1"\n       d="M 238.03726,63.291789 C 275.40805,126.92663 275.40805,191.39877 238.03726,256.70821"\n       id="path3140"\n       sodipodi:nodetypes="cc" />\n  </g>\n</svg>\n',helpText:"Cycle through likely bond geometries.",mnemonic:"'"},{id:"rotate",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="BondRotate.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondTrigonal.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective4871" />\n    <marker\n       inkscape:stockid="Arrow2Send"\n       orient="auto"\n       refY="0.0"\n       refX="0.0"\n       id="Arrow2Send"\n       style="overflow:visible;">\n      <path\n         id="path3178"\n         style="font-size:12px;fill:#8b8b8b;fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"\n         d="M 8.7185878,4.0337352 L -2.2072895,0.016013256 L 8.7185884,-4.0017078 C 6.97309,-1.6296469 6.9831476,1.6157441 8.7185878,4.0337352 z "\n         transform="matrix(-0.3,0,0,-0.3,0.69,0)" />\n    </marker>\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#4a8be0"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="229.81367"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1859"\n     inkscape:window-height="1156"\n     inkscape:window-x="61"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     inkscape:snap-global="true"\n     inkscape:snap-smooth-nodes="true"\n     inkscape:object-nodes="true"\n     inkscape:snap-intersection-paths="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4149" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g4477"\n       transform="translate(-6.9348763,2.361824)">\n      <path\n         inkscape:connector-curvature="0"\n         id="path3132"\n         d="m 285.375,15.59375 a 9.6254923,9.6254923 0 0 0 -8.125,5.5 l -60.28125,123.0625 a 9.6295647,9.6295647 0 1 0 17.3125,8.4375 l 60.25,-123.03125 A 9.6254923,9.6254923 0 0 0 285.375,15.59375 Z"\n         style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:\'Bitstream Vera Sans\';-inkscape-font-specification:\'Bitstream Vera Sans\';text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;display:inline;overflow:visible;visibility:visible;fill:#ffffff;fill-opacity:0.75294118;stroke:#000000;stroke-width:8;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker:none;enable-background:accumulate" />\n      <circle\n         r="17.671122"\n         cy="160"\n         cx="216"\n         inkscape:export-ydpi="9"\n         inkscape:export-xdpi="9"\n         id="path2160"\n         style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970006;stroke-opacity:1" />\n      <path\n         sodipodi:nodetypes="cc"\n         inkscape:connector-curvature="0"\n         id="path3152"\n         d="M 201.61589,160 63.97327,160"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:15.49904156;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         inkscape:connector-curvature="0"\n         sodipodi:nodetypes="cc"\n         id="path3158"\n         d="M 285.41813,293.9522 225.1533,170.90493"\n         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <circle\n         style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970006;stroke-opacity:1"\n         id="circle4151"\n         inkscape:export-xdpi="9"\n         inkscape:export-ydpi="9"\n         cx="56"\n         cy="160"\n         r="17.671122" />\n      <path\n         sodipodi:nodetypes="ccccc"\n         inkscape:connector-curvature="0"\n         id="path4155"\n         d="m 110,140 c 0,-30 10,-80 36,-80 24,0 34,60 34,100 0,40 -10.12741,99.49035 -34,100 -26,0 -36,-48.6 -36,-78.6"\n         style="fill:none;fill-rule:evenodd;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n      <path\n         sodipodi:nodetypes="cccc"\n         inkscape:connector-curvature="0"\n         id="path4475"\n         d="m 110,175 -15,25 30,0 z"\n         style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n    </g>\n  </g>\n</svg>\n',helpText:"Rotate bond to invert substituent orientation.",mnemonic:""},{id:"linear",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondLinear.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondLinear.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.12215689;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-100.82577,-96.910927)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 130.66986,160 L 10.04443,160"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 309.02255,160 L 189.26316,160"\n       id="path3154" />\n  </g>\n</svg>\n',helpText:"Apply linear geometry.",mnemonic:"Shift+V"},{id:"trigonal",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondTrigonal.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondTrigonal.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="743"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.1221571;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-82.82577,-96.910927)"\n       inkscape:export-xdpi="9"\n       inkscape:export-ydpi="9" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 148.66986,160 L 28.04443,160"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 248.37547,27.62453 L 195.2535,134.95751"\n       id="path3154" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 247.41813,293.9522 L 194.29616,186.61922"\n       id="path3158" />\n  </g>\n</svg>\n',helpText:"Apply trigonal geometry.",mnemonic:"Shift+W"},{id:"tetra1",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondTetra1.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondTrigonal.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="148.55302"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="743"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.1221571;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-96.82577,-80.910927)"\n       inkscape:export-xdpi="9"\n       inkscape:export-ydpi="9" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 138.34073,193.65927 L 43.546726,268.25545"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 236.37547,43.62453 L 183.2535,150.95751"\n       id="path3154" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 189.54672,193.65927 L 284.34073,268.25545"\n       id="path3162" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 90.29616,44.33351 L 143.41813,151.66649"\n       id="path3164" />\n  </g>\n</svg>\n',helpText:"Apply tetrahedral geometry #1.",mnemonic:"Shift+E"},{id:"tetra2",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondTetra2.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondTetra2.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="146.11708"\n     inkscape:cy="127.88711"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.12215689;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-100.82577,-96.910927)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 130.66986,160 L 10.04443,160"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 309.02255,160 L 189.26316,160"\n       id="path3154" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 256.37547,43.62453 L 176.82086,133.14201"\n       id="path2233" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 255.17914,276.37547 L 175.62453,186.85799"\n       id="path2235" />\n  </g>\n</svg>\n',helpText:"Apply tetrahedral geometry #2.",mnemonic:"Shift+R"},{id:"sqplan",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondSqPlan.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondSqPlan.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.12215689;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-100.82577,-96.910927)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 130.66986,160 L 10.04443,160"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 309.02255,160 L 189.26316,160"\n       id="path3154" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 159.62453,130.37547 L 159.62453,10.616072"\n       id="path2271" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 160.37547,309.38392 L 160.37547,189.62453"\n       id="path2273" />\n  </g>\n</svg>\n',helpText:"Apply square planar geometry.",mnemonic:"Shift+T"},{id:"octa1",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondOcta1.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondOcta2.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.12215689;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-100.82577,-96.910927)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 159.62453,130.37547 L 159.62453,10.616072"\n       id="path2271" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 160.37547,309.38392 L 160.37547,189.62453"\n       id="path2273" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 26.905712,230.35583 L 132.37547,173.62453"\n       id="path2305" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 188.12226,146.50851 L 293.59202,89.777207"\n       id="path2505" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 26.905714,89.62453 L 132.37547,146.35583"\n       id="path2507" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 188.55084,173.92006 L 294.02059,230.65136"\n       id="path2509" />\n  </g>\n</svg>\n',helpText:"Apply octahedral geometry #1.",mnemonic:"Shift+Y"},{id:"octa2",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="BondOcta2.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondSqPlan.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="171.24224"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.12215689;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.00970001;stroke-opacity:1"\n       id="path2160"\n       sodipodi:cx="131.78572"\n       sodipodi:cy="135"\n       sodipodi:rx="8.9285717"\n       sodipodi:ry="9.2857141"\n       d="M 140.71429 135 A 8.9285717 9.2857141 0 1 1  122.85715,135 A 8.9285717 9.2857141 0 1 1  140.71429 135 z"\n       transform="matrix(1.9791656,0,0,1.9030439,-100.82577,-96.910927)" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.31853294;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 130.66986,160 L 10.04443,160"\n       id="path3152" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 309.02255,160 L 189.26316,160"\n       id="path3154" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 159.62453,130.37547 L 159.62453,10.616072"\n       id="path2271" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 160.37547,309.38392 L 160.37547,189.62453"\n       id="path2273" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 182.07157,136.65434 L 268.37547,53.62453"\n       id="path2303" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:19.24905968;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 52.07157,264.65433 L 138.37547,181.62453"\n       id="path2305" />\n  </g>\n</svg>\n',helpText:"Apply octahedral geometry #2.",mnemonic:"Shift+U"},{id:"metalligate",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   inkscape:export-ydpi="9"\n   inkscape:export-xdpi="9"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   sodipodi:docname="BondMetalLigate.svg"\n   version="1.0"\n   inkscape:version="1.0 (4035a4f, 2020-05-01)"\n   sodipodi:version="0.32"\n   id="svg2"\n   height="320"\n   width="320">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <path\n       id="char45"\n       d="M1526 0H1328V1283L914 410H796L385 1283V0H200V1489H470L867 660L1251 1489H1526V0Z"\n       edge="none" />\n  </defs>\n  <sodipodi:namedview\n     inkscape:document-rotation="0"\n     inkscape:object-paths="true"\n     inkscape:snap-intersection-paths="true"\n     inkscape:object-nodes="true"\n     inkscape:snap-smooth-nodes="true"\n     inkscape:snap-bbox="true"\n     inkscape:snap-global="true"\n     inkscape:window-maximized="0"\n     showgrid="true"\n     inkscape:window-y="23"\n     inkscape:window-x="53"\n     inkscape:window-height="943"\n     inkscape:window-width="1650"\n     showborder="true"\n     height="320px"\n     width="320px"\n     inkscape:current-layer="layer1"\n     inkscape:document-units="px"\n     inkscape:cy="146.31871"\n     inkscape:cx="74.452978"\n     inkscape:zoom="0.98994949"\n     inkscape:pageshadow="2"\n     inkscape:pageopacity="0"\n     objecttolerance="10"\n     guidetolerance="10"\n     gridtolerance="10000"\n     borderopacity="1.0"\n     bordercolor="#666666"\n     pagecolor="#bcd7fd"\n     id="base">\n    <inkscape:grid\n       id="grid4135"\n       type="xygrid" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:groupmode="layer"\n     inkscape:label="Layer 1">\n    <use\n       transform="matrix(0.03709198,0,0,-0.03709198,127.98962,187.61498)"\n       id="use4287"\n       x="0"\n       xlink:href="#char45"\n       style="fill:#000000;fill-opacity:1"\n       y="0"\n       width="100%"\n       height="100%" />\n    <path\n       sodipodi:nodetypes="cc"\n       id="path850"\n       d="M 160,110 V 20"\n       style="fill:none;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 160,300 V 210"\n       id="path852"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 205,135 282.94228,90"\n       id="path854"\n       sodipodi:nodetypes="cc" />\n    <path\n       sodipodi:nodetypes="cc"\n       id="path856"\n       d="m 205,185 77.94228,45"\n       style="fill:none;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 37.05772,90 115,135"\n       id="path858"\n       sodipodi:nodetypes="cc" />\n    <path\n       sodipodi:nodetypes="cc"\n       id="path860"\n       d="M 37.05772,230 115,185"\n       style="fill:none;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n  </g>\n</svg>\n',helpText:"Arrange ligands around metal centre.",mnemonic:""},{id:"artifactpath",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="BondArtifactPath.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd7fd"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="161.66868"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1394"\n     inkscape:window-height="855"\n     inkscape:window-x="46"\n     inkscape:window-y="1"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="true"\n     inkscape:snap-smooth-nodes="true"\n     inkscape:object-nodes="true"\n     inkscape:snap-intersection-paths="true"\n     inkscape:object-paths="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g4206"\n       transform="matrix(1.1572994,0,0,1.1572994,-14.188294,6.2718173)"\n       style="stroke-width:6.91264508;stroke-miterlimit:4;stroke-dasharray:none">\n      <line\n         x1="150.51276"\n         y1="99.510551"\n         x2="35.082012"\n         y2="166.15654"\n         id="line4180"\n         style="stroke:#000000;stroke-width:6.91264508;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="150.51276"\n         y1="99.510551"\n         x2="265.94345"\n         y2="166.15654"\n         id="line4182"\n         style="stroke:#000000;stroke-width:6.91264508;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n    </g>\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:15;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:15,30;stroke-dashoffset:6"\n       d="m 60,210 c 90,-70 110,-70 200,0"\n       id="path4210"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cc" />\n  </g>\n</svg>\n',helpText:"Add a path bond artifact.",mnemonic:""},{id:"artifactring",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="BondArtifactRing.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd7fd"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="14.186408"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1394"\n     inkscape:window-height="855"\n     inkscape:window-x="46"\n     inkscape:window-y="1"\n     showgrid="false"\n     inkscape:window-maximized="1"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="true"\n     inkscape:snap-smooth-nodes="true"\n     inkscape:object-nodes="true"\n     inkscape:snap-intersection-paths="true"\n     inkscape:object-paths="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g4271"\n       style="stroke-width:8;stroke-miterlimit:4;stroke-dasharray:none"\n       transform="translate(27.870353,1.568337)">\n      <line\n         x1="132.12965"\n         y1="38.988956"\n         x2="17.069948"\n         y2="122.58849"\n         id="line4215"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="17.069948"\n         y1="122.58849"\n         x2="61.017296"\n         y2="257.85382"\n         id="line4217"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="61.017296"\n         y1="257.85382"\n         x2="203.24199"\n         y2="257.85382"\n         id="line4219"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="247.18935"\n         y1="122.58849"\n         x2="203.24199"\n         y2="257.85382"\n         id="line4221"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="247.18935"\n         y1="122.58849"\n         x2="132.12965"\n         y2="38.988956"\n         id="line4223"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n    </g>\n    <circle\n       style="fill:none;stroke:#000000;stroke-width:15;stroke-miterlimit:4;stroke-dasharray:15,30;stroke-dashoffset:24;stroke-linecap:round;stroke-linejoin:round"\n       id="ellipse4231"\n       cy="160"\n       cx="160"\n       r="66.571121" />\n  </g>\n</svg>\n',helpText:"Add a ring bond artifact.",mnemonic:""},{id:"artifactarene",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="BondArtifactArene.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <path\n       edge="none"\n       d="M1526 0H1328V1283L914 410H796L385 1283V0H200V1489H470L867 660L1251 1489H1526V0Z"\n       id="char45" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd7fd"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="-12.077558"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1394"\n     inkscape:window-height="855"\n     inkscape:window-x="46"\n     inkscape:window-y="1"\n     showgrid="false"\n     inkscape:window-maximized="1"\n     inkscape:snap-global="false"\n     inkscape:snap-bbox="true"\n     inkscape:snap-smooth-nodes="true"\n     inkscape:object-nodes="true"\n     inkscape:snap-intersection-paths="true"\n     inkscape:object-paths="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g4369"\n       style="stroke-width:8;stroke-miterlimit:4;stroke-dasharray:none">\n      <line\n         x1="79.874969"\n         y1="53.341728"\n         x2="42.383801"\n         y2="124.96636"\n         id="line4253"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="42.383801"\n         y1="124.96636"\n         x2="159.32974"\n         y2="157.25311"\n         id="line4255"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="159.32974"\n         y1="157.25311"\n         x2="277.61575"\n         y2="130.34207"\n         id="line4257"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="277.61575"\n         y1="130.34207"\n         x2="243.44348"\n         y2="57.081509"\n         id="line4259"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n      <line\n         x1="243.44348"\n         y1="57.081509"\n         x2="79.874969"\n         y2="53.341728"\n         id="line4261"\n         style="stroke:#000000;stroke-width:8;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none" />\n    </g>\n    <line\n       style="stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none"\n       id="line4275"\n       y2="104.59695"\n       x2="160.5295"\n       y1="208.16769"\n       x1="160.5295" />\n    <ellipse\n       style="fill:none;stroke:#000000;stroke-width:15;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:15,30;stroke-dashoffset:39"\n       id="ellipse4281"\n       ry="28.668024"\n       rx="69.736992"\n       cy="100.79803"\n       cx="160" />\n    <use\n       height="100%"\n       width="100%"\n       y="0"\n       style="fill:#000000;fill-opacity:1"\n       xlink:href="#char45"\n       x="0"\n       id="use4287"\n       transform="matrix(0.03709198,0,0,-0.03709198,128.5194,269.61687)" />\n  </g>\n</svg>\n',helpText:"Add an arene bond artifact.",mnemonic:""},{id:"artifactclear",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="BondArtifactClear.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd7fd"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.7"\n     inkscape:cx="109.54685"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1394"\n     inkscape:window-height="855"\n     inkscape:window-x="46"\n     inkscape:window-y="1"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="true"\n     inkscape:snap-smooth-nodes="true"\n     inkscape:object-nodes="true"\n     inkscape:snap-intersection-paths="true"\n     inkscape:object-paths="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <circle\n       style="fill:none;stroke:#000000;stroke-width:15;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:15,30;stroke-dashoffset:13.15014392"\n       id="ellipse4231"\n       cy="160"\n       cx="160"\n       r="121.49729" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 131.71573,131.71573 56.56854,56.56854"\n       id="path4142"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 188.28427,131.71573 -56.56854,56.56854"\n       id="path4144"\n       inkscape:connector-curvature="0" />\n  </g>\n</svg>\n',helpText:"Remove a bond artifact.",mnemonic:""},{id:"polymer",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   inkscape:export-ydpi="9"\n   inkscape:export-xdpi="9"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   sodipodi:docname="BondPolymer.svg"\n   version="1.0"\n   inkscape:version="1.0 (4035a4f, 2020-05-01)"\n   sodipodi:version="0.32"\n   id="svg2"\n   height="320"\n   width="320">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <path\n       id="char45"\n       d="M1526 0H1328V1283L914 410H796L385 1283V0H200V1489H470L867 660L1251 1489H1526V0Z"\n       edge="none" />\n  </defs>\n  <sodipodi:namedview\n     inkscape:document-rotation="0"\n     inkscape:object-paths="true"\n     inkscape:snap-intersection-paths="true"\n     inkscape:object-nodes="true"\n     inkscape:snap-smooth-nodes="true"\n     inkscape:snap-bbox="true"\n     inkscape:snap-global="false"\n     inkscape:window-maximized="1"\n     showgrid="true"\n     inkscape:window-y="23"\n     inkscape:window-x="56"\n     inkscape:window-height="1155"\n     inkscape:window-width="1864"\n     showborder="true"\n     height="320px"\n     width="320px"\n     inkscape:current-layer="layer1"\n     inkscape:document-units="px"\n     inkscape:cy="163.33901"\n     inkscape:cx="23.277781"\n     inkscape:zoom="0.35"\n     inkscape:pageshadow="2"\n     inkscape:pageopacity="0"\n     objecttolerance="10"\n     guidetolerance="10"\n     gridtolerance="10000"\n     borderopacity="1.0"\n     bordercolor="#666666"\n     pagecolor="#bcd7fd"\n     id="base">\n    <inkscape:grid\n       id="grid4135"\n       type="xygrid" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     id="layer1"\n     inkscape:groupmode="layer"\n     inkscape:label="Layer 1">\n    <text\n       id="text844"\n       y="296.98486"\n       x="241.67216"\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:97.5637px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Bold\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:none;stroke-width:2.43909"\n       xml:space="preserve"><tspan\n         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:97.5637px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Bold\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:2.43909"\n         y="296.98486"\n         x="241.67216"\n         id="tspan842"\n         sodipodi:role="line">n</tspan></text>\n    <path\n       sodipodi:nodetypes="cccc"\n       id="path846"\n       d="M 110,30 H 50 v 260 h 60"\n       style="fill:none;stroke:#000000;stroke-width:12;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    <path\n       sodipodi:nodetypes="cccc"\n       style="fill:none;stroke:#000000;stroke-width:12;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 164,30 h 60 v 260 h -60"\n       id="path848" />\n  </g>\n</svg>\n',helpText:"Create a polymer block.",mnemonic:""}],Ei=[{id:"selgrow",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="SelectionGrow.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="90.708135"\n     inkscape:cy="170.41273"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g2858"\n       style="stroke:#000000;stroke-width:1.5;stroke-linecap:round"\n       transform="matrix(2.9600019,0,0,2.9600019,0.86338889,59.519971)">\n      <line\n         id="line2860"\n         y2="2"\n         x2="54"\n         y1="32"\n         x1="54" />\n      <line\n         id="line2862"\n         y2="47"\n         x2="28.019238"\n         y1="32"\n         x1="54" />\n      <line\n         id="line2864"\n         y2="47"\n         x2="79.980759"\n         y1="32"\n         x1="54" />\n      <line\n         id="line2866"\n         y2="77"\n         x2="79.980759"\n         y1="47"\n         x1="79.980759" />\n      <line\n         id="line2868"\n         y2="32"\n         x2="105.96152"\n         y1="47"\n         x1="79.980759" />\n      <line\n         id="line2870"\n         y2="32"\n         x2="2.0384758"\n         y1="47"\n         x1="28.019238" />\n      <line\n         id="line2872"\n         y2="77"\n         x2="28.019238"\n         y1="47"\n         x1="28.019238" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.75000000000000000;stroke:#000000;stroke-width:5.92314277;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:5.92314277,17.76942831;stroke-dashoffset:0"\n       id="path3171-1"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-114.54779,78.005469)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173-7"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,133.10042,159.32054)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.75000000000000000;stroke:#000000;stroke-width:5.92314277;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:5.92314277,17.76942831;stroke-dashoffset:0"\n       id="path3171-1-8"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-268.45509,78.218145)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173-7-8"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,-20.806885,159.53322)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3171"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-191.89451,34.331302)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,55.753684,115.64637)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.75000000000000000;stroke:#000000;stroke-width:5.92314277;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:5.92314277,17.76942831;stroke-dashoffset:0"\n       id="path3171-1-4"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-193.01077,-55.760055)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173-7-0"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,54.637436,25.555021)" />\n  </g>\n</svg>\n',helpText:"Add adjacent atoms to selection.",mnemonic:""},{id:"selshrink",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="SelectionShrink.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="201.01679"\n     inkscape:cy="170.41273"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g2858"\n       style="stroke:#000000;stroke-width:1.5;stroke-linecap:round"\n       transform="matrix(2.9600019,0,0,2.9600019,0.86338889,59.519971)">\n      <line\n         id="line2860"\n         y2="2"\n         x2="54"\n         y1="32"\n         x1="54" />\n      <line\n         id="line2862"\n         y2="47"\n         x2="28.019238"\n         y1="32"\n         x1="54" />\n      <line\n         id="line2864"\n         y2="47"\n         x2="79.980759"\n         y1="32"\n         x1="54" />\n      <line\n         id="line2866"\n         y2="77"\n         x2="79.980759"\n         y1="47"\n         x1="79.980759" />\n      <line\n         id="line2868"\n         y2="32"\n         x2="105.96152"\n         y1="47"\n         x1="79.980759" />\n      <line\n         id="line2870"\n         y2="32"\n         x2="2.0384758"\n         y1="47"\n         x1="28.019238" />\n      <line\n         id="line2872"\n         y2="77"\n         x2="28.019238"\n         y1="47"\n         x1="28.019238" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:5.92314277;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:5.92314277,17.76942831;stroke-dashoffset:0"\n       id="path3171-1"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-114.54779,78.005469)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173-7"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,133.10042,159.32054)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:5.92314277;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:5.92314277,17.76942831;stroke-dashoffset:0"\n       id="path3171-1-8"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-268.45509,78.218145)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173-7-8"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,-20.806885,159.53322)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3171"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-191.89451,34.331302)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,55.753684,115.64637)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:5.92314277;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:5.92314277,17.76942831;stroke-dashoffset:0"\n       id="path3171-1-4"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(1.5218776,0,0,1.1986594,-193.01077,-55.760055)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n       id="path3173-7-0"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="m 255.97266,101.15045 a 24.748737,30.052038 0 1 1 -49.49747,0 24.748737,30.052038 0 1 1 49.49747,0 z"\n       transform="matrix(0.45216823,0,0,0.38237687,54.637436,25.555021)" />\n  </g>\n</svg>\n',helpText:"Unselect exterior atoms.",mnemonic:""},{id:"selchain",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="SelectionChain.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3832"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="201.01679"\n     inkscape:cy="170.41273"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="false"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g3810"\n       style="stroke:#000000;stroke-width:1.5;stroke-linecap:round"\n       transform="matrix(2.621464,0,0,2.621464,4.540555,48.791192)">\n      <line\n         id="line3812"\n         y2="77"\n         x2="2"\n         y1="47"\n         x1="2" />\n      <line\n         id="line3814"\n         y2="32"\n         x2="27.98"\n         y1="47"\n         x1="2" />\n      <line\n         id="line3816"\n         y2="92"\n         x2="27.98"\n         y1="77"\n         x1="2" />\n      <line\n         id="line3818"\n         y2="77"\n         x2="53.962002"\n         y1="92"\n         x1="27.98" />\n      <line\n         id="line3820"\n         y2="47"\n         x2="53.962002"\n         y1="77"\n         x1="53.962002" />\n      <line\n         id="line3822"\n         y2="32"\n         x2="27.98"\n         y1="47"\n         x1="53.962002" />\n      <line\n         id="line3824"\n         y2="31.999731"\n         x2="79.942604"\n         y1="47"\n         x1="53.962002" />\n      <line\n         id="line3826"\n         y2="46.999462"\n         x2="105.92352"\n         y1="31.999731"\n         x1="79.942604" />\n      <line\n         id="line3828"\n         y2="1.999732"\n         x2="79.942299"\n         y1="31.999731"\n         x1="79.942604" />\n    </g>\n    <g\n       id="g3885"\n       transform="matrix(0.8900413,0,0,0.8900413,-171.09202,33.69748)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,158.10549,34.777218)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,405.75369,116.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3889"\n       transform="matrix(0.8900413,0,0,0.8900413,-141.7775,-40.634342)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,48.105487,74.777215)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-1"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,295.75368,156.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-7"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881"\n       transform="matrix(0.8900413,0,0,0.8900413,-196.12626,-147.6538)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n  </g>\n</svg>\n',helpText:"Extend selection to non-ring atoms.",mnemonic:""},{id:"smallring",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="SelectionSmRing.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3832"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3967"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-4"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-7"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-9"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-3"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-42"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-8"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective4170"\n       inkscape:persp3d-origin="54 : 21.333333 : 1"\n       inkscape:vp_z="108 : 32 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 32 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective4190"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective4190-4"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective4190-0"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective4190-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective4190-3"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="201.01679"\n     inkscape:cy="170.41273"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="false"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g4150"\n       style="stroke:#000000;stroke-width:1.5;stroke-linecap:round"\n       transform="matrix(2.9029405,0,0,2.9029405,4.6189711,81.382589)">\n      <line\n         id="line4152"\n         y2="47"\n         x2="28"\n         y1="17"\n         x1="28" />\n      <line\n         id="line4154"\n         y2="2"\n         x2="53.98"\n         y1="17"\n         x1="28" />\n      <line\n         id="line4156"\n         y2="62"\n         x2="53.98"\n         y1="47"\n         x1="28" />\n      <line\n         id="line4158"\n         y2="47"\n         x2="79.961998"\n         y1="62"\n         x1="53.98" />\n      <line\n         id="line4160"\n         y2="17"\n         x2="79.961998"\n         y1="47"\n         x1="79.961998" />\n      <line\n         id="line4162"\n         y2="2"\n         x2="53.98"\n         y1="17"\n         x1="79.961998" />\n      <line\n         id="line4164"\n         y2="2.000165"\n         x2="2.0191426"\n         y1="17"\n         x1="28" />\n      <line\n         id="line4166"\n         y2="1.999732"\n         x2="105.9426"\n         y1="17"\n         x1="79.961998" />\n    </g>\n    <g\n       id="g3881-65"\n       transform="matrix(0.74111664,0,0,0.74111664,-255.281,-36.286753)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-0"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-28"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-65-6"\n       transform="matrix(0.74111664,0,0,0.74111664,-179.98369,-79.76244)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-0-0"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-28-2"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-65-8"\n       transform="matrix(0.74111664,0,0,0.74111664,-103.88435,-36.613327)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-0-6"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-28-5"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-65-9"\n       transform="matrix(0.74111664,0,0,0.74111664,-104.66888,51.903875)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-0-00"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-28-6"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-65-3"\n       transform="matrix(0.74111664,0,0,0.74111664,-179.98369,92.833999)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-0-8"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-28-9"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-65-4"\n       transform="matrix(0.74111664,0,0,0.74111664,-254.51397,52.038479)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-0-4"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-28-60"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n  </g>\n</svg>\n',helpText:"Extend selection to small rings.",mnemonic:""},{id:"ringblock",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="SelectionRingBlk.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3832"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3967"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-4"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-7"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-9"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-3"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-42"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-8"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="201.01679"\n     inkscape:cy="170.41273"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="false"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g3937"\n       style="stroke:#000000;stroke-width:1.5;stroke-linecap:round"\n       transform="matrix(2.4899701,0,0,2.4899701,26.948713,30.700421)">\n      <line\n         id="line3939"\n         y2="77"\n         x2="2"\n         y1="47"\n         x1="2" />\n      <line\n         id="line3941"\n         y2="32"\n         x2="27.98"\n         y1="47"\n         x1="2" />\n      <line\n         id="line3943"\n         y2="92"\n         x2="27.98"\n         y1="77"\n         x1="2" />\n      <line\n         id="line3945"\n         y2="77"\n         x2="53.962002"\n         y1="92"\n         x1="27.98" />\n      <line\n         id="line3947"\n         y2="47"\n         x2="53.962002"\n         y1="77"\n         x1="53.962002" />\n      <line\n         id="line3949"\n         y2="32"\n         x2="27.98"\n         y1="47"\n         x1="53.962002" />\n      <line\n         id="line3951"\n         y2="32"\n         x2="79.942001"\n         y1="47"\n         x1="53.962002" />\n      <line\n         id="line3953"\n         y2="92"\n         x2="79.942001"\n         y1="77"\n         x1="53.962002" />\n      <line\n         id="line3955"\n         y2="77"\n         x2="105.924"\n         y1="92"\n         x1="79.942001" />\n      <line\n         id="line3957"\n         y2="47"\n         x2="105.924"\n         y1="77"\n         x1="105.924" />\n      <line\n         id="line3959"\n         y2="32"\n         x2="79.942001"\n         y1="47"\n         x1="105.924" />\n      <line\n         id="line3961"\n         y2="2"\n         x2="27.9795"\n         y1="32"\n         x1="27.98" />\n      <line\n         id="line3963"\n         y2="2"\n         x2="79.941498"\n         y1="32"\n         x1="79.942001" />\n    </g>\n    <g\n       id="g3881"\n       transform="matrix(0.66797841,0,0,0.66797841,-81.933097,-38.115125)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-7"\n       transform="matrix(0.66797841,0,0,0.66797841,-210.7766,109.10718)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-6"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-1"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-2"\n       transform="matrix(0.66797841,0,0,0.66797841,-276.17313,72.504683)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-3"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-2"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-1"\n       transform="matrix(0.66797841,0,0,0.66797841,-276.17314,-1.722748)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-68"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-5"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-6"\n       transform="matrix(0.66797841,0,0,0.66797841,-210.77659,-38.895518)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-1"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-8"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-27"\n       transform="matrix(0.66797841,0,0,0.66797841,-146.06844,-3.787902)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-9"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-54"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-12"\n       transform="matrix(0.66797841,0,0,0.66797841,-146.75682,71.934407)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-33"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-4"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-13"\n       transform="matrix(0.66797841,0,0,0.66797841,-82.048668,108.41879)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-8"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-7"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-77"\n       transform="matrix(0.66797841,0,0,0.66797841,-18.028899,71.246022)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-93"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-19"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n    <g\n       id="g3881-65"\n       transform="matrix(0.66797841,0,0,0.66797841,-17.340514,-3.217626)">\n      <path\n         transform="matrix(1.5218776,0,0,1.1986594,108.10549,104.77721)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3171-15-0"\n         style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(0.45216823,0,0,0.38237687,355.75368,186.09229)"\n         d="m 255.97266,101.15045 c 0,16.59728 -11.08039,30.05204 -24.74874,30.05204 -13.66835,0 -24.74873,-13.45476 -24.74873,-30.05204 0,-16.597281 11.08038,-30.052037 24.74873,-30.052037 13.66835,0 24.74874,13.454756 24.74874,30.052037 z"\n         sodipodi:ry="30.052038"\n         sodipodi:rx="24.748737"\n         sodipodi:cy="101.15045"\n         sodipodi:cx="231.22392"\n         id="path3173-2-28"\n         style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:4.00000022"\n         sodipodi:type="arc" />\n    </g>\n  </g>\n</svg>\n',helpText:"Extend selection to ring blocks.",mnemonic:""},{id:"curelement",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="SelectionCurElement.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2853"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2915"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2915-8"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="-30.914228"\n     inkscape:cy="168.99852"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1920"\n     inkscape:window-height="1028"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <ellipse\n       ry="45.784992"\n       rx="47.872509"\n       cy="170"\n       cx="160.1275"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:5.40349102;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4;stroke-opacity:1"\n       id="path3171" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:79.51308441px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2841"\n       transform="translate(-1.19968,0)">\n      <path\n         d="m 162.0258,144.65547 -10.63798,28.84679 21.31479,0 -10.67681,-28.84679 z m -4.42602,-7.72612 8.89087,0 22.09128,57.96535 -8.1532,0 -5.28016,-14.86988 -26.12906,0 -5.28016,14.86988 -8.26967,0 22.1301,-57.96535 z"\n         id="path4196"\n         inkscape:connector-curvature="0" />\n    </g>\n    <ellipse\n       style="fill:#ffffff;fill-opacity:0.75;stroke:#000000;stroke-width:10.16818333;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:10.16818342, 30.50455026;stroke-dashoffset:0;stroke-opacity:1"\n       id="path3171-1-4"\n       cx="255.71176"\n       cy="259.69077"\n       rx="47.872509"\n       ry="45.784992" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:79.51308441px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2841-1">\n      <path\n         d="m 257.17732,233.76078 -10.63798,28.84678 21.31479,0 -10.67681,-28.84678 z m -4.42602,-7.72613 8.89087,0 22.09128,57.96535 -8.1532,0 -5.28016,-14.86988 -26.12906,0 -5.28016,14.86988 -8.26967,0 22.1301,-57.96535 z"\n         style=""\n         id="path4190" />\n    </g>\n    <ellipse\n       style="fill:#ffffff;fill-opacity:0.75;stroke:#000000;stroke-width:10.16818333;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:10.16818342, 30.50455026;stroke-dashoffset:0;stroke-opacity:1"\n       id="path3171-1-4-9"\n       cx="62.127495"\n       cy="260"\n       rx="47.872509"\n       ry="45.784992" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:79.51308441px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2841-1-4">\n      <path\n         d="m 63.593049,234.07001 -10.637981,28.84679 21.314787,0 -10.676806,-28.84679 z m -4.426021,-7.72612 8.890868,0 22.091281,57.96534 -8.153197,0 -5.280166,-14.86987 -26.129055,0 -5.280166,14.86987 -8.269671,0 22.130106,-57.96534 z"\n         style=""\n         id="path4187" />\n    </g>\n    <ellipse\n       style="fill:#ffffff;fill-opacity:0.75;stroke:#000000;stroke-width:10.16818333;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:10.16818342, 30.50455026;stroke-dashoffset:0;stroke-opacity:1"\n       id="path3171-1-4-5"\n       cx="160.1275"\n       cy="60"\n       rx="47.872509"\n       ry="45.784992" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:79.51308441px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2841-1-5"\n       transform="translate(-1.49992,0)">\n      <path\n         d="m 161.59305,34.070018 -10.63798,28.846788 21.31479,0 -10.67681,-28.846788 z m -4.42602,-7.726125 8.89087,0 22.09128,57.965349 -8.1532,0 -5.28017,-14.869878 -26.12905,0 -5.28017,14.869878 -8.26967,0 22.13011,-57.965349 z"\n         id="path4193"\n         inkscape:connector-curvature="0" />\n    </g>\n  </g>\n</svg>\n',helpText:"Select all atoms of current element type.",mnemonic:""},{id:"selprev",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="SelectionPrev.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="189.90735"\n     inkscape:cy="158.99107"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="104"\n     showgrid="false" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 144.95689,266.25988 L 265.16504,266.25988 L 266.57925,147.46595 L 144.95689,266.25988 z "\n       id="path3273"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 55.861434,55.542071 L 56.568541,172.21469 L 171.82694,55.542071 L 55.861434,55.542071 z "\n       id="path3271" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3241"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-241.68207,-85.517816)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3288"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,49.161297,11.157237)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3171"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-357.86079,-84.223172)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-66.598595,11.412514)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3177"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,142.705,101.92218)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3249"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-357.45883,29.712228)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3181"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-65.891485,125.72117)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3185"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,23.082644,220.5948)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3189"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,142.11922,219.76637)" />\n  </g>\n</svg>\n',helpText:"Select previous connected component.",mnemonic:"["},{id:"selnext",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="SelectionNext.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="189.90735"\n     inkscape:cy="158.99107"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="false" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 144.95689,266.25988 L 265.16504,266.25988 L 266.57925,147.46595 L 144.95689,266.25988 z "\n       id="path3273"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 55.861434,55.542071 L 56.568541,172.21469 L 171.82694,55.542071 L 55.861434,55.542071 z "\n       id="path3271" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3288"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,49.161297,11.157237)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3173"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-66.598595,11.412514)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3243"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-148.59123,4.5160638)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3177"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,142.705,101.92218)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3181"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,-65.891485,125.72117)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3247"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-266.7094,126.04463)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3185"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,23.082644,220.5948)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:3.14762712;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3245"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(1.7898996,0,0,1.4097586,-148.49437,124.16046)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#6c6666;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:4.00000022;stroke-opacity:1"\n       id="path3189"\n       sodipodi:cx="231.22392"\n       sodipodi:cy="101.15045"\n       sodipodi:rx="24.748737"\n       sodipodi:ry="30.052038"\n       d="M 255.97266 101.15045 A 24.748737 30.052038 0 1 1  206.47519,101.15045 A 24.748737 30.052038 0 1 1  255.97266 101.15045 z"\n       transform="matrix(0.5318008,0,0,0.4497183,142.11922,219.76637)" />\n  </g>\n</svg>\n',helpText:"Select next connected component.",mnemonic:"]"},{id:"toggle",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="SelectionToggle.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3832"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3967"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-4"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-7"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-9"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-3"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-42"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-8"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2885"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2908"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="90.708135"\n     inkscape:cy="170.41273"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:0.75294118;stroke:#000000;stroke-width:4.25;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"\n       d="m 160,244 c -46.9442,0 -85,-38.0558 -85,-85 0,-46.9442 38.0558,-85 85,-85 l 0,170 z"\n       id="path2875-1"\n       sodipodi:nodetypes="cscc" />\n    <path\n       style="fill:#000000;fill-opacity:0.75294118;stroke:#000000;stroke-width:4.25;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"\n       d="m 160,244 c 46.9442,0 85,-38.0558 85,-85 0,-46.9442 -38.0558,-85 -85,-85 l 0,170 z"\n       id="path2875-1-7"\n       sodipodi:nodetypes="cscc" />\n  </g>\n</svg>\n',helpText:"Toggle selection of current.",mnemonic:","},{id:"uncurrent",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="SelectionUncurrent.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/AtomEdit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective20" />\n    <inkscape:perspective\n       id="perspective2876"\n       inkscape:persp3d-origin="54 : 26.333333 : 1"\n       inkscape:vp_z="108 : 39.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 39.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2895"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3692"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3742-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3832"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3853-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3967"\n       inkscape:persp3d-origin="54 : 31.333333 : 1"\n       inkscape:vp_z="108 : 47 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 47 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-4"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-2"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-7"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-9"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-3"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-42"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3992-8"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2885"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2908"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4142136"\n     inkscape:cx="-40.106616"\n     inkscape:cy="170.41273"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1850"\n     inkscape:window-height="1156"\n     inkscape:window-x="70"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid3770" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:0.75294118;stroke:#000000;stroke-width:4.25;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"\n       d="M 160 74 C 113.0558 74 75 112.0558 75 159 C 75 205.9442 113.0558 244 160 244 C 206.9442 244 245 205.9442 245 159 C 245 112.0558 206.9442 74 160 74 z "\n       id="path2875-1" />\n  </g>\n</svg>\n',helpText:"Undefine current object.",mnemonic:"."},{id:"join",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MoveJoin.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM01.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="204.69707"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 10,160 L 310,160"\n       id="path2161" />\n    <path\n       sodipodi:type="arc"\n       style="fill:#000000;fill-opacity:1"\n       id="path2163"\n       sodipodi:cx="160.35715"\n       sodipodi:cy="160.71428"\n       sodipodi:rx="10.357142"\n       sodipodi:ry="10"\n       d="M 170.71429 160.71428 A 10.357142 10 0 1 1  150,160.71428 A 10.357142 10 0 1 1  170.71429 160.71428 z"\n       transform="matrix(1.9310346,0,0,2,-149.65519,-161.42855)" />\n    <path\n       sodipodi:type="arc"\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:10.5;stroke-miterlimit:4;stroke-dasharray:10.5, 21;stroke-dashoffset:0;stroke-opacity:1"\n       id="path3136"\n       sodipodi:cx="160"\n       sodipodi:cy="159.64285"\n       sodipodi:rx="40"\n       sodipodi:ry="39.642857"\n       d="M 200 159.64285 A 40 39.642857 0 1 1  120,159.64285 A 40 39.642857 0 1 1  200 159.64285 z"\n       transform="matrix(0.8835172,0,0,0.8914768,18.63725,17.682092)" />\n  </g>\n</svg>\n',helpText:"Overlapping atoms will be joined as one.",mnemonic:""},{id:"new",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MainNew.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainNew.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3748">\n      <stop\n         id="stop3750"\n         offset="0"\n         style="stop-color:#b1b1b1;stop-opacity:1;" />\n      <stop\n         id="stop3752"\n         offset="1"\n         style="stop-color:#f8f8f8;stop-opacity:1;" />\n    </linearGradient>\n    <linearGradient\n       id="linearGradient3732">\n      <stop\n         style="stop-color:#2c2c2c;stop-opacity:0.75294119;"\n         offset="0"\n         id="stop3734" />\n      <stop\n         style="stop-color:#aaaaaa;stop-opacity:0.75294119;"\n         offset="1"\n         id="stop3736" />\n    </linearGradient>\n    <linearGradient\n       id="linearGradient3724">\n      <stop\n         style="stop-color:#888888;stop-opacity:1;"\n         offset="0"\n         id="stop3726" />\n      <stop\n         style="stop-color:#000000;stop-opacity:0;"\n         offset="1"\n         id="stop3728" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective14" />\n    <linearGradient\n       id="linearGradient3302">\n      <stop\n         style="stop-color:#9d9d9d;stop-opacity:1;"\n         offset="0"\n         id="stop3304" />\n      <stop\n         style="stop-color:#dfdfdf;stop-opacity:1;"\n         offset="1"\n         id="stop3306" />\n    </linearGradient>\n    <inkscape:perspective\n       id="perspective2858"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2858-1"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2858-4"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2919"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3732"\n       id="radialGradient3738"\n       cx="162.18814"\n       cy="173.88938"\n       fx="162.18814"\n       fy="173.88938"\n       r="121.40368"\n       gradientTransform="matrix(1,0,0,0.99372304,0,1.0914969)"\n       gradientUnits="userSpaceOnUse" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3748"\n       id="radialGradient3746"\n       cx="159.69394"\n       cy="159.28571"\n       fx="159.69394"\n       fy="159.28571"\n       r="155.90823"\n       gradientTransform="matrix(1,0,0,1.0019631,0,-0.31268812)"\n       gradientUnits="userSpaceOnUse" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="51.002171"\n     inkscape:cy="165.43111"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1283"\n     inkscape:window-height="842"\n     inkscape:window-x="23"\n     inkscape:window-y="14"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:url(#radialGradient3738);stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1;stroke-miterlimit:4;stroke-dasharray:none;opacity:1"\n       d="M 70.323695,204.27689 C 41.841631,206.80461 27.43488,166.54249 59.305446,137.55529 49.873891,113.58226 39.63241,89.128318 90.523819,87.361033 106.27301,49.269942 126.50785,43.380107 172.54857,70.221535 c 24.08035,-4.949896 54.09769,-38.514586 71.00648,30.606245 42.5116,9.78214 51.34305,33.15299 23.87288,77.12773 16.04417,28.54308 14.43112,49.54596 -18.36375,56.92763 0.70405,25.67554 0.0649,50.80591 -47.13361,31.8305 -27.699,35.95486 -57.19689,38.30078 -88.146,-3.67275 -34.966493,0.38164 -56.960187,2.40605 -43.460875,-58.764 z"\n       id="path2948"\n       sodipodi:nodetypes="cccccccccc" />\n    <path\n       style="fill:url(#radialGradient3746);stroke:#000000;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1;stroke-miterlimit:4;stroke-dasharray:none;opacity:1"\n       d="M 77.05707,182.24039 C 63.933812,160.98392 31.572476,151.75124 4.2142019,139.39165 30.679923,141.54169 57.327987,144.60344 81.954069,137.55529 72.559539,108.605 63.929901,79.569724 37.881073,52.469912 c 24.509908,20.813833 50.021015,38.957802 80.188367,44.68512 4.8179,-29.638769 8.20842,-60.229129 7.3455,-93.6551159 7.91156,33.7919259 24.82706,63.0818819 44.073,91.2066169 18.18443,-22.393883 31.73946,-46.639529 40.40025,-72.842869 -3.97926,28.157749 -6.10209,56.315497 1.22425,84.473246 30.1815,-5.53135 54.99364,-18.221839 79.57624,-31.218376 -21.4992,23.026775 -42.89749,46.093916 -55.09124,72.842866 25.48741,8.04662 52.18744,10.03009 79.57624,8.56974 -29.54737,11.57525 -58.76632,23.25998 -77.12774,38.56388 12.53395,26.2048 32.69325,46.69059 52.64274,67.33374 -25.06648,-10.42451 -44.73179,-24.08972 -78.35199,-29.38199 -3.69624,29.59544 5.33453,54.10007 10.40613,80.18837 -17.43375,-21.93842 -27.4327,-46.35509 -60.60037,-63.04887 -35.09654,11.6295 -42.37898,40.95888 -58.15188,64.88524 4.3981,-26.75973 7.48188,-53.95757 0.61212,-84.47325 -28.70497,-0.76993 -55.11896,14.49699 -82.02474,26.32138 19.90929,-22.09375 43.397129,-38.46182 54.47912,-74.67925 z"\n       id="path2950"\n       sodipodi:nodetypes="ccccccccccccccccccccc" />\n    <g\n       id="g2933"\n       transform="matrix(0.66308916,0,0,0.66308916,51.085812,66.604893)">\n      <path\n         transform="matrix(4.1274211,0,0,4.7037667,-168.76512,-87.437593)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3146-8-5"\n         style="fill:#000000;fill-opacity:1;stroke:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(4.1274211,0,0,4.7037667,-170.1158,-189.26245)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3150-9"\n         style="fill:#000000;fill-opacity:1;stroke:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(4.1274211,0,0,4.7037667,-231.66709,-98.469883)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3146"\n         style="fill:#000000;fill-opacity:1;stroke:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(3.9083767,0,0,4.4541355,-99.709926,-156.21097)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3148"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(3.9083767,0,0,4.4541355,-189.70992,-49.068112)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3148-0"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(4.1274211,0,0,4.7037667,-133.68722,-145.69101)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3150-4"\n         style="fill:#000000;fill-opacity:1;stroke:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(3.9083767,0,0,4.4541355,-209.20179,-147.34435)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path2173"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(4.1274211,0,0,4.7037667,-148.68722,-55.691026)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3150"\n         style="fill:#000000;fill-opacity:1;stroke:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(4.1274211,0,0,4.7037667,-198.80993,-119.18415)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3146-8"\n         style="fill:#000000;fill-opacity:1;stroke:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(3.9083767,0,0,4.4541355,-93.487486,-110.91579)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path2173-7"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(3.9083767,0,0,4.4541355,-152.05893,-154.48722)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path2173-8"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(3.9083767,0,0,4.4541355,-144.70993,-87.639533)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3148-2"\n         style="fill:#ffffff;fill-opacity:1;stroke:#050404;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n         sodipodi:type="arc" />\n      <path\n         transform="matrix(4.1274211,0,0,4.7037667,-104.52421,-89.184173)"\n         d="m 89.285714,59.285713 c 0,4.733869 -4.157356,8.571428 -9.285714,8.571428 -5.128358,0 -9.285714,-3.837559 -9.285714,-8.571428 0,-4.733869 4.157356,-8.571428 9.285714,-8.571428 5.128358,0 9.285714,3.837559 9.285714,8.571428 z"\n         sodipodi:ry="8.5714283"\n         sodipodi:rx="9.2857141"\n         sodipodi:cy="59.285713"\n         sodipodi:cx="80"\n         id="path3146-4"\n         style="fill:#000000;fill-opacity:1;stroke:none"\n         sodipodi:type="arc" />\n    </g>\n  </g>\n</svg>\n',helpText:"Clear the molecular structure.",mnemonic:""},{id:"inline",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomInline.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/iMMDS/res/actions/GenericBack.png"\n   inkscape:export-xdpi="12.375"\n   inkscape:export-ydpi="12.375">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3690">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.75294119;"\n         offset="0"\n         id="stop3692" />\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.25098041;"\n         offset="1"\n         id="stop3694" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2906" />\n    <linearGradient\n       id="linearGradient3136">\n      <stop\n         style="stop-color:#b2a5a5;stop-opacity:0.50196081;"\n         offset="0"\n         id="stop3138" />\n      <stop\n         style="stop-color:#000000;stop-opacity:0.19607843;"\n         offset="1"\n         id="stop3140" />\n    </linearGradient>\n    <linearGradient\n       id="linearGradient3204">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:1;"\n         offset="0"\n         id="stop3206" />\n      <stop\n         id="stop3212"\n         offset="1"\n         style="stop-color:#000000;stop-opacity:0.29591838;" />\n    </linearGradient>\n    <linearGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3136"\n       id="linearGradient3142"\n       x1="301.78571"\n       y1="158.57143"\n       x2="6.0714264"\n       y2="158.57143"\n       gradientUnits="userSpaceOnUse"\n       gradientTransform="matrix(0.8629045,0,0,0.8712017,23.773609,21.988053)" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3696"\n       cx="140"\n       cy="140"\n       fx="140"\n       fy="140"\n       r="142.5"\n       gradientUnits="userSpaceOnUse" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3704"\n       gradientUnits="userSpaceOnUse"\n       cx="140"\n       cy="140"\n       fx="140"\n       fy="140"\n       r="142.5" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#00faff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98125"\n     inkscape:cx="72.356688"\n     inkscape:cy="160"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1213"\n     inkscape:window-height="876"\n     inkscape:window-x="161"\n     inkscape:window-y="103"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2908"\n       empspacing="5"\n       visible="true"\n       enabled="true"\n       snapvisiblegridlinesonly="true" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:url(#radialGradient3704);fill-opacity:1;stroke:#000000;stroke-width:10.24196363;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2910"\n       sodipodi:cx="140"\n       sodipodi:cy="140"\n       sodipodi:rx="140"\n       sodipodi:ry="140"\n       d="m 280,140 a 140,140 0 1 1 -280,0 140,140 0 1 1 280,0 z"\n       transform="matrix(0.97637527,0,0,0.97637527,39.246505,23.488986)" />\n    <g\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:condensed;font-size:124.49204254px;font-family:\'Arial Narrow\';-inkscape-font-specification:\'Arial Narrow Bold Condensed\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2912">\n      <path\n         d="m 136.41046,198 -6.20029,-21.88337 -26.74634,0 L 97.263545,198 l -14.710486,0 25.591381,-85.64907 17.32433,0 25.5306,85.64907 -14.58891,0 z m -16.41253,-59.9969 q 0,0 -1.21574,-4.31588 -0.54709,-2.12755 -0.9726,-3.89038 l -0.72944,-2.97857 q -0.24315,-1.15495 -0.24315,-1.27653 -0.0608,0.18236 -0.30393,1.33732 -0.24315,1.15495 -0.66866,2.91778 -0.42551,1.76283 -0.9726,3.89038 l -1.21574,4.31588 -6.92973,24.61879 20.18132,0 -6.92973,-24.61879 z"\n         style=""\n         id="path4152" />\n      <path\n         d="m 211.84729,164.87101 q 0,7.47682 -1.21575,13.79868 -1.21574,6.26108 -3.7688,10.8809 -2.55306,4.55903 -6.50422,7.11209 -3.89038,2.55306 -9.17886,2.55306 -2.3707,0 -4.80218,-0.60787 -2.3707,-0.60787 -4.55904,-2.00597 -2.12754,-1.39811 -3.95116,-3.64723 -1.76283,-2.24913 -3.03936,-5.53163 l -0.12157,0 q 0,1.27653 -0.0608,2.91778 -0.0608,1.64125 -0.18236,3.22172 -0.12157,1.51968 -0.24315,2.73542 -0.12157,1.21574 -0.18236,1.70204 l -13.61631,0 q 0.12157,-2.12755 0.24314,-6.01793 0.12158,-3.95116 0.12158,-8.99649 l 0,-75.19368 14.04182,0 0,25.16587 q 0,1.94519 -0.0608,3.82959 0,1.82361 -0.0608,3.40408 -0.0608,1.82361 -0.12157,3.46487 l 0.24314,0 q 2.55306,-6.80816 6.99052,-9.72595 4.43747,-2.91778 10.27303,-2.91778 5.16691,0 8.87492,2.55306 3.7688,2.49227 6.1395,7.05131 2.43149,4.49825 3.58644,10.69853 1.15496,6.20029 1.15496,13.55553 z m -14.58891,0 q 0,-11.18483 -2.73542,-16.59488 -2.67464,-5.41006 -8.26705,-5.41006 -2.12755,0 -4.2551,1.03338 -2.12755,1.03339 -3.76881,3.64723 -1.64125,2.55306 -2.67463,6.92973 -0.97259,4.31589 -0.97259,10.94169 0,6.44343 0.97259,10.69853 1.03338,4.2551 2.61385,6.80816 1.64125,2.55306 3.70801,3.58644 2.12755,1.03338 4.2551,1.03338 5.34927,0 8.20626,-5.34926 2.91779,-5.41006 2.91779,-17.32434 z"\n         style=""\n         id="path4154" />\n      <path\n         d="m 252.57467,198 -16.71646,0 -19.26952,-65.77167 14.77127,0 9.42201,36.77621 q 0,0 0.9118,3.82959 0.54709,2.06676 0.9726,4.07274 l 0.9118,3.89037 q 0.42551,1.8844 0.72945,3.40408 0.30393,-1.45889 0.79023,-3.34329 l 0.91181,-3.82959 1.03338,-4.01195 0.97259,-3.82959 9.84752,-36.95857 14.6497,0 L 252.57467,198 Z"\n         style=""\n         id="path4156" />\n    </g>\n    <path\n       style="color:#000000;fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:17.34259796;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"\n       d="m 8.105653,160.47283 23.562761,0"\n       id="path2916" />\n  </g>\n</svg>\n',helpText:"Make selected atoms into an inline abbreviation.",mnemonic:"/"},{id:"formula",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomFormula.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/iMMDS/res/actions/GenericBack.png"\n   inkscape:export-xdpi="12.375"\n   inkscape:export-ydpi="12.375">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3690">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.75294119;"\n         offset="0"\n         id="stop3692" />\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.25098041;"\n         offset="1"\n         id="stop3694" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2906" />\n    <linearGradient\n       id="linearGradient3136">\n      <stop\n         style="stop-color:#b2a5a5;stop-opacity:0.50196081;"\n         offset="0"\n         id="stop3138" />\n      <stop\n         style="stop-color:#000000;stop-opacity:0.19607843;"\n         offset="1"\n         id="stop3140" />\n    </linearGradient>\n    <linearGradient\n       id="linearGradient3204">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:1;"\n         offset="0"\n         id="stop3206" />\n      <stop\n         id="stop3212"\n         offset="1"\n         style="stop-color:#000000;stop-opacity:0.29591838;" />\n    </linearGradient>\n    <linearGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3136"\n       id="linearGradient3142"\n       x1="301.78571"\n       y1="158.57143"\n       x2="6.0714264"\n       y2="158.57143"\n       gradientUnits="userSpaceOnUse"\n       gradientTransform="matrix(0.8629045,0,0,0.8712017,23.773609,21.988053)" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3696"\n       cx="140"\n       cy="140"\n       fx="140"\n       fy="140"\n       r="142.5"\n       gradientUnits="userSpaceOnUse" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3704"\n       gradientUnits="userSpaceOnUse"\n       cx="140"\n       cy="140"\n       fx="140"\n       fy="140"\n       r="142.5" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3645"\n       cx="165"\n       cy="160"\n       fx="165"\n       fy="160"\n       r="130"\n       gradientTransform="matrix(1,0,0,0.80769231,0,30.769231)"\n       gradientUnits="userSpaceOnUse" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#00faff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.1503782"\n     inkscape:cx="147.23233"\n     inkscape:cy="155.47208"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1213"\n     inkscape:window-height="876"\n     inkscape:window-x="161"\n     inkscape:window-y="103"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2908"\n       empspacing="5"\n       visible="true"\n       enabled="true"\n       snapvisiblegridlinesonly="true" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <rect\n       style="fill:url(#radialGradient3645);fill-opacity:1.0;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"\n       id="rect2865"\n       width="250"\n       height="200"\n       x="40"\n       y="60" />\n    <g\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:condensed;font-size:124.49204254px;font-family:\'Arial Narrow\';-inkscape-font-specification:\'Arial Narrow Bold Condensed\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2912">\n      <path\n         d="m 103.57242,189.11313 q 4.13353,0 7.17288,-1.39811 3.03936,-1.45889 5.2277,-3.7688 2.24912,-2.30991 3.70801,-5.22769 1.45889,-2.91778 2.43149,-5.89635 l 12.76529,5.89635 q -1.51967,4.61982 -4.01195,9.05728 -2.49227,4.43746 -6.26107,7.84154 -3.70802,3.40408 -8.87492,5.53163 -5.16691,2.06676 -12.15743,2.06676 -9.118068,0 -15.804652,-3.2825 -6.625797,-3.34329 -11.002471,-9.23965 -4.376673,-5.95713 -6.504223,-14.10261 -2.066762,-8.14548 -2.066762,-17.81063 0,-10.02988 2.066762,-18.11456 2.12755,-8.08469 6.382649,-13.7379 4.315886,-5.71399 10.880896,-8.75334 6.56501,-3.10015 15.439931,-3.10015 6.86895,0 12.03585,1.76283 5.16691,1.76283 8.87492,4.98455 3.76881,3.16093 6.20029,7.5376 2.49227,4.31589 3.89038,9.54358 l -12.94766,4.31589 q -0.66866,-2.73543 -2.12755,-5.2277 -1.45889,-2.55306 -3.70802,-4.49825 -2.18833,-1.94518 -5.1669,-3.10014 -2.97857,-1.21574 -6.74737,-1.21574 -5.349271,0 -9.178861,2.12755 -3.829589,2.06676 -6.321861,5.95714 -2.431485,3.89037 -3.647228,9.36121 -1.154955,5.41006 -1.154955,12.15743 0,6.68658 1.154955,12.279 1.215743,5.53163 3.708015,9.54358 2.492272,4.01195 6.382649,6.26107 3.890376,2.24913 9.361216,2.24913 z"\n         style=""\n         id="path4157" />\n      <path\n         d="m 218.21695,202 0,-36.71543 -30.57592,0 0,36.71543 -14.71049,0 0,-85.64907 14.71049,0 0,34.10158 30.57592,0 0,-34.10158 14.71049,0 0,85.64907 -14.71049,0 z"\n         style=""\n         id="path4159" />\n    </g>\n    <path\n       style="color:#000000;fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:17.34259796;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"\n       d="m 8.105653,160.47283 23.562761,0"\n       id="path2916" />\n    <g\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:condensed;font-size:87.69158173px;font-family:\'Arial Narrow\';-inkscape-font-specification:\'Arial Narrow Bold Condensed\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2857">\n      <path\n         d="m 162.47581,218.36884 -8.86336,-16.78472 -8.90617,16.78472 -10.53327,0 13.9159,-23.93535 -13.23081,-22.3939 10.66172,0 8.09263,15.15763 8.09263,-15.15763 10.70454,0 -13.23081,22.26544 14.00154,24.06381 -10.70454,0 z"\n         style=""\n         id="path4162" />\n    </g>\n    <g\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:condensed;font-size:87.69158173px;font-family:\'Arial Narrow\';-inkscape-font-specification:\'Arial Narrow Bold Condensed\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2861">\n      <path\n         d="m 260.83842,220.80946 q -1.37018,4.06772 -2.78318,7.02217 -1.41299,2.95446 -3.12572,4.88127 -1.66991,1.96964 -3.81082,2.91164 -2.09809,0.942 -4.92408,0.942 -1.54146,0 -3.16855,-0.12846 -1.58427,-0.12845 -3.04009,-0.42818 l 0,-8.56363 q 0.68509,0.12845 1.66991,0.21409 1.02764,0.12845 1.71273,0.12845 1.45581,0 2.56909,-0.38536 1.15609,-0.38536 2.05527,-1.28454 0.89918,-0.89918 1.66991,-2.39782 0.81354,-1.49864 1.54145,-3.768 l 0.64227,-2.05527 -15.02917,-45.85824 10.44763,0 5.95172,21.7088 q 0,0 0.42818,1.58427 l 0.68509,2.56909 0.77073,2.99727 0.72791,2.99727 q 0.34255,1.45582 0.55664,2.56909 0.25691,1.11328 0.38536,1.58427 0.0856,-0.47099 0.29973,-1.58427 l 0.55663,-2.48345 0.64227,-2.91163 0.6851,-2.95446 0.55663,-2.52627 q 0.25691,-1.15609 0.42818,-1.66991 l 5.60918,-21.88007 10.31918,0 -15.02918,48.76988 z"\n         style=""\n         id="path4165" />\n    </g>\n  </g>\n</svg>\n',helpText:"Make selected atoms into their molecule formula.",mnemonic:"\\"},{id:"expandabbrev",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomExpandAbbrev.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/iMMDS/res/actions/GenericBack.png"\n   inkscape:export-xdpi="12.375"\n   inkscape:export-ydpi="12.375">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3690">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.75294119;"\n         offset="0"\n         id="stop3692" />\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.25098041;"\n         offset="1"\n         id="stop3694" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2906" />\n    <linearGradient\n       id="linearGradient3136">\n      <stop\n         style="stop-color:#b2a5a5;stop-opacity:0.50196081;"\n         offset="0"\n         id="stop3138" />\n      <stop\n         style="stop-color:#000000;stop-opacity:0.19607843;"\n         offset="1"\n         id="stop3140" />\n    </linearGradient>\n    <linearGradient\n       id="linearGradient3204">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:1;"\n         offset="0"\n         id="stop3206" />\n      <stop\n         id="stop3212"\n         offset="1"\n         style="stop-color:#000000;stop-opacity:0.29591838;" />\n    </linearGradient>\n    <linearGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3136"\n       id="linearGradient3142"\n       x1="301.78571"\n       y1="158.57143"\n       x2="6.0714264"\n       y2="158.57143"\n       gradientUnits="userSpaceOnUse"\n       gradientTransform="matrix(0.8629045,0,0,0.8712017,23.773609,21.988053)" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3696"\n       cx="140"\n       cy="140"\n       fx="140"\n       fy="140"\n       r="142.5"\n       gradientUnits="userSpaceOnUse" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#00faff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.9625"\n     inkscape:cx="167.64331"\n     inkscape:cy="160"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1920"\n     inkscape:window-height="1028"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     inkscape:snap-midpoints="true"\n     inkscape:snap-intersection-paths="true"\n     inkscape:object-paths="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2908"\n       empspacing="5"\n       visible="true"\n       enabled="true"\n       snapvisiblegridlinesonly="true" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:condensed;font-size:124.49204254px;font-family:\'Arial Narrow\';-inkscape-font-specification:\'Arial Narrow Bold Condensed\';fill:#929292;fill-opacity:1;stroke:none"\n       id="text2912">\n      <path\n         d="m 136.41046,202 -6.20029,-21.88337 -26.74634,0 L 97.263545,202 l -14.710486,0 25.591381,-85.64907 17.32433,0 25.5306,85.64907 -14.58891,0 z m -16.41253,-59.9969 q 0,0 -1.21574,-4.31588 -0.54709,-2.12755 -0.9726,-3.89038 l -0.72944,-2.97857 q -0.24315,-1.15495 -0.24315,-1.27653 -0.0608,0.18236 -0.30393,1.33732 -0.24315,1.15495 -0.66866,2.91778 -0.42551,1.76283 -0.9726,3.89038 l -1.21574,4.31588 -6.92973,24.61879 20.18132,0 -6.92973,-24.61879 z"\n         style=""\n         id="path4723" />\n      <path\n         d="m 211.84729,168.87101 q 0,7.47682 -1.21575,13.79868 -1.21574,6.26108 -3.7688,10.8809 -2.55306,4.55903 -6.50422,7.11209 -3.89038,2.55306 -9.17886,2.55306 -2.3707,0 -4.80218,-0.60787 -2.3707,-0.60787 -4.55904,-2.00597 -2.12754,-1.39811 -3.95116,-3.64723 -1.76283,-2.24913 -3.03936,-5.53163 l -0.12157,0 q 0,1.27653 -0.0608,2.91778 -0.0608,1.64125 -0.18236,3.22172 -0.12157,1.51968 -0.24315,2.73542 -0.12157,1.21574 -0.18236,1.70204 l -13.61631,0 q 0.12157,-2.12755 0.24314,-6.01793 0.12158,-3.95116 0.12158,-8.99649 l 0,-75.19368 14.04182,0 0,25.16587 q 0,1.94519 -0.0608,3.82959 0,1.82361 -0.0608,3.40408 -0.0608,1.82361 -0.12157,3.46487 l 0.24314,0 q 2.55306,-6.80816 6.99052,-9.72595 4.43747,-2.91778 10.27303,-2.91778 5.16691,0 8.87492,2.55306 3.7688,2.49227 6.1395,7.05131 2.43149,4.49825 3.58644,10.69853 1.15496,6.20029 1.15496,13.55553 z m -14.58891,0 q 0,-11.18483 -2.73542,-16.59488 -2.67464,-5.41006 -8.26705,-5.41006 -2.12755,0 -4.2551,1.03338 -2.12755,1.03339 -3.76881,3.64723 -1.64125,2.55306 -2.67463,6.92973 -0.97259,4.31589 -0.97259,10.94169 0,6.44343 0.97259,10.69853 1.03338,4.2551 2.61385,6.80816 1.64125,2.55306 3.70801,3.58644 2.12755,1.03338 4.2551,1.03338 5.34927,0 8.20626,-5.34926 2.91779,-5.41006 2.91779,-17.32434 z"\n         style=""\n         id="path4725" />\n      <path\n         d="m 252.57467,202 -16.71646,0 -19.26952,-65.77167 14.77127,0 9.42201,36.77621 q 0,0 0.9118,3.82959 0.54709,2.06676 0.9726,4.07274 l 0.9118,3.89037 q 0.42551,1.8844 0.72945,3.40408 0.30393,-1.45889 0.79023,-3.34329 l 0.91181,-3.82959 1.03338,-4.01195 0.97259,-3.82959 9.84752,-36.95857 14.6497,0 L 252.57467,202 Z"\n         style=""\n         id="path4727" />\n    </g>\n    <path\n       style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:17.34300041;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"\n       d="m 8.105653,164.47283 63.562761,0"\n       id="path2916"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cc" />\n    <path\n       id="path4449"\n       d="M 209.1153,300.40828 165.33392,216.00234"\n       style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:17.34300041;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cc" />\n    <path\n       sodipodi:nodetypes="cc"\n       inkscape:connector-curvature="0"\n       style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:17.34300041;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"\n       d="M 165.33392,98.40828 209.1153,14.00234"\n       id="path4451" />\n  </g>\n</svg>\n',helpText:"Expand out the inline abbreviation.",mnemonic:"Shift+/",key:"?"},{id:"clearabbrev",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="AtomClearAbbrev.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/iMMDS/res/actions/GenericBack.png"\n   inkscape:export-xdpi="12.375"\n   inkscape:export-ydpi="12.375">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3690">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.75294119;"\n         offset="0"\n         id="stop3692" />\n      <stop\n         style="stop-color:#ffffff;stop-opacity:0.25098041;"\n         offset="1"\n         id="stop3694" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective2906" />\n    <linearGradient\n       id="linearGradient3136">\n      <stop\n         style="stop-color:#b2a5a5;stop-opacity:0.50196081;"\n         offset="0"\n         id="stop3138" />\n      <stop\n         style="stop-color:#000000;stop-opacity:0.19607843;"\n         offset="1"\n         id="stop3140" />\n    </linearGradient>\n    <linearGradient\n       id="linearGradient3204">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:1;"\n         offset="0"\n         id="stop3206" />\n      <stop\n         id="stop3212"\n         offset="1"\n         style="stop-color:#000000;stop-opacity:0.29591838;" />\n    </linearGradient>\n    <linearGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3136"\n       id="linearGradient3142"\n       x1="301.78571"\n       y1="158.57143"\n       x2="6.0714264"\n       y2="158.57143"\n       gradientUnits="userSpaceOnUse"\n       gradientTransform="matrix(0.8629045,0,0,0.8712017,23.773609,21.988053)" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3696"\n       cx="140"\n       cy="140"\n       fx="140"\n       fy="140"\n       r="142.5"\n       gradientUnits="userSpaceOnUse" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3690"\n       id="radialGradient3704"\n       gradientUnits="userSpaceOnUse"\n       cx="140"\n       cy="140"\n       fx="140"\n       fy="140"\n       r="142.5" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#00faff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98125"\n     inkscape:cx="80.025296"\n     inkscape:cy="157.96178"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1920"\n     inkscape:window-height="1028"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="true"\n     inkscape:object-nodes="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2908"\n       empspacing="5"\n       visible="true"\n       enabled="true"\n       snapvisiblegridlinesonly="true" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:condensed;font-size:124.49204254px;font-family:\'Arial Narrow\';-inkscape-font-specification:\'Arial Narrow Bold Condensed\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text2912">\n      <path\n         d="m 136.41046,198 -6.20029,-21.88337 -26.74634,0 L 97.263545,198 l -14.710486,0 25.591381,-85.64907 17.32433,0 25.5306,85.64907 -14.58891,0 z m -16.41253,-59.9969 q 0,0 -1.21574,-4.31588 -0.54709,-2.12755 -0.9726,-3.89038 l -0.72944,-2.97857 q -0.24315,-1.15495 -0.24315,-1.27653 -0.0608,0.18236 -0.30393,1.33732 -0.24315,1.15495 -0.66866,2.91778 -0.42551,1.76283 -0.9726,3.89038 l -1.21574,4.31588 -6.92973,24.61879 20.18132,0 -6.92973,-24.61879 z"\n         style=""\n         id="path4716" />\n      <path\n         d="m 211.84729,164.87101 q 0,7.47682 -1.21575,13.79868 -1.21574,6.26108 -3.7688,10.8809 -2.55306,4.55903 -6.50422,7.11209 -3.89038,2.55306 -9.17886,2.55306 -2.3707,0 -4.80218,-0.60787 -2.3707,-0.60787 -4.55904,-2.00597 -2.12754,-1.39811 -3.95116,-3.64723 -1.76283,-2.24913 -3.03936,-5.53163 l -0.12157,0 q 0,1.27653 -0.0608,2.91778 -0.0608,1.64125 -0.18236,3.22172 -0.12157,1.51968 -0.24315,2.73542 -0.12157,1.21574 -0.18236,1.70204 l -13.61631,0 q 0.12157,-2.12755 0.24314,-6.01793 0.12158,-3.95116 0.12158,-8.99649 l 0,-75.19368 14.04182,0 0,25.16587 q 0,1.94519 -0.0608,3.82959 0,1.82361 -0.0608,3.40408 -0.0608,1.82361 -0.12157,3.46487 l 0.24314,0 q 2.55306,-6.80816 6.99052,-9.72595 4.43747,-2.91778 10.27303,-2.91778 5.16691,0 8.87492,2.55306 3.7688,2.49227 6.1395,7.05131 2.43149,4.49825 3.58644,10.69853 1.15496,6.20029 1.15496,13.55553 z m -14.58891,0 q 0,-11.18483 -2.73542,-16.59488 -2.67464,-5.41006 -8.26705,-5.41006 -2.12755,0 -4.2551,1.03338 -2.12755,1.03339 -3.76881,3.64723 -1.64125,2.55306 -2.67463,6.92973 -0.97259,4.31589 -0.97259,10.94169 0,6.44343 0.97259,10.69853 1.03338,4.2551 2.61385,6.80816 1.64125,2.55306 3.70801,3.58644 2.12755,1.03338 4.2551,1.03338 5.34927,0 8.20626,-5.34926 2.91779,-5.41006 2.91779,-17.32434 z"\n         style=""\n         id="path4718" />\n      <path\n         d="m 252.57467,198 -16.71646,0 -19.26952,-65.77167 14.77127,0 9.42201,36.77621 q 0,0 0.9118,3.82959 0.54709,2.06676 0.9726,4.07274 l 0.9118,3.89037 q 0.42551,1.8844 0.72945,3.40408 0.30393,-1.45889 0.79023,-3.34329 l 0.91181,-3.82959 1.03338,-4.01195 0.97259,-3.82959 9.84752,-36.95857 14.6497,0 L 252.57467,198 Z"\n         style=""\n         id="path4720" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:url(#radialGradient3704);fill-opacity:1;stroke:#000000;stroke-width:10.24196363;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2910"\n       sodipodi:cx="140"\n       sodipodi:cy="140"\n       sodipodi:rx="140"\n       sodipodi:ry="140"\n       d="m 280,140 a 140,140 0 1 1 -280,0 140,140 0 1 1 280,0 z"\n       transform="matrix(0.97637527,0,0,0.97637527,39.246505,23.488986)" />\n    <path\n       style="color:#000000;fill:#ff0000;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:17.34259796;stroke-linecap:square;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"\n       d="m 8.105653,160.47283 23.562761,0"\n       id="path2916" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 80,255 265,55"\n       id="path4714"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cc" />\n  </g>\n</svg>\n',helpText:"Remove inline abbreviation.",mnemonic:"Shift+\\",key:"|"}],Si=[{id:"up",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveUp.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1"\n       d="M 159.78571,43.691929 L 57.691929,148.05551 L 114.0424,148.05551 L 114.0424,275.02236 L 205.58038,275.05896 L 206.19198,148.7332 L 261.8795,148.05551 L 159.78571,43.691929 z "\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms up slightly.",mnemonic:"Shift+Up",key:"ArrowUp"},{id:"down",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveDown.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="75"\n     inkscape:window-y="20"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1"\n       d="M 159.78571,275.05896 L 57.691929,170.69538 L 114.0424,170.69538 L 114.0424,43.728529 L 205.58038,43.691929 L 206.19198,170.01769 L 261.8795,170.69538 L 159.78571,275.05896 z "\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms down slightly.",mnemonic:"Shift+Down",key:"ArrowDown"},{id:"left",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveLeft.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveDown.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1"\n       d="M 44.102199,159.37544 L 148.46578,57.281659 L 148.46578,113.63213 L 275.43263,113.63213 L 275.46923,205.17011 L 149.14347,205.78171 L 148.46578,261.46923 L 44.102199,159.37544 z "\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms slightly to the left.",mnemonic:"Shift+Left",key:"ArrowLeft"},{id:"right",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveRight.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveLeft.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1"\n       d="M 275.46923,159.37544 L 171.10565,57.281659 L 171.10565,113.63213 L 44.138799,113.63213 L 44.102199,205.17011 L 170.42796,205.78171 L 171.10565,261.46923 L 275.46923,159.37544 z "\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms slightly to the right.",mnemonic:"Shift+Right",key:"ArrowRight"},{id:"uplots",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveUpFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2833"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 160,26 102.09379,104.36358 -204.18757,0 L 160,26 z"\n       id="path3982-1"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 159.78571,61.691929 57.691929,166.05551 l 56.350471,0 0,126.96685 91.53798,0.0366 0.6116,-126.32576 55.68752,-0.67769 L 159.78571,61.691929 z"\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms up somewhat.",mnemonic:""},{id:"downlots",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveDownFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2846"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 159.90621,296.36358 262,192 57.812425,192 159.90621,296.36358 z"\n       id="path3982-1"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 159.78571,257.05896 57.691929,152.69538 l 56.350471,0 0,-126.966851 91.53798,-0.0366 0.6116,126.325761 55.68752,0.67769 -102.09379,104.36358 z"\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms down somewhat.",mnemonic:""},{id:"leftlots",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveLeftFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveDown.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2824"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 25.63642,160.09378 130,58 130,262.18757 25.63642,160.09378 z"\n       id="path3982-1"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 64.102199,159.37544 168.46578,57.281659 l 0,56.350471 126.96685,0 0.0366,91.53798 -126.32576,0.6116 -0.67769,55.68752 L 64.102199,159.37544 z"\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms somewhat to the left.",mnemonic:""},{id:"rightlots",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveRightFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveLeft.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2846"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 296,160 191.63642,57.90622 l 0,204.18757 L 296,160 z"\n       id="path3982-1"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 257.46923,159.37544 153.10565,57.281659 l 0,56.350471 -126.966851,0 -0.0366,91.53798 126.325761,0.6116 0.67769,55.68752 104.36358,-102.09379 z"\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms somewhat to the right.",mnemonic:""},{id:"upfar",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveUpFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2833"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2838"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:7.45996714;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 261.25104,24.788943 c 30.31102,5.508007 30.31102,22.032027 0,27.540034 l -202.073498,0 c -30.311025,-5.508007 -30.311025,-22.032027 0,-27.540034 l 202.073498,0 z"\n       id="path3982-1"\n       sodipodi:nodetypes="ccccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 160,64 -102.093781,104.36358 56.350471,0 0,126.96685 91.53798,0.0366 0.6116,-126.32576 55.68752,-0.67769 L 160,64 z"\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms far up.",mnemonic:""},{id:"downfar",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveDownFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2846"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="585"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:7.45996714;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 261.03675,297.27002 c 30.31102,-5.50801 30.31102,-22.03203 0,-27.54004 l -202.073498,0 c -30.311025,5.50801 -30.311025,22.03203 0,27.54004 l 202.073498,0 z"\n       id="path3982-1"\n       sodipodi:nodetypes="ccccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 159.78571,257.05896 57.691929,152.69538 l 56.350471,0 0,-126.966851 91.53798,-0.0366 0.6116,126.325761 55.68752,0.67769 -102.09379,104.36358 z"\n       id="path3982"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms far down.",mnemonic:""},{id:"leftfar",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveLeftFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveDown.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2824"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2838"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:7.42203379;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 24.849388,259.83188 c 5.515594,29.96228 22.062373,29.96228 27.577967,0 l 0,-199.748559 c -5.515594,-29.962283 -22.062373,-29.962283 -27.577967,0 l 0,199.748559 z"\n       id="path3982-1-1"\n       sodipodi:nodetypes="ccccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 63.63642,159.74331 168,57.64953 168,114 l 126.96685,0 0.0366,91.53798 -126.32576,0.6116 L 168,261.8371 63.63642,159.74331 z"\n       id="path3982-7"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms far to the left.",mnemonic:""},{id:"rightfar",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="MoveRightFar.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveLeft.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n    <inkscape:perspective\n       id="perspective2846"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective2839"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="458"\n     inkscape:window-y="104"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2814" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:7.45996714;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="m 295.57464,260.99435 c -5.50801,30.31102 -22.03203,30.31102 -27.54004,0 l 0,-202.073498 c 5.50801,-30.311025 22.03203,-30.311025 27.54004,0 l 0,202.073498 z"\n       id="path3982-1-1"\n       sodipodi:nodetypes="ccccc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       d="M 256.36358,159.74331 152,57.64953 152,114 l -126.96685,0 -0.0366,91.53798 126.32576,0.6116 L 152,261.8371 256.36358,159.74331 z"\n       id="path3982-7"\n       sodipodi:nodetypes="cccccccc" />\n  </g>\n</svg>\n',helpText:"Move subject atoms far to the right.",mnemonic:""},{id:"rotp01",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotP01.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM01.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective2850"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="-2.4457843"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1468"\n     inkscape:window-height="892"\n     inkscape:window-x="267"\n     inkscape:window-y="87"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2840" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g8189"\n       transform="matrix(0.82715321,0,0,0.82715321,58.222329,-1.8743271)">\n      <path\n         d="m 210.48975,15.472333 0,15.230468 15.23046,0 0,4.648438 -15.23046,0 0,15.230469 -4.59375,0 0,-15.230469 -15.23047,0 0,-4.648438 15.23047,0 0,-15.230468 4.59375,0 z"\n         style="font-style:normal;font-weight:normal;font-size:56px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8057"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 241.75504,55.953626 13.12364,0 0,-45.296451 -14.27693,2.86334 0,-7.3174247 14.19739,-2.8633402 8.03326,0 0,52.6138759 13.12364,0 0,6.760665 -34.201,0 0,-6.760665 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8059"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 303.87362,7.3961487 q -3.18149,0 -5.36877,2.2270424 -2.18727,2.1872739 -2.18727,5.3687629 0,3.14172 2.18727,5.328994 2.18728,2.147505 5.36877,2.147505 3.18148,0 5.36876,-2.147505 2.18727,-2.187274 2.18727,-5.328994 0,-3.141721 -2.22704,-5.3687629 -2.18727,-2.2270424 -5.32899,-2.2270424 z m 0,-5.1301512 q 2.54519,0 4.89153,0.9942154 2.34635,0.9544467 4.0564,2.7838029 1.82936,1.7895877 2.74404,4.0563982 0.91468,2.266811 0.91468,4.89154 0,5.249457 -3.69849,8.908169 -3.65871,3.618944 -8.9877,3.618944 -5.36876,0 -8.94794,-3.579175 -3.57918,-3.579175 -3.57918,-8.947938 0,-5.3289943 3.65872,-9.0274754 3.65871,-3.6984811 8.94794,-3.6984811 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8061"\n         inkscape:connector-curvature="0" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="translate(35,58)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3, 9;stroke-dashoffset:0"\n       d="m 287,181.00001 -250,0"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 159,298.65435 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 159,179.00001 101.14286,74.71429"\n       id="path3617"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 159,179.00001 -110,-60"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 158.42857,180.57143 152,20 l 7,-1 -0.57143,161.57143 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n  </g>\n</svg>\n',helpText:"Rotate 1 counter-clockwise.",mnemonic:""},{id:"rotm01",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotM01.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM01.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective2850"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="206.12564"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1644"\n     inkscape:window-height="898"\n     inkscape:window-x="154"\n     inkscape:window-y="90"\n     showgrid="true"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2840" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       style="font-style:normal;font-weight:normal;font-size:19.54706955px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text3988"\n       transform="matrix(0.82715322,0,0,0.82715322,1.6734456,-2.9378058)">\n      <path\n         d="m -2.0231386,38.428781 21.4352826,0 0,6.522053 -21.4352826,0 0,-6.522053 z"\n         style="font-size:81.44612122px"\n         id="path8041"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 33.530002,57.239336 13.123642,0 0,-45.296452 -14.276932,2.863341 0,-7.3174253 14.197395,-2.8633402 8.03326,0 0,52.6138765 13.123643,0 0,6.760664 -34.201008,0 0,-6.760664 z"\n         style="font-size:81.44612122px"\n         id="path8043"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 95.648579,8.6818581 q -3.181489,0 -5.368763,2.2270419 -2.187274,2.187274 -2.187274,5.368763 0,3.141721 2.187274,5.328995 2.187274,2.147505 5.368763,2.147505 3.181489,0 5.368761,-2.147505 2.18728,-2.187274 2.18728,-5.328995 0,-3.14172 -2.22705,-5.368763 -2.187271,-2.2270419 -5.328991,-2.2270419 z m 0,-5.1301512 q 2.545191,0 4.891541,0.9942154 2.34635,0.9544467 4.0564,2.7838029 1.82935,1.7895877 2.74403,4.0563988 0.91468,2.266811 0.91468,4.891539 0,5.249457 -3.69848,8.90817 -3.65871,3.618944 -8.987709,3.618944 -5.368762,0 -8.947938,-3.579176 -3.579175,-3.579175 -3.579175,-8.947938 0,-5.328994 3.658713,-9.027475 3.658712,-3.6984811 8.947938,-3.6984811 z"\n         style="font-size:81.44612122px"\n         id="path8045"\n         inkscape:connector-curvature="0" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="matrix(-1,0,0,1,286,58)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3, 9;stroke-dashoffset:0"\n       d="m 34,181.00001 250,0"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 162,298.65435 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 162,179.00001 219.85714,74.71429"\n       id="path3617"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 162,179.00001 110,-60"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 162.57143,180.57143 169,20 l -7,-1 0.57143,161.57143 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n  </g>\n</svg>\n',helpText:"Rotate 1 clockwise.",mnemonic:""},{id:"rotp05",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotP05.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM05.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective3631"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="63.2685"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1156"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2817" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g8172"\n       transform="matrix(0.81166745,0,0,0.81166745,63.934934,-1.0275628)">\n      <path\n         d="m 209.48975,15.04897 0,15.230469 15.23046,0 0,4.648437 -15.23046,0 0,15.230469 -4.59375,0 0,-15.230469 -15.23047,0 0,-4.648437 15.23047,0 0,-15.230469 4.59375,0 z"\n         style="font-style:normal;font-weight:normal;font-size:56px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8080"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 239.44267,2.3397425 31.53651,0 0,6.7606643 -24.17931,0 0,14.5553132 q 1.74981,-0.59653 3.49963,-0.87491 1.74982,-0.318149 3.49964,-0.318149 9.94216,0 15.74837,5.4483 5.80622,5.4483 5.80622,14.754156 0,9.584236 -5.96529,14.91323 -5.96529,5.289226 -16.82213,5.289226 -3.73824,0 -7.63557,-0.636298 -3.85755,-0.636298 -7.99349,-1.908893 l 0,-8.073029 q 3.57917,1.948662 7.39696,2.903109 3.81779,0.954446 8.07303,0.954446 6.87997,0 10.8966,-3.618943 4.01663,-3.618944 4.01663,-9.822848 0,-6.203904 -4.01663,-9.822848 -4.01663,-3.618944 -10.8966,-3.618944 -3.22126,0 -6.44252,0.715836 -3.18148,0.715835 -6.52205,2.227042 l 0,-29.8264605 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8082"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 302.87362,6.3961411 q -3.18149,0 -5.36877,2.2270424 -2.18727,2.1872735 -2.18727,5.3687625 0,3.141721 2.18727,5.328995 2.18728,2.147505 5.36877,2.147505 3.18148,0 5.36876,-2.147505 2.18727,-2.187274 2.18727,-5.328995 0,-3.14172 -2.22704,-5.3687625 -2.18727,-2.2270424 -5.32899,-2.2270424 z m 0,-5.1301512 q 2.54519,0 4.89153,0.9942153 2.34635,0.9544468 4.0564,2.783803 1.82936,1.7895876 2.74404,4.0563986 0.91468,2.2668112 0.91468,4.8915392 0,5.249457 -3.69849,8.90817 -3.65871,3.618944 -8.9877,3.618944 -5.36876,0 -8.94794,-3.579176 -3.57918,-3.579175 -3.57918,-8.947938 0,-5.3289939 3.65872,-9.027475 3.65871,-3.6984811 8.94794,-3.6984811 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8084"\n         inkscape:connector-curvature="0" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="translate(36,58.999997)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3, 9;stroke-dashoffset:0"\n       d="M 288,182 38,182"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 160,299.65434 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 160,180 102.14286,75.714283"\n       id="path3617"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 160,180 50,120"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 159.42857,181.57142 142.14286,22.142854 160,19.999997 159.42857,181.57142 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n  </g>\n</svg>\n',helpText:"Rotate 5 counter-clockwise.",mnemonic:""},{id:"rotm05",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotM05.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM05.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective3631"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="-138.16008"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1156"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2817" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       style="font-style:normal;font-weight:normal;font-size:19.54706955px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text3988"\n       transform="matrix(0.81166745,0,0,0.81166745,1.6421157,-1.25947)">\n      <path\n         d="m -2.0231386,36.428781 21.4352826,0 0,6.522053 -21.4352826,0 0,-6.522053 z"\n         style="font-size:81.44612122px"\n         id="path8064"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 32.217638,2.6254595 31.53651,0 0,6.7606643 -24.179317,0 0,14.5553132 q 1.749819,-0.59653 3.499638,-0.87491 1.749819,-0.318149 3.499638,-0.318149 9.942154,0 15.748371,5.4483 5.806218,5.4483 5.806218,14.754156 0,9.584236 -5.965292,14.91323 -5.965292,5.289226 -16.822124,5.289226 -3.73825,0 -7.635574,-0.636298 -3.857555,-0.636298 -7.993491,-1.908893 l 0,-8.073029 q 3.579175,1.948662 7.396962,2.903109 3.817787,0.954446 8.073029,0.954446 6.87997,0 10.8966,-3.618943 4.01663,-3.618944 4.01663,-9.822848 0,-6.203904 -4.01663,-9.822848 -4.01663,-3.618944 -10.8966,-3.618944 -3.221258,0 -6.442516,0.715836 -3.181489,0.715835 -6.522052,2.227042 l 0,-29.8264605 z"\n         style="font-size:81.44612122px"\n         id="path8066"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 95.648579,6.6818581 q -3.181489,0 -5.368763,2.2270424 -2.187274,2.1872735 -2.187274,5.3687625 0,3.141721 2.187274,5.328995 2.187274,2.147505 5.368763,2.147505 3.181489,0 5.368761,-2.147505 2.18728,-2.187274 2.18728,-5.328995 0,-3.14172 -2.22705,-5.3687625 -2.187271,-2.2270424 -5.328991,-2.2270424 z m 0,-5.1301512 q 2.545191,0 4.891541,0.9942154 2.34635,0.9544467 4.0564,2.7838029 1.82935,1.7895877 2.74403,4.0563986 0.91468,2.2668112 0.91468,4.8915392 0,5.249457 -3.69848,8.90817 -3.65871,3.618944 -8.987709,3.618944 -5.368762,0 -8.947938,-3.579176 -3.579175,-3.579175 -3.579175,-8.947938 0,-5.3289939 3.658713,-9.027475 3.658712,-3.6984811 8.947938,-3.6984811 z"\n         style="font-size:81.44612122px"\n         id="path8068"\n         inkscape:connector-curvature="0" />\n    </g>\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="matrix(-1,0,0,1,287,58.999997)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3, 9;stroke-dashoffset:0"\n       d="m 35,182 250,0"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 163,299.65434 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163,180 220.85714,75.714283"\n       id="path3617"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163,180 273,120"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163.57143,181.57142 180.85714,22.142854 163,19.999997 163.57143,181.57142 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n  </g>\n</svg>\n',helpText:"Rotate 5 clockwise.",mnemonic:""},{id:"rotp15",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotP15.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM15.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective3631"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3653"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="108.98279"\n     inkscape:cy="152.56698"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1156"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     showguides="false">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2849" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="translate(36,59)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3, 9;stroke-dashoffset:0"\n       d="M 288,182 38,182"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 160,299.65434 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 160,180 102.14286,75.714286"\n       id="path3617"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 160,180 50,120"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 159.42857,181.57142 120.71429,24.285714 160,20 159.42857,181.57142 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n    <g\n       id="g8177"\n       transform="matrix(0.81166745,0,0,0.81166745,64.049971,-1.0275659)">\n      <path\n         d="m 157.48975,14.472329 0,15.230469 15.23046,0 0,4.648437 -15.23046,0 0,15.230469 -4.59375,0 0,-15.230469 -15.23047,0 0,-4.648437 15.23047,0 0,-15.230469 4.59375,0 z"\n         style="font-style:normal;font-weight:normal;font-size:56px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8087"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 188.75504,54.953622 13.12364,0 0,-45.2964508 -14.27693,2.8633398 0,-7.3174245 14.19739,-2.8633402 8.03326,0 0,52.6138757 13.12364,0 0,6.760665 -34.201,0 0,-6.760665 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8089"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 239.30095,2.3397463 31.53651,0 0,6.7606643 -24.17932,0 0,14.5553124 q 1.74982,-0.596529 3.49964,-0.874909 1.74982,-0.318149 3.49964,-0.318149 9.94215,0 15.74837,5.4483 5.80622,5.4483 5.80622,14.754156 0,9.584236 -5.9653,14.91323 -5.96529,5.289226 -16.82212,5.289226 -3.73825,0 -7.63557,-0.636298 -3.85756,-0.636298 -7.99349,-1.908894 l 0,-8.073028 q 3.57917,1.948662 7.39696,2.903109 3.81779,0.954446 8.07303,0.954446 6.87997,0 10.8966,-3.618944 4.01663,-3.618943 4.01663,-9.822847 0,-6.203904 -4.01663,-9.822848 -4.01663,-3.618944 -10.8966,-3.618944 -3.22126,0 -6.44252,0.715835 -3.18149,0.715835 -6.52205,2.227043 l 0,-29.8264607 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8091"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 302.73189,6.3961449 q -3.18149,0 -5.36876,2.2270424 -2.18728,2.1872737 -2.18728,5.3687627 0,3.141721 2.18728,5.328994 2.18727,2.147506 5.36876,2.147506 3.18149,0 5.36876,-2.147506 2.18728,-2.187273 2.18728,-5.328994 0,-3.14172 -2.22704,-5.3687627 -2.18728,-2.2270424 -5.329,-2.2270424 z m 0,-5.1301512 q 2.54519,0 4.89154,0.9942154 2.34635,0.9544467 4.0564,2.7838029 1.82936,1.7895877 2.74403,4.0563986 0.91468,2.2668114 0.91468,4.8915394 0,5.249457 -3.69848,8.90817 -3.65871,3.618944 -8.98771,3.618944 -5.36876,0 -8.94793,-3.579176 -3.57918,-3.579175 -3.57918,-8.947938 0,-5.3289941 3.65871,-9.0274752 3.65872,-3.6984811 8.94794,-3.6984811 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8093"\n         inkscape:connector-curvature="0" />\n    </g>\n  </g>\n</svg>\n',helpText:"Rotate 15 counter-clockwise.",mnemonic:""},{id:"rotm15",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotM15.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM15.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective3631"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3653"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="-133.16007"\n     inkscape:cy="148.99555"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1156"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2849" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="matrix(-1,0,0,1,287,59)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3, 9;stroke-dashoffset:0"\n       d="m 35,182 250,0"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 163,299.65434 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163,180 220.85714,75.714286"\n       id="path3617"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163,180 273,120"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163.57143,181.57142 202.28571,24.285714 163,20 l 0.57143,161.57142 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:19.54706955px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text3988"\n       transform="matrix(0.81166745,0,0,0.81166745,1.6421157,-1.25947)">\n      <path\n         d="m -2.0231386,36.428781 21.4352826,0 0,6.522053 -21.4352826,0 0,-6.522053 z"\n         style="font-size:81.44612122px"\n         id="path8071"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 33.530002,55.239336 13.123642,0 0,-45.2964516 -14.276932,2.8633406 0,-7.3174253 14.197395,-2.8633402 8.03326,0 0,52.6138765 13.123643,0 0,6.760664 -34.201008,0 0,-6.760664 z"\n         style="font-size:81.44612122px"\n         id="path8073"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 84.075912,2.6254595 31.536508,0 0,6.7606643 -24.179314,0 0,14.5553132 q 1.749819,-0.59653 3.499638,-0.87491 1.749819,-0.318149 3.499638,-0.318149 9.942158,0 15.748368,5.4483 5.80622,5.4483 5.80622,14.754156 0,9.584236 -5.96529,14.91323 -5.96529,5.289226 -16.822125,5.289226 -3.73825,0 -7.635574,-0.636298 -3.857556,-0.636298 -7.993492,-1.908893 l 0,-8.073029 q 3.579176,1.948662 7.396963,2.903109 3.817786,0.954446 8.073028,0.954446 6.87997,0 10.8966,-3.618943 4.01663,-3.618944 4.01663,-9.822848 0,-6.203904 -4.01663,-9.822848 -4.01663,-3.618944 -10.8966,-3.618944 -3.221258,0 -6.442515,0.715836 -3.181489,0.715835 -6.522053,2.227042 l 0,-29.8264605 z"\n         style="font-size:81.44612122px"\n         id="path8075"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 147.50686,6.6818581 q -3.18149,0 -5.36877,2.2270424 -2.18727,2.1872735 -2.18727,5.3687625 0,3.141721 2.18727,5.328995 2.18728,2.147505 5.36877,2.147505 3.18148,0 5.36876,-2.147505 2.18727,-2.187274 2.18727,-5.328995 0,-3.14172 -2.22704,-5.3687625 -2.18727,-2.2270424 -5.32899,-2.2270424 z m 0,-5.1301512 q 2.54519,0 4.89153,0.9942154 2.34635,0.9544467 4.0564,2.7838029 1.82936,1.7895877 2.74404,4.0563986 0.91468,2.2668112 0.91468,4.8915392 0,5.249457 -3.69849,8.90817 -3.65871,3.618944 -8.9877,3.618944 -5.36877,0 -8.94794,-3.579176 -3.57918,-3.579175 -3.57918,-8.947938 0,-5.3289939 3.65872,-9.027475 3.65871,-3.6984811 8.94794,-3.6984811 z"\n         style="font-size:81.44612122px"\n         id="path8077"\n         inkscape:connector-curvature="0" />\n    </g>\n  </g>\n</svg>\n',helpText:"Rotate 15 clockwise.",mnemonic:""},{id:"rotp30",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotP30.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM30.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective3603"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="12.554216"\n     inkscape:cy="162.54324"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1156"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2817" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="translate(36,59)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:3,9;stroke-dashoffset:0"\n       d="M 288,182 38,182"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 160,299.65434 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 160,180 50,120"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"\n       d="M 160,180.71428 78.571427,33.571428 160,16 l 0,164.71428 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n    <g\n       id="g8183"\n       transform="matrix(0.81166745,0,0,0.81166745,63.136667,-0.79565869)">\n      <path\n         d="m 158.61496,14.226381 0,15.230469 15.23047,0 0,4.648437 -15.23047,0 0,15.230469 -4.59375,0 0,-15.230469 -15.23047,0 0,-4.648437 15.23047,0 0,-15.230469 4.59375,0 z"\n         style="font-style:normal;font-weight:normal;font-size:56px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8096"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 212.82674,29.414836 q 5.76645,1.232827 8.98771,5.130151 3.26102,3.897324 3.26102,9.624004 0,8.788864 -6.04483,13.600866 -6.04483,4.812003 -17.18004,4.812003 -3.73825,0 -7.71511,-0.755604 -3.93709,-0.715835 -8.15256,-2.187274 l 0,-7.75488 q 3.34056,1.948663 7.31742,2.942878 3.97686,0.994215 8.31164,0.994215 7.55604,0 11.49313,-2.982646 3.97686,-2.982646 3.97686,-8.669558 0,-5.249457 -3.69848,-8.192334 -3.65871,-2.982646 -10.22053,-2.982646 l -6.91974,0 0,-6.60159 7.23789,0 q 5.92552,0 9.06724,-2.346348 3.14172,-2.386117 3.14172,-6.840202 0,-4.57339 -3.26103,-6.999276 -3.22125,-2.4656539 -9.26608,-2.4656539 -3.3008,0 -7.07882,0.715835 -3.77801,0.7158351 -8.31164,2.2270419 l 0,-7.15835 q 4.57339,-1.2725957 8.55026,-1.9088935 4.01663,-0.6362978 7.55603,-0.6362978 9.14678,0 14.47578,4.1757045 5.32899,4.1359358 5.32899,11.2147488 0,4.931308 -2.82357,8.351409 -2.82357,3.380332 -8.03326,4.692697 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8098"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 257.52667,7.3432549 q -6.20391,0 -9.34563,6.1243661 -3.10195,6.084598 -3.10195,18.333331 0,12.208965 3.10195,18.333331 3.14172,6.084598 9.34563,6.084598 6.24367,0 9.34562,-6.084598 3.14172,-6.124366 3.14172,-18.333331 0,-12.248733 -3.14172,-18.333331 -3.10195,-6.1243661 -9.34562,-6.1243661 z m 0,-6.3629782 q 9.98192,0 15.23138,7.9139542 5.28922,7.8741851 5.28922,22.9067211 0,14.992768 -5.28922,22.906722 -5.24946,7.874186 -15.23138,7.874186 -9.98193,0 -15.27115,-7.874186 -5.24946,-7.913954 -5.24946,-22.906722 0,-15.032536 5.24946,-22.9067211 5.28922,-7.9139542 15.27115,-7.9139542 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8100"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 303.85711,6.1104279 q -3.18149,0 -5.36877,2.2270424 -2.18727,2.1872737 -2.18727,5.3687627 0,3.141721 2.18727,5.328994 2.18728,2.147506 5.36877,2.147506 3.18148,0 5.36876,-2.147506 2.18727,-2.187273 2.18727,-5.328994 0,-3.14172 -2.22704,-5.3687627 -2.18727,-2.2270424 -5.32899,-2.2270424 z m 0,-5.1301512 q 2.54519,0 4.89153,0.9942154 2.34635,0.9544467 4.0564,2.7838029 1.82936,1.7895876 2.74404,4.0563986 0.91468,2.2668114 0.91468,4.8915394 0,5.249457 -3.69849,8.90817 -3.65871,3.618944 -8.9877,3.618944 -5.36876,0 -8.94794,-3.579176 -3.57918,-3.579175 -3.57918,-8.947938 0,-5.3289941 3.65872,-9.0274752 3.65871,-3.6984811 8.94794,-3.6984811 z"\n         style="font-style:normal;font-weight:normal;font-size:81.44612122px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n         id="path8102"\n         inkscape:connector-curvature="0" />\n    </g>\n  </g>\n</svg>\n',helpText:"Rotate 30 counter-clockwise.",mnemonic:"Shift+[",key:"{"},{id:"rotm30",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="MoveRotM30.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveRotM30.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective11" />\n    <inkscape:perspective\n       id="perspective3603"\n       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"\n       inkscape:vp_z="1 : 0.5 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 0.5 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="152.55422"\n     inkscape:cy="163.97182"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1156"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2817" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="arc"\n       style="fill:#ffffff;fill-opacity:0.25;stroke:#000000;stroke-width:5;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"\n       id="path2819"\n       sodipodi:cx="125"\n       sodipodi:cy="125"\n       sodipodi:rx="125"\n       sodipodi:ry="125"\n       d="m 250,125 a 125,125 0 1 1 -250,0 125,125 0 1 1 250,0 z"\n       transform="matrix(-1,0,0,1,287,59)" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3, 9;stroke-dashoffset:0"\n       d="m 35,182 250,0"\n       id="path3593" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:2.86018682;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2.86018677, 8.58056031;stroke-dashoffset:0"\n       d="m 163,299.65434 0,-112.27312"\n       id="path3593-1" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163,180 273,120"\n       id="path3619"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="M 163,180.71428 244.42857,33.571428 163,16 l 0,164.71428 z"\n       id="path3643"\n       sodipodi:nodetypes="cccc" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:19.54706955px;font-family:\'Bitstream Vera Sans\';fill:#000000;fill-opacity:1;stroke:none"\n       id="text3988"\n       transform="matrix(0.81166745,0,0,0.81166745,1.6421157,-1.25947)">\n      <path\n         d="m -2.0231386,36.428781 21.4352826,0 0,6.522053 -21.4352826,0 0,-6.522053 z"\n         style="font-size:81.44612122px"\n         id="path8048"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 56.476492,29.986266 q 5.766449,1.232827 8.987707,5.130151 3.261026,3.897324 3.261026,9.624005 0,8.788863 -6.044829,13.600866 -6.04483,4.812002 -17.180041,4.812002 -3.73825,0 -7.715112,-0.755604 -3.937092,-0.715835 -8.152565,-2.187274 l 0,-7.754879 q 3.340563,1.948662 7.317425,2.942877 3.976861,0.994215 8.31164,0.994215 7.556037,0 11.493129,-2.982646 3.976862,-2.982646 3.976862,-8.669557 0,-5.249457 -3.698481,-8.192335 -3.658713,-2.982646 -10.220534,-2.982646 l -6.919739,0 0,-6.60159 7.237888,0 q 5.925523,0 9.067244,-2.346348 3.14172,-2.386117 3.14172,-6.840202 0,-4.57339 -3.261026,-6.999276 -3.221258,-2.4656537 -9.266087,-2.4656537 -3.300795,0 -7.078813,0.715835 -3.778019,0.7158351 -8.311641,2.2270427 l 0,-7.1583508 q 4.573391,-1.2725956 8.550252,-1.9088935 4.01663,-0.6362978 7.556037,-0.6362978 9.146781,0 14.475775,4.1757045 5.328995,4.1359358 5.328995,11.2147486 0,4.931309 -2.823572,8.351409 -2.823572,3.380333 -8.03326,4.692697 z"\n         style="font-size:81.44612122px"\n         id="path8050"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 101.17642,7.9146851 q -6.203908,0 -9.345628,6.1243669 -3.101952,6.084598 -3.101952,18.333331 0,12.208964 3.101952,18.333331 3.14172,6.084598 9.345628,6.084598 6.24367,0 9.34562,-6.084598 3.14172,-6.124367 3.14172,-18.333331 0,-12.248733 -3.14172,-18.333331 -3.10195,-6.1243669 -9.34562,-6.1243669 z m 0,-6.3629782 q 9.98192,0 15.23138,7.9139542 5.28922,7.8741859 5.28922,22.9067219 0,14.992767 -5.28922,22.906721 -5.24946,7.874186 -15.23138,7.874186 -9.981926,0 -15.271152,-7.874186 -5.249457,-7.913954 -5.249457,-22.906721 0,-15.032536 5.249457,-22.9067219 5.289226,-7.9139542 15.271152,-7.9139542 z"\n         style="font-size:81.44612122px"\n         id="path8052"\n         inkscape:connector-curvature="0" />\n      <path\n         d="m 147.50686,6.6818581 q -3.18149,0 -5.36877,2.2270424 -2.18727,2.1872735 -2.18727,5.3687625 0,3.141721 2.18727,5.328995 2.18728,2.147505 5.36877,2.147505 3.18148,0 5.36876,-2.147505 2.18727,-2.187274 2.18727,-5.328995 0,-3.14172 -2.22704,-5.3687625 -2.18727,-2.2270424 -5.32899,-2.2270424 z m 0,-5.1301512 q 2.54519,0 4.89153,0.9942154 2.34635,0.9544467 4.0564,2.7838029 1.82936,1.7895877 2.74404,4.0563986 0.91468,2.2668112 0.91468,4.8915392 0,5.249457 -3.69849,8.90817 -3.65871,3.618944 -8.9877,3.618944 -5.36877,0 -8.94794,-3.579176 -3.57918,-3.579175 -3.57918,-8.947938 0,-5.3289939 3.65872,-9.027475 3.65871,-3.6984811 8.94794,-3.6984811 z"\n         style="font-size:81.44612122px"\n         id="path8054"\n         inkscape:connector-curvature="0" />\n    </g>\n  </g>\n</svg>\n',helpText:"Rotate 30 clockwise.",mnemonic:"Shift+]",key:"}"},{id:"hflip",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MoveHFlip.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveDown.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="204.69707"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;fill-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 10,160 L 100,70 L 100,130 L 220,130 L 220,70 L 310,160 L 220,250 L 220,190 L 100,190 L 100,250 L 10,160 z "\n       id="path3274" />\n  </g>\n</svg>\n',helpText:"Flip subject atoms horizontally.",mnemonic:"Shift+,",key:"<"},{id:"vflip",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MoveVFlip.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveDown.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="204.69707"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 160,10 L 250,100 L 190,100 L 190,220 L 250,220 L 160,310 L 70,220 L 130,220 L 130,100 L 70,100 L 160,10 z "\n       id="path3274" />\n  </g>\n</svg>\n',helpText:"Flip subject atoms vertically.",mnemonic:"Shift+.",key:">"},{id:"shrink",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MoveShrink.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3204">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:1;"\n         offset="0"\n         id="stop3206" />\n      <stop\n         id="stop3212"\n         offset="1"\n         style="stop-color:#000000;stop-opacity:0.29591838;" />\n    </linearGradient>\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3204"\n       id="radialGradient3210"\n       cx="97.784004"\n       cy="119.01254"\n       fx="97.784004"\n       fy="119.01254"\n       r="150.23499"\n       gradientTransform="matrix(1.0943065,0.3182308,-0.3235039,0.6950983,44.992262,22.609241)"\n       gradientUnits="userSpaceOnUse" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3204"\n       id="radialGradient3222"\n       cx="156.07143"\n       cy="300.35715"\n       fx="156.07143"\n       fy="300.35715"\n       r="40.35714"\n       gradientTransform="matrix(1.0080384,0,0,0.4019374,14.926879,158.58684)"\n       gradientUnits="userSpaceOnUse" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="204.69707"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:url(#radialGradient3210);fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:8.96230125;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 169.01275,265.3672 C 93.306764,264.91973 184.09594,254.28496 171.89287,196.49891 C 136.81751,116.90916 48.312987,78.904811 130.8513,57.624012 C 173.1434,48.101242 249.69276,67.159794 188.4535,112.26331 C 168.91776,123.45431 278.69027,247.58954 169.01275,265.3672 z "\n       id="path3200"\n       sodipodi:nodetypes="ccccc"\n       inkscape:transform-center-x="55.442114" />\n    <path\n       style="fill:url(#radialGradient3222);fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:8.42706966;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 166.08095,266.83675 C 151.36577,272.95804 139.47952,280.37536 136.31052,291.78647 L 208.19524,290.28949 C 196.71794,282.11994 186.82775,273.73226 166.08095,266.83675 z "\n       id="path3202"\n       sodipodi:nodetypes="cccc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 110,226 L 83.571429,243.85714"\n       id="path3224"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 90,176 L 57.857143,183.14286"\n       id="path3226"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 80,116 L 50,116"\n       id="path3228" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 80,56 L 50,36"\n       id="path3230" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 230,56 L 260,46"\n       id="path3232" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 230,116 L 265.71429,116"\n       id="path3234"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 240,166 L 275,171"\n       id="path3236"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 240,226 L 270,246"\n       id="path3238" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 120,36 L 110,6"\n       id="path3240" />\n    <path\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n       d="M 180,36 L 190,6"\n       id="path3242" />\n  </g>\n</svg>\n',helpText:"Decrease subject bond distances.",mnemonic:"Shift+Z"},{id:"grow",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="MoveGrow.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MoveUp.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient3204">\n      <stop\n         style="stop-color:#ffffff;stop-opacity:1;"\n         offset="0"\n         id="stop3206" />\n      <stop\n         id="stop3212"\n         offset="1"\n         style="stop-color:#000000;stop-opacity:0.29591838;" />\n    </linearGradient>\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3204"\n       id="radialGradient3210"\n       cx="97.784004"\n       cy="119.01254"\n       fx="97.784004"\n       fy="119.01254"\n       r="150.23499"\n       gradientTransform="matrix(1.0855802,0.3993744,-0.3209242,0.8723369,29.825633,-21.800103)"\n       gradientUnits="userSpaceOnUse" />\n    <radialGradient\n       inkscape:collect="always"\n       xlink:href="#linearGradient3204"\n       id="radialGradient3222"\n       cx="156.07143"\n       cy="300.35715"\n       fx="156.07143"\n       fy="300.35715"\n       r="40.35714"\n       gradientTransform="matrix(1,0,0,0.5044248,0,148.84954)"\n       gradientUnits="userSpaceOnUse" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="204.69707"\n     inkscape:cy="158.25753"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="814"\n     inkscape:window-height="842"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:url(#radialGradient3210);fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 152.85714,282.85714 C 77.754858,282.29557 25.677197,216.09197 13.571429,143.57143 C 7.347206,39.401886 96.731177,13.499887 162.85714,13.571429 C 250.16174,20.445262 307.17949,64.110107 303.57143,149.28571 C 297.04861,249.7588 215.23148,282.68932 152.85714,282.85714 z "\n       id="path3200"\n       sodipodi:nodetypes="ccccc"\n       inkscape:transform-center-x="55" />\n    <path\n       style="fill:url(#radialGradient3222);fill-rule:evenodd;stroke:#000000;stroke-width:9.40279675;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1.0"\n       d="M 149.94872,284.7014 C 135.35088,292.38351 123.55941,301.69213 120.41569,316.01289 L 191.72717,314.1342 C 180.3414,303.88155 170.53007,293.35515 149.94872,284.7014 z "\n       id="path3202"\n       sodipodi:nodetypes="cccc" />\n  </g>\n</svg>\n',helpText:"Increase subject bond distances.",mnemonic:"Shift+X"}];class Ni extends ii{constructor(t,e=bi.Main){super(),this.owner=t,this.cmdType=e}update(){if(this.cmdType==bi.Main)for(let t of Ai)this.buttons.push(t);else if(this.cmdType==bi.Atom)for(let t of Ti)this.buttons.push(t);else if(this.cmdType==bi.Bond)for(let t of Mi)this.buttons.push(t);else if(this.cmdType==bi.Select)for(let t of Ei)this.buttons.push(t);else if(this.cmdType==bi.Move)for(let t of Si)this.buttons.push(t);else this.cmdType==bi.Abbrev?this.populateElements(vi):this.cmdType==bi.SBlock?this.populateElements(yi):this.cmdType==bi.PBlock?this.populateElements(wi):this.cmdType==bi.DBlock?this.populateElements(xi):this.cmdType==bi.FBlock?this.populateElements(Ci):this.cmdType==bi.Noble&&this.populateElements(ki)}populateElements(t){for(let e of t)this.buttons.push({id:`element:${e}`,text:e,helpText:`Change elements to ${e}.`})}hitButton(t){let e=0,n=null;if(t.startsWith("element:")){let i=t.substring(8);e=ei.Element,n={element:i}}else"delete"==t?e=ei.Delete:"undo"==t?this.owner.canUndo()?this.owner.performUndo():this.owner.showMessage("Nothing to undo."):"redo"==t?this.owner.canRedo()?this.owner.performRedo():this.owner.showMessage("Nothing to redo."):"cut"==t?e=ei.Cut:"copy"==t?e=ei.Copy:"paste"==t?this.owner.performPaste():"new"==t?e=ei.Clear:"zoomfit"==t?this.owner.autoScale():"zoomout"==t?this.owner.zoom(.8):"zoomin"==t?this.owner.zoom(1.25):"selall"==t?e=ei.SelectAll:"selnone"==t?e=ei.SelectNone:"selprev"==t?e=ei.SelectPrevComp:"selnext"==t?e=ei.SelectNextComp:"selside"==t?e=ei.SelectSide:"plus"==t?(e=ei.Charge,n={delta:1}):"minus"==t?(e=ei.Charge,n={delta:-1}):"one"==t?(e=ei.BondOrder,n={order:1}):"two"==t?(e=ei.BondOrder,n={order:2}):"three"==t?(e=ei.BondOrder,n={order:3}):"four"==t?(e=ei.BondOrder,n={order:4}):"zero"==t?(e=ei.BondOrder,n={order:0}):"inclined"==t?(e=ei.BondType,n={type:ge.BONDTYPE_INCLINED}):"declined"==t?(e=ei.BondType,n={type:ge.BONDTYPE_DECLINED}):"squig"==t?(e=ei.BondType,n={type:ge.BONDTYPE_UNKNOWN}):"linear"==t?(e=ei.BondGeom,n={geom:Yt.Linear}):"trigonal"==t?(e=ei.BondGeom,n={geom:Yt.Trigonal}):"tetra1"==t?(e=ei.BondGeom,n={geom:Yt.Tetra1}):"tetra2"==t?(e=ei.BondGeom,n={geom:Yt.Tetra2}):"sqplan"==t?(e=ei.BondGeom,n={geom:Yt.SqPlan}):"octa1"==t?(e=ei.BondGeom,n={geom:Yt.Octa1}):"octa2"==t?(e=ei.BondGeom,n={geom:Yt.Octa2}):"switch"==t?e=ei.BondSwitch:"rotate"==t?e=ei.BondRotate:"connect"==t?e=ei.Connect:"disconnect"==t?e=ei.Disconnect:"metalligate"==t?e=ei.MetalLigate:"artifactpath"==t?e=ei.BondArtifactPath:"artifactring"==t?e=ei.BondArtifactRing:"artifactarene"==t?e=ei.BondArtifactArene:"artifactclear"==t?e=ei.BondArtifactClear:"polymer"==t?e=ei.PolymerBlock:"addtwo"==t?e=ei.BondAddTwo:"insert"==t?e=ei.BondInsert:"curelement"==t?e=ei.SelectCurElement:"selgrow"==t?e=ei.SelectGrow:"selshrink"==t?e=ei.SelectShrink:"selprev"==t?e=ei.SelectPrevComp:"selnext"==t?e=ei.SelectNextComp:"selchain"==t?e=ei.SelectChain:"smallring"==t?e=ei.SelectSmRing:"ringblock"==t?e=ei.SelectRingBlk:"toggle"==t?e=ei.SelectToggle:"uncurrent"==t?e=ei.SelectUnCurrent:"join"==t?e=ei.Join:"inline"==t?e=ei.AbbrevGroup:"formula"==t?e=ei.AbbrevFormula:"clearabbrev"==t?e=ei.AbbrevClear:"expandabbrev"==t?e=ei.AbbrevExpand:"up"==t?(e=ei.Nudge,n={dir:"up"}):"down"==t?(e=ei.Nudge,n={dir:"down"}):"left"==t?(e=ei.Nudge,n={dir:"left"}):"right"==t?(e=ei.Nudge,n={dir:"right"}):"uplots"==t?(e=ei.NudgeLots,n={dir:"up"}):"downlots"==t?(e=ei.NudgeLots,n={dir:"down"}):"leftlots"==t?(e=ei.NudgeLots,n={dir:"left"}):"rightlots"==t?(e=ei.NudgeLots,n={dir:"right"}):"upfar"==t?(e=ei.NudgeFar,n={dir:"up"}):"downfar"==t?(e=ei.NudgeFar,n={dir:"down"}):"leftfar"==t?(e=ei.NudgeFar,n={dir:"left"}):"rightfar"==t?(e=ei.NudgeFar,n={dir:"right"}):"rotp01"==t?(e=ei.Rotate,n={theta:1}):"rotm01"==t?(e=ei.Rotate,n={theta:-1}):"rotp05"==t?(e=ei.Rotate,n={theta:5}):"rotm05"==t?(e=ei.Rotate,n={theta:-5}):"rotp15"==t?(e=ei.Rotate,n={theta:15}):"rotm15"==t?(e=ei.Rotate,n={theta:-15}):"rotp30"==t?(e=ei.Rotate,n={theta:30}):"rotm30"==t?(e=ei.Rotate,n={theta:-30}):"hflip"==t?(e=ei.Flip,n={axis:"hor"}):"vflip"==t?(e=ei.Flip,n={axis:"ver"}):"shrink"==t?(e=ei.Scale,n={mag:1/1.1}):"grow"==t?(e=ei.Scale,n={mag:1.1}):"bondQAny"==t?e=ei.QueryBondAny:"atom"==t?this.buttonView.pushBank(new Ni(this.owner,bi.Atom)):"bond"==t?this.buttonView.pushBank(new Ni(this.owner,bi.Bond)):"select"==t?this.buttonView.pushBank(new Ni(this.owner,bi.Select)):"move"==t?this.buttonView.pushBank(new Ni(this.owner,bi.Move)):"abbrev"==t?this.buttonView.pushBank(new Ni(this.owner,bi.Abbrev)):"sblock"==t?this.buttonView.pushBank(new Ni(this.owner,bi.SBlock)):"pblock"==t?this.buttonView.pushBank(new Ni(this.owner,bi.PBlock)):"dblock"==t?this.buttonView.pushBank(new Ni(this.owner,bi.DBlock)):"fblock"==t?this.buttonView.pushBank(new Ni(this.owner,bi.FBlock)):"noble"==t?this.buttonView.pushBank(new Ni(this.owner,bi.Noble)):alert('Unhandled command: "'+t+'"');e>0&&new ai(this.owner.getState(),e,n,this.owner).execute()}claimKey(t){for(let e of[Ai,Ti,Mi,Ei,Si])for(let n of e)if(ii.matchKey(t,n.mnemonic,n.key))return this.hitButton(n.id),!0;return!1}}class Di{constructor(t,e,n){this.state=t,this.sketcher=e,this.proxyClip=n}populate(){const{state:t,sketcher:e}=this;let i=[];(e.canUndo()||e.canRedo())&&(e.canUndo()&&i.push({label:"Undo",accelerator:"CmdOrCtrl+Z",click:()=>e.performUndo()}),e.canRedo()&&i.push({label:"Redo",accelerator:"CmdOrCtrl+Shift+Z",click:()=>e.performRedo()}),i.push(null)),(t.currentAtom>0||t.currentBond>0)&&i.push({label:"Edit",accelerator:"Enter",click:()=>e.editCurrent()}),this.maybeAppend(i,"Delete","D",ei.Delete),this.maybeAppend(i,"Cut","CmdOrCtrl+X",ei.Cut),this.maybeAppend(i,"Copy","CmdOrCtrl+C",ei.Copy),this.proxyClip.canAlwaysGet()&&i.push({label:"Paste",accelerator:"CmdOrCtrl+V",click:()=>e.performPaste()}),this.maybeAppend(i,"Charge +","Shift+=",ei.Charge,{delta:1}),this.maybeAppend(i,"Charge -","Shift+-",ei.Charge,{delta:-1}),this.maybeAppend(i,"Bond Order 0","0",ei.BondOrder,{order:0}),this.maybeAppend(i,"Bond Order 1","1",ei.BondOrder,{order:1}),this.maybeAppend(i,"Bond Order 2","2",ei.BondOrder,{order:2}),this.maybeAppend(i,"Bond Order 3","3",ei.BondOrder,{order:3}),this.maybeAppend(i,"Bond Order 4",null,ei.BondOrder,{order:4}),this.maybeAppend(i,"Unknown Stereochemistry","4",ei.BondType,{type:ge.BONDTYPE_UNKNOWN}),this.maybeAppend(i,"Bond Wedge Up","5",ei.BondType,{type:ge.BONDTYPE_INCLINED}),this.maybeAppend(i,"Bond Wedge Down","6",ei.BondType,{type:ge.BONDTYPE_DECLINED}),this.maybeAppend(i,"Switch Geometry",null,ei.BondSwitch),this.maybeAppend(i,"Add Two Bonds","Shift+D",ei.BondAddTwo),this.maybeAppend(i,"Insert Atom",null,ei.BondInsert),this.maybeAppend(i,"Join Atoms",null,ei.Join),this.maybeAppend(i,"Abbreviate Group","/",ei.AbbrevGroup),this.maybeAppend(i,"Abbreviate Formula","\\",ei.AbbrevFormula),this.maybeAppend(i,"Clear Abbreviation","Shift+\\",ei.AbbrevClear),this.maybeAppend(i,"Expand Abbreviation","Shift+/",ei.AbbrevExpand);let s=this.rotateSubMenu();n.notBlank(s)&&i.push({label:"Rotate",subMenu:s});let o=this.querySubMenu();n.notBlank(o)&&i.push({label:"Query",subMenu:o});let r=new $t(t.mol);for(let n of r.getUnits()){let s=t.currentAtom,o=0;if(t.currentBond>0&&([s,o]=t.mol.bondFromTo(t.currentBond)),n.atoms.includes(s)||n.atoms.includes(o)){let t="Polymer Block ("+n.atoms.length+" atom"+(1==n.atoms.length?"":"s")+")";i.push({label:t,click:()=>e.performPolymerBlock(n.atoms)})}}return i.length>0&&i.push(null),i.push({label:"Scale to Fit",click:()=>e.autoScale()}),i.push({label:"Zoom In",accelerator:"=",click:()=>e.zoom(1.25)}),i.push({label:"Zoom Out",accelerator:"-",click:()=>e.zoom(.8)}),i}maybeAppend(t,e,n,i,s=null){let o=new ai(this.state,i,s);o.execute(),(o.output.mol||o.toClipboard)&&t.push({label:e,accelerator:n,click:()=>{this.sketcher.setState(o.output,!0),o.toClipboard&&this.proxyClip.setString(o.toClipboard)}})}rotateSubMenu(){let t=[];return this.maybeAppend(t,"Bond",null,ei.BondRotate),this.maybeAppend(t,"+1 ",null,ei.Rotate,{theta:1}),this.maybeAppend(t,"-1 ",null,ei.Rotate,{theta:-1}),this.maybeAppend(t,"+5 ",null,ei.Rotate,{theta:5}),this.maybeAppend(t,"-5 ",null,ei.Rotate,{theta:-5}),this.maybeAppend(t,"+15 ",null,ei.Rotate,{theta:15}),this.maybeAppend(t,"-15 ",null,ei.Rotate,{theta:-15}),this.maybeAppend(t,"+30 ","Shift+[",ei.Rotate,{theta:30}),this.maybeAppend(t,"-30 ","Shift+]",ei.Rotate,{theta:-30}),this.maybeAppend(t,"H-Flip","Shift+,",ei.Flip,{axis:"hor"}),this.maybeAppend(t,"V-Flip","Shift+.",ei.Flip,{axis:"ver"}),this.maybeAppend(t,"Align",null,ei.AlignRegular),t}querySubMenu(){let t=[];return this.maybeAppend(t,"Clear",null,ei.QueryClear),this.maybeAppend(t,"Copy",null,ei.QueryCopy),t}}var Ri,Oi;!function(t){t[t.None=0]="None",t[t.Press=1]="Press",t[t.Lasso=2]="Lasso",t[t.Pan=3]="Pan",t[t.Zoom=4]="Zoom",t[t.Rotate=5]="Rotate",t[t.Move=6]="Move",t[t.Erasor=7]="Erasor",t[t.Atom=8]="Atom",t[t.Bond=9]="Bond",t[t.Charge=10]="Charge",t[t.Ring=11]="Ring"}(Ri||(Ri={})),function(t){t[t.None=0]="None",t[t.Stereochemistry=1]="Stereochemistry",t[t.MappingNumber=2]="MappingNumber",t[t.AtomIndex=3]="AtomIndex"}(Oi||(Oi={}));class Li extends Jn{constructor(){super(),this.mol=null,this.policy=null,this.offsetX=0,this.offsetY=0,this.pointScale=1,this.viewOpt={decoration:Oi.Stereochemistry,showOxState:!0,showQuery:!0,showArtifacts:!0},this.width=0,this.height=0,this.border=8421504,this.borderRadius=4,this.background=16316664,this.canvasUnder=null,this.canvasMolecule=null,this.canvasOver=null,this.divMessage=null,this.layout=null,this.metavec=null,this.stereo=null,this.guidelines=null,this.filthy=!1,this.dragType=Ri.None,this.currentAtom=0,this.currentBond=0,this.hoverAtom=0,this.hoverBond=0,this.selectedMask=null,this.opAtom=0,this.opBond=0,this.opBudged=!1,this.opShift=!1,this.opCtrl=!1,this.opAlt=!1,this.lassoX=null,this.lassoY=null,this.lassoMask=null,this.clickX=0,this.clickY=0,this.mouseX=0,this.mouseY=0,this.dragGuides=null,this.templatePerms=null,this.currentPerm=0,this.fusionBank=null,this.cursorWatermark=0,this.cursorDX=0,this.cursorDY=0,this.toolAtomSymbol="",this.toolBondOrder=0,this.toolBondType=0,this.toolChargeDelta=0,this.toolRingArom=!1,this.toolRingFreeform=!1,this.toolRotateIncr=0,this.redrawCacheKey="",this.abbrevPolicy=nn.defaultBlackOnWhite(),this.abbrevPolicy.data.foreground=13684944,this.abbrevPolicy.data.atomCols=n.numberArray(13684944,this.abbrevPolicy.data.atomCols.length)}render(t){if(!this.width||!this.height)throw"Sketcher.render called without width and height";super.render(t),this.container=k("<div/>").appendTo(this.contentDOM),this.container.css({position:"relative",width:this.width+"px",height:this.height+"px"}),this.container.css({"background-color":R(this.background)}),this.border!=cn.NOCOLOUR&&(this.container.css({border:"1px solid "+R(this.border)}),this.container.css({"border-radius":this.borderRadius+"px"})),this.container.css({outline:"none"}),this.container.attr({tabindex:"0"});let e={position:"absolute",left:"0",top:"0",width:`${this.width}px`,height:`${this.height}`,"pointer-events":"none"};this.divInfo=k("<div/>").appendTo(this.container).css({position:"absolute",left:"0",top:"0","pointer-events":"none"}),this.canvasUnder=k("<canvas/>").appendTo(this.container).css(e),this.canvasMolecule=k("<canvas/>").appendTo(this.container).css(e),this.canvasOver=k("<canvas/>").appendTo(this.container).css(e),this.divMessage=k("<div/>").appendTo(this.container).css(e),this.divMessage.css({"text-align":"center","vertical-align":"middle","font-weight":"bold","font-size":"120%"})}getState(){return{mol:this.mol.clone(),currentAtom:this.currentAtom,currentBond:this.currentBond,selectedMask:null==this.selectedMask?null:this.selectedMask.slice(0)}}getSelected(t){return!(null==this.selectedMask||t>this.selectedMask.length)&&this.selectedMask[t-1]}getLassoed(t){return!(null==this.lassoMask||t>this.lassoMask.length)&&this.lassoMask[t-1]}scale(){return this.pointScale}angToX(t){return t*this.pointScale+this.offsetX}angToY(t){return t*-this.pointScale+this.offsetY}xToAng(t){return(t-this.offsetX)/this.pointScale}yToAng(t){return(t-this.offsetY)/-this.pointScale}scaleToAng(t){return t/this.pointScale}angToScale(t){return t*this.pointScale}yIsUp(){return!1}measureText(t,e){return en.main.measureText(t,e)}delayedRedraw(){null!=this.canvasMolecule&&(this.filthy=!0,window.setTimeout((()=>{this.filthy&&this.redraw()}),10))}layoutMolecule(){let t=this.mol;this.hoverAtom>0&&Qt.hasAbbrev(t,this.hoverAtom)&&(t=t.clone(),t.setAtomElement(this.hoverAtom,""),t.setAtomCharge(this.hoverAtom,0),t.setAtomUnpaired(this.hoverAtom,0),Qt.clearAbbrev(t,this.hoverAtom));let e=this.sketchEffects(t);this.layout=new rn(t,this,this.policy,e),this.layout.setWantArtifacts(this.viewOpt.showArtifacts),this.layout.arrange()}redrawMetaVector(){if(this.metavec=new cn,new mn(this.layout,this.metavec).draw(),this.hoverAtom>0&&Qt.hasAbbrev(this.mol,this.hoverAtom)){let t=Qt.getAbbrev(this.mol,this.hoverAtom);this.orientAbbreviation(this.hoverAtom,t),this.abbrevPolicy.data.pointScale=this.policy.data.pointScale;let e=new rn(t,this,this.abbrevPolicy,new sn);e.arrange(),new mn(e,this.metavec).draw()}}redraw(){this.filthy=!1,this.redrawInfo(),this.redrawUnder(),this.redrawMolecule(),this.redrawOver()}redrawInfo(){let t=JSON.stringify([this.width,this.height,this.mol.toString()]);if(t==this.redrawCacheKey)return;if(this.redrawCacheKey=t,this.divInfo.empty(),this.divInfo.css({visibility:"hidden",left:"0",top:"0"}),0==this.mol.numAtoms)return;let e=k("<div/>").appendTo(this.divInfo);e.css({display:"inline-block","text-align":"right","font-family":"sans-serif","font-size":"80%",color:"#C0C0C0"});let n=Qt.molecularFormula(this.mol,["<sub>","</sub>","<sup>","</sup>"]),i=0;for(let t=1;t<=this.mol.numAtoms;t++)i+=this.mol.atomCharge(t);-1==i?n+="<sup>-</sup>":i<-1?n+=`<sup>${i}</sup>`:1==i?n+="<sup>+</sup>":i>1&&(n+=`<sup>+${i}</sup>`),n+="<br>"+Qt.molecularWeight(this.mol).toFixed(2),e.setHTML(n),setTimeout((()=>{let t=e.width(),n=e.height();z(this.divInfo,this.width-t-1,1,t,n),this.divInfo.css({visibility:"visible"})}),1)}redrawUnder(){let t=14737632,e=10526880,n=8421504,i=12632256,s=13684944,o=gt();this.canvasUnder.elCanvas.width=this.width*o,this.canvasUnder.elCanvas.height=this.height*o,this.canvasUnder.css({width:`${this.width}px`,height:`${this.height}px`});let r=this.canvasUnder.elCanvas.getContext("2d");if(r.save(),r.scale(o,o),r.clearRect(0,0,this.width,this.height),this.hoverAtom>0){let e=new $t(this.mol).getUnits();for(let t of e)t.atoms.includes(this.hoverAtom)&&this.drawPolymerUnit(r,t,e);let n=0;this.hoverAtom==this.currentAtom&&(n+=.1),this.getSelected(this.hoverAtom)&&(n+=.1),this.currentBond>0&&(this.mol.bondFrom(this.currentBond)==this.hoverAtom||this.mol.bondTo(this.currentBond)==this.hoverAtom)&&(n+=.1),this.drawAtomShade(r,this.hoverAtom,t,-1,n)}if(this.hoverBond>0){let e=this.mol.bondFrom(this.hoverBond),n=this.mol.bondTo(this.hoverBond),i=new $t(this.mol).getUnits();for(let t of i)t.atoms.includes(e)&&t.atoms.includes(n)&&this.drawPolymerUnit(r,t,i);let s=0;this.hoverBond==this.currentBond&&(s+=.1),this.getSelected(e)&&this.getSelected(n)&&(s+=.1),this.drawBondShade(r,this.hoverBond,t,-1,s)}for(let t=1;t<=this.mol.numBonds;t++){let e=t==this.currentBond?.1:0,n=this.mol.bondFrom(t),o=this.mol.bondTo(t),a=this.getSelected(n),l=this.getSelected(o),d=this.getLassoed(n),p=this.getLassoed(o);a&&l?this.drawBondShade(r,t,i,-1,e):(a||d)&&(l||p)&&this.drawBondShade(r,t,s,-1,e)}for(let t=1;t<=this.mol.numAtoms;t++){let e=this.currentAtom==t?.1:0;this.getSelected(t)?this.drawAtomShade(r,t,i,-1,e):this.getLassoed(t)&&this.drawAtomShade(r,t,s,-1,e)}if(this.currentAtom>0&&this.drawAtomShade(r,this.currentAtom,e,n,0),this.currentBond>0&&this.drawBondShade(r,this.currentBond,e,n,0),(this.dragType==Ri.Move||this.dragType==Ri.Atom&&this.opAtom>0||this.dragType==Ri.Bond)&&null!=this.dragGuides&&this.dragGuides.length>0)for(let t of this.dragGuides)for(let e=0;e<t.x.length;e++){let n=this.policy.data.lineSize*this.pointScale;r.strokeStyle="#C0C0C0",r.lineWidth=n,mt(r,t.sourceX,t.sourceY,t.destX[e],t.destY[e]),r.beginPath(),r.ellipse(t.destX[e],t.destY[e],2*n,2*n,0,0,Z,!1),r.fillStyle="#C0C0C0",r.fill()}if(this.dragType==Ri.Ring){let[t,e]=this.determineFauxRing(),n=null==t?0:t.length;if(n>0){let i=this.pointScale,s=this.policy.data.lineSize*i;r.strokeStyle="#C0C0C0",r.lineWidth=s;for(let i=0;i<n;i++){let s=i<n-1?i+1:0;mt(r,this.angToX(t[i]),this.angToY(e[i]),this.angToX(t[s]),this.angToY(e[s]))}if(this.toolRingArom){let i=0,s=0;for(let o=0;o<n;o++)i+=t[o],s+=e[o];i/=n,s/=n;let o=0;for(let r=0;r<n;r++)o+=U(t[r]-i,e[r]-s);o=this.angToScale(.5*o/n),r.beginPath(),r.ellipse(this.angToX(i),this.angToY(s),o,o,0,0,Z,!1),r.stroke()}}}r.restore()}redrawMolecule(){let t=gt();this.canvasMolecule.elCanvas.width=this.width*t,this.canvasMolecule.elCanvas.height=this.height*t,this.canvasMolecule.css({width:`${this.width}px`,height:`${this.height}px`});let e=this.canvasMolecule.elCanvas.getContext("2d");if(e.save(),e.scale(t,t),e.clearRect(0,0,this.width,this.height),null!=this.metavec&&this.metavec.renderContext(e),null!=this.templatePerms){let t=this.templatePerms[this.currentPerm];null!=t.metavec&&t.metavec.renderContext(e)}e.restore()}redrawOver(){let t=gt();this.canvasOver.elCanvas.width=this.width*t,this.canvasOver.elCanvas.height=this.height*t,this.canvasOver.css({width:`${this.width}px`,height:`${this.height}px`});let e=this.canvasOver.elCanvas.getContext("2d");if(e.save(),e.scale(t,t),e.clearRect(0,0,this.width,this.height),(this.dragType==Ri.Lasso||this.dragType==Ri.Erasor)&&this.lassoX.length>1){let t=this.dragType==Ri.Erasor,n=new Path2D;n.moveTo(this.lassoX[0],this.lassoY[0]);for(let t=1;t<this.lassoX.length;t++)n.lineTo(this.lassoX[t],this.lassoY[t]);n.closePath(),e.fillStyle=R(t?3506372608:4026531840),e.fill(n),e.strokeStyle=t?"#804040":"#808080",e.lineWidth=.5,e.stroke(n)}if(this.dragType==Ri.Rotate){let[t,n,i,s]=this.determineDragTheta(),o=this.pointScale,r=this.policy.data.lineSize*o;e.strokeStyle="#E0E0E0",e.lineWidth=.5*r,mt(e,t,n,t+s,n),e.strokeStyle="#808080",e.lineWidth=r,mt(e,t,n,t+s*Math.cos(i),n+s*Math.sin(i)),e.beginPath(),e.ellipse(t,n,2*r,2*r,0,0,Z,!1),e.fillStyle="#808080",e.fill();for(let s of this.subjectAtoms(!0,!1)){let o=this.angToX(this.mol.atomX(s)),a=this.angToY(this.mol.atomY(s)),l=Math.atan2(a-n,o-t),d=U(o-t,a-n),p=t+d*Math.cos(l+i),h=n+d*Math.sin(l+i);e.beginPath(),e.ellipse(p,h,2*r,2*r,0,0,Z,!1),e.strokeStyle="black",e.lineWidth=.5,e.stroke()}}if(this.dragType==Ri.Move){let[t,n]=this.determineMoveDelta(),i=this.pointScale,s=this.policy.data.lineSize*i;for(let i of this.subjectAtoms(!1,!0)){let o=this.angToX(this.mol.atomX(i)),r=this.angToY(this.mol.atomY(i));e.beginPath(),e.ellipse(o+t,r+n,2*s,2*s,0,0,Z,!1),e.strokeStyle="black",e.lineWidth=.5,e.stroke()}}if(this.dragType==Ri.Atom&&this.opAtom>0||this.dragType==Ri.Bond){let t=this.dragType==Ri.Atom?this.toolAtomSymbol:"C",n=this.dragType==Ri.Bond?this.toolBondOrder:1,i=this.dragType==Ri.Bond?this.toolBondType:ge.BONDTYPE_NORMAL;this.drawOriginatingBond(e,t,n,i)}this.viewOpt.showQuery&&this.drawQueryFeatures(e),e.restore()}subjectAtoms(t=!1,e=!1){let n=[];if(null!=this.selectedMask){for(let t=0;t<this.selectedMask.length;t++)this.selectedMask[t]&&n.push(t+1);if(n.length>0)return n}if(this.currentAtom>0?n.push(this.currentAtom):this.currentBond>0&&(n.push(this.mol.bondFrom(this.currentBond)),n.push(this.mol.bondTo(this.currentBond))),e&&0==n.length&&this.opAtom>0&&n.push(this.opAtom),t&&0==n.length)for(let t=1;t<=this.mol.numAtoms;t++)n.push(t);return n}updateLasso(t,e){if(this.dragType!=Ri.Lasso&&this.dragType!=Ri.Erasor)return;(t<0||e<0||t>this.width||e>this.height)&&(this.dragType=Ri.None,this.lassoX=null,this.lassoY=null,this.lassoMask=null,this.delayedRedraw());let i=n.len(this.lassoX);i>0&&this.lassoX[i-1]==t&&this.lassoY[i-1]==e||(this.lassoX.push(t),this.lassoY.push(e),this.calculateLassoMask(),this.delayedRedraw())}calculateLassoMask(){this.lassoMask=new Array(this.mol.numAtoms);for(let t=0;t<this.mol.numAtoms;t++)this.lassoMask[t]=!1;for(let t=0;t<this.layout.numPoints();t++){let e=this.layout.getPoint(t);0!=e.anum&&(this.lassoMask[e.anum-1]=l.pointInPolygon(e.oval.cx,e.oval.cy,this.lassoX,this.lassoY))}}drawAtomShade(t,e,n,i,s){if(null==this.layout)return;let o=null;for(let t=0;t<this.layout.numPoints();t++)if(this.layout.getPoint(t).anum==e){o=this.layout.getPoint(t);break}if(null==o)return;let r=.2*this.pointScale,a=(G(r),o.oval.cx),l=o.oval.cy,d=Math.max(r,Math.max(o.oval.rw,o.oval.rh))+(.1+s)*this.pointScale;-1!=n&&(t.beginPath(),t.ellipse(a,l,d,d,0,0,Z,!0),t.fillStyle=R(n),t.fill()),-1!=i&&(t.beginPath(),t.ellipse(a,l,d,d,0,0,Z,!0),t.strokeStyle=R(i),t.lineWidth=1,t.stroke())}drawBondShade(t,e,n,i,s){var o;if(null==this.layout)return;let r=0,a=0,l=0,d=0,p=0,h=0;for(let t of null!==(o=this.layout.getUnsplitLines())&&void 0!==o?o:this.layout.getLines())t.bnum==e&&(r+=t.line.x1,a+=t.line.y1,l+=t.line.x2,d+=t.line.y2,p++,h+=t.size+(.2+s)*this.pointScale);if(0==p)return;let c=1/p;h*=c,r*=c,a*=c,l*=c,d*=c;let m=l-r,u=d-a,f=1/U(m,u);m*=f,u*=f;let g,k,y=u,w=-m,x=new Path2D,C=.8;x.moveTo(r+y*h,a+w*h),g=r+(y*h-m*h)*C,k=a+(w*h-u*h)*C,x.quadraticCurveTo(g,k,r-m*h,a-u*h),g=r+(-y*h-m*h)*C,k=a+(-w*h-u*h)*C,x.quadraticCurveTo(g,k,r-y*h,a-w*h),x.lineTo(l-y*h,d-w*h),g=l+(-y*h+m*h)*C,k=d+(-w*h+u*h)*C,x.quadraticCurveTo(g,k,l+m*h,d+u*h),g=l+(y*h+m*h)*C,k=d+(w*h+u*h)*C,x.quadraticCurveTo(g,k,l+y*h,d+w*h),x.closePath(),-1!=n&&(t.beginPath(),t.fillStyle=R(n),t.fill(x)),-1!=i&&(t.beginPath(),t.strokeStyle=R(i),t.lineWidth=1,t.stroke(x))}drawOriginatingBond(t,e,n,i){let s=this.clickX,o=this.clickY;if(this.opAtom>0)s=this.angToX(this.mol.atomX(this.opAtom)),o=this.angToY(this.mol.atomY(this.opAtom));else if(this.opBond>0){let[t,e]=this.mol.bondFromTo(this.opBond);s=this.angToX(.5*(this.mol.atomX(t)+this.mol.atomX(e))),o=this.angToY(.5*(this.mol.atomY(t)+this.mol.atomY(e)))}let r=this.mouseX,a=this.mouseY,l=this.snapToGuide(r,a),d=!1;l&&([r,a,d]=l);let p=this.pointScale;if(t.strokeStyle=d?"#4040FF":"#808080",t.lineWidth=this.policy.data.lineSize*p*(d?1.5:1),mt(t,s,o,r,a),"C"!=e){let n=this.policy.data.fontSize*p;t.font=ft(n);let i=t.measureText(e);t.fillStyle="#808080",t.fillText(e,r-.5*i.width,a+.5*n)}}drawQueryFeatures(t){const{layout:e,mol:n}=this;let i=[];for(let t=1;t<=n.numAtoms;t++)if(te.hasAnyQueryAtom(n,t)){let s=[];for(let e of n.atomExtra(t))e.startsWith("q")&&s.push(e);let o=e.getPoint(t-1);i.push({txt:s.join(","),x:o.oval.cx+o.oval.rw,y:o.oval.cy})}for(let t=1;t<=n.numBonds;t++)if(te.hasAnyQueryBond(n,t)){let s=[];for(let e of n.bondExtra(t))e.startsWith("q")&&!e.startsWith(Gt.Orders)&&s.push(e);let o=0,r=0,a=0;for(let n of e.getLines())n.bnum==t&&(o+=2,r+=n.line.x1+n.line.x2,a+=n.line.y1+n.line.y2);i.push({txt:s.join(","),x:r/o,y:a/o})}let s=.7*this.policy.data.fontSize*this.pointScale;for(let e of i)t.font=ft(s),t.fillStyle="#FF40C0",t.fillText(e.txt,e.x,e.y)}drawPolymerUnit(t,e,i){const{mol:s,layout:o}=this;let r=[],a=[],d=this.pointScale;for(let t of e.atoms){let e=o.getPoint(t-1),n=Math.max(.5*d,Math.max(e.oval.rw,e.oval.rh));const i=36,s=Z/i;for(let t=0;t<i;t++){let i=t*s;r.push(e.oval.cx+n*Math.cos(i)),a.push(e.oval.cy+n*Math.sin(i))}}let p=[],h=[],c=[];for(let t=1;t<=s.numBonds;t++){let n=s.bondFrom(t),i=s.bondTo(t),l=e.atoms.includes(n),m=e.atoms.includes(i);if(!l&&!m)continue;m?l||(p.push(t),h.push(i),c.push(n)):(p.push(t),h.push(n),c.push(i));let u=o.getPoint(n-1),f=o.getPoint(i-1),g=u.oval.cx,k=u.oval.cy,y=f.oval.cx,w=f.oval.cy;l?m||([y,w]=[.5*(g+y),.5*(k+w)]):[g,k]=[.5*(g+y),.5*(k+w)];let x=y-g,C=w-k,v=U(x,C),b=V(v),A=C*b*.3*d,T=-x*b*.3*d,M=Math.ceil(2*v/d)+1,E=Math.ceil(2*U(A,T)/d)+1;for(let t=0;t<=M;t++)r.push(g-A+x*t/M),a.push(k-T+C*t/M),r.push(g+A+x*t/M),a.push(k+T+C*t/M);for(let t=1;t<E;t++)r.push(g-A+2*A*t/E),a.push(k-T+2*T*t/E),r.push(y-A+2*A*t/E),a.push(w-T+2*T*t/E)}let[m,u]=l.outlinePolygon(r,a,.5*d),f=new Path2D;f.moveTo(m[0],u[0]);for(let t=1;t<m.length;t++)f.lineTo(m[t],u[t]);f.closePath(),t.save(),t.fillStyle="#F9EFFF",t.fill(f),t.strokeStyle="#C0C0C0",t.lineWidth=1,t.stroke(f),t.restore();let g=[],k=[],y=[];if(4==n.len(e.bondConn))k.push([h[p.indexOf(e.bondConn[0])],h[p.indexOf(e.bondConn[2])]]),k.push([h[p.indexOf(e.bondConn[1])],h[p.indexOf(e.bondConn[3])]]);else if(2==n.len(p)&&null!=e.connect)e.connect!=Xt.HeadToTail&&e.connect!=Xt.Random||k.push([h[0],h[1]]),e.connect!=Xt.HeadToHead&&e.connect!=Xt.Random||(g.push(h[0]),g.push(h[1]));else for(let t of p){let o=s.bondFrom(t),r=s.bondTo(t);e.atoms.includes(r)&&([o,r]=[r,o]);let a=e.bondIncl.get(t),l=e.bondExcl.get(t),d=s.atomElement(r)!=Ut;for(let t of d?[e]:i)for(let i of t.atoms){let r=!1;for(let e of s.atomAdjList(i))if(!t.atoms.includes(e)){r=!0;break}if(r){if(n.notBlank(a)){let e=t.atomName.get(i),n=!1;if(e)for(let t of e)n=n||a.includes(t);if(!n)continue}if(n.notBlank(l)){let e=t.atomName.get(i),n=!1;if(e)for(let t of e)n=n||l.includes(t);if(n)continue}i==o?g.push(o):e===t?k.push([o,i]):y.push([o,i])}}}g=n.uniqueStable(g),k=n.maskGet(k,n.maskUnique(k.map((t=>n.min(t)*s.numAtoms+n.max(t))))),y=n.maskGet(y,n.maskUnique(y.map((t=>n.min(t)*s.numAtoms+n.max(t))))),t.save(),t.strokeStyle="#6329C1",t.lineWidth=2,t.setLineDash([1,1]),t.beginPath();for(let e of g){let n=o.getPoint(e-1),i=n.oval.cx,s=n.oval.cy,r=0,a=0,l=0;for(let t=0;t<p.length;t++)if(h[t]==e){let e=o.getPoint(c[t]-1);r+=e.oval.cx,a+=e.oval.cy,l++}l>1&&(r/=l,a/=l),r=i+.5*(r-i),a=s+.5*(a-s);let m=r-i,u=a-s,f=V(U(m,u)),g=u*f,k=-m*f,y=.5*(i+r),w=.5*(s+a);const x=2*d;t.moveTo(i,s),t.quadraticCurveTo(y+g*x,w+k*x,r,a),t.quadraticCurveTo(y-g*x,w-k*x,i,s)}for(let[e,n]of k){let i=s.atomX(e),o=s.atomY(e),r=s.atomX(n),a=s.atomY(n),l=r-i,d=a-o,p=V(U(l,d)),h=d*p,c=-l*p,m=.5*(i+r),u=.5*(o+a);const f=5;let g=m+h*f,k=u+c*f,y=m-h*f,w=u-c*f,[x,C]=Zt.congestionPoint(s,g,k)<Zt.congestionPoint(s,y,w)?[g,k]:[y,w];t.moveTo(this.angToX(i),this.angToY(o)),t.quadraticCurveTo(this.angToX(x),this.angToY(C),this.angToX(r),this.angToY(a))}for(let[e,n]of y){let i=o.getPoint(e-1),s=o.getPoint(n-1);t.moveTo(i.oval.cx,i.oval.cy),t.lineTo(s.oval.cx,s.oval.cy)}t.stroke(),t.restore()}determineFauxRing(){let t=this.opAtom,e=this.opBond,n=this.mol,i=t>0?n.atomX(t):e>0?.5*(n.atomX(n.bondFrom(e))+n.atomX(n.bondTo(e))):this.xToAng(this.clickX),s=t>0?n.atomY(t):e>0?.5*(n.atomY(n.bondFrom(e))+n.atomY(n.bondTo(e))):this.yToAng(this.clickY),o=this.xToAng(this.mouseX)-i,r=this.yToAng(this.mouseY)-s,a=Math.min(9,Math.round(2*U(o,r)/ge.IDEALBOND)+2);return a<3?[null,null]:e>0?Kt.proposeBondRing(n,a,e,o,r):t>0&&n.atomAdjCount(t)>0&&!this.toolRingFreeform?Kt.proposeAtomRing(n,a,t,o,r):Kt.proposeNewRing(n,a,i,s,o,r,!this.toolRingFreeform)}determineDragTheta(){let t=this.clickX,e=this.clickY,n=this.snapToGuide(t,e);null!=n&&(t=n[0],e=n[1]);let i=Math.atan2(this.mouseY-e,this.mouseX-t),s=U(this.mouseX-t,this.mouseY-e);return this.toolRotateIncr>0&&(i=Math.round(i/this.toolRotateIncr)*this.toolRotateIncr),[t,e,i,s]}determineMoveDelta(){let t=this.clickX,e=this.clickY,n=this.mouseX,i=this.mouseY;if(this.opAtom>0){t=this.angToX(this.mol.atomX(this.opAtom)),e=this.angToY(this.mol.atomY(this.opAtom));let s=this.snapToGuide(n,i);null!=s&&(n=s[0],i=s[1])}return[n-t,i-e]}snapToGuide(t,e){if(this.opBond>0){let n=this.pickObject(t,e);if(n<0){let[t,e]=this.mol.bondFromTo(-n);return[this.angToX(.5*(this.mol.atomX(t)+this.mol.atomX(e))),this.angToY(.5*(this.mol.atomY(t)+this.mol.atomY(e))),!1]}return null}let n=Number.POSITIVE_INFINITY,i=0,s=0,o=!1;const r=G(.5*this.pointScale);if(null!=this.dragGuides)for(let a=0;a<this.dragGuides.length;a++)for(let l=0;l<this.dragGuides[a].x.length;l++){let d=this.dragGuides[a].destX[l],p=this.dragGuides[a].destY[l],h=Y(d-t,p-e);h<r&&h<n&&([n,i,s,o]=[h,d,p,!1])}for(let a=1;a<=this.mol.numAtoms;a++){let l=this.angToX(this.mol.atomX(a)),d=this.angToY(this.mol.atomY(a)),p=Y(l-t,d-e);p<r&&p<n&&([n,i,s,o]=[p,l,d,!0])}return isFinite(n)?[i,s,o]:null}pickObjectCanvas(t,e,n={}){let i=.5*this.pointScale,s=0,o=Number.POSITIVE_INFINITY;if(!n.noAtoms)for(let n=0;n<this.layout.numPoints();n++){let r=this.layout.getPoint(n);if(0==r.anum)continue;let a=Y(Math.abs(t-r.oval.cx),Math.abs(e-r.oval.cy));a>G(Math.max(i,Math.max(r.oval.rw,r.oval.rh)))||a<o&&(s=r.anum,o=a)}if(0!=s)return s;if(!n.noBonds)for(let n=0;n<this.layout.numLines();n++){let r=this.layout.getLine(n);if(0==r.bnum)continue;let a=r.line.x1,d=r.line.y1,p=r.line.x2,h=r.line.y2;if(t<Math.min(a,p)-i||e<Math.min(d,h)-i||t>Math.max(a,p)+i||e>Math.max(d,h)+i)continue;let c=l.pointLineSegDistance(t,e,a,d,p,h);c>i||c<o&&(s=-r.bnum,o=c)}return s}pickObject(t,e,n={}){return this.pickObjectCanvas(t,e,n)||0}sketchEffects(t){let e=new sn;for(let n=1;n<=t.numAtoms;n++)Qt.hasAbbrev(t,n)&&n!=this.hoverAtom&&(e.dottedRectOutline[n]=8421504);if(e.overlapAtoms=Zt.overlappingAtomList(t,.2),e.atomDecoText=n.stringArray("",t.numAtoms),e.atomDecoCol=n.numberArray(Pn.foreground,t.numAtoms),e.atomDecoSize=n.numberArray(.3,t.numAtoms),e.bondDecoText=n.stringArray("",t.numBonds),e.bondDecoCol=n.numberArray(Pn.foreground,t.numBonds),e.bondDecoSize=n.numberArray(.3,t.numBonds),this.viewOpt.showOxState)for(let n=1;n<=t.numAtoms;n++){let i=Qt.atomOxidationState(t,n);null!=i&&(e.atomDecoText[n-1]=Qt.oxidationStateText(i),e.atomDecoCol[n-1]=16744576)}if(this.viewOpt.decoration==Oi.Stereochemistry){this.stereo||(this.stereo=vn.create(bn.createStrict(t)));t:for(let n=1;n<=t.numAtoms;n++){let i=this.stereo.atomTetraChirality(n);if(i!=vn.STEREO_NONE){for(let e of t.atomAdjBonds(n))if(1!=t.bondOrder(e))continue t;if(i==vn.STEREO_UNKNOWN)for(let e of t.atomAdjList(n))if(Bt.ELEMENT_BLOCKS[t.atomicNumber(e)]>=3)continue t;e.atomDecoText[n-1]=i==vn.STEREO_POS?"R":i==vn.STEREO_NEG?"S":i==vn.STEREO_UNKNOWN?"R/S":"?",e.atomDecoCol[n-1]=40960}}for(let n=1;n<=t.numBonds;n++){let t=this.stereo.bondSideStereo(n);t!=vn.STEREO_NONE&&(e.bondDecoText[n-1]=t==vn.STEREO_POS?"Z":t==vn.STEREO_NEG?"E":t==vn.STEREO_UNKNOWN?"Z/E":"?",e.bondDecoCol[n-1]=40960)}}else if(this.viewOpt.decoration==Oi.MappingNumber){e.atomDecoText=n.stringArray("",t.numAtoms),e.atomDecoCol=n.numberArray(8388863,t.numAtoms),e.atomDecoSize=n.numberArray(.3,t.numAtoms);for(let n=1;n<=t.numAtoms;n++)t.atomMapNum(n)>0&&(e.atomDecoText[n-1]=t.atomMapNum(n).toString())}else if(this.viewOpt.decoration==Oi.AtomIndex){e.atomDecoText=n.stringArray("",t.numAtoms),e.atomDecoCol=n.numberArray(8388863,t.numAtoms),e.atomDecoSize=n.numberArray(.3,t.numAtoms);for(let n=1;n<=t.numAtoms;n++)e.atomDecoText[n-1]=n.toString()}return e}orientAbbreviation(t,e){const{mol:n}=this;if(Qt.isBlank(e))return;if(1!=this.mol.atomAdjCount(t))return;let i=n.atomAdjList(t)[0],s=n.atomX(t)-n.atomX(i),o=n.atomY(t)-n.atomY(i),r=e.atomAdjList(1),a=0,l=0,d=V(r.length);for(let t of r)a+=e.atomX(t)-e.atomX(1),l+=e.atomY(t)-e.atomY(1);a*=d,l*=d;let p=Math.atan2(o,s),h=Math.atan2(l,a);Zt.rotateMolecule(e,p-h),1==r.length?(Zt.translateMolecule(e,n.atomX(t)-e.atomX(r[0]),n.atomY(t)-e.atomY(r[0])),e.setAtomPos(1,n.atomX(i),n.atomY(i))):Zt.translateMolecule(e,n.atomX(i)-e.atomX(1),n.atomY(i)-e.atomY(1));for(let t of e.atomAdjBonds(1)){let n=e.bondOther(t,1);e.atomHExplicit(n)==ge.HEXPLICIT_UNKNOWN&&e.setAtomHExplicit(n,Math.max(0,e.atomHydrogens(n)))}e.deleteAtomAndBonds(1)}}var Bi,qi;class _i{copyEvent(t,e){return!1}pasteEvent(t){return!1}}class Ii{constructor(){this.handlers=[new _i],this.triggerBackupPaste=null}pushHandler(t){this.handlers.push(t)}popHandler(){this.handlers.pop()}currentHandler(){return n.last(this.handlers)}triggerCopy(t){this.currentHandler().copyEvent(t,this)||document.execCommand(t?"cut":"copy")}triggerPaste(){this.currentHandler().pasteEvent(this)||document.execCommand("paste")}getString(){return null}setString(t){}setImage(t){}canSetHTML(){return!1}setHTML(t){}canAlwaysGet(){return!1}downloadString(t,e){}}class zi extends Ii{constructor(){super(),this.lastContent=null,this.fakeTextArea=null,this.busy=!1,document.addEventListener("copy",(t=>{var e;return this.busy?null:(null===(e=this.currentHandler())||void 0===e?void 0:e.copyEvent(!1,this))?(t.preventDefault(),!1):void 0})),document.addEventListener("cut",(t=>{var e;return this.busy?null:(null===(e=this.currentHandler())||void 0===e?void 0:e.copyEvent(!0,this))?(t.preventDefault(),!1):void 0})),document.addEventListener("paste",(t=>{var e;let n=window;this.lastContent=null,n.clipboardData&&n.clipboardData.getData?this.lastContent=n.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData&&(this.lastContent=t.clipboardData.getData("text/plain"));let i=null===(e=this.currentHandler())||void 0===e?void 0:e.pasteEvent(this);return this.lastContent=null,!i||(t.preventDefault(),!1)}))}getString(){return this.lastContent}setString(t){let e=()=>{null==this.fakeTextArea&&(this.fakeTextArea=document.createElement("textarea"),this.fakeTextArea.style.fontSize="12pt",this.fakeTextArea.style.border="0",this.fakeTextArea.style.padding="0",this.fakeTextArea.style.margin="0",this.fakeTextArea.style.position="fixed",this.fakeTextArea.style.left="-9999px",this.fakeTextArea.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeTextArea.setAttribute("readonly",""),document.body.appendChild(this.fakeTextArea)),this.fakeTextArea.value=t,this.fakeTextArea.select(),this.busy=!0,document.execCommand("copy"),this.busy=!1};navigator.clipboard?navigator.clipboard.writeText(t).then((()=>{}),e):e()}setImage(t){let e=new ClipboardItem({"image/png":t});this.busy=!0,(()=>{var t,n,i,s;t=this,n=void 0,s=function*(){yield navigator.clipboard.write([e]),this.busy=!1},new((i=void 0)||(i=Promise))((function(e,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,a)}l((s=s.apply(t,n||[])).next())}))})()}}class Pi extends Jn{constructor(t,e=!1){if(super(),this.options=t,this.isVertical=e,this.padding=6,this.htmlLabels=!1,this.numCols=0,this.selidx=0,this.buttonDiv=[],this.auxCell=[],this.isDisabled=null,this.callbackSelect=null,0==t.length)throw"molsync.ui.OptionList: must provide a list of option labels.";Un("option")||Xn("option",this.composeCSS())}getSelectedIndex(){return this.selidx}getSelectedValue(){return this.options[this.selidx]}getAuxiliaryCell(t){return this.auxCell[t].el}onSelect(t){this.callbackSelect=t}setDisabled(t){this.isDisabled=t,this.updateButtons()}render(t){super.render(t),this.contentDOM.css({display:"block","baseline-shift":"1.5em"}),this.buttonDiv=[],this.auxCell=[];let e=k('<table class="wmk-option-table"/>').appendTo(this.contentDOM),n=this.isVertical?null:k("<tr/>").appendTo(e);for(let t=0;t<this.options.length;t++){(this.isVertical||this.numCols>0&&t>0&&t%this.numCols==0)&&(n=k("<tr/>").appendTo(e));let i=k('<td class="wmk-option-cell"/>').appendTo(n),s=k('<div class="wmk-option"/>').appendTo(i);s.css({padding:`${this.padding}px`}),s.onClick((()=>this.clickButton(t))),this.buttonDiv.push(s),this.isVertical&&(i=k('<td style="vertical-align: middle;"/>').appendTo(n),this.auxCell.push(i))}this.updateButtons()}clickButton(t){t!=this.selidx&&(this.isDisabled&&this.isDisabled[t]||(this.setSelectedIndex(t),this.callbackSelect&&this.callbackSelect(t,this)))}setSelectedIndex(t){this.selidx!=t&&(this.selidx=t,this.updateButtons())}setSelectedValue(t){let e=this.options.indexOf(t);e>=0&&this.setSelectedIndex(e)}updateButtons(){for(let t=0;t<this.options.length&&t<this.buttonDiv.length;t++){let e=this.buttonDiv[t],n=this.options[t];0==n.length&&t==this.selidx?e.setText(""):0==n.length?e.setText(""):this.htmlLabels?e.setHTML(n):e.setText(n),e.removeClass("wmk-option-unselected wmk-option-selected"),this.isDisabled&&this.isDisabled[t]?e.addClass("wmk-option-disabled"):t!=this.selidx?e.addClass("wmk-option-unselected"):e.addClass("wmk-option-selected")}}composeCSS(){S(Pn.lowlight);let t=S(Pn.lowlightEdge1),e=S(Pn.lowlightEdge2);return S(Pn.highlight),`\n\t\t\t.wmk-option\n\t\t\t{\n\t\t\t\tmargin-bottom: 0;\n\t\t\t\tfont-family: 'Open Sans', sans-serif;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: normal;\n\t\t\t\ttext-align: center;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tline-height: 1.2em;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.wmk-option-selected\n\t\t\t{\n\t\t\t\tcolor: white;\n\t\t\t\tbackground-color: #008FD2;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, ${t}, ${e});\n\t\t\t}\n\t\t\t.wmk-option-unselected\n\t\t\t{\n\t\t\t\tcolor: #333;\n\t\t\t\tbackground-color: white;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, #FFFFFF, #E0E0E0);\n\t\t\t}\n\t\t\t.wmk-option-unselected:hover\n\t\t\t{\n\t\t\t\tbackground-color: #808080;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, #F0F0F0, #D0D0D0);\n\t\t\t}\n\t\t\t.wmk-option-unselected:active\n\t\t\t{\n\t\t\t\tcolor: white;\n\t\t\t\tbackground-color: #00C000;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, ${S(Pn.highlightEdge1)}, ${S(Pn.highlightEdge2)});\n\t\t\t}\n\t\t\t.wmk-option-disabled\n\t\t\t{\n\t\t\t\tcolor: #C0C0C0;\n\t\t\t\tcursor: not-allowed;\n\t\t\t}\n\t\t\t.wmk-option-table\n\t\t\t{\n\t\t\t\tmargin: 1px;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder-width: 0;\n\t\t\t\tborder-collapse: collapse;\n\t\t\t}\n\t\t\t.wmk-option-cell\n\t\t\t{\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder-width: 0;\n\t\t\t\tborder-width: 1px;\n\t\t\t\tborder-style: solid;\n\t\t\t\tborder-color: #808080;\n\t\t\t}\n\t\t`}}class Fi extends Jn{constructor(t){super(),this.options=t,this.unionHeight=!1,this.selidx=0,this.buttonDiv=[],this.panelDiv=[],this.padding=6,this.callbackSelect=null,Un("tabbar")||Xn("tabbar",this.composeCSS())}onSelect(t){this.callbackSelect=t}getSelectedIndex(){return this.selidx}getSelectedValue(){return this.options[this.selidx]}getPanelDOM(t){let e="number"==typeof t?t:this.options.indexOf(t);return e<0?null:this.panelDiv[e]}render(t){super.render(t);let e=k("<div/>").appendTo(this.contentDOM).css({display:"grid"});e.css({"align-items":"center","justify-content":"start","grid-row-gap":"0.5em"});let n="[start] 1fr ";for(let t=0;t<this.options.length;t++)n+="[btn"+t+"] auto ";n+="[btnX] 1fr [end]",e.css({"grid-template-columns":n});let i=k("<div/>").appendTo(e);i.css({"grid-column":"start / end","grid-row":"1",height:"100%"}),i.css({"border-bottom":"1px solid #C0C0C0"});for(let t=0;t<this.options.length;t++){let n=k('<div class="wmk-tabbar-cell"/>').appendTo(e);n.css({"grid-column":"btn"+t,"grid-row":"1"});let i=k('<div class="wmk-tabbar"/>').appendTo(n);i.css({padding:`${this.padding}px`}),i.onClick((()=>this.clickButton(t))),this.buttonDiv.push(i);let s=k("<div/>").appendTo(e);s.css({"grid-column":"start / end","grid-row":"2"}),s.css({"align-self":"start","justify-self":"center",width:"100%"}),this.panelDiv.push(s)}this.updateButtons()}clickButton(t){t!=this.selidx&&(this.setSelectedIndex(t),this.callbackSelect&&this.callbackSelect(t,this))}setSelectedIndex(t){if(this.selidx==t)return;this.selidx=t;let e=this.contentDOM;e.setCSS("min-width",`${e.width()}px`),this.updateButtons()}setSelectedValue(t){let e=this.options.indexOf(t);e>=0&&this.setSelectedIndex(e)}rotateSelected(t){this.setSelectedIndex((this.selidx+t+this.options.length)%this.options.length)}updateButtons(){for(let t=0;t<this.options.length&&t<this.buttonDiv.length;t++){let e=this.buttonDiv[t],n=this.options[t];0==n.length&&t==this.selidx?e.setText(""):0==n.length?e.setText(""):e.setText(n),e.removeClass("wmk-tabbar-unselected wmk-tabbar-selected"),t!=this.selidx?e.addClass("wmk-tabbar-unselected"):e.addClass("wmk-tabbar-selected"),this.unionHeight?this.panelDiv[t].setCSS("visibility",t==this.selidx?"visible":"hidden"):this.panelDiv[t].setCSS("display",t==this.selidx?"block":"none")}}composeCSS(){S(Pn.lowlight);let t=S(Pn.lowlightEdge1),e=S(Pn.lowlightEdge2);return S(Pn.highlight),`\n\t\t\t.wmk-tabbar\n\t\t\t{\n\t\t\t\tmargin-bottom: 0;\n\t\t\t\tfont-family: 'Open Sans', sans-serif;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: normal;\n\t\t\t\ttext-align: center;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tvertical-align: middle;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.wmk-tabbar-selected\n\t\t\t{\n\t\t\t\tcolor: white;\n\t\t\t\tbackground-color: #008FD2;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, ${t}, ${e});\n\t\t\t}\n\t\t\t.wmk-tabbar-unselected\n\t\t\t{\n\t\t\t\tcolor: #333;\n\t\t\t\tbackground-color: white;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, #FFFFFF, #E0E0E0);\n\t\t\t}\n\t\t\t.wmk-tabbar-unselected:hover\n\t\t\t{\n\t\t\t\tbackground-color: #808080;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, #F0F0F0, #D0D0D0);\n\t\t\t}\n\t\t\t.wmk-tabbar-unselected:active\n\t\t\t{\n\t\t\t\tcolor: white;\n\t\t\t\tbackground-color: #00C000;\n\t\t\t\tbackground-image: linear-gradient(to right bottom, ${S(Pn.highlightEdge1)}, ${S(Pn.highlightEdge2)});\n\t\t\t}\n\t\t\t.wmk-tabbar-table\n\t\t\t{\n\t\t\t\tmargin: 1px;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder-width: 0;\n\t\t\t\tborder-collapse: collapse;\n\t\t\t}\n\t\t\t.wmk-tabbar-cell\n\t\t\t{\n\t\t\t\tmargin: 0 -1px -1px 0;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder-width: 0;\n\t\t\t\tborder-width: 1px;\n\t\t\t\tborder-style: solid;\n\t\t\t\tborder-color: #808080;\n\t\t\t}\n\t\t`}}class ji extends Jn{constructor(t){super(),this.fields=t}render(t){super.render(t),this.divFields=k("<div/>").appendTo(this.contentDOM),this.fillTable();let e=k("<div/>").appendTo(this.contentDOM).css({"text-align":"center"});k('<button class="wmk-button wmk-button-default">Extra</button>').appendTo(e).onClick((()=>{this.fields.push(ge.PREFIX_EXTRA),this.fillTable()})),k('<button class="wmk-button wmk-button-default">Transient</button>').appendTo(e).css({"margin-left":"0.5em"}).onClick((()=>{this.fields.push(ge.PREFIX_TRANSIENT),this.fillTable()}))}getExtraFields(){let t=[];for(let e of this.fields)!e.startsWith(ge.PREFIX_TRANSIENT)&&e.length>1&&t.push(e);return t}getTransientFields(){let t=[];for(let e of this.fields)e.startsWith(ge.PREFIX_TRANSIENT)&&e.length>1&&t.push(e);return t}fillTable(){if(this.divFields.empty(),0==this.fields.length)return;let t=k("<table/>").appendTo(this.divFields).css({width:"100%"}),e=k("<tr/>").appendTo(t);k("<td/>").appendTo(e).css({"text-align":"right","font-weight":"bold","text-decoration":"underline"}).setText("Type"),k("<td/>").appendTo(e).css({"font-weight":"bold","text-decoration":"underline"}).setText("Value");for(let n=0;n<this.fields.length;n++){let i="?",s="";this.fields[n].length>0&&(i=this.fields[n].charAt(0),s=this.fields[n].substring(1)),e=k("<tr/>").appendTo(t);let o=k("<td/>").appendTo(e).css({"text-align":"right"}),r=k("<td/>").appendTo(e),a=k("<td/>").appendTo(e);k("<span/>").appendTo(o).css({padding:"0.2em",border:"1px solid black","background-color":"#C0C0C0"}).setText(i);let l=k('<input size="20"/>').appendTo(r).css({width:"100%",font:"inherit"});l.setValue(s),l.onInput((()=>{this.fields[n]=i+l.getValue()})),k('<button class="wmk-button wmk-button-small wmk-button-default"></button>').appendTo(a).css({"margin-left":"0.5em"}).onClick((()=>{this.fields.splice(n,1),this.fillTable()}))}}}!function(t){t[t.Atom=0]="Atom",t[t.Bond=1]="Bond"}(Bi||(Bi={})),function(t){t[t.Position=0]="Position",t[t.Link=1]="Link",t[t.Torsion=2]="Torsion"}(qi||(qi={}));class Ui extends Jn{constructor(t,e,i){if(super(),this.type=t,this.mol=e,this.idx=i,this.posX=[],this.posY=[],this.linkA=[],this.linkB=[],this.torsA=[],this.torsB=[],this.hovered=null,t==Bi.Atom){const t=i;let s=e.atomAdjList(t);this.atomSubset=[t,...s];for(let n of e.atomAdjBonds(t))this.linkA.push(0),this.linkB.push(this.atomSubset.indexOf(e.bondOther(n,t)));let o=[];for(let n of s)o.push(Math.atan2(-(e.atomY(n)-e.atomY(t)),e.atomX(n)-e.atomX(t)));let r=n.idxSort(o);for(let t=0;t<r.length;t++)this.torsA.push(r[t]+1),this.torsB.push(r[t<r.length-1?t+1:0]+1);this.selected={type:qi.Position,idx:0}}else{const t=i;let n=e.bondFrom(t),s=e.bondTo(t);this.atomSubset=[...e.atomAdjList(n),...e.atomAdjList(s)];let o=(t,e)=>{this.linkA.push(this.atomSubset.indexOf(t)),this.linkB.push(this.atomSubset.indexOf(e))};o(n,s);for(let t of e.atomAdjList(n))t!=s&&o(n,t);for(let t of e.atomAdjList(s))t!=n&&o(s,t);this.selected={type:qi.Link,idx:0}}}render(t){super.render(t);let e=k("<div/>").appendTo(this.contentDOM).css({"text-align":"center"});this.divDiagram=k("<div/>").appendTo(e).css({display:"inline-block"}),this.contentDOM.onClick((t=>this.mouseClick(I(t,this.divDiagram)))),this.contentDOM.onMouseMove((t=>this.mouseMove(I(t,this.divDiagram)))),this.redraw()}selectionAtoms(t){const e=this.atomSubset;return t.type==qi.Position?[e[t.idx]]:t.type==qi.Link?[e[this.linkA[t.idx]],e[this.linkB[t.idx]]]:t.type==qi.Torsion?[e[0],e[this.torsA[t.idx]],e[this.torsB[t.idx]]]:null}redraw(){this.divDiagram.empty();this.posX=[],this.posY=[];const t=.25;for(let t of this.atomSubset)this.posX.push(this.mol.atomX(t)),this.posY.push(this.mol.atomY(t));let e=n.min(this.posX)-t,i=n.max(this.posX)+t,s=n.min(this.posY)-t,o=n.max(this.posY)+t;this.scale=Math.min(40,Math.min(246/(i-e),246/(o-s)));let r=.5*(250-(i-e)*this.scale),a=.5*(250-(o-s)*this.scale);for(let t=0;t<this.atomSubset.length;t++)this.posX[t]=r+(this.posX[t]-e)*this.scale,this.posY[t]=250-(a+(this.posY[t]-s)*this.scale);this.posRad=t*this.scale;let d=new cn;d.setSize(250,250);let p=Pn.foreground,h=Pn.background,c=36817,m=4707794;for(let t=0;t<this.atomSubset.length;t++)this.hovered&&this.hovered.type==qi.Position&&this.hovered.idx==t?d.drawOval(this.posX[t],this.posY[t],this.posRad,this.posRad,p,1,h):this.selected&&this.selected.type==qi.Position&&this.selected.idx==t?d.drawOval(this.posX[t],this.posY[t],this.posRad,this.posRad,c,1,m):d.drawOval(this.posX[t],this.posY[t],this.posRad,this.posRad,cn.NOCOLOUR,0,p);for(let t of[1,2,3])for(let e=0;e<this.linkA.length;e++){let n=this.posX[this.linkA[e]],i=this.posY[this.linkA[e]],s=this.posX[this.linkB[e]],o=this.posY[this.linkB[e]];this.hovered&&this.hovered.type==qi.Link&&this.hovered.idx==e?3==t&&(d.drawLine(n,i,s,o,p,.1*this.scale+2),d.drawLine(n,i,s,o,h,.1*this.scale)):this.selected&&this.selected.type==qi.Link&&this.selected.idx==e?2==t&&(d.drawLine(n,i,s,o,c,.1*this.scale+2),d.drawLine(n,i,s,o,m,.1*this.scale)):1==t&&d.drawLine(n,i,s,o,p,.1*this.scale)}for(let t=0;t<this.torsA.length;t++){let e,i,s,o=this.posX[0],r=this.posY[0],a=.5*(this.posX[this.torsA[t]]-o),u=.5*(this.posY[this.torsA[t]]-r),f=.5*(this.posX[this.torsB[t]]-o),g=.5*(this.posY[this.torsB[t]]-r),k=.5*(U(a,u)+U(f,g)),y=Math.atan2(u,a)+10*tt,w=Math.atan2(g,f)-10*tt,x=it(w,y),C=k*Math.cos(y),v=k*Math.sin(y),b=k*Math.cos(w),A=k*Math.sin(w);if(x>0){let[t,a,d,p]=l.arcControlPoints(k,C,v,b,A);e=n.add([C,t,d,b],o),i=n.add([v,a,p,A],r),s=[!1,!0,!0,!1]}else{let t=y+.5*(x+Z),a=k*Math.cos(t),d=k*Math.sin(t),[p,h,c,m]=l.arcControlPoints(k,C,v,a,d),[u,f,g,w]=l.arcControlPoints(k,a,d,b,A);e=n.add([C,p,c,a,u,g,b],o),i=n.add([v,h,m,d,f,w,A],r),s=[!1,!0,!0,!1,!0,!0,!1]}this.hovered&&this.hovered.type==qi.Torsion&&this.hovered.idx==t?(d.drawPath(e,i,s,!1,p,.1*this.scale+2,cn.NOCOLOUR,!1),d.drawPath(e,i,s,!1,h,.1*this.scale,cn.NOCOLOUR,!1)):this.selected&&this.selected.type==qi.Torsion&&this.selected.idx==t?(d.drawPath(e,i,s,!1,c,.1*this.scale+2,cn.NOCOLOUR,!1),d.drawPath(e,i,s,!1,m,.1*this.scale,cn.NOCOLOUR,!1)):d.drawPath(e,i,s,!1,p,.1*this.scale,cn.NOCOLOUR,!1)}this.divDiagram.empty(),k(d.createSVG()).appendTo(this.divDiagram).css({"pointer-events":"none"})}mouseClick(t){if(event.stopPropagation(),this.type==Bi.Bond)return;let e=this.whichSelection(t[0],t[1]);e&&(this.sameSelection(this.selected,e)||(this.selected=e,this.hovered=null,this.redraw(),this.callbackSelect(e)))}mouseMove(t){if(this.type==Bi.Bond)return;let e=this.whichSelection(t[0],t[1]);e&&this.sameSelection(e,this.selected)&&(e=null),this.sameSelection(this.hovered,e)||(this.hovered=e,this.redraw())}whichSelection(t,e){let n=this.posX[0],i=this.posY[0];if(U(t-n,e-i)<=this.posRad)return{type:qi.Position,idx:0};let s=0;for(let t=1;t<this.atomSubset.length;t++)s=Math.max(s,U(this.posX[t]-n,this.posY[t]-i)+this.posRad);if(U(t-n,e-i)>s)return null;let o=Math.atan2(e-i,t-n),r=null,a=Number.POSITIVE_INFINITY;for(let t=0;t<this.linkB.length;t++){let e=Math.abs(it(Math.atan2(this.posY[this.linkB[t]]-i,this.posX[this.linkB[t]]-n),o));e<10*tt&&e<a&&(r={type:qi.Link,idx:t},a=e)}for(let t=0;t<this.torsA.length;t++){let e=Math.atan2(this.posY[this.torsA[t]]-i,this.posX[this.torsA[t]]-n),s=e+.5*it(Math.atan2(this.posY[this.torsB[t]]-i,this.posX[this.torsB[t]]-n),e),l=Math.abs(it(s,o));l<a&&(r={type:qi.Torsion,idx:t},a=l)}return r}sameSelection(t,e){return null==t&&null==e||null!=t&&null!=e&&t.type==e.type&&t.idx==e.idx}}const Xi=[1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,8.5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,7,7,7,7,7,7,7,7,7,7],Yi=[1,18,1,2,13,14,15,16,17,18,1,2,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3.5,4.5,5.5,6.5,7.5,8.5,9.5,10.5,11.5,12.5,13.5,14.5,15.5,16.5,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3.5,4.5,5.5,6.5,7.5,8.5,9.5,10.5,11.5,12.5,13.5,14.5,15.5,16.5,3,4,5,6,7,8,9,10,11,12];class Wi extends Jn{constructor(){super(),this.divList=[],this.selectedAtno=[],Xn("periodictable","\n\t*.wmk-periodictable-element\n\t{\n\t\tborder: 1px solid black;\n\t\tborder-radius: 2px;\n\t\tmargin: 0;\n\t\tmin-width: 2em;\n\t\tpadding: 0.4em 0 0.3em 0;\n\t\ttext-align: center;\n\t\tcolor: #FFFFFF;\n\t\tcursor: pointer;\n\t}\n\t*.wmk-periodictable-block1\n\t{\n\t\tbackground-color: #313062;\n\t}\n\t*.wmk-periodictable-block1:hover\n\t{\n\t\tbackground-color: #414072;\n\t}\n\t*.wmk-periodictable-block2\n\t{\n\t\tbackground-color: #205224;\n\t}\n\t*.wmk-periodictable-block2:hover\n\t{\n\t\tbackground-color: #306234;\n\t}\n\t*.wmk-periodictable-block3\n\t{\n\t\tbackground-color: #522818;\n\t}\n\t*.wmk-periodictable-block3:hover\n\t{\n\t\tbackground-color: #623828;\n\t}\n\t*.wmk-periodictable-block4\n\t{\n\t\tbackground-color: #575212;\n\t}\n\t*.wmk-periodictable-block4:block\n\t{\n\t\tbackground-color: #676222;\n\t}\n\t*.wmk-periodictable-selected\n\t{\n\t\tbackground-color: #FFFFFF !important;\n\t\tcolor: #000000 !important;\n\t\tcursor: default;\n\t}\n")}render(t){super.render(t);let e=k("<div/>").appendTo(this.contentDOM).css({display:"grid"});e.css({"align-items":"center","justify-content":"start",gap:"1px"});let n=Xi.map((t=>Math.round(2*t)+1)),i=Yi.map((t=>Math.round(2*t)+1)),s=n.length;for(let t=0;t<s;t++){let s=k("<div/>").appendTo(e);s.css({"grid-row":`${n[t]} / span 2`,"grid-column":`${i[t]} / span 2`}),s.addClass("wmk-periodictable-element");let o=Bt.ELEMENT_BLOCKS[t+1];1==o?s.addClass("wmk-periodictable-block1"):2==o?s.addClass("wmk-periodictable-block2"):3==o?s.addClass("wmk-periodictable-block3"):4==o&&s.addClass("wmk-periodictable-block4");let r=Bt.ELEMENTS[t+1];s.setText(r),this.divList.push(s),s.onClick((()=>{this.changeElement(r),this.callbackSelect(r)})),s.onDblClick((t=>{this.callbackDoubleClick(),t.preventDefault(),t.stopPropagation()}))}}onSelect(t){this.callbackSelect=t}onDoubleClick(t){this.callbackDoubleClick=t}changeElement(t){let e=Bt.ELEMENTS.indexOf(t);this.selectedAtno=[e],this.updateSelected()}setSelectedElements(t){this.selectedAtno=t.map((t=>Bt.ELEMENTS.indexOf(t))).filter((t=>t>0)),this.updateSelected()}updateSelected(){for(let t=1;t<=this.divList.length;t++)this.selectedAtno.includes(t)?this.divList[t-1].addClass("wmk-periodictable-selected"):this.divList[t-1].removeClass("wmk-periodictable-selected")}}class Hi extends Jn{constructor(t,e,n){super(),this.mol=t,this.atom=e,this.bond=n}render(t){super.render(t);let e=k("<div/>").appendTo(this.contentDOM);e.css({display:"grid","align-items":"center","justify-content":"start"}),e.css({"grid-row-gap":"0.5em","grid-column-gap":"0.5em"}),e.css({"grid-template-columns":"[title] auto [value] auto [end]"});let n=0,i=()=>k('<input size="20"/>').appendTo(e).css({"grid-area":`${n} / value`}),s=()=>{let t=k("<div/>").appendTo(e).css({"grid-area":`${n} / value`,dispkay:"flex"}),i=k("<label/>").appendTo(t).css({"margin-right":"0.5em"}),s=k('<input type="checkbox"/>').appendTo(i);return i.appendText("Not"),[s,k('<input size="20"/>').appendTo(t).css({"flex-grow":"1"})]};this.atom>0?(k("<div>Charges</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputCharges=i(),k("<div>Aromatic</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.optAromatic=new Pi(["Maybe","Yes","No"]),this.optAromatic.render(k("<div/>").appendTo(e).css({"grid-area":`${n} / value`})),k("<div>Unsaturated</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.optUnsaturated=new Pi(["Maybe","Yes","No"]),this.optUnsaturated.render(k("<div/>").appendTo(e).css({"grid-area":`${n} / value`})),k("<div>Elements</div>").appendTo(e).css({"grid-area":++n+" / title"}),[this.chkNotElements,this.inputElements]=s(),k("<div>Ring Sizes</div>").appendTo(e).css({"grid-area":++n+" / title"}),[this.chkNotRingSizes,this.inputRingSizes]=s(),k("<div>Ring Block</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.optRingBlock=new Pi(["Maybe","Yes","No"]),this.optRingBlock.render(k("<div/>").appendTo(e).css({"grid-area":`${n} / value`})),k("<div># Small Rings</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputNumRings=i(),k("<div># Ring Bonds</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputRingBonds=i(),k("<div>Adjacency</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputAdjacency=i(),k("<div>Bond Sums</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputBondSums=i(),k("<div>Valences</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputValences=i(),k("<div>Hydrogens</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputHydrogens=i(),k("<div>Isotopes</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputIsotopes=i(),this.setupAtom()):(k("<div>Ring Sizes</div>").appendTo(e).css({"grid-area":++n+" / title"}),[this.chkNotRingSizes,this.inputRingSizes]=s(),k("<div>Ring Block</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.optRingBlock=new Pi(["Maybe","Yes","No"]),this.optRingBlock.render(k("<div/>").appendTo(e).css({"grid-area":`${n} / value`})),k("<div># Small Rings</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputNumRings=i(),k("<div>Bond Orders</div>").appendTo(e).css({"grid-area":++n+" / title"}),this.inputOrders=i(),this.setupBond())}updateAtom(){const{mol:t,atom:e}=this;te.deleteQueryAtomAll(t,e);let n=this.splitNumbers(this.inputCharges.getValue());n&&te.setQueryAtomCharges(t,e,n);let i=this.optAromatic.getSelectedIndex();i>0&&te.setQueryAtomAromatic(t,e,1==i);let s=this.optUnsaturated.getSelectedIndex();s>0&&te.setQueryAtomUnsaturated(t,e,1==s);let o=this.splitStrings(this.inputElements.getValue());o&&(this.chkNotElements.elInput.checked?te.setQueryAtomElementsNot(t,e,o):te.setQueryAtomElements(t,e,o));let r=this.splitNumbers(this.inputRingSizes.getValue());r&&(this.chkNotRingSizes.elInput.checked?te.setQueryAtomRingSizesNot(t,e,r):te.setQueryAtomRingSizes(t,e,r));let a=this.optRingBlock.getSelectedIndex();a>0&&te.setQueryAtomRingBlock(t,e,1==a);let l=this.splitNumbers(this.inputNumRings.getValue());l&&te.setQueryAtomNumRings(t,e,l);let d=this.splitNumbers(this.inputRingBonds.getValue());d&&te.setQueryAtomRingBonds(t,e,d);let p=this.splitNumbers(this.inputAdjacency.getValue());p&&te.setQueryAtomAdjacency(t,e,p);let h=this.splitNumbers(this.inputBondSums.getValue());h&&te.setQueryAtomBondSums(t,e,h);let c=this.splitNumbers(this.inputValences.getValue());c&&te.setQueryAtomValences(t,e,c);let m=this.splitNumbers(this.inputHydrogens.getValue());m&&te.setQueryAtomHydrogens(t,e,m);let u=this.splitNumbers(this.inputIsotopes.getValue());u&&te.setQueryAtomIsotope(t,e,u)}updateBond(){const{mol:t,bond:e}=this;te.deleteQueryBondAll(t,e);let n=this.splitNumbers(this.inputRingSizes.getValue());n&&(this.chkNotRingSizes.elInput.checked?te.setQueryBondRingSizesNot(t,e,n):te.setQueryBondRingSizes(t,e,n));let i=this.optRingBlock.getSelectedIndex();i>0&&te.setQueryBondRingBlock(t,e,1==i);let s=this.splitNumbers(this.inputNumRings.getValue());s&&te.setQueryBondNumRings(t,e,s);let o=this.splitNumbers(this.inputOrders.getValue());o&&te.setQueryBondOrders(t,e,o)}setupAtom(){const{mol:t,atom:e}=this;let i=te.queryAtomCharges(t,e),s=te.queryAtomAromatic(t,e),o=te.queryAtomUnsaturated(t,e),r=te.queryAtomElements(t,e),a=te.queryAtomElementsNot(t,e),l=te.queryAtomRingSizes(t,e),d=te.queryAtomRingSizesNot(t,e),p=te.queryAtomRingBlock(t,e),h=te.queryAtomNumRings(t,e),c=te.queryAtomRingBonds(t,e),m=te.queryAtomAdjacency(t,e),u=te.queryAtomBondSums(t,e),f=te.queryAtomValences(t,e),g=te.queryAtomHydrogens(t,e),k=te.queryAtomIsotope(t,e);te.queryAtomSubFrags(t,e),te.queryAtomSubFragsNot(t,e),this.inputCharges.setValue(n.notBlank(i)?i.join(","):""),this.optAromatic.setSelectedIndex(null==s?0:s?1:2),this.optUnsaturated.setSelectedIndex(null==o?0:o?1:2),this.chkNotElements.elInput.checked=n.isBlank(r)&&n.notBlank(a),this.inputElements.setValue(n.notBlank(r)?r.join(","):n.notBlank(a)?a.join(","):""),this.chkNotRingSizes.elInput.checked=n.isBlank(l)&&n.notBlank(d),this.inputRingSizes.setValue(n.notBlank(l)?l.join(","):n.notBlank(d)?d.join(","):""),this.optRingBlock.setSelectedIndex(null==p?0:p?1:2),this.inputNumRings.setValue(n.notBlank(h)?h.join(","):""),this.inputRingBonds.setValue(n.notBlank(c)?c.join(","):""),this.inputAdjacency.setValue(n.notBlank(m)?m.join(","):""),this.inputBondSums.setValue(n.notBlank(u)?u.join(","):""),this.inputValences.setValue(n.notBlank(f)?f.join(","):""),this.inputHydrogens.setValue(n.notBlank(g)?g.join(","):""),this.inputIsotopes.setValue(n.notBlank(k)?k.join(","):"")}setupBond(){const{mol:t,bond:e}=this;let i=te.queryBondRingSizes(t,e),s=te.queryBondRingSizesNot(t,e),o=te.queryBondRingBlock(t,e),r=te.queryBondNumRings(t,e),a=te.queryBondOrders(t,e);this.chkNotRingSizes.elInput.checked=n.isBlank(i)&&n.notBlank(s),this.inputRingSizes.setValue(n.notBlank(i)?i.join(","):n.notBlank(s)?s.join(","):""),this.optRingBlock.setSelectedIndex(null==o?0:o?1:2),this.inputNumRings.setValue(n.notBlank(r)?r.join(","):""),this.inputOrders.setValue(n.notBlank(a)?a.join(","):"")}splitStrings(t){let e=[];if(t)for(let n of t.split(/[\s\,\;]+/))n&&e.push(n);return e.length?e:null}splitNumbers(t){let e=[];if(t)for(let n of t.split(/[\s\,\;]+/)){n.startsWith("+")&&(n=n.substring(1));let t=parseInt(n);isNaN(t)||e.push(t)}return e.length?e:null}}class Gi extends Zn{constructor(t,e,n,i){super(),this.atom=e,this.proxyClip=n,this.callbackApply=i,this.newX=0,this.newY=0,this.tabs=null,this.abbrevList=null,this.svgAbbrev=null,this.abbrevIndices=[],this.currentAbbrev=-1,this.initMol=t,this.mol=t.clone(),this.title="Edit Atom",this.minPortionWidth=20,this.maxPortionWidth=95}populate(){this.proxyClip.pushHandler(new _i);let t=this.buttonsDOM(),e=this.bodyDOM();this.btnApply=k('<button class="wmk-button wmk-button-primary">Apply</button>').appendTo(t).css({"margin-left":"0.5em"}),this.btnApply.onClick((()=>this.applyChanges())),this.atom>0?(this.tabs=new Fi(["Atom","Abbreviation","Geometry","Query","Extra"]),this.tabs.render(e),this.tabs.onSelect((t=>this.selectedTab(t))),this.populateAtom(this.tabs.getPanelDOM("Atom")),this.populateAbbreviation(this.tabs.getPanelDOM("Abbreviation")),this.atom>0&&this.populateGeometry(this.tabs.getPanelDOM("Geometry")),this.populateQuery(this.tabs.getPanelDOM("Query")),this.populateExtra(this.tabs.getPanelDOM("Extra"))):this.populateAtom(e);let n=e.findAll("input,textarea");n.length>0&&n[0].grabFocus(!0);for(let t of n)t.css({font:"inherit"}),t.onKeyDown((t=>{"Enter"==t.key?this.applyChanges():"Escape"==t.key?this.close():"PageUp"==t.key?(this.tabs.rotateSelected(-1),this.selectedTab(this.tabs.getSelectedIndex()),t.preventDefault()):"PageDown"==t.key&&(this.tabs.rotateSelected(1),this.selectedTab(this.tabs.getSelectedIndex()),t.preventDefault()),t.stopPropagation()}))}close(){this.proxyClip.popHandler(),super.close()}applyChanges(){this.mol.keepTransient=!0,this.updateMolecule();let t=this.tabs?this.tabs.getSelectedValue():null;"Abbreviation"==t&&this.updateAbbrev(),"Geometry"==t&&this.updateGeometry(),"Query"==t&&this.updateQuery(),"Extra"==t&&this.updateExtra(),this.mol.keepTransient=!1,this.callbackApply&&this.callbackApply(this)}populateAtom(t){let e=k("<div/>").appendTo(t);e.css({display:"grid","align-items":"center","justify-content":"start"}),e.css({"grid-row-gap":"0.5em","grid-column-gap":"0.5em"}),e.css({"grid-template-columns":"[start col0] auto [col1] auto [col2] auto [col3] auto [col4 end]"}),e.appendHTML('<div style="grid-area: 1 / col0;">Symbol</div>'),this.inputSymbol=k('<input size="20"/>').appendTo(e),this.inputSymbol.css({"grid-area":"1 / col1 / auto / col4}"}),this.inputSymbol.onInput((()=>this.periodicWidget.changeElement(this.inputSymbol.getValue()))),e.appendHTML('<div style="grid-area: 2 / col0;">Charge</div>'),this.inputCharge=k('<input type="number" size="6"/>').appendTo(e),this.inputCharge.css({"grid-area":"2 / col1"}),e.appendHTML('<div style="grid-area: 2 / col2;">Unpaired</div>'),this.inputUnpaired=k('<input type="number" size="6"/>').appendTo(e),this.inputUnpaired.css({"grid-area":"2 / col3"}),e.appendHTML('<div style="grid-area: 3 / col0;">Hydrogens</div>'),this.optionHydrogen=new Pi(["Auto","None","1","2","3","4","Other"]),this.optionHydrogen.render(k('<div style="grid-area: 3 / col1 / auto / col3"/>').appendTo(e)),this.optionHydrogen.onSelect((t=>this.inputHydrogen.elInput.disabled=6!=t)),this.inputHydrogen=k('<input type="number" size="4"/>').appendTo(e),this.inputHydrogen.css({"grid-area":"3 / col3"}),this.inputHydrogen.elInput.disabled=!0,e.appendHTML('<div style="grid-area: 4 / col0;">Isotope</div>'),this.optionIsotope=new Pi(["Natural","Enriched"]),this.optionIsotope.render(k('<div style="grid-area: 4 / col1 / auto / col3"/>').appendTo(e)),this.optionIsotope.onSelect((t=>this.inputIsotope.elInput.disabled=0==t)),this.inputIsotope=k('<input type="number" size="6"/>').appendTo(e),this.inputIsotope.css({"grid-area":"4 / col3"}),this.inputIsotope.elInput.disabled=!0,e.appendHTML('<div style="grid-area: 5 / col0;">Mapping</div>'),this.inputMapping=k('<input type="number" size="6"/>').appendTo(e),this.inputMapping.css({"grid-area":"5 / col1"}),e.appendHTML('<div style="grid-area: 5 / col2;">Index</div>'),this.inputIndex=k('<input type="number" size="6" readonly="readonly"/>').appendTo(e),this.inputIndex.css({"grid-area":"5 / col3"});let n=k("<div/>").appendTo(e).css({"grid-area":"6 / start / 6 / end"});this.periodicWidget=new Wi,this.periodicWidget.onSelect((t=>this.inputSymbol.setValue(t))),this.periodicWidget.onDoubleClick((()=>this.applyChanges())),this.periodicWidget.render(n);const i=this.mol,s=this.atom;if(s>0){this.inputSymbol.setValue(i.atomElement(s)),this.inputCharge.setValue(i.atomCharge(s).toString()),this.inputUnpaired.setValue(i.atomUnpaired(s).toString());let t=i.atomHExplicit(s);t==ge.HEXPLICIT_UNKNOWN?(this.optionHydrogen.setSelectedIndex(0),this.inputHydrogen.setValue(i.atomHydrogens(s).toString()),this.inputHydrogen.elInput.disabled=!0):t<=4?(this.optionHydrogen.setSelectedIndex(t+1),this.inputHydrogen.setValue(t.toString()),this.inputHydrogen.elInput.disabled=!0):(this.optionHydrogen.setSelectedIndex(6),this.inputHydrogen.setValue(t.toString()),this.inputHydrogen.elInput.disabled=!1),this.optionIsotope.setSelectedIndex(i.atomIsotope(s)==ge.ISOTOPE_NATURAL?0:1),i.atomIsotope(s)!=ge.ISOTOPE_NATURAL&&this.inputIsotope.setValue(i.atomIsotope(s).toString()),this.inputIsotope.elInput.disabled=i.atomIsotope(s)==ge.ISOTOPE_NATURAL,this.inputMapping.setValue(i.atomMapNum(s).toString()),this.inputIndex.setValue(s.toString()),this.periodicWidget.changeElement(i.atomElement(s))}}populateAbbreviation(t){let e=k("<div/>").appendTo(t).css({display:"flex","align-items":"flex-start"});e.css({"max-width":"60vw","max-height":"50vh","overflow-y":"scroll"});let n=k("<div/>").appendTo(e).css({"margin-right":"0.5em",flex:"0 0"}),i=k("<div/>").appendTo(e).css({flex:"1 1 100%"});this.inputAbbrevSearch=k('<input size="10"/>').appendTo(n),this.inputAbbrevSearch.setAttr("placeholder","Search");let s="";this.inputAbbrevSearch.onKeyDown((t=>{"ArrowUp"==t.key?this.cycleAbbreviation(-1):"ArrowDown"==t.key&&this.cycleAbbreviation(1)})),this.inputAbbrevSearch.onInput((()=>{let t=this.inputAbbrevSearch.getValue();t!=s&&(s=t,this.fillAbbreviations())}));let o=k("<div/>").appendTo(n).css({"margin-top":"0.5em"});k('<button class="wmk-button wmk-button-default">Clear</button>').appendTo(o).onClick((()=>{this.selectAbbreviation(-1),this.atom>0&&Qt.hasAbbrev(this.mol,this.atom)&&this.applyChanges()})),this.tableAbbrev=k("<table/>").appendTo(i).css({"border-collapse":"collapse",width:"100%"}),this.fillAbbreviations()}populateGeometry(t){const{mol:e,atom:n}=this;let i=k("<div/>").appendTo(t).css({"text-align":"center"}),s=k("<div/>").appendTo(i).css({display:"inline-block"}),o=k("<div/>").appendTo(s);o.css({display:"grid","align-items":"center","justify-content":"start"}),o.css({"grid-row-gap":"0.5em","grid-column-gap":"0.5em"}),o.css({"grid-template-columns":"[start col0] auto [col1] auto [col2] auto [col3] auto [col4 end]"}),this.geomWidget=new Ui(Bi.Atom,e,n),this.geomWidget.render(k("<div/>").appendTo(o).css({"grid-area":"1 / col0 / auto / col4","text-align":"center"}));let r=k("<div/>").appendTo(o).css({"grid-area":"2 / col0"});this.inputGeom1=k('<input type="number" size="8"/>').appendTo(o).css({"grid-area":"2 / col1"});let a=k("<div/>").appendTo(o).css({"grid-area":"2 / col2"});this.inputGeom2=k('<input type="number" size="8"/>').appendTo(o).css({"grid-area":"2 / col3"}),this.geomWidget.callbackSelect=t=>{let n=this.geomWidget.selectionAtoms(t);if(t.type==qi.Position)r.setText("Position X"),a.setText("Y"),this.inputGeom1.setValue(this.refGeom1=e.atomX(n[0]).toFixed(3)),this.inputGeom2.setValue(this.refGeom2=e.atomY(n[0]).toFixed(3));else if(t.type==qi.Link){let t=e.atomX(n[1])-e.atomX(n[0]),i=e.atomY(n[1])-e.atomY(n[0]);r.setText("Distance"),a.setText("Angle"),this.inputGeom1.setValue(this.refGeom1=U(t,i).toFixed(3)),this.inputGeom2.setValue(this.refGeom2=(Math.atan2(i,t)*et).toFixed(1))}else if(t.type==qi.Torsion){let t=e.atomX(n[0]),i=e.atomY(n[0]),s=Math.atan2(e.atomY(n[1])-i,e.atomX(n[1])-t),o=Math.atan2(e.atomY(n[2])-i,e.atomX(n[2])-t);r.setText("Angle"),a.setText(""),this.inputGeom1.setValue(this.refGeom1=(st(s,o)*et).toFixed(1)),this.inputGeom2.setValue(this.refGeom2="")}a.setCSS("display",t.type==qi.Torsion?"none":"block"),this.inputGeom2.setCSS("display",t.type==qi.Torsion?"none":"block")},this.geomWidget.callbackSelect(this.geomWidget.selected)}populateQuery(t){this.queryWidget=new Hi(this.mol,this.atom,0),this.queryWidget.render(t)}populateExtra(t){let e=[...this.mol.atomExtra(this.atom),...this.mol.atomTransient(this.atom)];this.fieldsWidget=new ji(e),this.fieldsWidget.render(t)}updateMolecule(){let{mol:t,atom:e}=this;0==e&&(e=this.atom=t.addAtom("C",this.newX,this.newY));let n=this.inputSymbol.getValue();""!=n&&t.setAtomElement(e,n);let i=parseInt(this.inputCharge.getValue());i>-20&&i<20&&t.setAtomCharge(e,i);let s=parseInt(this.inputUnpaired.getValue());s>=0&&s<20&&t.setAtomUnpaired(e,s);let o=this.optionHydrogen.getSelectedIndex();if(0==o)t.setAtomHExplicit(e,ge.HEXPLICIT_UNKNOWN);else if(o<=5)t.setAtomHExplicit(e,o-1);else{let n=parseInt(this.inputHydrogen.getValue());n>=0&&n<20&&t.setAtomHExplicit(e,n)}if(1==this.optionIsotope.getSelectedIndex()){let n=parseInt(this.inputIsotope.getValue());n>=0&&n<300&&t.setAtomIsotope(e,n)}else t.setAtomIsotope(e,ge.ISOTOPE_NATURAL);let r=parseInt(this.inputMapping.getValue());isNaN(r)||t.setAtomMapNum(e,r)}updateAbbrev(){const{mol:t,atom:e}=this;if(this.currentAbbrev<0){let n=t.atomElement(e);Qt.clearAbbrev(t,e),t.setAtomElement(e,n)}else{let n=this.abbrevList[this.currentAbbrev];t.setAtomElement(e,n.name),Qt.setAbbrev(t,e,n.frag)}}updateGeometry(){let t=this.inputGeom1.getValue(),e=this.inputGeom2.getValue();if(this.refGeom1==t&&this.refGeom2==e)return;const{mol:i}=this;let s=this.geomWidget.selected,o=this.geomWidget.selectionAtoms(s);if(s.type==qi.Position){let n=parseFloat(t),s=parseFloat(e);if(isNaN(n)||isNaN(s)||Math.abs(n)>1e6||Math.abs(s)>1e6)return;i.setAtomPos(o[0],n,s)}else if(s.type==qi.Link){if(this.refGeom1!=t){let e=parseFloat(t);if(isNaN(e)||Math.abs(e)>100)return;let s=n.booleanArray(!1,i.numAtoms);s[o[1]-1]=!0;let r={mol:i,currentAtom:0,currentBond:i.findBond(o[0],o[1]),selectedMask:s},a=new ai(r,ei.BondDist,{dist:e});return a.execute(),void(a.output.mol&&(this.mol=a.output.mol))}if(this.refGeom2!=e){let t=parseFloat(e);if(isNaN(t))return;let s=n.booleanArray(!1,i.numAtoms);s[o[1]-1]=!0;let r={mol:i,currentAtom:0,currentBond:i.findBond(o[0],o[1]),selectedMask:s},a=new ai(r,ei.AlignAngle,{angle:t*tt});return a.execute(),void(a.output.mol&&(this.mol=a.output.mol))}}else if(s.type==qi.Torsion){let e=parseFloat(t);if(isNaN(e))return;let s=n.booleanArray(!1,i.numAtoms);for(let t of o)s[t-1]=!0;let r={mol:i,currentAtom:o[2],currentBond:0,selectedMask:s},a=new ai(r,ei.AdjustTorsion,{angle:e*tt});return a.execute(),void(a.output.mol&&(this.mol=a.output.mol))}}updateQuery(){this.queryWidget.updateAtom()}updateExtra(){this.mol.setAtomExtra(this.atom,this.fieldsWidget.getExtraFields()),this.mol.setAtomTransient(this.atom,this.fieldsWidget.getTransientFields())}fillAbbreviations(){if(Bn.needsSetup())return void setTimeout((()=>Bn.setupData().then((()=>this.fillAbbreviations()))),1);if(this.tableAbbrev.empty(),Bn.main.submitMolecule(this.mol,!0),this.abbrevList=Bn.main.getAbbrevs(),!this.svgAbbrev){this.svgAbbrev=[];let t=nn.defaultColourOnWhite(10),e=new dn(0,0,t.data.pointScale);for(let i of this.abbrevList){let s=new sn,o=i.frag.clone();s.atomCircleSz=n.numberArray(0,o.numAtoms),s.atomCircleCol=n.numberArray(0,o.numAtoms);for(let t=1;t<=o.numAtoms;t++)o.atomElement(t)==Qt.ABBREV_ATTACHMENT&&(o.setAtomElement(t,"C"),s.atomCircleSz[t-1]=.2,s.atomCircleCol[t-1]=49152);let r=new rn(o,e,t,s);r.arrange();let a=new cn;new mn(r,a).draw(),a.normalise(),this.svgAbbrev.push(a.createSVG())}const{mol:i,atom:s}=this;if(s>0&&Qt.hasAbbrev(i,s)){let t=i.atomElement(s),e=Qt.molecularFormula(Qt.getAbbrev(i,s));for(let n=0;n<this.abbrevList.length;n++)if(t==this.abbrevList[n].name){e==Qt.molecularFormula(this.abbrevList[n].frag)&&(this.currentAbbrev=n);break}}}let t=k("<tr/>").appendTo(this.tableAbbrev);t.appendHTML("<td><u>Label</u></td>"),t.appendHTML("<td><u>Structure</u></td>"),this.abbrevEntries=[],this.abbrevIndices=[];let e=this.inputAbbrevSearch.getValue().toLowerCase();for(let t=0;t<this.abbrevList.length;t++){if(this.currentAbbrev!=t&&!this.abbrevList[t].nameSearch.includes(e))continue;let n={tr:k("<tr/>").appendTo(this.tableAbbrev),idx:t,bgcol:this.abbrevEntries.length%2==0?"#FFFFFF":"#F8F8F8"};n.tr.setCSS("background-color",this.currentAbbrev==n.idx?S(Pn.lowlight):n.bgcol);let i=k("<td/>").appendTo(n.tr),s=k("<td/>").appendTo(n.tr);i.setHTML(this.abbrevList[t].nameHTML),k(this.svgAbbrev[t]).appendTo(s).css({display:"block","pointer-events":"none"}),n.tr.css({cursor:"pointer"}),n.tr.onClick((()=>this.selectAbbreviation(t))),n.tr.onDblClick((t=>this.applyChanges())),this.abbrevEntries.push(n),this.abbrevIndices.push(t)}}selectAbbreviation(t){if(this.currentAbbrev!=t){this.currentAbbrev=t;for(let t of this.abbrevEntries)t.tr.setCSS("background-color",this.currentAbbrev==t.idx?S(Pn.lowlight):t.bgcol),this.currentAbbrev==t.idx&&t.tr.el.scrollIntoView({block:"nearest"})}}cycleAbbreviation(t){let e=this.abbrevIndices.length;if(0==e)return;let n=this.abbrevIndices.indexOf(this.currentAbbrev);n=n<0?t<0?e-1:0:(n+e+t)%e,this.selectAbbreviation(this.abbrevIndices[n])}selectedTab(t){0==t?this.inputSymbol.grabFocus():1==t?this.inputAbbrevSearch.grabFocus():2==t&&this.inputGeom1.grabFocus()}}class Vi extends Zn{constructor(t,e,n,i){super(),this.bond=e,this.proxyClip=n,this.callbackApply=i,this.initMol=t,this.mol=t.clone(),this.title="Edit Bond",this.minPortionWidth=20,this.maxPortionWidth=95}populate(){this.proxyClip.pushHandler(new _i);let t=this.buttonsDOM(),e=this.bodyDOM();this.btnApply=k('<button class="wmk-button wmk-button-primary">Apply</button>').appendTo(t).css({"margin-left":"0.5em"}),this.btnApply.onClick((()=>this.applyChanges())),this.tabs=new Fi(["Bond","Geometry","Query","Extra"]),this.tabs.render(e),this.tabs.onSelect((t=>this.selectedTab(t))),this.populateBond(this.tabs.getPanelDOM("Bond")),this.populateGeometry(this.tabs.getPanelDOM("Geometry")),this.populateQuery(this.tabs.getPanelDOM("Query")),this.populateExtra(this.tabs.getPanelDOM("Extra"));let n=e.findAll("input,textarea");n.length>0&&n[0].grabFocus(!0);for(let t of n)t.css({font:"inherit"}),t.onKeyDown((t=>{"Enter"==t.key?this.applyChanges():"Escape"==t.key?this.close():"PageUp"==t.key?(this.tabs.rotateSelected(-1),this.selectedTab(this.tabs.getSelectedIndex()),t.preventDefault()):"PageDown"==t.key&&(this.tabs.rotateSelected(1),this.selectedTab(this.tabs.getSelectedIndex()),t.preventDefault()),t.stopPropagation()}))}close(){this.proxyClip.popHandler(),super.close()}applyChanges(){this.mol.keepTransient=!0,this.updateMolecule(),"Geometry"==this.tabs.getSelectedValue()&&this.updateGeometry(),"Query"==this.tabs.getSelectedValue()&&this.updateQuery(),"Extra"==this.tabs.getSelectedValue()&&this.updateExtra(),this.mol.keepTransient=!1,this.callbackApply&&this.callbackApply(this)}populateBond(t){const{mol:e,bond:n}=this;let i=k("<div/>").appendTo(t);i.css({display:"grid","align-items":"center","justify-content":"start"}),i.css({"grid-row-gap":"0.5em","grid-column-gap":"0.5em"}),i.css({"grid-template-columns":"[start col0] auto [col1] auto [col2] auto [col3] auto [col4 end]"}),k("<div/>").appendTo(i).css({"grid-area":"1 / col0"}).setText("Order");let s=[];for(let t=0;t<=4;t++)s.push(`&nbsp;&nbsp;${t}&nbsp;&nbsp;`);this.optionOrder=new Pi(s),this.optionOrder.htmlLabels=!0,this.optionOrder.setSelectedIndex(e.bondOrder(n)),this.optionOrder.render(k("<div/>").appendTo(i).css({"grid-column":"col1 / col4","grid-row":"1"})),k("<div/>").appendTo(i).css({"grid-area":"2 / col0"}).setText("Stereo"),this.optionStereo=new Pi(["None","Up","Down","Unknown"]),this.optionStereo.setSelectedIndex(e.bondType(n)),this.optionStereo.render(k("<div/>").appendTo(i).css({"grid-column":"col1 / col4","grid-row":"2"})),k("<div/>").appendTo(i).css({"grid-area":"3 / col0"}).setText("From"),this.inputFrom=k('<input size="6"/>').appendTo(i).css({"grid-area":"3 / col1",font:"inherit"}),this.inputFrom.elInput.readOnly=!0,this.inputFrom.setValue(e.bondFrom(n).toString()),k("<div/>").appendTo(i).css({"grid-area":"3 / col2"}).setText("To"),this.inputTo=k('<input size="6"/>').appendTo(i).css({"grid-area":"3 / col3",font:"inherit"}),this.inputTo.elInput.readOnly=!0,this.inputTo.setValue(e.bondTo(n).toString()),k("<div/>").appendTo(i).css({"grid-area":"4 / col2"}).setText("Index"),this.inputIndex=k('<input size="6"/>').appendTo(i).css({"grid-area":"4 / col3",font:"inherit"}),this.inputIndex.elInput.readOnly=!0,this.inputIndex.setValue(n.toString())}populateGeometry(t){const{mol:e,bond:n}=this;let i=k("<div/>").appendTo(t).css({"text-align":"center"}),s=k("<div/>").appendTo(i).css({display:"inline-block"}),o=k("<div/>").appendTo(s);o.css({display:"grid","align-items":"center","justify-content":"start"}),o.css({"grid-row-gap":"0.5em","grid-column-gap":"0.5em"}),o.css({"grid-template-columns":"[start col0] auto [col1] auto [col2]"}),this.geomWidget=new Ui(Bi.Bond,e,n),this.geomWidget.render(k("<div/>").appendTo(o).css({"grid-area":"1 / col0 / auto / col2","text-align":"center"}));let r=k("<div/>").appendTo(o).css({"grid-area":"2 / col0"});this.inputGeom1=k('<input type="number" size="8"/>').appendTo(o).css({"grid-area":"2 / col1"}),this.geomWidget.callbackSelect=t=>{if(t.type==qi.Link){let t=e.bondFrom(n),i=e.bondTo(n),s=e.atomX(i)-e.atomX(t),o=e.atomY(i)-e.atomY(t);r.setText("Distance"),this.inputGeom1.setValue(this.refGeom1=U(s,o).toFixed(3))}},this.geomWidget.callbackSelect(this.geomWidget.selected)}populateQuery(t){this.queryWidget=new Hi(this.mol,0,this.bond),this.queryWidget.render(t)}populateExtra(t){let e=[...this.mol.bondExtra(this.bond),...this.mol.bondTransient(this.bond)];this.fieldsWidget=new ji(e),this.fieldsWidget.render(t)}updateMolecule(){let{mol:t,bond:e}=this;t.setBondOrder(e,this.optionOrder.getSelectedIndex()),t.setBondType(e,this.optionStereo.getSelectedIndex())}updateGeometry(){let t=this.inputGeom1.getValue();if(this.refGeom1==t)return;const{mol:e}=this;let n=this.geomWidget.selected,i=this.geomWidget.selectionAtoms(n);if(n.type==qi.Link&&this.refGeom1!=t){let n=parseFloat(t);if(isNaN(n)||Math.abs(n)>100)return;let s={mol:e,currentAtom:0,currentBond:e.findBond(i[0],i[1]),selectedMask:null},o=new ai(s,ei.BondDist,{dist:n});return o.execute(),void(this.mol=o.output.mol)}}updateQuery(){this.queryWidget.updateBond()}updateExtra(){this.mol.setBondExtra(this.bond,this.fieldsWidget.getExtraFields()),this.mol.setBondTransient(this.bond,this.fieldsWidget.getTransientFields())}selectedTab(t){0==t?this.inputFrom.grabFocus():1==t&&this.inputGeom1.grabFocus()}}const $i="a".charCodeAt(0),Ki="A".charCodeAt(0);function Qi(t){return String.fromCharCode(Ki+Math.min(26,Math.max(0,t))-1)}function Zi(t){return String.fromCharCode($i+Math.min(26,Math.max(0,t))-1)}class Ji extends Zn{constructor(t,e,i,s){super(),this.atoms=e,this.proxyClip=i,this.callbackApply=s,this.optionConnect=null,this.optionBondConn=null,this.currentID=0,this.unit=null,this.borderAtoms=[],this.outBonds=[],this.outAtoms=[],this.initMol=t,this.mol=t.clone(),this.title="Polymer Block",this.minPortionWidth=20,this.maxPortionWidth=95,this.polymer=new $t(this.mol),e=n.sorted(e);for(let t of this.polymer.getIDList()){let i=this.polymer.getUnit(t);if(n.equals(e,i.atoms)){this.currentID=t,this.unit=i;break}}this.unit||(this.unit=new Vt(e)),this.umol=this.mol.clone();let o=n.booleanArray(!1,this.umol.numAtoms);for(let t=1;t<=this.mol.numBonds;t++){let e=this.mol.bondFrom(t),n=this.mol.bondTo(t),i=this.atoms.includes(e),s=this.atoms.includes(n);(i||s)&&(o[e-1]=o[n-1]=!0),i&&!s&&(this.borderAtoms.push(e),this.outBonds.push(t),this.outAtoms.push(n)),s&&!i&&(this.borderAtoms.push(n),this.outBonds.push(t),this.outAtoms.push(e))}this.borderAtoms=n.sortedUnique(this.borderAtoms),this.umap=n.maskMap(o),this.umol=Qt.subgraphMask(this.umol,o),new $t(this.umol).removeAll()}populate(){this.proxyClip.pushHandler(new _i);let t=this.buttonsDOM(),e=this.bodyDOM();this.btnApply=k('<button class="wmk-button wmk-button-primary">Apply</button>').appendTo(t).css({"margin-left":"0.5em"}),0==this.currentID&&this.btnApply.setText("Create"),this.btnApply.onClick((()=>this.applyChanges())),this.currentID>0&&(this.btnRemove=k('<button class="wmk-button wmk-button-default">Remove</button>').appendTo(t).css({"margin-left":"0.5em"}),this.btnRemove.onClick((()=>this.applyRemove())));let i=k("<div/>").appendTo(e);i.css({display:"grid","align-items":"center","justify-content":"start"}),i.css({"grid-row-gap":"0.5em","grid-column-gap":"0.5em"}),i.css({"grid-template-columns":"[start col0] auto [col1] auto [col2] auto [col3] auto [col4] auto [end]"}),k("<div/>").appendTo(i).css({"grid-area":"1 / col0"}).setText("# Atoms");let s=k('<input size="5"/>').appendTo(k("<div/>").appendTo(i).css({"grid-area":"1 / col1"}));s.elInput.readOnly=!0,s.setValue(this.unit.atoms.length.toString()),k("<div/>").appendTo(i).css({"grid-area":"1 / col2"}).setText("Out-bonds");let o=k('<input size="5"/>').appendTo(k("<div/>").appendTo(i).css({"grid-area":"1 / col3"}));o.elInput.readOnly=!0,o.setValue(this.outBonds.length.toString());let r=1;2==this.outBonds.length&&(r++,k("<div/>").appendTo(i).css({"grid-area":`${r} / col0`}).setText("Connectivity"),this.optionConnect=new Pi(["Unknown","Head-to-Tail","Head-to-Head","Random"]),this.optionConnect.render(k("<div/>").appendTo(i).css({"grid-area":`${r} / col1 / auto / col4`})),this.unit.connect==Xt.HeadToTail?this.optionConnect.setSelectedIndex(1):this.unit.connect==Xt.HeadToHead?this.optionConnect.setSelectedIndex(2):this.unit.connect==Xt.Random&&this.optionConnect.setSelectedIndex(3)),4==this.outBonds.length&&4==n.uniqueUnstable(this.outAtoms).length&&(r++,k("<div/>").appendTo(i).css({"grid-area":`${r} / col0`}).setText("2x2 Connectivity"),this.populate2x2Conn(k("<div/>").appendTo(i).css({"grid-area":`${r} / col1 / auto / end`})));let a=t=>{if(!t)return null;let e=[];for(let n of t.split(",")){let t=parseInt(n);if(!(t>0))return;e.push(t)}return e};for(let t=0;t<this.borderAtoms.length;t++){r++;let e=k("<div/>").appendTo(i).css({"grid-area":`${r} / col0`,"text-align":"right","padding-right":"0.5em"});0==t&&e.setText("Name "),k("<span/>").appendTo(e).css({color:"#008000"}).setText(Qi(t+1));let n=k('<input size="20"/>').appendTo(k("<div/>").appendTo(i).css({"grid-area":`${r} / col1 / auto / end`,width:"100%"})),s=this.borderAtoms[t],o=this.unit.atomName.get(s);o&&n.setValue(o.join(",")),n.onInput((()=>{let t=a(n.getValue());void 0!==t&&this.unit.atomName.set(s,t)}))}for(let t=0;t<this.outAtoms.length;t++){r++;let e=k("<div/>").appendTo(i).css({"grid-area":`${r} / col0`,"text-align":"right","padding-right":"0.5em"});0==t&&e.setText("Link "),k("<span/>").appendTo(e).css({color:"#800080"}).setText(Zi(t+1)),k("<div/>").appendTo(i).css({"grid-area":`${r} / col1`}).setText("Include");let n=k('<input size="10"/>').appendTo(k("<div/>").appendTo(i).css({"grid-area":`${r} / col2`,width:"100%"}));k("<div/>").appendTo(i).css({"grid-area":`${r} / col3`}).setText("Exclude");let s=k('<input size="10"/>').appendTo(k("<div/>").appendTo(i).css({"grid-area":`${r} / col4`,width:"100%"})),o=this.outBonds[t],l=this.unit.bondIncl.get(o),d=this.unit.bondExcl.get(o);l&&n.setValue(l.join(",")),d&&s.setValue(d.join(",")),n.onInput((()=>{let t=a(n.getValue());void 0!==t&&this.unit.bondIncl.set(o,t)})),s.onInput((()=>{let t=a(s.getValue());void 0!==t&&this.unit.bondExcl.set(o,t)}))}r++,this.populateUncap(k("<div/>").appendTo(i).css({"grid-area":`${r} / col0 / auto / col4`,"text-align":"center"})),r++,this.divPreview=k("<div/>").appendTo(i).css({"grid-area":`${r} / col0 / auto / col4`,"text-align":"center"}),this.renderUnit();let l=e.findAll("input,textarea");l.length>0&&l[0].grabFocus(!0);for(let t of l)t.css({font:"inherit"}),t.onKeyDown((t=>{let e=t.keyCode||t.which;13==e&&this.applyChanges(),27==e&&this.close()}))}close(){this.proxyClip.popHandler(),super.close()}populate2x2Conn(t){const e=[[0,1,2,3],[0,1,3,2],[0,2,1,3],[0,2,3,1],[0,3,1,2],[0,3,2,1]];let i=[null],s=["None"],o=0;for(let t of e){let e=n.idxGet(this.outBonds,t);n.equals(e,this.unit.bondConn)&&(o=s.length),i.push(e),s.push(`${t[0]+1},${t[1]+1}:${t[2]+1},${t[3]+1}`)}this.optionBondConn=new Pi(s),this.optionBondConn.setSelectedIndex(o),this.optionBondConn.render(t),this.optionBondConn.onSelect((t=>{this.unit.bondConn=i[t],this.renderUnit()}))}populateUncap(t){let e=[];t:for(let t of this.outAtoms)if(1==this.mol.atomAdjCount(t)&&"*"!=this.mol.atomElement(t)){for(let e of this.polymer.getUnits())if(e.atoms.includes(t))continue t;e.push(t)}if(0==e.length)return;let n=k('<button class="wmk-button wmk-button-default">Uncap Exterior</button>').appendTo(t);n.onClick((()=>{n.elInput.disabled=!0;for(let t of e)this.mol.setAtomElement(t,"*")}))}applyChanges(){if(this.optionConnect){let t=this.optionConnect.getSelectedIndex();0==t?this.unit.connect=null:1==t?this.unit.connect=Xt.HeadToTail:2==t?this.unit.connect=Xt.HeadToHead:3==t&&(this.unit.connect=Xt.Random)}this.currentID&&this.polymer.removeUnit(this.currentID),this.currentID=this.polymer.createUnit(this.unit.clone()),this.polymer.rewriteMolecule(),this.callbackApply(this)}applyRemove(){this.currentID&&this.polymer.removeUnit(this.currentID),this.callbackApply(this)}renderUnit(){let t=this.umol.clone(),e=nn.defaultColourOnWhite(20),i=new dn(0,0,e.data.pointScale),s=new sn;s.atomCircleSz=n.numberArray(0,t.numAtoms),s.atomCircleCol=n.numberArray(0,t.numAtoms),s.atomDecoText=n.stringArray(null,t.numAtoms),s.atomDecoCol=n.numberArray(null,t.numAtoms),s.atomDecoSize=n.numberArray(null,t.numAtoms);let o=this.borderAtoms.map((t=>this.umap[t-1]+1)),r=this.outAtoms.map((t=>this.umap[t-1]+1));for(let e=1;e<=t.numAtoms;e++){let n=o.indexOf(e),i=r.indexOf(e);n>=0&&(s.atomDecoText[e-1]=Qi(n+1),s.atomDecoCol[e-1]=32768,s.atomDecoSize[e-1]=.5),i>=0&&(t.setAtomCharge(e,0),t.setAtomUnpaired(e,0),t.setAtomIsotope(e,0),s.atomCircleSz[e-1]=.1,s.atomCircleCol[e-1]=16711935,s.atomDecoText[e-1]=Zi(i+1),s.atomDecoCol[e-1]=8388736,s.atomDecoSize[e-1]=.5,t.setAtomElement(e,"C"))}let a=new rn(t,i,e,s);a.arrange(),a.squeezeInto(0,0,300,300);let l=new cn;if(this.unit.bondConn){const t=[[0,1,13135112,2,!1],[2,3,13135112,2,!1],[0,2,3234360584,1,!0],[1,3,3234360584,1,!0]];for(let[e,n,i,s,o]of t){let t=this.outAtoms[this.outBonds.indexOf(this.unit.bondConn[e])],r=this.outAtoms[this.outBonds.indexOf(this.unit.bondConn[n])],d=a.getPoint(t-1),p=a.getPoint(r-1);if(l.drawLine(d.oval.cx,d.oval.cy,p.oval.cx,p.oval.cy,i,s),o)for(let t of[.2,.4,.6,.8]){let e=d.oval.cx+t*(p.oval.cx-d.oval.cx),n=d.oval.cy+t*(p.oval.cy-d.oval.cy);l.drawOval(e,n,2,2,i,s,null)}}}new mn(a,l).draw(),l.normalise(),this.divPreview.empty(),k(l.createSVG()).appendTo(this.divPreview).css({"pointer-events":"none"})}}class ts extends ii{constructor(t,e){super(),this.owner=t,this.group=e,this.subgroups=null,this.templates=null}init(){let t=nn.defaultBlackOnWhite();t.data.pointScale=10,t.data.lineSize*=1.5,t.data.bondSep*=1.5,0==ts.resourceData.length&&this.loadResourceData(),null==this.group?this.prepareSubGroups():this.prepareTemplates()}update(){null==this.subgroups&&null==this.templates||(this.buttons=[],null==this.group?this.populateGroups():this.populateTemplates())}populateGroups(){let t=this.subgroups.groups,e=this.subgroups.titles,n=this.subgroups.preview;for(let i=0;i<t.length;i++)this.buttons.push({id:t[i],metavec:n[i],helpText:e[i]})}populateTemplates(){let t=this.templates.names,e=(this.templates.abbrev,this.templates.mnemonic,this.templates.preview);for(let n=0;n<t.length;n++)this.buttons.push({id:n.toString(),metavec:e[n],helpText:t[n]})}hitButton(t){if(null==this.group)this.buttonView.pushBank(new ts(this.owner,t));else{let e=parseInt(t),n={fragNative:this.templates.molecules[e]};new ai(this.owner.getState(),ei.TemplateFusion,n,this.owner).execute()}}loadResourceData(){for(let t of Bn.getTemplateKeys()){let e=Bn.getTemplateData(t);ts.resourceList.push(t),ts.resourceData.push(On.readXML(e))}}prepareSubGroups(){this.subgroups={groups:ts.resourceList,titles:[],preview:[]};let t=this.buttonView.idealSize,e=.5*(t-2),n=nn.defaultBlackOnWhite();n.data.pointScale=10;let i=new sn,s=new dn(0,0,n.data.pointScale);for(let o of ts.resourceData){this.subgroups.titles.push(o.title);let r=o.firstColOfType("molecule"),a=new cn;for(let t=0,l=0;l<4&&t<o.numRows;t++){let d=o.getMolecule(t,r);if(Qt.isBlank(d))continue;let p=new rn(d,s,n,i);p.arrange();let h=l%2,c=Math.floor(l/2);p.squeezeInto(1+h*e,1+c*e,e,e,1),new mn(p,a).draw(),l++}a.width=t,a.height=t,this.subgroups.preview.push(a)}this.buttonView.refreshBank()}prepareTemplates(){let t=ts.resourceList.indexOf(this.group),e=ts.resourceData[t];this.templates={molecules:[],names:[],abbrev:[],mnemonic:[],preview:[]};let n=this.buttonView.idealSize,i=nn.defaultBlackOnWhite();i.data.pointScale=12;let s=new sn,o=new dn(0,0,i.data.pointScale),r=e.findColByName("Molecule"),a=e.findColByName("Name"),l=e.findColByName("Abbrev"),d=e.findColByName("Mnemonic");for(let t=0;t<e.numRows;t++){let p=e.getMolecule(t,r);this.templates.molecules.push(p.toString()),this.templates.names.push(e.getString(t,a)),this.templates.abbrev.push(e.getString(t,l)),this.templates.mnemonic.push(e.getString(t,d));let h=new rn(p,o,i,s);h.arrange(),h.squeezeInto(0,0,n,n,2);let c=new cn;new mn(h,c).draw(),c.width=n,c.height=n,this.templates.preview.push(c)}this.buttonView.refreshBank()}}ts.resourceList=[],ts.resourceData=[];class es extends ii{constructor(t){super(),this.owner=t}update(){this.buttons=[],this.buttons.push({id:"accept",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://web.resource.org/cc/"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.45.1"\n   version="1.0"\n   sodipodi:docbase="/home/aclark/CRK3/MMTk/images/msk"\n   sodipodi:docname="GenericAccept.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainQuit.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="159.5736"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="793"\n     inkscape:window-height="842"\n     inkscape:window-x="21"\n     inkscape:window-y="104"\n     showgrid="true" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none;fill-opacity:1"\n       d="M 300.71429,39.285714 C 221.40032,73.699762 164.28823,126.10076 120,210 C 82.667331,182.4368 64.188257,170.57196 8.5714286,174.28571 C 88.702873,232.3286 116.45809,273.89571 131.42857,295 C 138.61324,305.12842 189.62059,127.77256 300.71429,39.285714 z "\n       id="path3211"\n       sodipodi:nodetypes="cccsc" />\n  </g>\n</svg>\n',helpText:"Apply this template."}),this.buttons.push({id:"prev",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="TemplatePrev.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/TemplatePrev.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#fffbfb;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none;fill-opacity:1"\n       d="M 10,160 L 130,40 L 130,110 L 310,110 L 310,210 L 130,210 C 130,210 130,280 130,280 L 10,160 z "\n       id="path2161" />\n  </g>\n</svg>\n',helpText:"Show previous fusion option."}),this.buttons.push({id:"next",svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="TemplateNext.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/TemplateNext.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective8" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="93.268499"\n     inkscape:cy="215.40039"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1440"\n     inkscape:window-height="838"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     showgrid="true"\n     inkscape:window-maximized="1" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#fffbfb;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:10;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 310,160 L 190,40 L 190,110 L 10,110 L 10,210 L 190,210 C 190,210 190,280 190,280 L 310,160 z "\n       id="path2161" />\n  </g>\n</svg>\n',helpText:"Show next fusion option."})}hitButton(t){"accept"==t?this.owner.templateAccept():"prev"==t?this.owner.templateRotate(-1):"next"==t&&this.owner.templateRotate(1)}claimKey(t){return"Enter"==t.key?(this.owner.templateAccept(),!0):"ArrowLeft"==t.key||"ArrowUp"==t.key?(this.owner.templateRotate(-1),!0):("ArrowRight"==t.key||"ArrowDown"==t.key)&&(this.owner.templateRotate(1),!0)}bankClosed(){this.owner.clearPermutations()}}var ns;!function(t){t.Arrow="arrow",t.Rotate="rotate",t.Pan="pan",t.Drag="drag",t.Erasor="erasor",t.BondOrder0="bond:Order0",t.BondOrder1="bond:Order1",t.BondOrder2="bond:Order2",t.BondOrder3="bond:Order3",t.BondUnknown="bond:Unknown",t.BondInclined="bond:Inclined",t.BondDeclined="bond:Declined",t.RingAliph="ringAliph",t.RingArom="ringArom",t.AtomPlus="atomPlus",t.AtomMinus="atomMinus",t.BondPfx="bond:",t.ElementPfx="element:"}(ns||(ns={}));const is=[{id:ns.Arrow,svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="50"\n   height="50"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="ToolSelect.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#d3e5ff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="8.64"\n     inkscape:cx="22.280093"\n     inkscape:cy="25"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1920"\n     inkscape:window-height="1028"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(0,-270)">\n    <g\n       transform="matrix(2.2470395,0,0,2.2470395,1.4827876,-402.18041)"\n       id="layer1-1"\n       inkscape:label="Layer 1"\n       style="fill:#ffffff;fill-opacity:1;stroke-width:0.77823228;stroke-miterlimit:4;stroke-dasharray:none">\n      <path\n         sodipodi:nodetypes="cccccccc"\n         inkscape:connector-curvature="0"\n         id="path4141"\n         d="m 3.994178,302.40331 0.011839,13.60146 4.8493426,-3.53325 4.1221284,5.65757 3.232895,-2.3555 -4.122128,-5.65757 4.849343,-3.53325 z"\n         style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:0.77823228;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    </g>\n  </g>\n</svg>\n',helpText:"Selection tool.",mnemonic:"Escape"},{id:ns.Rotate,svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r"\n   version="1.0"\n   sodipodi:docname="ToolRotate.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#d3e5ff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="-140.47866"\n     inkscape:cy="198.69435"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1028"\n     inkscape:window-x="61"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       inkscape:connector-curvature="0"\n       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:4.55773544;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 68.562496,210.12948 A 34.671101,35.243633 0 0 0 33.890833,245.37285 34.671101,35.243633 0 0 0 68.562496,280.6189 34.671101,35.243633 0 0 0 103.23417,245.37285 34.671101,35.243633 0 0 0 68.562496,210.12948 Z m 0.09935,11.02044 A 23.336319,23.721675 0 0 1 91.999068,244.87094 23.336319,23.721675 0 0 1 68.66185,268.59197 23.336319,23.721675 0 0 1 45.324633,244.87094 23.336319,23.721675 0 0 1 68.66185,221.14992 Z"\n       id="path4237" />\n    <path\n       inkscape:connector-curvature="0"\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:10.40872955;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:10.40872949, 20.81745898;stroke-dashoffset:2.00970006;stroke-opacity:1"\n       d="M 177.52863,34.919161 68.562276,246.38095 l 224.866844,0"\n       id="path5210" />\n    <path\n       inkscape:connector-curvature="0"\n       style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:6.99123812px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 128.10545,149.71269 c 28.70161,15.31171 49.84665,42.14544 57.45499,89.61956"\n       id="path5212"\n       sodipodi:nodetypes="cc" />\n    <g\n       style="font-style:normal;font-weight:normal;font-size:129.6784668px;line-height:125%;font-family:Sans;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       id="text4750">\n      <path\n         d="m 230.101,96.949874 q 4.93893,0 8.7381,2.026226 3.79918,1.96291 6.33196,5.76208 2.53278,3.79917 3.79917,9.3713 1.32971,5.5088 1.32971,12.60059 0,8.16822 -1.83626,18.48931 -3.92582,22.35181 -12.41064,33.05281 -8.4215,10.63769 -21.08541,10.63769 -4.81229,0 -8.42151,-1.89959 -3.54589,-1.9629 -5.88871,-5.63544 -2.34283,-3.73585 -3.5459,-9.0547 -1.13975,-5.31884 -1.13975,-12.09403 0,-4.49569 0.44323,-9.49794 0.50656,-5.00224 1.51967,-10.57436 3.92582,-22.22517 12.03072,-32.6729 8.16822,-10.511046 20.13562,-10.511046 z m -0.44323,5.065566 q -4.1791,0 -7.21843,2.53278 -2.97602,2.53278 -5.31885,7.40839 -2.2795,4.87561 -4.05245,11.9674 -1.70963,7.09179 -3.29262,16.20981 l 27.67065,0 q 0.88648,-5.69876 1.39303,-10.70101 0.50656,-5.06556 0.50656,-9.3713 0,-4.17909 -0.56988,-7.53502 -0.50655,-3.35594 -1.64631,-5.63544 -1.13975,-2.34283 -2.97602,-3.60922 -1.83626,-1.26639 -4.49568,-1.26639 z m -20.83214,43.6905 q -1.01311,6.142 -1.58299,11.6508 -0.56988,5.44548 -0.56988,10.06781 0,3.73585 0.44324,6.77519 0.44324,3.03934 1.45635,5.19221 1.01311,2.15286 2.65942,3.35593 1.64631,1.13976 3.98913,1.13976 4.11578,0 7.34507,-2.59611 3.29262,-2.5961 5.8254,-7.47171 2.59611,-4.93892 4.55901,-12.03071 1.96291,-7.09179 3.5459,-16.08317 l -27.67065,0 z"\n         style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:\'Times New Roman\';-inkscape-font-specification:\'Times New Roman,  Italic\'"\n         id="path4147" />\n    </g>\n  </g>\n</svg>\n',helpText:"Rotate subject atoms.",mnemonic:""},{id:ns.Pan,svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="ToolPan.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd7fd"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="-33.40249"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1155"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g4759"\n       transform="matrix(1.1035479,0,0,1.1035479,259.85038,18.296497)">\n      <path\n         inkscape:connector-curvature="0"\n         id="path4753"\n         d="m -92.02537,30.740234 c 2.45111,0 4.90206,1.015331 6.93164,3.044922 l 3.06836,3.06836 0,41.93164 0,41.931644 4.95508,0 4.95508,0 0.35742,-12.1875 0.35742,-12.187503 3.375,-0.390625 c 1.85662,-0.214261 4.5285,0.22835 5.9375,0.982422 2.3433,1.254098 2.5625,2.539225 2.5625,15.076176 l 0,13.70703 4.375,0 4.375,0 0,-7.5 0,-7.5 3.80664,0 c 2.37515,0 4.96071,1.15407 6.875,3.06836 l 3.06836,3.06836 0,27.27148 c 0,29.8793 -0.11379,30.57518 -9.17774,55.85742 -2.44343,6.81549 -4.81894,15.39361 -5.27734,19.0625 l -0.83398,6.67188 -34.67188,0 -34.67187,0 -0.78321,-9.25977 c -1.01374,-11.99243 -4.78475,-21.87779 -11.15039,-29.22656 -2.80546,-3.23874 -6.72177,-9.54492 -8.70117,-14.01367 -6.77955,-15.30563 -9.7463,-20.68795 -14.73633,-26.72657 -5.60352,-6.78105 -6.13962,-9.6299 -2.49609,-13.27343 6.23629,-6.23629 15.622,-0.97085 29.00391,16.27148 l 3.3789,4.35352 0.0586,-50.99414 0.0586,-50.994144 3.14648,-3.146485 c 2.32477,-2.324778 4.20069,-3.044178 7.1875,-2.755859 l 4.04102,0.390625 0.33203,37.1875 0.33008,37.187503 4.98242,0 4.98047,0 0,-41.931644 0,-41.93164 3.06836,-3.06836 c 2.02959,-2.029591 4.48053,-3.044922 6.93164,-3.044922 z"\n         style="fill:#ffffff;fill-opacity:1" />\n      <path\n         id="path4746"\n         d="m -92.042969,21.097656 c -4.169447,0.0083 -8.343911,1.22813 -11.527341,3.65625 -2.46099,1.877091 -5.19972,5.050631 -6.08594,7.052735 -1.43274,3.23679 -2.35022,3.702655 -8.29102,4.195312 -7.08275,0.587357 -11.48476,3.067017 -15.875,8.943359 -2.45502,3.286042 -2.59594,5.308607 -2.9414,42.654297 l -0.36133,39.205081 -6.51367,-3.03125 c -3.58178,-1.66763 -8.07753,-3.03792 -9.99024,-3.04492 -5.12526,-0.018 -11.35175,2.95887 -14.46289,6.91406 -5.99633,7.62309 -5.04663,14.71933 3.375,25.21289 3.63938,4.53475 8.11406,12.47823 11.34571,20.13672 3.20064,7.58499 7.30372,14.88134 10.25,18.22851 7.87832,8.95023 10.19097,15.56933 10.84765,31.0586 l 0.56836,13.4375 44.839846,0 44.839843,0 0,-7.83985 c 0,-8.54888 2.179562,-17.0333 9.544922,-37.16015 l 4.802735,-13.125 0.429687,-29.375 c 0.27731,-18.93033 -0.05681,-31.00119 -0.939453,-33.94727 -1.80016,-6.00858 -8.806804,-12.06842 -15.121094,-13.07812 -2.73207,-0.43687 -4.966797,-1.437874 -4.966797,-2.224613 0,-0.78674 -1.694735,-3.485705 -3.765625,-5.998047 -4.1349,-5.016353 -10.661225,-7.804379 -16.328125,-6.972656 l -3.65625,0.537109 0,-24.90625 c 0,-27.98198 -0.682675,-30.943484 -8.515625,-36.917969 -3.16682,-2.415449 -7.332505,-3.619648 -11.501953,-3.611328 z m 0.01758,9.642578 c 2.451114,0 4.902056,1.015331 6.931641,3.044922 l 3.068359,3.06836 0,41.93164 0,41.931644 4.955079,0 4.955078,0 0.357422,-12.1875 0.357421,-12.187503 3.375,-0.390625 c 1.85662,-0.214261 4.5285,0.22835 5.9375,0.982422 2.3433,1.254098 2.5625,2.539225 2.5625,15.076176 l 0,13.70703 4.375,0 4.375,0 0,-7.5 0,-7.5 3.806641,0 c 2.37515,0 4.96071,1.15407 6.875,3.06836 l 3.068359,3.06836 0,27.27148 c 0,29.8793 -0.113784,30.57518 -9.177734,55.85742 -2.44343,6.81549 -4.818944,15.39361 -5.277344,19.0625 l -0.833984,6.67188 -34.671875,0 -34.671874,0 -0.78321,-9.25977 c -1.01374,-11.99243 -4.78475,-21.87779 -11.15039,-29.22656 -2.80546,-3.23874 -6.72177,-9.54492 -8.70117,-14.01367 -6.77955,-15.30563 -9.7463,-20.68795 -14.73633,-26.72657 -5.60352,-6.78105 -6.13962,-9.6299 -2.49609,-13.27343 6.23629,-6.23629 15.622,-0.97085 29.00391,16.27148 l 3.3789,4.35352 0.0586,-50.99414 0.0586,-50.994144 3.14648,-3.146485 c 2.32477,-2.324778 4.20069,-3.044178 7.1875,-2.755859 l 4.04102,0.390625 0.33203,37.1875 0.33008,37.187503 4.98242,0 4.98047,0 0,-41.931644 0,-41.93164 3.068361,-3.06836 c 2.02959,-2.029591 4.480527,-3.044922 6.93164,-3.044922 z"\n         style="fill:#000000"\n         inkscape:connector-curvature="0" />\n    </g>\n  </g>\n</svg>\n',helpText:"Pan the viewport around the screen.",mnemonic:""},{id:ns.Drag,svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="ToolDrag.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd5ff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="-114.21469"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1155"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       style="fill:#ffffff;fill-opacity:1"\n       d="m 198.5848,262.7811 c 4.20633,-2.11828 10.6979,-6.53843 14.56602,-9.91813 8.37261,-7.31539 14.45656,-16.75062 17.0571,-26.45281 l 1.0485,-3.91179 0.13152,-78.9888 c 0.12928,-77.644351 0.1161,-79.01901 -0.77415,-80.764052 -2.61434,-5.124548 -8.31784,-6.963729 -13.48206,-4.347502 -2.71923,1.377593 -4.29692,3.30956 -5.08124,6.222338 -0.33279,1.235895 -0.3825,12.683532 -0.15789,36.363226 0.35259,37.17213 0.35694,37.08732 -1.99451,38.93698 -2.32354,1.82769 -6.12039,0.96658 -7.48256,-1.69703 -0.35868,-0.70137 -0.51673,-7.58938 -0.51673,-22.52069 0,-12.1911 -0.18698,-22.002082 -0.43159,-22.645446 -0.70246,-1.847607 -3.35617,-4.55936 -5.34669,-5.463631 -3.93544,-1.787837 -9.4322,-0.378546 -12.0852,3.098452 l -1.3336,1.747828 -0.23129,22.471767 c -0.17337,16.84505 -0.37697,22.72645 -0.8131,23.48887 -1.93589,3.38424 -7.07829,3.28127 -8.84694,-0.17715 -0.35869,-0.70137 -0.51672,-7.58938 -0.51672,-22.52069 0,-12.1911 -0.18699,-22.002082 -0.4316,-22.645446 -0.70246,-1.847607 -3.35618,-4.55936 -5.34668,-5.463631 -3.87387,-1.759857 -9.43517,-0.375283 -12.00019,2.987634 -1.8744,2.457453 -2.09288,5.31676 -2.10318,27.525053 l -0.009,20.04219 -1.35216,1.35214 c -1.88621,1.88622 -4.51033,1.88728 -6.62005,0.002 l -1.51068,-1.34958 -0.12936,-20.85437 -0.12937,-20.854377 -11.43597,0 -11.43598,0 -20.3527,13.451137 c -11.19399,7.39813 -20.84853,13.90316 -21.45454,14.45564 -2.60452,2.37443 -3.5731,7.35066 -2.11169,10.84917 1.53903,3.68433 5.1482,6.08608 9.17291,6.10418 2.01671,0.009 3.87187,-0.81214 17.31315,-7.66383 16.39457,-8.35714 16.58526,-8.4167 19.05356,-5.95088 l 1.15645,1.15528 0.23129,23.23462 c 0.12721,12.77904 0.0755,23.87456 -0.11494,24.65671 -0.41334,1.69773 -1.9511,3.20054 -3.69745,3.61342 -1.85784,0.43924 -3.99966,-0.6541 -6.33249,-3.23254 -1.12735,-1.24605 -6.56281,-6.87577 -12.0788,-12.51049 -9.75771,-9.96772 -10.09659,-10.26003 -12.52407,-10.80327 -5.52754,-1.23701 -10.96573,2.29848 -11.76838,7.6509 -0.47382,3.15968 0.52816,6.22712 3.57739,10.95165 3.38012,5.23721 8.36183,15.07942 15.73019,31.07758 7.08217,15.37679 13.71422,28.52253 18.13559,35.94749 8.19423,13.76091 16.10953,22.0795 23.08269,24.25878 1.51837,0.47453 8.21528,0.61604 30.29388,0.64015 l 28.34459,0.0309 3.13903,-1.58079 z"\n       id="path4722"\n       inkscape:connector-curvature="0" />\n    <path\n       style="fill:#000000"\n       d="m 134.82466,273.41608 c -5.80862,-1.6108 -10.46095,-4.72519 -16.43545,-11.00231 -4.85695,-5.10295 -8.32243,-9.82569 -13.32153,-18.15452 -3.8183,-6.36155 -13.189163,-25.03627 -18.811557,-37.48861 -5.584843,-12.36919 -11.331247,-23.79278 -14.54321,-28.91127 -3.912906,-6.23548 -4.932004,-8.94395 -5.221532,-13.87741 -0.19007,-3.23866 -0.05317,-4.45531 0.776431,-6.90035 1.08983,-3.21196 2.809606,-5.97011 5.039937,-8.08297 l 1.411555,-1.3372 -2.283176,-2.05276 c -1.524641,-1.37079 -2.855587,-3.21098 -4.00614,-5.53896 -1.531867,-3.09952 -1.7437,-3.96029 -1.90992,-7.76077 -0.22887,-5.23296 0.550666,-8.26182 3.113499,-12.09739 2.180307,-3.26308 0.464333,-2.01174 26.409189,-19.25824 l 21.047404,-13.990971 14.57128,-0.138947 14.57127,-0.138934 1.29094,-1.811486 c 1.75423,-2.461626 4.69929,-4.797698 7.99299,-6.340171 2.47779,-1.160367 3.23542,-1.284647 7.83155,-1.284647 4.7443,0 5.29556,0.09812 8.15223,1.451665 1.68511,0.79842 3.88953,2.197638 4.8987,3.109366 l 1.83486,1.65768 1.34612,-1.406005 c 0.74038,-0.773306 2.8792,-2.163939 4.75294,-3.0903 3.00627,-1.486274 3.90363,-1.705716 7.63257,-1.866503 4.07983,-0.175908 6.07109,0.212155 10.12368,1.972955 0.75135,0.326463 0.80951,-0.165369 0.80951,-6.844982 0,-3.9582 0.2308,-8.299812 0.51286,-9.648026 1.20526,-5.76068 5.29243,-10.78836 10.94834,-13.467677 2.9094,-1.37824 3.43841,-1.473312 8.19847,-1.473312 4.76549,0 5.28676,0.09403 8.21474,1.48093 4.15609,1.968702 7.82558,5.494965 9.71781,9.338492 l 1.49582,3.038319 0.12085,79.570454 c 0.13305,87.59899 0.26376,83.15726 -2.70887,92.04841 -3.74053,11.18789 -11.68774,21.81638 -22.64435,30.2842 -4.65481,3.59747 -11.28374,7.68197 -15.47744,9.53662 l -2.56783,1.13562 -30.40146,-0.0414 c -22.76429,-0.031 -30.92439,-0.18638 -32.48308,-0.61863 z M 198.5848,262.7811 c 4.20633,-2.11828 10.6979,-6.53843 14.56602,-9.91813 8.37261,-7.31539 14.45656,-16.75062 17.0571,-26.45281 l 1.0485,-3.91179 0.13152,-78.9888 c 0.12928,-77.644351 0.1161,-79.01901 -0.77415,-80.764052 -2.61434,-5.124548 -8.31784,-6.963729 -13.48206,-4.347502 -2.71923,1.377593 -4.29692,3.30956 -5.08124,6.222338 -0.33279,1.235895 -0.3825,12.683532 -0.15789,36.363226 0.35259,37.17213 0.35694,37.08732 -1.99451,38.93698 -2.32354,1.82769 -6.12039,0.96658 -7.48256,-1.69703 -0.35868,-0.70137 -0.51673,-7.58938 -0.51673,-22.52069 0,-12.1911 -0.18698,-22.002082 -0.43159,-22.645446 -0.70246,-1.847607 -3.35617,-4.55936 -5.34669,-5.463631 -3.93544,-1.787837 -9.4322,-0.378546 -12.0852,3.098452 l -1.3336,1.747828 -0.23129,22.471767 c -0.17337,16.84505 -0.37697,22.72645 -0.8131,23.48887 -1.93589,3.38424 -7.07829,3.28127 -8.84694,-0.17715 -0.35869,-0.70137 -0.51672,-7.58938 -0.51672,-22.52069 0,-12.1911 -0.18699,-22.002082 -0.4316,-22.645446 -0.70246,-1.847607 -3.35618,-4.55936 -5.34668,-5.463631 -3.87387,-1.759857 -9.43517,-0.375283 -12.00019,2.987634 -1.8744,2.457453 -2.09288,5.31676 -2.10318,27.525053 l -0.009,20.04219 -1.35216,1.35214 c -1.88621,1.88622 -4.51033,1.88728 -6.62005,0.002 l -1.51068,-1.34958 -0.12936,-20.85437 -0.12937,-20.854377 -11.43597,0 -11.43598,0 -20.3527,13.451137 c -11.193992,7.39813 -20.848528,13.90316 -21.454536,14.45564 -2.604526,2.37443 -3.573104,7.35066 -2.111693,10.84917 1.539032,3.68433 5.148195,6.08608 9.172907,6.10418 2.016712,0.009 3.871872,-0.81214 17.313152,-7.66383 16.39457,-8.35714 16.58526,-8.4167 19.05356,-5.95088 l 1.15645,1.15528 0.23129,23.23462 c 0.12721,12.77904 0.0755,23.87456 -0.11494,24.65671 -0.41334,1.69773 -1.9511,3.20054 -3.69745,3.61342 -1.85784,0.43924 -3.99966,-0.6541 -6.33249,-3.23254 -1.12735,-1.24605 -6.56281,-6.87577 -12.0788,-12.51049 -9.757714,-9.96772 -10.096591,-10.26003 -12.524074,-10.80327 -5.527533,-1.23701 -10.965729,2.29848 -11.768371,7.6509 -0.473825,3.15968 0.52816,6.22712 3.577384,10.95165 3.380116,5.23721 8.361832,15.07942 15.730189,31.07758 7.082172,15.37679 13.714222,28.52253 18.135592,35.94749 8.19423,13.76091 16.10953,22.0795 23.08269,24.25878 1.51837,0.47453 8.21528,0.61604 30.29388,0.64015 l 28.34459,0.0309 3.13903,-1.58079 z M 112.90759,139.5978 c -0.21058,-0.21058 -4.68064,1.97376 -11.17695,5.46172 l -4.182758,2.24578 7.652108,7.94148 7.65211,7.94149 0.12373,-11.69925 c 0.0681,-6.43459 0.0373,-11.78563 -0.0682,-11.89122 z"\n       id="path4716"\n       inkscape:connector-curvature="0" />\n  </g>\n</svg>\n',helpText:"Drag selected atoms to new positions.",mnemonic:""},{id:ns.Erasor,svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.47 r22583"\n   version="1.0"\n   sodipodi:docname="RetroErasor.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/BondLinear.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       id="perspective16" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.4"\n     inkscape:cx="101.20996"\n     inkscape:cy="115.93898"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1387"\n     inkscape:window-height="856"\n     inkscape:window-x="53"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="0">\n    <inkscape:grid\n       type="xygrid"\n       id="grid2983" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g3805"\n       transform="matrix(0.95048511,0,0,0.95048511,-7.209769,-44.503179)">\n      <path\n         inkscape:connector-curvature="0"\n         id="path3021"\n         d="m 30,220 0,80 130,0 0,-80 z"\n         style="fill:#ffffff;fill-opacity:0.50196078;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />\n      <path\n         inkscape:connector-curvature="0"\n         id="path3029"\n         d="m 30,220 60,-30 130,0 -60,30 z"\n         style="fill:#ffffff;fill-opacity:0.50196078;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />\n      <path\n         sodipodi:nodetypes="cccc"\n         inkscape:connector-curvature="0"\n         id="path3031"\n         d="m 90,190 120,-60 120,0 -110,60"\n         style="fill:#000000;fill-opacity:0.50196078;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />\n      <path\n         inkscape:connector-curvature="0"\n         id="path3033"\n         d="m 160,220 60,-30 0,80 -60,30 z"\n         style="fill:#ffffff;fill-opacity:0.50196078;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />\n      <path\n         inkscape:connector-curvature="0"\n         id="path3035"\n         d="m 220,190 0,80 110,-60 0,-80"\n         style="fill:#000000;fill-opacity:0.50196078;stroke:#000000;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />\n    </g>\n  </g>\n</svg>\n',helpText:"Delete atoms or bonds by selecting.",mnemonic:"Delete"},{id:ns.BondOrder0,svg:mi,helpText:"Create or change a bond to zero order.",mnemonic:"Shift+0",key:")"},{id:ns.BondOrder1,svg:pi,helpText:"Create or change a bond to single.",mnemonic:"Shift+1",key:"!"},{id:ns.BondOrder2,svg:hi,helpText:"Create or change a bond to double.",mnemonic:"Shift+2",key:"@"},{id:ns.BondOrder3,svg:ci,helpText:"Create or change a bond to triple.",mnemonic:"Shift+3",key:"#"},{id:ns.BondUnknown,svg:gi,helpText:"Create or change a bond to unknown stereochemistry.",mnemonic:"Shift+4",key:"$"},{id:ns.BondInclined,svg:ui,helpText:"Create or change a bond to up-wedge.",mnemonic:"Shift+5",key:"%"},{id:ns.BondDeclined,svg:fi,helpText:"Create or change a bond to down-wedge.",mnemonic:"Shift+6",key:"^"},{id:ns.RingAliph,svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="ToolRing.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd7fd"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.98994949"\n     inkscape:cx="195.90214"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1155"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="false"\n     inkscape:window-maximized="1">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="star"\n       style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"\n       id="path4140"\n       sodipodi:sides="6"\n       sodipodi:cx="160"\n       sodipodi:cy="160"\n       sodipodi:r1="134.46693"\n       sodipodi:r2="116.45179"\n       sodipodi:arg1="1.5707963"\n       sodipodi:arg2="2.0943951"\n       inkscape:flatsided="true"\n       inkscape:rounded="0"\n       inkscape:randomized="0"\n       d="M 160,294.46693 43.548221,227.23347 43.548217,92.766536 160,25.533066 276.45178,92.76653 l 0,134.46693 z" />\n  </g>\n</svg>\n',helpText:"Create plain ring.",mnemonic:"Shift+7",key:"&"},{id:ns.RingArom,svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="320"\n   height="320"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="0.91 r13725"\n   version="1.0"\n   sodipodi:docname="ToolArom.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   inkscape:export-filename="/home/aclark/CRK3/MMTk/images/msk/MainSelect.png"\n   inkscape:export-xdpi="9"\n   inkscape:export-ydpi="9">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       id="perspective8"\n       inkscape:persp3d-origin="160 : 106.66667 : 1"\n       inkscape:vp_z="320 : 160 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 160 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#bcd7fd"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.7"\n     inkscape:cx="19.717178"\n     inkscape:cy="158.28825"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer1"\n     width="320px"\n     height="320px"\n     showborder="true"\n     inkscape:window-width="1857"\n     inkscape:window-height="1155"\n     inkscape:window-x="63"\n     inkscape:window-y="0"\n     showgrid="true"\n     inkscape:window-maximized="1"\n     inkscape:snap-global="true"\n     inkscape:snap-bbox="true">\n    <inkscape:grid\n       type="xygrid"\n       id="grid4135" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <path\n       sodipodi:type="star"\n       style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"\n       id="path4140"\n       sodipodi:sides="6"\n       sodipodi:cx="160"\n       sodipodi:cy="160"\n       sodipodi:r1="134.46693"\n       sodipodi:r2="116.45179"\n       sodipodi:arg1="1.5707963"\n       sodipodi:arg2="2.0943951"\n       inkscape:flatsided="true"\n       inkscape:rounded="0"\n       inkscape:randomized="0"\n       d="M 160,294.46693 43.548221,227.23347 43.548217,92.766536 160,25.533066 276.45178,92.76653 l 0,134.46693 z" />\n    <circle\n       style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"\n       id="path4138"\n       cx="160"\n       cy="160"\n       r="73.650795" />\n  </g>\n</svg>\n',helpText:"Create aromatic ring.",mnemonic:"Shift+8",key:"*"},{id:ns.AtomPlus,svg:li,helpText:"Increase charge on atom.",mnemonic:""},{id:ns.AtomMinus,svg:di,helpText:"Decrease charge on atom.",mnemonic:""},{id:ns.ElementPfx+"C",text:"C",helpText:"Change elements to Carbon.",mnemonic:""},{id:ns.ElementPfx+"N",text:"N",helpText:"Change elements to Nitrogen.",mnemonic:""},{id:ns.ElementPfx+"O",text:"O",helpText:"Change elements to Oxygen.",mnemonic:""},{id:ns.ElementPfx+"S",text:"S",helpText:"Change elements to Sulfur.",mnemonic:""},{id:ns.ElementPfx+"P",text:"P",helpText:"Change elements to Phosphorus.",mnemonic:""},{id:ns.ElementPfx+"H",text:"H",helpText:"Change elements to Hydrogen.",mnemonic:""},{id:ns.ElementPfx+"F",text:"F",helpText:"Change elements to Fluorine.",mnemonic:""},{id:ns.ElementPfx+"Cl",text:"Cl",helpText:"Change elements to Chlorine.",mnemonic:""},{id:ns.ElementPfx+"Br",text:"Br",helpText:"Change elements to Bromine.",mnemonic:""},{id:ns.ElementPfx+"A",text:"A",helpText:"Pick other element.",mnemonic:""}];class ss extends ii{constructor(t){super(),this.owner=t}update(){for(let t of is)this.buttons.push(t);this.buttonView.setSelectedButton("arrow")}hitButton(t){this.buttonView.setSelectedButton(t)}claimKey(t){for(let e of is)if(ii.matchKey(t,e.mnemonic,e.key))return this.hitButton(e.id),!0;return!1}}var os,rs=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};class as extends Li{constructor(){super(),this.plugins={},this.inDialog=!1,this.initialFocus=!0,this.useToolBank=!0,this.lowerToolBank=!1,this.useCommandBank=!0,this.lowerCommandBank=!1,this.useTemplateBank=!0,this.lowerTemplateBank=!1,this.debugOutput=void 0,this.beenSetup=!1,this.undoStack=[],this.redoStack=[],this.fadeWatermark=0,this.toolView=null,this.commandView=null,this.templateView=null,this.proxyClip=null,this.proxyMenu=null}setSize(t,e){this.width=t,this.height=e}defineMolecule(t,e=!0,n=!1,i=!1){if(0!=t.compareTo(this.mol)){n&&this.stashUndo(),this.stopTemplateFusion(),this.mol=t.clone(),this.callbackChangeMolecule&&this.callbackChangeMolecule(this.mol),this.guidelines=[];for(let t=1;t<=this.mol.numAtoms;t++)for(let e of Kt.guidelineSprouts(this.mol,t))this.guidelines.push(e);this.beenSetup&&(i||(this.currentAtom=this.currentBond=0,this.selectedMask=null),this.stereo=null,this.hoverAtom=0,this.hoverBond=0,e?this.autoScale():this.renderMolecule())}}defineClipboard(t){this.proxyClip=t}defineContext(t){this.proxyMenu=t}defineMoleculeString(t,e,n){this.defineMolecule(ge.fromString(t),e,n)}defineRenderPolicy(t){this.policy=t,this.pointScale=t.data.pointScale}defineBackground(t,e,n){null!=t&&(this.border=t),null!=e&&(this.borderRadius=e),null!=n&&(this.background=n)}clearMolecule(){this.defineMolecule(new ge,!0,!0)}getMolecule(){return this.mol.clone()}setup(t){this.beenSetup=!0,null==this.mol&&(this.mol=new ge),null==this.policy&&(this.policy=nn.defaultColourOnWhite(),this.pointScale=this.policy.data.pointScale),this.layoutMolecule(),this.centreAndShrink(),this.redrawMetaVector(),t&&t()}setupAsync(){return rs(this,void 0,void 0,(function*(){return new Promise((t=>this.setup((()=>t()))))}))}render(t){super.render(t),this.centreAndShrink(),this.redraw();let e=0;this.useCommandBank&&(this.commandView=new ni(ti.Bottom,0,0,this.width,this.height),this.lowerCommandBank&&this.commandView.lowerBank(),this.commandView.setHasBigButtons(!1),this.commandView.pushBank(new Ni(this)),this.commandView.render(this.container),e=this.commandView.height),this.useToolBank&&(this.toolView=new ni(ti.Left,0,0,this.width,this.height-e),this.lowerToolBank&&this.toolView.lowerBank(),this.toolView.setHasBigButtons(!1),this.toolView.pushBank(new ss(this)),this.toolView.render(this.container)),this.useTemplateBank&&(this.templateView=new ni(ti.Right,0,0,this.width,this.height-e),this.lowerTemplateBank&&this.templateView.lowerBank(),this.templateView.setHasBigButtons(!0),this.templateView.pushBank(new ts(this,null)),this.templateView.render(this.container)),this.container.onClick((t=>this.mouseClick(t))),this.container.onDblClick((t=>this.mouseDoubleClick(t))),this.container.onMouseDown((t=>this.mouseDown(t))),this.container.onMouseUp((t=>this.mouseUp(t))),this.container.onMouseOver((t=>this.mouseOver(t))),this.container.onMouseLeave((t=>this.mouseOut(t))),this.container.onMouseMove((t=>this.mouseMove(t))),this.container.onKeyPress((t=>this.keyPressed(t))),this.container.onKeyDown((t=>this.keyDown(t))),this.container.onKeyUp((t=>this.keyUp(t))),this.container.onTouchStart((t=>this.touchStart(t))),this.container.onTouchMove((t=>this.touchMove(t))),this.container.onTouchCancel((t=>this.touchCancel(t))),this.container.onTouchEnd((t=>this.touchEnd(t))),this.contentDOM.onContextMenu((t=>this.contextMenu(t))),this.container.el.addEventListener("dragover",(t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"})),this.container.el.addEventListener("drop",(t=>{t.stopPropagation(),t.preventDefault(),this.dropInto(t.dataTransfer)})),this.initialFocus&&this.grabFocus()}get decoration(){return this.viewOpt.decoration}set decoration(t){this.viewOpt.decoration!=t&&(this.viewOpt.decoration=t,this.renderMolecule())}get showOxState(){return this.viewOpt.showOxState}set showOxState(t){this.viewOpt.showOxState!=t&&(this.viewOpt.showOxState=t,this.renderMolecule())}get showQuery(){return this.viewOpt.showQuery}set showQuery(t){this.viewOpt.showQuery!=t&&(this.viewOpt.showQuery=t,this.renderMolecule())}get showArtifacts(){return this.viewOpt.showArtifacts}set showArtifacts(t){this.viewOpt.showArtifacts!=t&&(this.viewOpt.showArtifacts=t,this.renderMolecule())}changeSize(t,e){if(t!=this.width||e!=this.height){this.width=t,this.height=e;for(let n of[this.container,this.canvasUnder,this.canvasMolecule,this.canvasOver])n.css({width:`${t}px`,height:`${e}px`});for(let n of[this.commandView,this.toolView,this.templateView])n&&(n.setParentSize(t,e),n.refreshBank());this.autoScale()}}showMessage(t,e=!1){let n=++this.fadeWatermark;this.divMessage.css({color:e?"#FF0000":"#008000"}),this.divMessage.setText(t);let i=(null==this.toolView?0:this.toolView.width)+2,s=(null==this.templateView?0:this.templateView.width)+2,o=(null==this.commandView?0:this.commandView.height)+2;this.divMessage.css({left:i+"px"}),this.divMessage.css({width:this.width-i-s+"px"}),this.divMessage.css({height:this.height-o+"px"}),window.setTimeout((()=>{n==this.fadeWatermark&&this.divMessage.setText("")}),5e3)}clearMessage(){""!=this.divMessage.getText()&&(this.fadeWatermark++,this.divMessage.setText(""))}autoScale(){this.pointScale=this.policy.data.pointScale,this.layoutMolecule(),this.centreAndShrink(),this.redrawMetaVector(),this.layoutTemplatePerm(),this.delayedRedraw()}anySelected(){if(null==this.selectedMask)return!1;for(let t=0;t<this.selectedMask.length;t++)if(this.selectedMask[t])return!0;return!1}setSelected(t,e){if(null==this.selectedMask){this.selectedMask=new Array(this.mol.numAtoms);for(let t=this.selectedMask.length-1;t>=0;t--)this.selectedMask[t]=!1}for(;this.selectedMask.length<this.mol.numAtoms;)this.selectedMask.push(!1);this.selectedMask[t-1]=e,this.delayedRedraw()}changeCurrentAtom(t){this.currentAtom!=t&&(this.currentAtom=t,this.currentBond=0,this.delayedRedraw())}changeCurrentBond(t){this.currentBond!=t&&(this.currentBond=t,this.currentAtom=0,this.delayedRedraw())}clearSubject(){0==this.currentAtom&&0==this.currentBond&&n.allFalse(this.selectedMask)||(this.currentAtom=0,this.currentBond=0,this.selectedMask=n.booleanArray(!1,this.mol.numAtoms),this.delayedRedraw())}setState(t,e=!0){this.stopTemplateFusion(),null!=t.mol&&this.defineMolecule(t.mol.clone(),!1,e,!0),t.currentAtom>=0&&(this.currentAtom=t.currentAtom),t.currentBond>=0&&(this.currentBond=t.currentBond),null!=t.selectedMask&&(this.selectedMask=null==t.selectedMask?null:t.selectedMask.slice(0)),this.delayedRedraw()}stashUndo(){let t=this.getState();for(this.undoStack.push(t);this.undoStack.length>as.UNDO_SIZE;)this.undoStack.splice(0,1);this.redoStack=[]}setPermutations(t){this.templatePerms=t,this.pickTemplatePermutation(0),this.fusionBank=new es(this),this.templateView.pushBank(this.fusionBank),0==this.mol.numAtoms&&this.centreAndShrink()}stopTemplateFusion(){null!=this.fusionBank&&this.templateView.popBank()}clearPermutations(){null!=this.templatePerms&&(this.templatePerms=null,this.delayedRedraw(),this.fusionBank=null)}templateAccept(){let t=ge.fromString(this.templatePerms[this.currentPerm].mol);this.templateView.popBank(),this.defineMolecule(t,!1,!0,!1)}templateRotate(t){let e=(this.currentPerm+t)%this.templatePerms.length;e<0&&(e+=this.templatePerms.length),this.pickTemplatePermutation(e)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}performUndo(){if(0==this.undoStack.length)return;let t=this.getState();this.redoStack.push(t),this.setState(this.undoStack.pop(),!1)}performRedo(){if(0==this.redoStack.length)return;let t=this.getState();this.undoStack.push(t),this.setState(this.redoStack.pop(),!1)}performCopy(t){t||(t=this.getMolecule()),this.proxyClip&&this.proxyClip.setString(t.toString())}performCopySelection(t){new ai(this.getState(),t?ei.Cut:ei.Copy,{},this).execute()}performPaste(){if(this.proxyClip&&this.proxyClip.canAlwaysGet()){let t=this.proxyClip.getString();this.pasteText(t)}}performActivity(t,e={}){new ai(this.getState(),t,e,this).execute()}zoom(t){let e=.5*this.width,n=.5*this.height,i=Math.min(10*this.policy.data.pointScale,Math.max(.1*this.policy.data.pointScale,this.pointScale*t));i!=this.pointScale&&(this.offsetX=e-i/this.pointScale*(e-this.offsetX),this.offsetY=n-i/this.pointScale*(n-this.offsetY),this.pointScale=i,this.layoutMolecule(),this.redrawMetaVector(),this.layoutTemplatePerm(),this.delayedRedraw())}editCurrent(){this.currentBond>0?this.editBond(this.currentBond):this.editAtom(this.currentAtom)}pasteText(t){const e=()=>{let e=me.readUnknown(t);if(!e){let n=On.readXML(t);if(n)t:for(let t=0;t<n.numRows;t++)for(let i=0;i<n.numCols;i++)if("molecule"==n.colType(i)&&n.notNull(t,i)){e=n.getMolecule(t,i);break t}}null!=e?this.pasteMolecule(e):alert("Text from clipboard is not a valid molecule.")};this.plugins.callbackSpecialPaste?(()=>{rs(this,void 0,void 0,(function*(){let n=yield this.plugins.callbackSpecialPaste(t);n?this.pasteMolecule(n):e()}))})():e()}pasteMolecule(t){if(0==this.mol.numAtoms)return void this.defineMolecule(t,!0,!0,!0);let e=new ai(this.getState(),ei.QueryPaste,{qmol:t});if(e.execute(),e.output.mol)return void this.defineMolecule(e.output.mol,!1,!0,!0);let n={fragNative:t.toString()};new ai(this.getState(),ei.TemplateFusion,n,this).execute()}pickTemplatePermutation(t){this.templatePerms[t],this.currentPerm=t,this.layoutTemplatePerm(),this.delayedRedraw()}performPolymerBlock(t){let e=new Ji(this.mol,t,this.proxyClip,(()=>{0!=this.mol.compareTo(e.mol)&&this.defineMolecule(e.mol,!1,!0,!0),e.close()}));e.callbackClose=()=>{this.inDialog=!1,this.grabFocus()},this.inDialog=!0,e.open()}grabFocus(){this.container.grabFocus()}hasFocus(){return this.container.hasFocus()}centreAndShrink(){if(0==this.mol.numAtoms||null==this.layout)return this.offsetX=.5*this.width,this.offsetY=.5*this.height,void(this.pointScale=this.policy.data.pointScale);let t=this.layout.determineBoundary(0),e=this.width-6,n=this.height-6,i=t[2]-t[0],s=t[3]-t[1],o=1;if(i>e){let t=e/i;o*=t,i*=t,s*=t}if(s>n){let t=n/s;o*=t,i*=t,s*=t}o<1&&(this.pointScale*=o,this.layout.offsetEverything(this.offsetX*o,this.offsetY*o),this.layout.scaleEverything(o),t=this.layout.determineBoundary(0));let r=.5*(e-i)-t[0],a=.5*(n-s)-t[1];this.offsetX+=r,this.offsetY+=a,this.layout.offsetEverything(r,a)}layoutTemplatePerm(){if(this.currentPerm<0||null==this.templatePerms)return;let t=this.templatePerms[this.currentPerm],e=new nn(this.policy.data);e.data.foreground=8421504,e.data.atomCols=e.data.atomCols.slice(0);for(let t in e.data.atomCols)e.data.atomCols[t]=8421504;let n=new sn,i=new rn(ge.fromString(t.display),this,e,n);i.arrange(),t.metavec=new cn,new mn(i,t.metavec).draw()}renderMolecule(){this.layoutMolecule(),this.redrawMetaVector(),this.delayedRedraw()}pickObjectCanvas(t,e){if(null==this.layout)return 0;if(null!=this.toolView){let n=this.container.offset(),i=this.toolView.contentDOM.offset();if(this.toolView.withinOutline(t+n.x-i.x,e+n.y-i.y))return null}if(null!=this.commandView){let n=this.container.offset(),i=this.commandView.contentDOM.offset();if(this.commandView.withinOutline(t+n.x-i.x,e+n.y-i.y))return null}if(null!=this.templateView){let n=this.container.offset(),i=this.templateView.contentDOM.offset();if(this.templateView.withinOutline(t+n.x-i.x,e+n.y-i.y))return null}return super.pickObjectCanvas(t,e)}updateHoverCursor(t,e){let n=this.toolView?this.toolView.selectedButton:"",i=n&&n!=ns.Pan&&n!=ns.Rotate,s=0;this.dragType==Ri.None&&i&&(s=this.pickObject(t,e));let o=s>0?s:0,r=s<0?-s:0,a=this.hoverAtom>0&&Qt.hasAbbrev(this.mol,this.hoverAtom)?this.hoverAtom:0,l=o>0&&Qt.hasAbbrev(this.mol,o)?o:0;o==this.hoverAtom&&r==this.hoverBond||(this.hoverAtom=o,this.hoverBond=r,a!=l&&(this.layoutMolecule(),this.redrawMetaVector()),this.delayedRedraw())}determineDragGuide(t){if(0==this.opAtom||0==this.mol.atomAdjCount(this.opAtom)){let e={atom:this.opAtom,orders:[t],x:[],y:[],sourceX:0==this.opAtom?this.clickX:this.angToX(this.mol.atomX(this.opAtom)),sourceY:0==this.opAtom?this.clickY:this.angToY(this.mol.atomY(this.opAtom)),destX:[],destY:[]},n=0==this.opAtom?this.xToAng(this.clickX):this.mol.atomX(this.opAtom),i=0==this.opAtom?this.yToAng(this.clickY):this.mol.atomY(this.opAtom);for(let t=0;t<12;t++){let s=Z*t/12,o=ge.IDEALBOND*Math.cos(s),r=ge.IDEALBOND*Math.sin(s);e.x.push(n+o),e.y.push(i+r),e.destX.push(e.sourceX+o*this.pointScale),e.destY.push(e.sourceY-r*this.pointScale)}return[e]}if(null==this.guidelines)return null;let e=null,n=null;for(let i=0;i<this.guidelines.length;i++){let s=this.guidelines[i];if(s.atom==this.opAtom){if(s.orders.indexOf(t)>=0){e=s;break}s.orders.indexOf(1)>=0&&(n=s)}}if(null==e&&(e=n),null==e)return[];let i=kt(e);i.sourceX=this.angToX(this.mol.atomX(i.atom)),i.sourceY=this.angToY(this.mol.atomY(i.atom)),i.destX=[],i.destY=[];for(let t=0;t<i.x.length;t++)i.destX.push(this.angToX(i.x[t])),i.destY.push(this.angToY(i.y[t]));return[i]}determineMoveGuide(){let t=this.subjectAtoms(!1,!0);if(0==t.length||t.length==this.mol.numAtoms)return null;let e=[];for(let n=0;n<this.guidelines.length;n++){let i=this.guidelines[n];if(!(i.orders.indexOf(1)<0||t.indexOf(i.atom)>=0)){i=kt(i),i.sourceX=this.angToX(this.mol.atomX(i.atom)),i.sourceY=this.angToY(this.mol.atomY(i.atom)),i.destX=[],i.destY=[];for(let t=0;t<i.x.length;t++)i.destX.push(this.angToX(i.x[t])),i.destY.push(this.angToY(i.y[t]));e.push(i)}}return e}editAtom(t){let e=new Gi(this.mol,t,this.proxyClip,(()=>{0!=this.mol.compareTo(e.mol)&&this.defineMolecule(e.mol,!1,!0,!0),e.close()}));if(e.callbackClose=()=>{this.inDialog=!1,this.grabFocus()},0==t&&this.mol.numAtoms>0){let t=this.mol.boundary();e.newX=t.maxX()+ge.IDEALBOND,e.newY=t.midY()}this.inDialog=!0,e.open()}editBond(t){if(0==t)return;let e=new Vi(this.mol,t,this.proxyClip,(()=>{0!=this.mol.compareTo(e.mol)&&this.defineMolecule(e.mol,!1,!0,!0),e.close()}));e.callbackClose=()=>{this.inDialog=!1,this.grabFocus()},this.inDialog=!0,e.open()}hitArrowKey(t,e){let n=++this.cursorWatermark;this.cursorDX+=t,this.cursorDY+=e,setTimeout((()=>{n==this.cursorWatermark&&this.cursorJumpDirection()}),100)}cursorJumpDirection(){let t=Math.atan2(this.cursorDY,this.cursorDX);this.currentAtom>0?this.jumpFromCurrentAtom(t):this.currentBond>0?this.jumpFromCurrentBond(t):this.jumpFromNowhere(t),this.cursorDX=0,this.cursorDY=0,this.cursorWatermark=0}jumpFromCurrentAtom(t){let e=this.mol.atomAdjList(this.currentAtom),n=0,i=Number.MAX_VALUE;for(let s of e){let e=this.mol.atomX(s)-this.mol.atomX(this.currentAtom),o=this.mol.atomY(s)-this.mol.atomY(this.currentAtom),r=Math.atan2(o,e),a=Math.abs(it(r,t));a<35*tt&&a<i&&([n,i]=[s,a])}if(n>0)return void this.changeCurrentBond(this.mol.findBond(this.currentAtom,n));let s=0,o=Number.MIN_VALUE;for(let n=1;n<=this.mol.numAtoms;n++)if(n!=this.currentAtom&&e.indexOf(n)<0){let e=this.mol.atomX(n)-this.mol.atomX(this.currentAtom),i=this.mol.atomY(n)-this.mol.atomY(this.currentAtom),r=Math.atan2(i,e),a=Math.abs(it(r,t));if(a>45*tt)continue;let l=Math.cos(a),d=Math.pow(l,2)/(Y(e,i)+.001);d>o&&([s,o]=[n,d])}s>0&&this.changeCurrentAtom(s)}jumpFromCurrentBond(t){let[e,n]=this.mol.bondFromTo(this.currentBond),i=Math.atan2(this.mol.atomY(n)-this.mol.atomY(e),this.mol.atomX(n)-this.mol.atomX(e));Math.abs(it(t,i))<50*tt&&this.changeCurrentAtom(n),Math.abs(it(t,i+Math.PI))<50*tt&&this.changeCurrentAtom(e)}jumpFromNowhere(t){if(0==this.mol.numAtoms)return;if(1==this.mol.numAtoms)return void this.changeCurrentAtom(1);let e=0,n=0;for(let t=1;t<=this.mol.numAtoms;t++)e+=this.mol.atomX(t),n+=this.mol.atomY(t);let i=1/this.mol.numAtoms;e*=i,n*=i;let s=0,o=Number.MIN_VALUE;for(let i=1;i<=this.mol.numAtoms;i++){let r=this.mol.atomX(i)-e,a=this.mol.atomY(i)-n,l=Math.atan2(a,r),d=Math.cos(Math.abs(it(t+Math.PI,l)))*U(r,a);d>o&&([s,o]=[i,d])}s>0&&this.changeCurrentAtom(s)}createRing(t,e){const{mol:i}=this;let s=null,o=null;if(this.currentAtom>0){let e=0,r=0,a=i.atomAdjList(this.currentAtom),l=i.atomX(this.currentAtom),d=i.atomY(this.currentAtom);for(let t of a)e-=i.atomX(t)-l,r-=i.atomY(t)-d;if(Math.abs(e)<.001&&Math.abs(r)<.001)if(a.length>=2){let t=a.map((t=>Math.atan2(i.atomY(t)-l,i.atomX(t)-d)));n.sort(t);let s=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){let o=it(t[(n+1)%t.length],t[n]),a=Math.cos(o),p=Math.sin(o),h=Zt.congestionPoint(i,l+a,d+p);h<s&&([s,e,r]=[h,a,p])}}else[e,r]=[1,0];[s,o]=Kt.proposeAtomRing(this.mol,t,this.currentAtom,e,r)}else if(this.currentBond>0){let e=i.bondFrom(this.currentBond),n=i.bondTo(this.currentBond),r=i.atomX(e),a=i.atomY(e),l=i.atomX(n),d=i.atomY(n),p=.5*(r+l),h=.5*(a+d),c=a-d,m=l-r,[u,f]=Zt.congestionPoint(i,p-c,h-m)<Zt.congestionPoint(i,p+c,h+m)?[-c,-m]:[c,m];[s,o]=Kt.proposeBondRing(this.mol,t,this.currentBond,u,f)}else{let e=0,n=0;if(i.numAtoms>0){let t=i.boundary();[e,n]=[t.maxX()+ge.IDEALBOND,t.midY()]}[s,o]=Kt.proposeNewRing(this.mol,t,e,n,0,-1,!1)}if(!s)return;let r={ringX:s,ringY:o,aromatic:e};new ai(this.getState(),ei.Ring,r,this).execute()}ctrlArrowKey(t,e){let n=++this.cursorWatermark;this.cursorDX+=t,this.cursorDY+=e,setTimeout((()=>{n==this.cursorWatermark&&(this.sproutDirection(this.cursorDX,this.cursorDY),this.cursorDX=this.cursorDY=0)}),100)}sproutDirection(t,e){new ai(this.getState(),ei.SproutDirection,{deltaX:t,deltaY:e},this).execute()}launchComposeFragment(){const{callbackComposeFragment:t}=this.plugins;t&&!this.inDialog&&t(this)}mouseClick(t){return t.stopPropagation(),this.grabFocus(),!1}mouseDoubleClick(t){if(t.stopPropagation(),t.preventDefault(),this.toolView.selectedButton!=ns.Arrow)return;let e=I(t,this.container),n=this.pickObject(e[0],e[1]);if(n>0){let t=n;this.editAtom(t)}else{let t=-n;this.editBond(t)}return!1}mouseDown(t){if(t.stopPropagation(),t.preventDefault(),this.clearMessage(),t.ctrlKey&&!t.shiftKey&&!t.altKey)return void this.contextMenu(t);let[e,n]=I(t,this.container);return this.interactStart(e,n,t.shiftKey,t.ctrlKey,t.altKey),!1}mouseUp(t){t.stopPropagation();let[e,n]=I(t,this.container);return this.interactEnd(e,n),!1}mouseOver(t){t.stopPropagation();let[e,n]=I(t,this.container);return this.updateHoverCursor(e,n),this.updateLasso(e,n),!1}mouseOut(t){t.stopPropagation();let[e,n]=I(t,this.container);return this.updateHoverCursor(e,n),this.updateLasso(e,n),!1}mouseMove(t){t.stopPropagation();let[e,n]=I(t,this.container);if(this.updateHoverCursor(e,n),this.dragType!=Ri.None)return this.interactDrag(e,n),!1}keyPressed(t){}keyDown(t){let e=t.key;if("Escape"==e)for(let e of[this.templateView,this.commandView,this.toolView])if(null!=e&&e.stackSize>1)return e.popBank(),t.preventDefault(),void t.stopPropagation();let n=(t.shiftKey?"S":"")+(t.ctrlKey||t.metaKey?"C":"")+(t.altKey?"A":""),i=!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey);if(null!=this.toolView&&this.toolView.topBank.claimKey(t));else if(null!=this.commandView&&this.commandView.topBank.claimKey(t));else if(null!=this.templateView&&this.templateView.topBank.claimKey(t));else if("Enter"==e)this.editCurrent();else if("ArrowLeft"==e&&i)this.hitArrowKey(-1,0);else if("ArrowRight"==e&&i)this.hitArrowKey(1,0);else if("ArrowUp"==e&&i)this.hitArrowKey(0,1);else if("ArrowDown"==e&&i)this.hitArrowKey(0,-1);else if("z"==e&&"C"==n)this.performUndo();else if("Z"==e&&"SC"==n)this.performRedo();else if("z"==e&&i)this.toolView.cycleSelected(-1);else if("x"==e&&i)this.toolView.cycleSelected(1);else if("#"==e&&"SC"==n)this.createRing(3,!1);else if("$"==e&&"SC"==n)this.createRing(4,!1);else if("%"==e&&"SC"==n)this.createRing(5,!1);else if("^"==e&&"SC"==n)this.createRing(6,!1);else if("&"==e&&"SC"==n)this.createRing(7,!1);else if("3"==e&&"CA"==n)this.createRing(3,!0);else if("4"==e&&"CA"==n)this.createRing(4,!0);else if("5"==e&&"CA"==n)this.createRing(5,!0);else if("6"==e&&"CA"==n)this.createRing(6,!0);else if("7"==e&&"CA"==n)this.createRing(7,!0);else if("c"==e&&"C"==n&&this.proxyClip)this.proxyClip.triggerCopy(!1);else if("x"==e&&"C"==n&&this.proxyClip)this.proxyClip.triggerCopy(!0);else if("v"==e&&"C"==n&&this.proxyClip&&this.proxyClip.canAlwaysGet())this.proxyClip.triggerPaste();else if("ArrowLeft"==e&&"C"==n)this.ctrlArrowKey(-1,0);else if("ArrowRight"==e&&"C"==n)this.ctrlArrowKey(1,0);else if("ArrowUp"==e&&"C"==n)this.ctrlArrowKey(0,1);else if("ArrowDown"==e&&"C"==n)this.ctrlArrowKey(0,-1);else if("1"==e&&"C"==n)this.sproutDirection(-1,-1);else if("2"==e&&"C"==n)this.sproutDirection(0,-1);else if("3"==e&&"C"==n)this.sproutDirection(1,-1);else if("4"==e&&"C"==n)this.sproutDirection(-1,0);else if("6"==e&&"C"==n)this.sproutDirection(1,0);else if("7"==e&&"C"==n)this.sproutDirection(-1,1);else if("8"==e&&"C"==n)this.sproutDirection(0,1);else if("9"==e&&"C"==n)this.sproutDirection(1,1);else{if("`"!=e||!i)return;this.launchComposeFragment()}t.preventDefault(),t.stopPropagation()}keyUp(t){}touchStart(t){let[e,n]=I(t.touches[0],this.container);null!=this.pickObjectCanvas(e,n)&&(this.interactStart(e,n,t.shiftKey,t.ctrlKey,t.altKey),t.preventDefault())}touchMove(t){if(this.dragType!=Ri.None){let[e,n]=I(t.touches[0],this.container);this.interactDrag(e,n)}t.preventDefault()}touchCancel(t){}touchEnd(t){if(this.dragType!=Ri.None){let[e,n]=[this.mouseX,this.mouseY];this.interactEnd(e,n),t.preventDefault()}}mouseWheel(t){}contextMenu(t){if(t.preventDefault(),t.stopPropagation(),this.dragType=Ri.None,!this.proxyMenu)return;let[e,n]=I(t,this.container),i=this.pickObject(e,n);i>0?this.changeCurrentAtom(i):i<0&&this.changeCurrentBond(-i);let s=this.getState(),o=new Di(s,this,this.proxyClip).populate();this.proxyMenu.openContextMenu(o,t)}interactStart(t,e,n,i,s){this.dragType=Ri.Press,this.opBudged=!1,this.dragGuides=null,this.mouseX=t,this.mouseY=e,this.clickX=t,this.clickY=e;let o=this.pickObject(t,e);this.opAtom=o>0?o:0,this.opBond=o<0?-o:0,this.opShift=n,this.opCtrl=i,this.opAlt=s;let r="";if(null!=this.toolView&&(r=this.toolView.selectedButton),r==ns.Arrow)this.opShift||this.opCtrl||this.opAlt?this.opShift||this.opCtrl||!this.opAlt?!this.opShift&&this.opCtrl&&this.opAlt&&(this.dragType=Ri.Zoom):this.dragType=Ri.Pan:this.dragType=Ri.Press;else if(r==ns.Rotate)this.dragType=Ri.Rotate,this.toolRotateIncr=this.opShift?0:15*tt;else if(r==ns.Pan)this.dragType=Ri.Pan;else if(r==ns.Drag)this.dragType=Ri.Move,this.opAtom>0&&(this.dragGuides=this.determineMoveGuide()),this.delayedRedraw();else if(r==ns.Erasor)this.dragType=Ri.Erasor,this.lassoX=[t],this.lassoY=[e],this.lassoMask=[];else if(r==ns.RingAliph)this.dragType=Ri.Ring,this.toolRingArom=!1,this.toolRingFreeform=this.opShift;else if(r==ns.RingArom)this.dragType=Ri.Ring,this.toolRingArom=!0,this.toolRingFreeform=this.opShift;else if(r==ns.AtomPlus)this.dragType=Ri.Charge,this.toolChargeDelta=1;else if(r==ns.AtomMinus)this.dragType=Ri.Charge,this.toolChargeDelta=-1;else if(r.startsWith(ns.BondPfx)){if(this.dragType=Ri.Bond,this.toolBondOrder=1,this.toolBondType=ge.BONDTYPE_NORMAL,r==ns.BondOrder0?this.toolBondOrder=0:r==ns.BondOrder2?this.toolBondOrder=2:r==ns.BondOrder3?this.toolBondOrder=3:r==ns.BondUnknown?this.toolBondType=ge.BONDTYPE_UNKNOWN:r==ns.BondInclined?this.toolBondType=ge.BONDTYPE_INCLINED:r==ns.BondDeclined&&(this.toolBondType=ge.BONDTYPE_DECLINED),this.opBond>0){let[t,e]=this.mol.bondFromTo(this.opBond),n=!1;for(let i of new $t(this.mol).getUnits()){let s=i.atoms.includes(t),o=i.atoms.includes(e);if(s&&!o||o&&!s){n=!0;break}}n&&(this.toolBondOrder=0,this.toolBondType=ge.BONDTYPE_NORMAL)}0==this.opBond&&(this.dragGuides=this.determineDragGuide(this.toolBondOrder))}else r.startsWith(ns.ElementPfx)&&(this.dragType=Ri.Atom,this.toolAtomSymbol=r.substring(ns.ElementPfx.length),this.dragGuides=this.determineDragGuide(1))}interactDrag(t,e){if(!this.opBudged){let n=t-this.clickX,i=e-this.clickY;n*n+i*i>4&&(this.opBudged=!0)}if(this.dragType==Ri.Press&&0==this.opAtom&&0==this.opBond&&this.opBudged&&(this.dragType=Ri.Lasso,this.lassoX=[t],this.lassoY=[e],this.lassoMask=[]),this.dragType==Ri.Lasso||this.dragType==Ri.Erasor)this.updateLasso(t,e);else if(this.dragType==Ri.Pan){let n=t-this.mouseX,i=e-this.mouseY;0==n&&0==i||(this.offsetX+=n,this.offsetY+=i,this.layout.offsetEverything(n,i),this.metavec.transformPrimitives(n,i,1,1),this.currentPerm>=0&&null!=this.templatePerms&&this.templatePerms[this.currentPerm].metavec.transformPrimitives(n,i,1,1),this.delayedRedraw()),this.mouseX=t,this.mouseY=e}else if(this.dragType==Ri.Zoom){let n=e-this.mouseY;if(0!=n){n=Math.min(50,Math.max(-50,n));let t=this.pointScale*(1-.01*n);t=Math.min(10,Math.max(.1,t));let e=this.clickX-t/this.pointScale*(this.clickX-this.offsetX),i=this.clickY-t/this.pointScale*(this.clickY-this.offsetY);this.pointScale=t,this.offsetX=e,this.offsetY=i,this.delayedRedraw()}this.mouseX=t,this.mouseY=e}else this.dragType!=Ri.Rotate&&this.dragType!=Ri.Move&&this.dragType!=Ri.Atom&&this.dragType!=Ri.Bond&&this.dragType!=Ri.Ring||(this.mouseX=t,this.mouseY=e,this.delayedRedraw())}interactEnd(t,e){this.opBudged?this.interactEndDrag(t,e):this.interactEndClick(t,e),this.dragType=Ri.None,this.lassoX=null,this.lassoY=null,this.lassoMask=null,this.dragGuides=null,this.delayedRedraw()}interactEndClick(t,e){let i=this.pickObject(t,e),s=i>0?i:0,o=i<0?-i:0;if(this.dragType==Ri.Press)this.opShift||this.opCtrl||this.opAlt?!this.opShift||this.opCtrl||this.opAlt||s>0&&this.setSelected(s,!this.getSelected(s)):0==s&&0==o?n.anyTrue(this.selectedMask)?this.selectedMask=null:this.currentAtom>0?this.currentAtom=0:this.currentBond>0&&(this.currentBond=0):s!=this.currentAtom||o!=this.currentBond?(this.currentAtom=s,this.currentBond=o):0==s&&0==o&&this.anySelected()&&(this.selectedMask=null);else if(this.dragType==Ri.Move)0==i&&(n.anyTrue(this.selectedMask)?this.selectedMask=null:this.currentAtom>0?this.currentAtom=0:this.currentBond>0&&(this.currentBond=0));else if(this.dragType==Ri.Erasor){if(this.opAtom>0||this.opBond>0){let t=Object.assign(Object.assign({},this.getState()),{currentAtom:this.opAtom,currentBond:this.opBond,selectedMask:[]});new ai(t,ei.Delete,{},this).execute()}}else if(this.dragType==Ri.Atom){let t=this.toolAtomSymbol;if("A"==t){let t=new Gi(this.mol,this.opAtom,this.proxyClip,(()=>{let e=0==this.mol.numAtoms;0!=this.mol.compareTo(t.mol)&&this.defineMolecule(t.mol,e,!0),t.close()}));0==this.opAtom&&(t.newX=this.xToAng(this.clickX),t.newY=this.yToAng(this.clickY)),t.callbackClose=()=>{this.inDialog=!1,this.grabFocus()},this.inDialog=!0,t.open()}else if(t){let e={element:t,keepAbbrev:!0};if(0==this.opAtom){let t=this.xToAng(this.clickX),n=this.yToAng(this.clickY);0==this.mol.numAtoms&&(this.offsetX=this.clickX,this.offsetY=this.clickY,t=0,n=0),e.positionX=t,e.positionY=n}let n=Object.assign(Object.assign({},this.getState()),{currentAtom:this.opAtom,currentBond:0,selectedMask:null});new ai(n,ei.Element,e,this).execute()}}else if(this.dragType==Ri.Charge){if(this.opAtom>0||this.opBond>0){let t=Object.assign(Object.assign({},this.getState()),{currentAtom:this.opAtom,currentBond:this.opBond,selectedMask:null});new ai(t,ei.Charge,{delta:this.toolChargeDelta},this).execute()}}else if(this.dragType==Ri.Bond){let t,e=Object.assign(Object.assign({},this.getState()),{currentAtom:this.opAtom,currentBond:this.opBond,selectedMask:null});t=this.toolBondType==ge.BONDTYPE_NORMAL?new ai(e,ei.BondOrder,{order:this.toolBondOrder},this):new ai(e,ei.BondType,{type:this.toolBondType},this),t.execute()}}interactEndDrag(t,e){if(this.dragType==Ri.Lasso){if(this.lassoX.length>=2){this.calculateLassoMask();for(let t=1;t<=this.mol.numAtoms;t++)this.getLassoed(t)&&!this.getSelected(t)&&this.setSelected(t,!0)}this.lassoX=null,this.lassoY=null,this.lassoMask=null,this.delayedRedraw()}else if(this.dragType==Ri.Erasor){let t=!1;for(let e=0;e<this.lassoMask.length;e++)if(this.lassoMask[e]){t=!0;break}if(t){let t=Object.assign(Object.assign({},this.getState()),{currentAtom:0,currentBond:0,selectedMask:this.lassoMask});new ai(t,ei.Delete,{},this).execute()}}else if(this.dragType==Ri.Rotate){let[t,e,n,i]=this.determineDragTheta(),s=-n*et,o=this.xToAng(t),r=this.yToAng(e);new ai(this.getState(),ei.Rotate,{theta:s,centreX:o,centreY:r},this).execute()}else if(this.dragType==Ri.Move){let[t,e]=this.determineMoveDelta(),n=this.pointScale;new ai(this.getState(),ei.Move,{refAtom:this.opAtom,deltaX:t/n,deltaY:-e/n},this).execute()}else if(this.dragType==Ri.Ring){let[t,e]=this.determineFauxRing();if(null!=t){let n={ringX:t,ringY:e,aromatic:this.toolRingArom};new ai(this.getState(),ei.Ring,n,this).execute()}}else if(this.dragType==Ri.Atom&&this.opAtom>0){let t=this.mouseX,e=this.mouseY,n=this.snapToGuide(t,e);null!=n&&([t,e]=n);let i={order:1,type:ge.BONDTYPE_NORMAL,element:this.toolAtomSymbol,x1:this.mol.atomX(this.opAtom),y1:this.mol.atomY(this.opAtom),x2:this.xToAng(t),y2:this.yToAng(e)};"A"==this.toolAtomSymbol&&(i.element=window.prompt("Enter element symbol:","")),""!=i.element&&new ai(this.getState(),ei.BondAtom,i,this).execute()}else if(this.dragType==Ri.Bond){let t=this.mouseX,e=this.mouseY,n=this.snapToGuide(t,e);if(null!=n&&([t,e]=n,this.opBond>0)){let n=this.pickObject(t,e,{noAtoms:!0});if(n<0)return void this.connectPolymerBlock(this.opBond,-n)}let i={order:this.toolBondOrder,type:this.toolBondType,element:"C",x1:0==this.opAtom?this.xToAng(this.clickX):this.mol.atomX(this.opAtom),y1:0==this.opAtom?this.yToAng(this.clickY):this.mol.atomY(this.opAtom),x2:this.xToAng(t),y2:this.yToAng(e)};new ai(this.getState(),ei.BondAtom,i,this).execute()}}dropInto(t){let e=t.items,n=t.files;const i=[".el",".mol"],s=["text/plain","chemical/x-sketchel","x-mdl-molfile"];for(let t=0;t<e.length;t++)if("string"==e[t].kind&&s.indexOf(e[t].type)>=0)return void e[t].getAsString((t=>{let e=ge.fromString(t);null!=e?this.defineMolecule(e,!0,!0,!0):console.log("Dragged data is not a SketchEl molecule: "+t)}));for(let t=0;t<n.length;t++)for(let e of i)if(n[t].name.endsWith(e)){let e=new FileReader;return e.onload=t=>{let n=e.result,i=me.readUnknown(n.toString());null!=i?this.defineMolecule(i,!0,!0):console.log("Dragged file is not a recognised molecule: "+n)},void e.readAsText(n[t])}}connectPolymerBlock(t,e){let[i,s]=this.mol.bondFromTo(t),[o,r]=this.mol.bondFromTo(e),a=this.getState(),l=new $t(a.mol),d=null,p=null,h=0;for(let t of l.getUnits()){if(!d||t.atoms.length<d.atoms.length){let e=t.atoms.includes(i),n=t.atoms.includes(s);e&&!n?d=t:n&&!e&&([d,i,s]=[t,s,i])}if(!p||t.atoms.length<p.atoms.length){let e=t.atoms.includes(o),n=t.atoms.includes(r);e&&!n?p=t:n&&!e&&([p,o,r]=[t,r,o])}for(let e of t.atomName.values())h=Math.max(h,n.max(e))}if(!d||!p)return!1;let c=n.first(d.atomName.get(i));c||(c=++h,d.atomName.set(i,[c]));let m=n.first(p.atomName.get(o));m||(m=++h,p.atomName.set(o,[m])),d.bondIncl.set(t,n.append(d.bondIncl.get(t),m)),p.bondIncl.set(e,n.append(p.bondIncl.get(e),c)),l.rewriteMolecule(),this.setState(a)}}as.UNDO_SIZE=20;class ls extends Zn{constructor(t,e=null){super(e),this.mol=t,this.sketcher=new as,this.proxyClip=null,this.proxyMenu=null,this.callbackSave=null,this.title="Edit Compound",this.minPortionWidth=20,this.maxPortionWidth=95}onSave(t){this.callbackSave=t}getMolecule(){return this.sketcher.getMolecule()}getSketcher(){return this.sketcher}defineClipboard(t){this.proxyClip=t;let e=new _i;e.copyEvent=(t,e)=>(this.sketcher.performCopySelection(t),!0),e.pasteEvent=t=>(this.sketcher.pasteText(t.getString()),!0),t.pushHandler(e),this.sketcher.defineClipboard(t)}defineContext(t){this.proxyMenu=t,this.sketcher.defineContext(this.proxyMenu)}close(){this.proxyClip&&this.proxyClip.popHandler(),super.close()}populate(){let t=this.buttonsDOM(),e=this.bodyDOM();this.btnClear=k('<button class="wmk-button wmk-button-default">Clear</button>').appendTo(t).css({"margin-left":"0.5em"}),this.btnClear.onClick((()=>this.sketcher.clearMolecule())),this.btnCopy=k('<button class="wmk-button wmk-button-default">Copy</button>').appendTo(t).css({"margin-left":"0.5em"}),this.btnCopy.onClick((()=>this.actionCopy())),t.append(this.domClose),this.domClose.css({"margin-left":"0.5em"}),this.btnSave=k('<button class="wmk-button wmk-button-primary">Save</button>').appendTo(t).css({"margin-left":"0.5em"}),this.btnSave.onClick((()=>{this.callbackSave&&this.callbackSave(this)}));let n=k("<div/>").appendTo(e).css({width:"800px",height:"650px"});this.sketcher.setSize(800,650),this.sketcher.defineMolecule(this.mol),this.sketcher.setup((()=>this.sketcher.render(n)))}actionCopy(){this.sketcher.performCopySelection(!1)}actionCut(){this.sketcher.performCopySelection(!0)}actionPaste(){this.sketcher.performPaste()}actionUndo(){this.sketcher.performUndo()}actionRedo(){this.sketcher.performRedo()}}class ds{constructor(t,e,n,i,s){this.width=t,this.minVal=e,this.maxVal=n,this.textWidth=i,this.inverse=s,this.notches=[]}calculate(){if(this.minVal==this.maxVal)return void this.notches.push({label:this.minVal.toString(),value:this.minVal,pos:.5*this.width});const t=this.width,e=this.minVal,n=this.maxVal,i=1/(n-e);let s=n=>t*(n-e)*i,o=null,r=null;const a=.99999,l=1.00001;t:for(let i=1e-10;i<=1e11;i*=10)for(let d of[.2,.5,1]){let p=i*d,h=1/p,c=Math.floor(e*p*a)*h,m=Math.round(e*p)*h,u=Math.ceil(e*p*l)*h,f=Math.floor(n*p*a)*h,g=Math.round(n*p)*h,k=Math.ceil(n*p*l)*h,y=s(c),w=s(m),x=s(u),C=s(f),v=s(g),b=s(k);if(($(y,0)||y>=0)&&y<=.1*t)o=c;else if(($(w,0)||w>=0)&&w<=.1*t)o=m;else{if(!(($(x,0)||x>=0)&&x<=.1*t))continue;o=u}if(b>=.9*t&&($(b,t)||b<=t))r=k;else if(v>=.9*t&&($(v,t)||v<=t))r=g;else{if(!(C>=.9*t&&($(C,t)||C<=t)))continue;r=f}break t}if(null==o||null==r)return;let d=this.inverse(o),p=this.inverse(r);this.notches.push({label:this.formatNumber(d),value:d,pos:s(o)}),this.notches.push({label:this.formatNumber(p),value:p,pos:s(r)})}formatNumber(t){let e=t.toPrecision(4);return e=e.replace(/^(-?\d+)\.0+$/,"$1"),e=e.replace(/^(-?\d+\.0*[1-9]+)0+$/,"$1"),e=e.replace(/^(-?\d+)\.0+(e[\+\-]\d+)$/,"$1$2"),e=e.replace(/^(-?\d+\.0*[1-9]+)0+(e[\+\-]\d+)$/,"$1$2"),e}}class ps extends Jn{constructor(){super(),this.padding=4,this.borderCol=13684944,this.borderRadius=8,this.backgroundCol1=16777215,this.backgroundCol2=15790320,this.policy=nn.defaultColourOnWhite()}clearBackground(){this.backgroundCol1=null,this.backgroundCol2=null}setBackground(t){this.backgroundCol1=t,this.backgroundCol2=null}setBackgroundGradient(t,e){this.backgroundCol1=t,this.backgroundCol2=e}render(t){super.render(t);let e=this.contentDOM;null!=this.borderCol&&e.setCSS("border","1px solid "+R(this.borderCol)),this.borderRadius>0&&e.setCSS("border-radius",this.borderRadius+"px");let n=this.backgroundCol1,i=this.backgroundCol2;if(null!=n&&null!=i){let t=R(n)+","+R(i);e.setCSS("background-image","linear-gradient(to bottom right, "+t+")")}else null!=n&&e.setCSS("background-color",R(n));e.css({padding:this.padding+"px",margin:"0"})}}class hs extends ps{constructor(t,e){super(),this.datastr=t,this.ds=null,this.failmsg="",this.tight=!1,e||(e={}),"base64"==e.encoding&&(t=At(atob(t.trim())));let n=null;if(e.name,"datasheet"==e.format||"chemical/x-datasheet"==e.format)n=On.readXML(t);else if("sdfile"==e.format||"chemical/x-mdl-sdfile"==e.format)try{n=new re(t).parse()}catch(t){this.failmsg=t}else{try{n=On.readXML(t)}catch(t){}if(null==n)try{n=new re(t).parse()}catch(t){}}if(null!=n){if(e.padding&&(this.padding=e.padding),"transparent"==e.background)this.clearBackground();else if(e.background){let t=e.background,n=t.indexOf(",");n<0?this.setBackground(E(t)):this.setBackgroundGradient(E(t.substring(0,n)),E(t.substring(n+1)))}"transparent"==e.border?this.borderCol=cn.NOCOLOUR:e.border&&(this.borderCol=E(e.border)),null!=e.radius&&(this.borderRadius=parseInt(e.radius)),"wob"==e.scheme?this.policy=nn.defaultWhiteOnBlack():"cob"==e.scheme?this.policy=nn.defaultColourOnBlack():"bow"==e.scheme?this.policy=nn.defaultBlackOnWhite():"cow"==e.scheme&&(this.policy=nn.defaultColourOnWhite()),e.scale&&(this.policy.data.pointScale=e.scale),1!=e.tight&&"true"!=e.tight||(this.tight=!0),this.ds=n}}render(t){this.tagType="span",super.render(t);let e=this.contentDOM,n=this.ds;if(this.policy,e.css({display:"inline-block","line-height":"0"}),this.tight||e.setCSS("margin-bottom","1.5em"),null!=n){let t=new ve(n).enumerate(),i=this.determineColumns(t),s=k("<table/>").appendTo(e);s.css({"font-family":'"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif'}),s.css({"border-collapse":"collapse","line-height":"1",margin:"2px",border:"0"});let o=k("<tr/>").appendTo(s).css({"line-height":"1"});for(let t=0;t<i.length;t++){let e=k("<th/>").appendTo(o);e.css({"white-space":"nowrap","font-weight":"600","text-decoration":"underline","text-align":"center"}),e.css({padding:"0.2em 0.5em 0.2em 0.5em",color:"black",border:"0"}),e.setText(i[t].name)}for(let e=0;e<n.numRows;){let r=1;for(let n of t)r=Math.max(r,n.rowBlockCount(e));o=k("<tr/>").appendTo(s).css({"line-height":"1"});for(let t=0;t<i.length;t++){let s=k("<td/>").appendTo(o);s.css({border:"1px solid #D0D0D0",padding:"0.2em","vertical-align":"middle"});let r=i[t];null==r.aspect?n.isNull(e,r.idx)?s.setText(" "):"molecule"==n.colType(r.idx)?this.renderMolecule(s,e,r.idx):this.renderPrimitive(s,e,r.idx):"text"==r.type?this.renderTextAspect(s,e,r.aspect,r.idx):"graphic"==r.type&&this.renderGraphicAspect(s,e,r.aspect,r.idx)}e+=r}}else{e.css({color:"red"}),e.setText("Unable to parse datasheet: "+this.failmsg);let t=k("<pre/>").appendTo(e);t.css({"line-height":"1.1"}),t.setText(this.datastr),console.log("Unparseable datasheet source string:\n["+this.datastr+"]")}}determineColumns(t){let e=this.ds,i=[],s=n.booleanArray(!1,e.numCols),o=[];for(let t=0;t<e.numCols;t++)o.push(e.colName(t));for(let n of t){if(e.numRows>0)for(let t=0,e=n.numTextRenderings(0);t<e;t++){let e=n.produceTextRendering(0,t).name;i.push({name:e,aspect:n,type:"text",idx:t})}if(e.numRows>0)for(let t=0,e=n.numGraphicRenderings(0);t<e;t++){let e=n.produceGraphicRendering(0,t,this.policy).name;i.push({name:e,aspect:n,type:"graphic",idx:t})}let t=n.areColumnsReserved(o);for(let e=0;e<o.length;e++)s[e]=s[e]||t[e]}for(let t=0;t<e.numCols;t++)s[t]||"extend"==e.colType(t)||i.push({name:e.colName(t),aspect:null,type:null,idx:t});return i}renderPrimitive(t,e,n){let i="",s=this.ds.colType(n),o="center";"string"==s?(i=this.ds.getString(e,n),o="left"):"integer"==s?i=this.ds.getInteger(e,n).toString():"real"==s?i=this.ds.getReal(e,n).toString():"boolean"==s&&(i=this.ds.getBoolean(e,n)?"true":"false"),t.setText(i),t.css({"text-align":o})}renderMolecule(t,e,n){t.css({"text-align":"center"});let i=new sn,s=new dn(0,0,this.policy.data.pointScale),o=new rn(this.ds.getMolecule(e,n),s,this.policy,i);o.arrange();let r=new cn;new mn(o,r).draw(),r.normalise(),k(r.createSVG()).appendTo(t)}renderTextAspect(t,e,n,i){let s=n.produceTextRendering(e,i);if(s.text)if(s.type==we.TEXT_PLAIN)t.setText(s.text);else if(s.type==we.TEXT_LINK){let e=k('<a target="_blank"/>').appendTo(t);e.setAttr("href",s.text),e.setText(s.text)}else s.type==we.TEXT_HTML&&t.setHTML(s.text);else t.setText(" ")}renderGraphicAspect(t,e,n,i){let s=n.produceGraphicRendering(e,i,this.policy).metavec;null!=s?(t.css({"text-align":"center"}),s.normalise(),k(s.createSVG()).appendTo(t)):t.setText(" ")}}class cs extends ps{constructor(t,e){super(),this.molstr=t,this.mol=null,this.name="",this.failmsg="",this.maxWidth=0,this.maxHeight=0,this.boxSize=null,this.tight=!1,e||(e={});let n=null,i=e.name;if("sketchel"==e.format||"chemical/x-sketchel"==e.format)n=ge.fromString(t);else if("molfile"==e.format||"chemical/x-mdl-molfile"==e.format)try{let e=new oe(t);n=e.parse(),null!=n&&null==i&&(i=e.molName)}catch(t){this.failmsg=t}else if(n=ge.fromString(t),null==n)try{let e=new oe(t);n=e.parse(),null!=n&&null==i&&(i=e.molName)}catch(t){}if(null!=n){if(e.invert&&(n=Zt.mirrorImage(n)),e.rotate&&Zt.rotateMolecule(n,e.rotate*tt),e.padding&&(this.padding=e.padding),"transparent"==e.background)this.clearBackground();else if(e.background){let t=e.background,n=t.indexOf(",");n<0?this.setBackground(E(t)):this.setBackgroundGradient(E(t.substring(0,n)),E(t.substring(n+1)))}if("transparent"==e.border?this.borderCol=cn.NOCOLOUR:e.border&&(this.borderCol=E(e.border)),null!=e.radius&&(this.borderRadius=parseInt(e.radius)),e.width&&(this.maxWidth=e.width),e.height&&(this.maxHeight=e.height),e.box){let t=e.box,n=t.indexOf(",");this.boxSize=new c(parseInt(t.substring(0,n)),parseInt(t.substring(n+1)))}"wob"==e.scheme?this.policy=nn.defaultWhiteOnBlack():"cob"==e.scheme?this.policy=nn.defaultColourOnBlack():"bow"==e.scheme?this.policy=nn.defaultBlackOnWhite():"cow"==e.scheme&&(this.policy=nn.defaultColourOnWhite()),e.scale&&(this.policy.data.pointScale=e.scale),1!=e.tight&&"true"!=e.tight||(this.tight=!0),this.mol=n,this.name=i}}render(t){this.tagType="span",super.render(t);let e=this.contentDOM,n=this.mol,i=this.policy;if(e.css({display:"inline-block","line-height":"0"}),this.tight||e.setCSS("margin-bottom","1.5em"),null!=n&&n.numAtoms>0){e.setCSS("text-align","center");let t=new sn,s=new dn(0,0,i.data.pointScale),o=new rn(n,s,i,t);if(o.arrange(),this.boxSize)o.squeezeInto(0,0,this.boxSize.w,this.boxSize.h);else if(this.maxWidth>0||this.maxHeight>0){let t=o.determineBoundary(),e=t[2]-t[0],n=t[3]-t[1],i=0==this.maxWidth?e:Math.min(e,this.maxWidth),s=0==this.maxHeight?n:Math.min(n,this.maxHeight);i==e&&s==n||o.squeezeInto(0,0,i,s)}let r=new cn;if(new mn(o,r).draw(),null==this.boxSize?r.normalise():r.setSize(this.boxSize.w,this.boxSize.h),k(r.createSVG()).appendTo(e),this.name){let t=k("<p/>").appendTo(e);t.css({padding:"0.2em 0 0 0",margin:"0",width:"100%",color:"#606060","line-height":"1"}),t.css({"font-family":'"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif'}),t.setText(this.name)}}else{e.css({color:"red"}),e.setText("Unable to parse molecule: "+this.failmsg);let t=k("<pre/>").appendTo(e);t.css({"line-height":"1.1"}),t.setText(this.molstr),console.log("Unparseable molecule source string:\n["+this.molstr+"]")}}}!function(t){t.HEADER="header",t.SCHEME="scheme",t.QUANTITY="quantity",t.METRICS="metrics"}(os||(os={}));class ms extends ps{constructor(t,e){super(),this.datastr=t,this.row=0,this.entry=null,this.failmsg="",this.tight=!1,this.facet="scheme",this.limitTotalW=800,this.includeStoich=!0,this.includeAnnot=!1,e||(e={}),"base64"==e.encoding&&(t=At(atob(t.trim())));let n=null;if("datasheet"==e.format||"chemical/x-datasheet"==e.format){let e=On.readXML(t);if(null==e)return void(this.failmsg="Unable to parse raw XML datasheet.");yn.isExperiment(e)&&(n=new yn(e))}else{let e=On.readXML(t);if(null==e)return void(this.failmsg="Unable to parse raw XML datasheet.");yn.isExperiment(e)&&(n=new yn(e))}if(null!=n)if(0!=n.ds.numRows)if(e.row&&(this.row=e.row),this.row<0||this.row>=n.ds.numRows)this.failmsg="Requested row "+this.row+" out of bounds.";else{if(this.entry=n.getEntry(this.row),e.facet&&(this.facet=e.facet),e.padding&&(this.padding=e.padding),"transparent"==e.background)this.clearBackground();else if(e.background){let t=e.background,n=t.indexOf(",");n<0?this.setBackground(E(t)):this.setBackgroundGradient(E(t.substring(0,n)),E(t.substring(n+1)))}"transparent"==e.border?this.borderCol=cn.NOCOLOUR:e.border&&(this.borderCol=E(e.border)),null!=e.radius&&(this.borderRadius=parseInt(e.radius)),"wob"==e.scheme?this.policy=nn.defaultWhiteOnBlack():"cob"==e.scheme?this.policy=nn.defaultColourOnBlack():"bow"==e.scheme?this.policy=nn.defaultBlackOnWhite():"cow"==e.scheme&&(this.policy=nn.defaultColourOnWhite()),e.scale&&(this.policy.data.pointScale=e.scale),1!=e.tight&&"true"!=e.tight||(this.tight=!0),e.maximumwidth>0&&(this.limitTotalW=e.maximumwidth),0!=e.stoichiometry&&"false"!=e.stoichiometry||(this.includeStoich=!0),1!=e.annotations&&"true"!=e.annotations||(this.includeAnnot=!0)}else this.failmsg="Experiment datasheet has no rows.";else this.failmsg="Unable to instantiate Experiment aspect."}render(t){this.tagType="span",super.render(t);let e=this.contentDOM;e.css({display:"inline-block","line-height":"0"}),this.tight||e.setCSS("margin-bottom","1.5em"),null!=this.entry?this.facet==os.HEADER?this.renderHeader(e):this.facet==os.SCHEME?this.renderScheme(e):this.facet==os.QUANTITY?this.renderQuantity(e):this.facet==os.METRICS&&this.renderMetrics(e):(e.css({color:"red"}),e.setText("Failure to acquire data: "+this.failmsg),k("<pre/>").appendTo(e).css({"line-height":"1.1"}).setText(this.datastr),console.log("Unparseable datasheet source string:\n["+this.datastr+"]"))}renderHeader(t){let e=k("<table/>").appendTo(t);e.css({"font-family":'"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif'}),e.css({"border-collapse":"collapse","line-height":"1",margin:"2px",border:"0"});let n=["Title","Created","Modified","DOI"];for(let t=0;t<4;t++){if(3==t&&!this.entry.doi)continue;let i=k("<tr/>").appendTo(e).css({"line-height":"1"}),s=k("<th/>").appendTo(i);s.css({"white-space":"nowrap","font-weight":"600",color:"black","text-align":"left","vertical-align":"middle"}),s.css({padding:"0.2em 0.5em 0.2em 0.5em",border:"1px solid #D0D0D0"}),s.setText(n[t]);let o=k("<td/>").appendTo(i);if(o.css({border:"1px solid #D0D0D0",padding:"0.2em","vertical-align":"middle"}),0==t)this.entry.title||o.setCSS("font-style","italic"),o.setText(this.entry.title?this.entry.title:"(none)");else if(1==t||2==t){let e=1==t?this.entry.createDate:this.entry.modifyDate;null==e&&o.setCSS("font-style","italic"),o.setText(null==e?"(none)":e.toLocaleString())}else if(3==t){let t=this.doiToLink(this.entry.doi);if(null!=t&&(t.startsWith("http://")||t.startsWith("https://"))){let e=k('<a target="_blank"/>').appendTo(o);e.setAttr("href",t),e.setText(this.entry.doi)}else o.setText(this.entry.doi)}}}renderScheme(t){let e=new dn(0,0,this.policy.data.pointScale),n=new ln(this.entry,e,this.policy);n.limitTotalW=this.limitTotalW,n.includeStoich=this.includeStoich,n.includeAnnot=this.includeAnnot,n.arrange();let i=new cn;new un(n,i).draw(),i.normalise(),k(i.createSVG()).appendTo(t)}renderQuantity(t){let e=new Ze(this.entry);e.calculate();let n=k("<table/>").appendTo(t);n.css({"font-family":'"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif'}),n.css({"border-collapse":"collapse","line-height":"1",margin:"2px",border:"0"});let i=new sn,s=new dn(0,0,this.policy.data.pointScale);for(let t=0;t<e.numQuantities;t++){let o=e.getQuantity(t),r=k("<tr/>").appendTo(n).css({"line-height":"1"}),a=k("<td/>").appendTo(r);if(a.css({border:"1px solid #D0D0D0",padding:"0.2em","text-align":"center","vertical-align":"middle"}),Qt.notBlank(o.comp.mol)){let t=new rn(o.comp.mol,s,this.policy,i);t.arrange();let e=new cn;new mn(t,e).draw(),e.normalise(),k(e.createSVG()).appendTo(a)}a=k("<td/>").appendTo(r),a.css({border:"1px solid #D0D0D0",padding:"0.2em","text-align":"left","vertical-align":"top"}),this.renderComponentText(a,o)}}renderComponentText(t,e){let n=[],i=[];if(e.comp.name&&(n.push("Name"),i.push("<i>"+wt(e.comp.name)+"</i>")),Qt.notBlank(e.comp.mol)){let t=Qt.molecularWeight(e.comp.mol);n.push("Weight"),i.push(t.toFixed(4));let s=Qt.molecularFormula(e.comp.mol,["<sub>","</sub>","<sup>","</sup>"]);n.push("Formula"),i.push(s)}if(e.valueEquiv>0){let t=e.valueEquiv.toString(),s=e.statEquiv;2==s?t="<i>("+t+")</i>":3==s&&(t+=" (conflicting)"),n.push("Stoichiometry"),i.push(t)}if(e.valueMass>0){let t=Ze.formatMass(e.valueMass),s=e.statMass;2==s?t="<i>("+t+")</i>":3==s&&(t+=" (conflicting)"),n.push("Mass"),i.push(t)}if(e.valueVolume>0){let t=Ze.formatVolume(e.valueVolume),s=e.statVolume;2==s?t="<i>("+t+")</i>":3==s&&(t+=" (conflicting)"),n.push("Volume"),i.push(t)}if(e.valueMoles>0){let t=Ze.formatMoles(e.valueMoles),s=e.statMoles;2==s?t="<i>("+t+")</i>":3==s&&(t+=" (conflicting)"),n.push("Moles"),i.push(t)}if(e.valueDensity>0){let t=Ze.formatDensity(e.valueDensity),s=e.statDensity;2==s?t="<i>("+t+")</i>":3==s&&(t+=" (conflicting)"),n.push("Density"),i.push(t)}if(e.valueConc>0){let t=Ze.formatConc(e.valueConc),s=e.statConc;2==s?t="<i>("+t+")</i>":3==s&&(t+=" (conflicting)"),n.push("Concentration"),i.push(t)}if(e.valueYield>0&&!e.comp.waste){let t=Ze.formatPercent(e.valueYield),s=e.statYield;2==s?t="<i>("+t+")</i>":3==s&&(t+=" (conflicting)"),n.push("Yield"),i.push(t)}for(let e=0;e<n.length;e++){let s=k("<p/>").appendTo(t);s.setCSS("margin","0.1em"),s.append(k("<b>"+n[e]+"</b>")),s.appendText(": "),s.appendHTML(i[e])}}renderMetrics(t){let e=new Ze(this.entry);e.calculate();let n=k("<table/>").appendTo(t);n.css({"font-family":'"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif'}),n.css({"border-collapse":"collapse","line-height":"1",margin:"2px",border:"0"});let i=new sn,s=new dn(0,0,this.policy.data.pointScale);if(e.numGreenMetrics>0)for(let t=0;t<3;t++){let i=k("<tr/>").appendTo(n).css({"line-height":"1"}),s=k("<th/>").appendTo(i);s.css({border:"1px solid #D0D0D0",padding:"0.5em","font-weight":"bold"}),s.css({"text-align":"right","vertical-align":"middle","white-space":"nowrap"}),s.setText(0==t?"All Reactants":1==t?"All Products":"All Waste");let o=k("<td/>").appendTo(i);o.css({border:"1px solid #D0D0D0",padding:"0.5em","white-space":"nowrap"}),o.css({"text-align":"left","vertical-align":"middle"}),0==t?o.setText(this.combineQuant(e.getAllMassReact(),"g")+" = "+this.sumQuant(e.getAllMassReact(),"g",!0)):1==t?o.setText(this.combineQuant(e.getAllMassProd(),"g")+" = "+this.sumQuant(e.getAllMassProd(),"g",!0)):2==t&&(e.getAllMassWaste().length>0?o.setText(this.combineQuant(e.getAllMassWaste(),"g")+" = "+this.sumQuant(e.getAllMassWaste(),"g",!1)):o.setText("none"))}else{let t=k("<tr/>").appendTo(n);k("<td/>").appendTo(t).setText("No metrics to show.")}for(let t=0;t<e.numGreenMetrics;t++){let o=e.getGreenMetrics(t),r=e.getQuantity(o.idx),a=k("<tr/>").appendTo(n).css({"line-height":"1"}),l=k("<td/>").appendTo(a);if(l.css({border:"1px solid #D0D0D0",padding:"0.2em","text-align":"center","vertical-align":"middle"}),Qt.notBlank(r.comp.mol)){let t=new rn(r.comp.mol,s,this.policy,i);t.arrange();let e=new cn;new mn(t,e).draw(),e.normalise(),k(e.createSVG()).appendTo(l)}l=k("<td/>").appendTo(a),l.css({border:"1px solid #D0D0D0",padding:"0.5em","text-align":"left","vertical-align":"top"});let d=this.combineQuant(o.massReact,"g"),p=this.combineQuant(o.massProd,"g"),h=this.sumQuantExt(o.massReact,o.massProd,1,Number.NaN,null),c=this.drawTotals("PMI",d,p,h);c.normalise();let m=k("<p/>").appendTo(l);k(c.createSVG()).appendTo(m);let u=this.combineQuant(o.massWaste,"g"),f=this.combineQuant(o.massProd,"g"),g=this.sumQuantExt(o.massWaste,o.massProd,1,Number.NaN,null);c=this.drawTotals("E-factor",u,f,g),c.normalise(),m=k("<p/>").appendTo(l),k(c.createSVG()).appendTo(m);let y=this.combineQuant(o.molwProd,null),w=this.combineQuant(o.molwReact,null),x=this.sumQuantExt(o.molwProd,o.molwReact,100,100,"%");c=this.drawTotals("Atom-E",y,w,x),c.normalise(),m=k("<p/>").appendTo(l),k(c.createSVG()).appendTo(m)}}combineQuant(t,e){if(0==t.length)return"?";let n="";for(let i=0;i<t.length;i++)i>0&&(n+=" + "),t[i]==Ze.UNSPECIFIED?n+="?":(n+=M(t[i],4),e&&(n+=" "+e));return n}sumQuant(t,e,n){if(0==t.length)return n?"?":"0";let i=0;for(let e=0;e<t.length;e++){if(t[e]==Ze.UNSPECIFIED)return"?";i+=t[e]}let s=M(i,4);return e&&(s+=" "+e),s}sumQuantExt(t,e,n,i,s){if(0==t.length||0==e.length)return"?";let o=0,r=0;for(let e=0;e<t.length;e++){if(t[e]==Ze.UNSPECIFIED)return"?";o+=t[e]}for(let t=0;t<e.length;t++){if(e[t]==Ze.UNSPECIFIED)return"?";r+=e[t]}if(r<=0)return"?";let a=n*o/r;Number.isNaN(i)||(a=Math.min(a,i));let l=M(a,4);return s&&(l+=" "+s),l}drawTotals(t,e,n,i){let s=new cn,o=new dn(0,0,this.policy.data.pointScale),r=" = ",a=.8*this.policy.data.pointScale,l=o.measureText(t,a),d=o.measureText(e,a),p=o.measureText(n,a),h=o.measureText(i,a),c=o.measureText(r,a),m=0;s.drawText(m,0,t,a,0,Xe.Left|Xe.Middle),m+=l[0],s.drawText(m,0,r,a,0,Xe.Left|Xe.Middle),m+=c[0],s.drawText(m,0,i,a,0,Xe.Left|Xe.Middle),m+=h[0],s.drawText(m,0,r,a,0,Xe.Left|Xe.Middle),m+=c[0];let u=Math.max(d[0],p[0]);return s.drawLine(m,0,m+u,0,0,1),s.drawText(m+.5*u,-2,e,a,0,Xe.Centre|Xe.Bottom),s.drawText(m+.5*u,2,n,a,0,Xe.Centre|Xe.Top),s}doiToLink(t){if(t.startsWith("http://")||t.startsWith("https://"))return t;let e=ms.PTN_DOI1.exec(t);return e?"http://dx.doi.org/"+e[1]:(e=ms.PTN_DOI2.exec(t),e?"http://dx.doi.org/"+e[1]:(e=ms.PTN_ISBN.exec(t),e?"ISBN: "+e[1]:null))}}ms.PTN_DOI1=/^doi:(\d+\.\d+\/.*)$/,ms.PTN_DOI2=/^(\d+\.\d+\/.*)$/,ms.PTN_ISBN=/^(\d+-\d+-\d+-\d+-\d+)$/;class us{constructor(t){this.popupBackground="white",this.obscureOpacity=.2,this.zindex=null,this.callbackClose=null,this.callbackPopulate=null,this.parent=y(t),Xn("popup","\n\t*.wmk-popup\n\t{\n\t\tfont-family: 'Open Sans', sans-serif;\n\t}\n")}onClose(t){this.callbackClose=t}open(){Kn();let t=k(document.body),e=this.domObscureBackground=k("<div/>").appendTo(t);e.css({position:"fixed"}),e.css({left:"0",right:"0",top:"0",bottom:"0"}),e.css({"background-color":"black",opacity:this.obscureOpacity});let n=this.domObscureForeground=k("<div/>").appendTo(t);n.css({position:"fixed"}),n.css({left:"0",right:"0",top:"0",bottom:"0"}),n.onClick((()=>this.close())),this.zindex>0&&(e.setCSS("z-index",this.zindex),n.setCSS("z-index",this.zindex+1));let i=this.domPanelBoundary=k('<div class="wmk-popup"/>').appendTo(n).css({visibility:"hidden"});i.onClick((t=>t.stopPropagation())),i.css({"background-color":this.popupBackground,border:"1px solid black"}),i.css({position:"absolute",overflow:"auto"}),this.domBody=k("<div/>").appendTo(i).css({padding:"5px"}),this.populate(),this.positionAndShow()}close(){Kn(),this.domPanelBoundary.remove(),this.domObscureBackground.remove(),this.domObscureForeground.remove(),this.callbackClose&&this.callbackClose(this),Kn()}bump(){this.positionAndShow()}bodyDOM(){return this.domBody}populate(){this.callbackPopulate?this.callbackPopulate(this):this.bodyDOM().setText("Empty popup.")}positionAndShow(){Kn();let t=window.innerWidth,e=window.innerHeight,n=this.parent.el.getBoundingClientRect(),i=n.left,s=n.top,o=n.right,r=n.bottom,a=this.domPanelBoundary,l=Math.max(i,t-o)-4;a.css({"max-width":l+"px"});let d=Ot(),p=()=>{let n=this.domBody.width(),l=this.domBody.height(),p=0,h=0;r+2+l<e?h=r+2:s-2-l>0?h=s-2-l:e-r>s?(h=r+2,l=e-h-2):(h=2,l=s-h-2),a.height()>l&&(n+=d.w+10),i+n<t?p=i:n<o&&(p=o-n),z(a,p,h,n,l),a.css({visibility:"visible"})};setTimeout((()=>p()))}}class fs{hasContextMenu(){return!1}openContextMenu(t,e,n){}}class gs extends fs{hasContextMenu(){return!0}openContextMenu(t,e,n){let[i,s]=I(e,document.body),o=k("<div/>").appendTo(document.body).css({position:"absolute","user-select":"none"});z(o,i-5,s-5,10,10);let r=k(document.activeElement),a=new us(o);null!=(null==n?void 0:n.overrideObscureOpacity)&&(a.obscureOpacity=null==n?void 0:n.overrideObscureOpacity),a.callbackPopulate=()=>{a.bodyDOM().css({"user-select":"none","font-size":"16px"});for(let e of t){let t=k("<div/>").appendTo(a.bodyDOM());if(null==e)t.appendHTML("<hr/>");else if(e.subMenu){t.setText(e.label+" "),t.css({cursor:"pointer"});let n=t=>{t.preventDefault(),a.close(),this.openContextMenu(e.subMenu,t)};t.onClick(n),t.onContextMenu(n)}else e.click?(t.setText(e.label),t.onMouseEnter((()=>{t.css({"background-color":"#D0D0D0"})})),t.onMouseLeave((()=>{t.css({"background-color":"transparent"})})),t.css({cursor:"pointer"}),t.onClick((()=>{a.close(),e.click()}))):(t.css({color:"#808080"}),t.setText(e.label))}},a.callbackClose=()=>{o.remove(),r.grabFocus(),(null==n?void 0:n.callbackClose)&&(null==n||n.callbackClose())},a.open()}}class ks{constructor(t=null){this.seed=t,this.m=134217728,this.invMN=1/(this.m-1),this.a=1103515245,this.c=5425153011,this.state=null==t?Math.floor(Math.random()*(this.m-1)):t}next(){return this.state=(this.a*this.state+this.c)%this.m,this.state}int(t){return t<=0?0:this.next()%t}float(){return this.next()*this.invMN}index(t){return n.isBlank(t)?null:this.int(t.length)}peek(t){return n.isBlank(t)?null:t[this.int(t.length)]}pull(t){if(n.isBlank(t))return null;let e=this.int(t.length),i=t[e];return t.splice(e,1),i}}WebMolKit=e})();
//# sourceMappingURL=webmolkit.js.map